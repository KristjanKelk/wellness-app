"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[148],{5148:function(e,a,s){s.r(a),s.d(a,{default:function(){return Gl}});var t=s(6768),i=s(4232);const n={class:"meal-planning-dashboard"},l={class:"dashboard-tabs"},r={class:"tabs-nav"},o=["onClick"],c={class:"tab-content"},d={key:0,class:"tab-panel"},p={key:1,class:"tab-panel"},u={key:2,class:"tab-panel"};function g(e,a,s,g,m,h){const v=(0,t.g2)("recipe-browser"),k=(0,t.g2)("meal-plan-manager"),y=(0,t.g2)("coming-soon-card"),f=(0,t.g2)("recipe-detail-modal");return(0,t.uX)(),(0,t.CE)("div",n,[a[0]||(a[0]=(0,t.Lk)("div",{class:"dashboard-header"},[(0,t.Lk)("h1",null,"Meal Planning Dashboard"),(0,t.Lk)("p",null,"AI-powered nutrition and meal planning")],-1)),(0,t.Lk)("div",l,[(0,t.Lk)("nav",r,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(m.tabs,e=>((0,t.uX)(),(0,t.CE)("button",{key:e.id,onClick:a=>m.activeTab=e.id,class:(0,i.C4)(["tab-button",{active:m.activeTab===e.id}])},[(0,t.Lk)("i",{class:(0,i.C4)(e.icon)},null,2),(0,t.eW)(" "+(0,i.v_)(e.name),1)],10,o))),128))]),(0,t.Lk)("div",c,["recipes"===m.activeTab?((0,t.uX)(),(0,t.CE)("div",d,[(0,t.bF)(v,{recipes:m.recipes,loading:m.recipesLoading,onRecipeSelected:h.selectRecipe,onRefreshRecipes:h.loadRecipes,onRecipeSaved:h.onRecipeSaved,onRecipeRemoved:h.onRecipeRemoved},null,8,["recipes","loading","onRecipeSelected","onRefreshRecipes","onRecipeSaved","onRecipeRemoved"])])):(0,t.Q3)("",!0),"meal-plans"===m.activeTab?((0,t.uX)(),(0,t.CE)("div",p,[(0,t.bF)(k,{loading:m.mealPlansLoading,"nutrition-profile":m.nutritionProfile,onMealPlanGenerated:h.onMealPlanGenerated},null,8,["loading","nutrition-profile","onMealPlanGenerated"])])):(0,t.Q3)("",!0),"analytics"===m.activeTab?((0,t.uX)(),(0,t.CE)("div",u,[(0,t.bF)(y,{title:"Nutrition Analytics",description:"Detailed nutrition analytics coming soon!",icon:"fas fa-chart-line"})])):(0,t.Q3)("",!0)])]),m.showRecipeModal?((0,t.uX)(),(0,t.Wv)(f,{key:0,recipe:m.selectedRecipe,onClose:h.closeRecipeModal,onRecipeSaved:h.onRecipeSaved},null,8,["recipe","onClose","onRecipeSaved"])):(0,t.Q3)("",!0)])}s(4114),s(8111),s(2489);var m=s(5130);const h={class:"recipe-browser"},v={class:"search-section"},k={class:"search-header"},y=["disabled"],f={class:"search-bar"},L={class:"filters"},_=["value"],b={key:0,class:"loading-state"},C={key:1,class:"empty-state"},M={key:0},w={key:1},P={key:2,class:"recipe-grid"},S=["onClick"],R=["src","alt"],E={class:"recipe-badges"},I=["onClick","title"],A=["onClick"],T={class:"recipe-title"},D=["innerHTML"],X={class:"recipe-stats"},$={class:"stat"},x={class:"stat"},F={class:"stat"},N={class:"nutrition-preview"},W={class:"macro"},j={class:"macro-value"},Q={class:"macro"},U={class:"macro-value"},z={class:"macro"},O={class:"macro-value"};function G(e,a,s,n,l,r){return(0,t.uX)(),(0,t.CE)("div",h,[(0,t.Lk)("div",v,[(0,t.Lk)("div",k,[a[9]||(a[9]=(0,t.Lk)("h3",null,"My Recipe Collection",-1)),(0,t.Lk)("button",{onClick:a[0]||(a[0]=a=>e.$emit("refresh-recipes")),class:"refresh-btn",disabled:s.loading},[(0,t.Lk)("i",{class:(0,i.C4)(s.loading?"fas fa-spinner fa-spin":"fas fa-sync-alt")},null,2),a[8]||(a[8]=(0,t.eW)(" Refresh "))],8,y)]),(0,t.Lk)("div",f,[a[10]||(a[10]=(0,t.Lk)("i",{class:"fas fa-search search-icon"},null,-1)),(0,t.bo)((0,t.Lk)("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>l.searchQuery=e),type:"text",placeholder:"Search recipes...",class:"search-input",onInput:a[2]||(a[2]=(...a)=>e.debouncedSearch&&e.debouncedSearch(...a))},null,544),[[m.Jo,l.searchQuery]])]),(0,t.Lk)("div",L,[(0,t.bo)((0,t.Lk)("select",{"onUpdate:modelValue":a[3]||(a[3]=e=>l.selectedCuisine=e),onChange:a[4]||(a[4]=(...e)=>r.applyFilters&&r.applyFilters(...e)),class:"filter-select"},[a[11]||(a[11]=(0,t.Lk)("option",{value:""},"All Cuisines",-1)),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(r.cuisines,e=>((0,t.uX)(),(0,t.CE)("option",{key:e,value:e},(0,i.v_)(r.formatCuisine(e)),9,_))),128))],544),[[m.u1,l.selectedCuisine]]),(0,t.bo)((0,t.Lk)("select",{"onUpdate:modelValue":a[5]||(a[5]=e=>l.selectedMealType=e),onChange:a[6]||(a[6]=(...e)=>r.applyFilters&&r.applyFilters(...e)),class:"filter-select"},a[12]||(a[12]=[(0,t.Fv)('<option value="" data-v-6ad281fd>All Meal Types</option><option value="breakfast" data-v-6ad281fd>Breakfast</option><option value="lunch" data-v-6ad281fd>Lunch</option><option value="dinner" data-v-6ad281fd>Dinner</option><option value="snack" data-v-6ad281fd>Snack</option>',5)]),544),[[m.u1,l.selectedMealType]])])]),s.loading?((0,t.uX)(),(0,t.CE)("div",b,a[13]||(a[13]=[(0,t.Lk)("div",{class:"loading-spinner"},null,-1),(0,t.Lk)("p",null,"Loading delicious recipes...",-1)]))):0===l.filteredRecipes.length?((0,t.uX)(),(0,t.CE)("div",C,[a[15]||(a[15]=(0,t.Lk)("i",{class:"fas fa-utensils"},null,-1)),a[16]||(a[16]=(0,t.Lk)("h3",null,"No recipes found",-1)),0===s.recipes.length?((0,t.uX)(),(0,t.CE)("p",M,a[14]||(a[14]=[(0,t.eW)(" You haven't saved any recipes yet! Save recipes from your meal plans to build your personal collection. "),(0,t.Lk)("br",null,null,-1),(0,t.Lk)("br",null,null,-1),(0,t.Lk)("strong",null,"💡 Tip:",-1),(0,t.eW)(' Go to the "Meal Plans" tab to create meal plans, then save your favorite recipes. ')]))):((0,t.uX)(),(0,t.CE)("p",w,"Try adjusting your search or filters"))])):((0,t.uX)(),(0,t.CE)("div",P,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(l.filteredRecipes,s=>((0,t.uX)(),(0,t.CE)("div",{key:s.id,class:"recipe-card"},[(0,t.Lk)("div",{class:"recipe-image",onClick:a=>e.$emit("recipe-selected",s)},[(0,t.Lk)("img",{src:s.image_url||"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZjBmMGYwIi8+CiAgPHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIxOCIgZmlsbD0iIzk5OTk5OSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkZvb2QgUmVjaXBlPC90ZXh0Pgo8L3N2Zz4K",alt:s.title,onError:a[7]||(a[7]=(...e)=>r.handleImageError&&r.handleImageError(...e))},null,40,R),(0,t.Lk)("div",E,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)((s.dietary_tags||[]).slice(0,2),e=>((0,t.uX)(),(0,t.CE)("span",{key:e,class:"badge"},(0,i.v_)(r.formatTag(e)),1))),128))]),(0,t.Lk)("button",{class:"save-btn",onClick:(0,m.D$)(e=>r.toggleSaveRecipe(s),["stop"]),title:s.is_saved_by_user?"Remove from my recipes":"Save to my recipes"},[(0,t.Lk)("i",{class:(0,i.C4)(s.is_saved_by_user?"fas fa-heart":"far fa-heart")},null,2)],8,I)],8,S),(0,t.Lk)("div",{class:"recipe-content",onClick:a=>e.$emit("recipe-selected",s)},[(0,t.Lk)("h3",T,(0,i.v_)(s.title),1),(0,t.Lk)("p",{class:"recipe-summary",innerHTML:r.truncateSummary(s.summary)},null,8,D),(0,t.Lk)("div",X,[(0,t.Lk)("div",$,[a[17]||(a[17]=(0,t.Lk)("i",{class:"fas fa-clock"},null,-1)),(0,t.Lk)("span",null,(0,i.v_)(s.total_time_minutes||"N/A")+(0,i.v_)(s.total_time_minutes?"min":""),1)]),(0,t.Lk)("div",x,[a[18]||(a[18]=(0,t.Lk)("i",{class:"fas fa-fire"},null,-1)),(0,t.Lk)("span",null,(0,i.v_)(s.calories_per_serving?Math.round(s.calories_per_serving):"N/A")+(0,i.v_)(s.calories_per_serving?" cal":""),1)]),(0,t.Lk)("div",F,[a[19]||(a[19]=(0,t.Lk)("i",{class:"fas fa-users"},null,-1)),(0,t.Lk)("span",null,(0,i.v_)(s.servings||"N/A")+(0,i.v_)(s.servings?" servings":""),1)])]),(0,t.Lk)("div",N,[(0,t.Lk)("div",W,[a[20]||(a[20]=(0,t.Lk)("span",{class:"macro-label"},"Protein",-1)),(0,t.Lk)("span",j,(0,i.v_)(s.protein_per_serving?Math.round(s.protein_per_serving):"N/A")+(0,i.v_)(s.protein_per_serving?"g":""),1)]),(0,t.Lk)("div",Q,[a[21]||(a[21]=(0,t.Lk)("span",{class:"macro-label"},"Carbs",-1)),(0,t.Lk)("span",U,(0,i.v_)(s.carbs_per_serving?Math.round(s.carbs_per_serving):"N/A")+(0,i.v_)(s.carbs_per_serving?"g":""),1)]),(0,t.Lk)("div",z,[a[22]||(a[22]=(0,t.Lk)("span",{class:"macro-label"},"Fat",-1)),(0,t.Lk)("span",O,(0,i.v_)(s.fat_per_serving?Math.round(s.fat_per_serving):"N/A")+(0,i.v_)(s.fat_per_serving?"g":""),1)])])],8,A)]))),128))]))])}s(1701),s(7642),s(8004),s(3853),s(5876),s(2475),s(5024),s(1698);function B(e,a){let s;return function(...t){const i=()=>{clearTimeout(s),e(...t)};clearTimeout(s),s=setTimeout(i,a)}}var Z={name:"RecipeBrowser",props:{recipes:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}},emits:["recipe-selected","refresh-recipes","recipe-saved","recipe-removed"],data(){return{searchQuery:"",selectedCuisine:"",selectedMealType:"",filteredRecipes:[]}},computed:{cuisines(){return[...new Set(this.recipes.map(e=>e.cuisine).filter(Boolean))]}},watch:{recipes:{immediate:!0,handler(e){this.filteredRecipes=this.recipes}}},created(){this.debouncedSearch=B(this.applyFilters,300)},methods:{applyFilters(){let e=this.recipes;if(this.searchQuery){const a=this.searchQuery.toLowerCase();e=e.filter(e=>e.title&&e.title.toLowerCase().includes(a)||e.summary&&e.summary.toLowerCase().includes(a))}this.selectedCuisine&&(e=e.filter(e=>e.cuisine===this.selectedCuisine)),this.selectedMealType&&(e=e.filter(e=>e.meal_type===this.selectedMealType)),this.filteredRecipes=e},formatCuisine(e){return e.charAt(0).toUpperCase()+e.slice(1)},formatTag(e){return e.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase())},truncateSummary(e){if(!e)return"";const a=e.replace(/<[^>]*>/g,"");return a.length>120?a.substring(0,120)+"...":a},handleImageError(e){e.target.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZjBmMGYwIi8+CiAgPHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIxOCIgZmlsbD0iIzk5OTk5OSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkZvb2QgUmVjaXBlPC90ZXh0Pgo8L3N2Zz4K"},async toggleSaveRecipe(e){try{const{mealPlanningApi:a}=await Promise.resolve().then(s.bind(s,5090));let t;if(e.is_saved_by_user){if(!e.id)throw new Error("Cannot remove recipe: No recipe ID found");t=await a.removeRecipeFromMyCollection(e.id),e.is_saved_by_user=!1,this.$emit("recipe-removed",e);const s=t.data?.message||"Recipe removed from your collection!";this.$toast?.success?.(s)||alert(s)}else{t=e.spoonacular_id&&!e.created_by?await a.saveRecipeFromMealPlan(e):e.id?await a.saveRecipeToMyCollection(e.id):await a.saveRecipeFromMealPlan(e),e.is_saved_by_user=!0,this.$emit("recipe-saved",t.data.recipe||e);const s=t.data?.message||"Recipe saved to your collection!";this.$toast?.success?.(s)||alert(s)}}catch(a){console.error("Error toggling recipe save status:",a);let e="An error occurred";404===a.response?.status?e="Recipe not found. It may have been removed.":403===a.response?.status?e="You don't have permission to perform this action.":500===a.response?.status?e="Server error. Please try again later.":a.response?.data?.error?e=a.response.data.error:a.response?.data?.message?e=a.response.data.message:a.message&&(e=a.message),this.$toast?.error?.(e)||alert(`Error: ${e}`)}}}},V=s(1241);const H=(0,V.A)(Z,[["render",G],["__scopeId","data-v-6ad281fd"]]);var q=H;const K={class:"meal-plan-manager"},J={class:"status-content"},Y={class:"status-text"},ee={key:0,class:"generation-steps"},ae={class:"generate-section"},se={class:"form-row"},te={class:"form-group"},ie={class:"form-group"},ne=["min"],le={class:"form-group"},re={key:0,class:"advanced-options"},oe={class:"form-row"},ce={class:"form-group"},de={class:"checkbox-group"},pe=["value"],ue={class:"form-group"},ge={class:"form-actions"},me=["disabled"],he={key:0,class:"fas fa-brain"},ve={key:1,class:"fas fa-spinner fa-spin"},ke={class:"existing-plans-section"},ye={key:0,class:"loading-state"},fe={key:1,class:"empty-state"},Le={key:2,class:"meal-plans-grid"},_e=["onClick"],be={class:"plan-header"},Ce={class:"plan-date"},Me={class:"ai-badge"},we={class:"plan-stats"},Pe={class:"stat"},Se={class:"stat-value"},Re={class:"stat"},Ee={class:"stat-value"},Ie={class:"stat"},Ae={class:"stat-value"},Te={key:0,class:"plan-nutrition"},De={class:"nutrition-grid"},Xe={class:"nutrition-item"},$e={class:"nutrition-value"},xe={class:"nutrition-item"},Fe={class:"nutrition-value"},Ne={class:"nutrition-item"},We={class:"nutrition-value"},je={key:1,class:"quality-scores"},Qe={class:"score-item"},Ue={class:"score-bar"},ze={class:"score-value"},Oe={class:"score-item"},Ge={class:"score-bar"},Be={class:"score-value"},Ze={class:"plan-actions"},Ve=["onClick"],He=["onClick"],qe=["onClick"],Ke=["onClick"];function Je(e,a,s,n,l,r){const o=(0,t.g2)("meal-plan-detail-modal"),c=(0,t.g2)("nutritional-analysis-modal"),d=(0,t.g2)("alternatives-modal");return(0,t.uX)(),(0,t.CE)("div",K,[l.generationStatus?((0,t.uX)(),(0,t.CE)("div",{key:0,class:(0,i.C4)(["generation-status",l.generationStatus.type])},[(0,t.Lk)("div",J,[(0,t.Lk)("i",{class:(0,i.C4)(l.generationStatus.icon)},null,2),(0,t.Lk)("div",Y,[(0,t.Lk)("h4",null,(0,i.v_)(l.generationStatus.title),1),(0,t.Lk)("p",null,(0,i.v_)(l.generationStatus.message),1),l.generationStatus.steps?((0,t.uX)(),(0,t.CE)("div",ee,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(l.generationStatus.steps,(e,a)=>((0,t.uX)(),(0,t.CE)("div",{key:a,class:(0,i.C4)(["step",{completed:e.completed,active:e.active}])},[(0,t.Lk)("i",{class:(0,i.C4)(e.completed?"fas fa-check":e.active?"fas fa-spinner fa-spin":"fas fa-clock")},null,2),(0,t.Lk)("span",null,(0,i.v_)(e.name),1)],2))),128))])):(0,t.Q3)("",!0)])])],2)):(0,t.Q3)("",!0),(0,t.Lk)("div",ae,[a[18]||(a[18]=(0,t.Lk)("div",{class:"section-header"},[(0,t.Lk)("h2",null,"AI-Powered Meal Planning"),(0,t.Lk)("p",null,"Let our advanced AI create a personalized meal plan based on your health profile, dietary preferences, and nutrition goals")],-1)),(0,t.Lk)("form",{onSubmit:a[6]||(a[6]=(0,m.D$)((...e)=>r.generateMealPlan&&r.generateMealPlan(...e),["prevent"])),class:"generate-form"},[(0,t.Lk)("div",se,[(0,t.Lk)("div",te,[a[11]||(a[11]=(0,t.Lk)("label",{for:"plan_type"},"Plan Type",-1)),(0,t.bo)((0,t.Lk)("select",{id:"plan_type","onUpdate:modelValue":a[0]||(a[0]=e=>l.generateForm.plan_type=e),class:"form-select"},a[10]||(a[10]=[(0,t.Lk)("option",{value:"daily"},"Daily Plan (1 day)",-1),(0,t.Lk)("option",{value:"weekly"},"Weekly Plan (7 days)",-1)]),512),[[m.u1,l.generateForm.plan_type]])]),(0,t.Lk)("div",ie,[a[12]||(a[12]=(0,t.Lk)("label",{for:"start_date"},"Start Date",-1)),(0,t.bo)((0,t.Lk)("input",{id:"start_date","onUpdate:modelValue":a[1]||(a[1]=e=>l.generateForm.start_date=e),type:"date",class:"form-input",min:r.today},null,8,ne),[[m.Jo,l.generateForm.start_date]])]),(0,t.Lk)("div",le,[a[13]||(a[13]=(0,t.Lk)("label",{for:"target_calories"},"Target Calories (optional)",-1)),(0,t.bo)((0,t.Lk)("input",{id:"target_calories","onUpdate:modelValue":a[2]||(a[2]=e=>l.generateForm.target_calories=e),type:"number",min:"1000",max:"5000",placeholder:"Uses your health profile default",class:"form-input"},null,512),[[m.Jo,l.generateForm.target_calories,void 0,{number:!0}]]),a[14]||(a[14]=(0,t.Lk)("small",{class:"form-hint"},"Leave empty to use your calculated target from health profile",-1))])]),l.showAdvancedOptions?((0,t.uX)(),(0,t.CE)("div",re,[a[17]||(a[17]=(0,t.Lk)("h4",null,"Advanced Options",-1)),(0,t.Lk)("div",oe,[(0,t.Lk)("div",ce,[a[15]||(a[15]=(0,t.Lk)("label",null,"Preferred Cuisines (override profile)",-1)),(0,t.Lk)("div",de,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(l.availableCuisines,e=>((0,t.uX)(),(0,t.CE)("label",{key:e,class:"checkbox-label"},[(0,t.bo)((0,t.Lk)("input",{type:"checkbox",value:e,"onUpdate:modelValue":a[3]||(a[3]=e=>l.generateForm.cuisine_preferences=e)},null,8,pe),[[m.lH,l.generateForm.cuisine_preferences]]),(0,t.Lk)("span",null,(0,i.v_)(e),1)]))),128))])]),(0,t.Lk)("div",ue,[a[16]||(a[16]=(0,t.Lk)("label",{for:"max_cook_time"},"Max Cooking Time (minutes)",-1)),(0,t.bo)((0,t.Lk)("input",{id:"max_cook_time","onUpdate:modelValue":a[4]||(a[4]=e=>l.generateForm.max_cook_time=e),type:"number",min:"10",max:"120",placeholder:"No limit",class:"form-input"},null,512),[[m.Jo,l.generateForm.max_cook_time,void 0,{number:!0}]])])])])):(0,t.Q3)("",!0),(0,t.Lk)("div",ge,[(0,t.Lk)("button",{type:"button",onClick:a[5]||(a[5]=e=>l.showAdvancedOptions=!l.showAdvancedOptions),class:"btn btn-outline"},[(0,t.Lk)("i",{class:(0,i.C4)(l.showAdvancedOptions?"fas fa-chevron-up":"fas fa-chevron-down")},null,2),(0,t.eW)(" "+(0,i.v_)(l.showAdvancedOptions?"Hide":"Show")+" Advanced Options ",1)]),(0,t.Lk)("button",{type:"submit",class:"btn btn-primary generate-btn",disabled:l.generating},[l.generating?((0,t.uX)(),(0,t.CE)("i",ve)):((0,t.uX)(),(0,t.CE)("i",he)),(0,t.eW)(" "+(0,i.v_)(l.generating?"AI is Creating Your Plan...":"Generate AI Meal Plan"),1)],8,me)])],32)]),(0,t.Lk)("div",ke,[a[35]||(a[35]=(0,t.Lk)("div",{class:"section-header"},[(0,t.Lk)("h2",null,"Your AI-Generated Meal Plans"),(0,t.Lk)("p",null,"Previously generated personalized meal plans")],-1)),s.loading?((0,t.uX)(),(0,t.CE)("div",ye,a[19]||(a[19]=[(0,t.Lk)("div",{class:"loading-spinner"},null,-1),(0,t.Lk)("p",null,"Loading your meal plans...",-1)]))):0===l.mealPlans.length?((0,t.uX)(),(0,t.CE)("div",fe,a[20]||(a[20]=[(0,t.Lk)("i",{class:"fas fa-brain"},null,-1),(0,t.Lk)("h3",null,"No AI meal plans yet",-1),(0,t.Lk)("p",null,"Generate your first AI-powered, personalized meal plan above!",-1)]))):((0,t.uX)(),(0,t.CE)("div",Le,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(l.mealPlans,e=>((0,t.uX)(),(0,t.CE)("div",{key:e.id,class:"meal-plan-card",onClick:a=>r.viewMealPlan(e)},[(0,t.Lk)("div",be,[(0,t.Lk)("h3",null,(0,i.v_)(e?r.formatPlanType(e.plan_type):"Loading...")+" Plan",1),(0,t.Lk)("span",Ce,(0,i.v_)(e?r.formatDateRange(e.start_date,e.end_date):"Date unknown"),1),(0,t.Lk)("div",Me,[a[21]||(a[21]=(0,t.Lk)("i",{class:"fas fa-brain"},null,-1)),(0,t.Lk)("span",null,"AI v"+(0,i.v_)(e.generation_version||"1.0"),1)])]),(0,t.Lk)("div",we,[(0,t.Lk)("div",Pe,[(0,t.Lk)("span",Se,(0,i.v_)(e?.avg_daily_calories?Math.round(e.avg_daily_calories):"N/A"),1),a[22]||(a[22]=(0,t.Lk)("span",{class:"stat-label"},"Avg Calories",-1))]),(0,t.Lk)("div",Re,[(0,t.Lk)("span",Ee,(0,i.v_)(r.getMealCount(e)),1),a[23]||(a[23]=(0,t.Lk)("span",{class:"stat-label"},"Meals",-1))]),(0,t.Lk)("div",Ie,[(0,t.Lk)("span",Ae,(0,i.v_)(e.nutritional_balance_score?.toFixed(1)||"N/A"),1),a[24]||(a[24]=(0,t.Lk)("span",{class:"stat-label"},"Balance Score",-1))])]),e.daily_averages?((0,t.uX)(),(0,t.CE)("div",Te,[a[28]||(a[28]=(0,t.Lk)("h4",null,"Daily Nutrition Averages",-1)),(0,t.Lk)("div",De,[(0,t.Lk)("div",Xe,[a[25]||(a[25]=(0,t.Lk)("span",{class:"nutrition-label"},"Protein:",-1)),(0,t.Lk)("span",$e,(0,i.v_)(Math.round(e.daily_averages.protein||0))+"g",1)]),(0,t.Lk)("div",xe,[a[26]||(a[26]=(0,t.Lk)("span",{class:"nutrition-label"},"Carbs:",-1)),(0,t.Lk)("span",Fe,(0,i.v_)(Math.round(e.daily_averages.carbs||0))+"g",1)]),(0,t.Lk)("div",Ne,[a[27]||(a[27]=(0,t.Lk)("span",{class:"nutrition-label"},"Fat:",-1)),(0,t.Lk)("span",We,(0,i.v_)(Math.round(e.daily_averages.fat||0))+"g",1)])])])):(0,t.Q3)("",!0),e.variety_score||e.preference_match_score?((0,t.uX)(),(0,t.CE)("div",je,[(0,t.Lk)("div",Qe,[a[29]||(a[29]=(0,t.Lk)("span",{class:"score-label"},"Variety:",-1)),(0,t.Lk)("div",Ue,[(0,t.Lk)("div",{class:"score-fill",style:(0,i.Tr)({width:10*e.variety_score+"%"})},null,4)]),(0,t.Lk)("span",ze,(0,i.v_)(e.variety_score?.toFixed(1)||"N/A"),1)]),(0,t.Lk)("div",Oe,[a[30]||(a[30]=(0,t.Lk)("span",{class:"score-label"},"Preference:",-1)),(0,t.Lk)("div",Ge,[(0,t.Lk)("div",{class:"score-fill",style:(0,i.Tr)({width:10*e.preference_match_score+"%"})},null,4)]),(0,t.Lk)("span",Be,(0,i.v_)(e.preference_match_score?.toFixed(1)||"N/A"),1)])])):(0,t.Q3)("",!0),(0,t.Lk)("div",Ze,[(0,t.Lk)("button",{onClick:(0,m.D$)(a=>r.viewMealPlan(e),["stop"]),class:"btn btn-outline"},a[31]||(a[31]=[(0,t.Lk)("i",{class:"fas fa-eye"},null,-1),(0,t.eW)(" View Details ")]),8,Ve),(0,t.Lk)("button",{onClick:(0,m.D$)(a=>r.analyzeMealPlan(e),["stop"]),class:"btn btn-info"},a[32]||(a[32]=[(0,t.Lk)("i",{class:"fas fa-chart-line"},null,-1),(0,t.eW)(" AI Analysis ")]),8,He),(0,t.Lk)("button",{onClick:(0,m.D$)(a=>r.regeneratePlan(e),["stop"]),class:"btn btn-secondary"},a[33]||(a[33]=[(0,t.Lk)("i",{class:"fas fa-redo"},null,-1),(0,t.eW)(" Regenerate ")]),8,qe),(0,t.Lk)("button",{onClick:(0,m.D$)(a=>r.deleteMealPlan(e),["stop"]),class:"btn btn-danger"},a[34]||(a[34]=[(0,t.Lk)("i",{class:"fas fa-trash"},null,-1),(0,t.eW)(" Delete ")]),8,Ke)])],8,_e))),128))]))]),l.selectedPlan?((0,t.uX)(),(0,t.Wv)(o,{key:1,"meal-plan":l.selectedPlan,onClose:a[7]||(a[7]=e=>l.selectedPlan=null),onRegenerateMeal:a[8]||(a[8]=e=>r.regenerateMeal(l.selectedPlan.id,e)),onGetAlternatives:a[9]||(a[9]=e=>r.getMealAlternatives(l.selectedPlan.id,e)),onAnalyzePlan:r.analyzeMealPlanFromModal,onDeletePlan:r.deleteMealPlan},null,8,["meal-plan","onAnalyzePlan","onDeletePlan"])):(0,t.Q3)("",!0),l.showAnalysisModal&&l.currentAnalysis?((0,t.uX)(),(0,t.Wv)(c,{key:2,analysis:l.currentAnalysis,"meal-plan":l.selectedPlanForAnalysis,onClose:r.closeAnalysisModal},null,8,["analysis","meal-plan","onClose"])):(0,t.Q3)("",!0),l.showAlternativesModal&&l.alternativesModalData?((0,t.uX)(),(0,t.Wv)(d,{key:3,"plan-id":l.alternativesModalData.planId,day:l.alternativesModalData.day,"meal-type":l.alternativesModalData.mealType,onClose:r.closeAlternativesModal,onAlternativeSelected:r.handleAlternativeSelected},null,8,["plan-id","day","meal-type","onClose","onAlternativeSelected"])):(0,t.Q3)("",!0)])}s(116),s(7588);var Ye=s(5090);const ea={class:"modal-header"},aa={class:"ai-generation-info"},sa={class:"ai-badge"},ta={class:"model-badge"},ia={class:"modal-body"},na={class:"plan-overview"},la={class:"overview-stats"},ra={class:"stat-item"},oa={class:"stat-value"},ca={class:"stat-item"},da={class:"stat-value"},pa={class:"stat-item"},ua={class:"stat-value"},ga={class:"stat-item"},ma={class:"stat-value"},ha={key:0,class:"stat-item"},va={class:"stat-value"},ka={key:1,class:"stat-item"},ya={class:"stat-value"},fa={key:0,class:"nutrition-overview"},La={class:"nutrition-grid"},_a={class:"nutrition-item"},ba={class:"nutrition-value"},Ca={class:"nutrition-item"},Ma={class:"nutrition-value"},wa={class:"nutrition-item"},Pa={class:"nutrition-value"},Sa={class:"nutrition-item"},Ra={class:"nutrition-value"},Ea={key:1,class:"quality-scores"},Ia={class:"scores-grid"},Aa={key:0,class:"score-item"},Ta={class:"score-bar"},Da={class:"score-value"},Xa={key:1,class:"score-item"},$a={class:"score-bar"},xa={class:"score-value"},Fa={key:2,class:"score-item"},Na={class:"score-bar"},Wa={class:"score-value"},ja={key:0,class:"meals-section"},Qa={class:"meals-grid"},Ua={class:"day-header"},za={class:"meals-list"},Oa={class:"meal-header"},Ga={class:"meal-title-section"},Ba={class:"meal-title"},Za={class:"meal-meta"},Va={class:"meal-time"},Ha={key:0,class:"meal-cuisine"},qa={key:0,class:"recipe-details"},Ka={key:0,class:"cooking-info"},Ja={class:"time-info"},Ya={key:0,class:"time-item"},es={key:1,class:"time-item"},as={key:2,class:"time-item"},ss={key:3,class:"time-item"},ts={key:4,class:"time-item"},is={class:"meal-nutrition"},ns={class:"nutrition-details"},ls={class:"nutrition-item"},rs={class:"nutrition-value"},os={class:"nutrition-item"},cs={class:"nutrition-value"},ds={class:"nutrition-item"},ps={class:"nutrition-value"},us={class:"nutrition-item"},gs={class:"nutrition-value"},ms={key:1,class:"ingredients-section"},hs={class:"ingredients-list"},vs={class:"ingredient-quantity"},ks={class:"ingredient-unit"},ys={class:"ingredient-name"},fs={key:2,class:"instructions-section"},Ls={class:"instructions-list"},_s={class:"instruction-number"},bs={class:"instruction-text"},Cs={key:3,class:"target-info"},Ms={class:"targets-grid"},ws={key:0,class:"target-item"},Ps={class:"target-value"},Ss={key:1,class:"target-item"},Rs={class:"target-value"},Es={key:2,class:"target-item"},Is={class:"target-value"},As={key:3,class:"target-item"},Ts={class:"target-value"},Ds={class:"meal-actions"},Xs=["onClick","disabled"],$s={key:0,class:"fas fa-spinner fa-spin"},xs=["onClick"],Fs=["onClick"],Ns=["onClick"],Ws={key:1,class:"no-meals"},js={class:"modal-footer"};function Qs(e,a,s,n,l,r){const o=(0,t.g2)("recipe-detail-modal"),c=(0,t.g2)("shopping-list-modal");return(0,t.uX)(),(0,t.CE)("div",{class:"modal-overlay",onClick:a[6]||(a[6]=a=>e.$emit("close"))},[(0,t.Lk)("div",{class:"modal-content",onClick:a[5]||(a[5]=(0,m.D$)(()=>{},["stop"]))},[(0,t.Lk)("div",ea,[(0,t.Lk)("h2",null,(0,i.v_)(r.formatPlanType(s.mealPlan.plan_type))+" Meal Plan",1),(0,t.Lk)("div",aa,[(0,t.Lk)("span",sa,[a[7]||(a[7]=(0,t.Lk)("i",{class:"fas fa-brain"},null,-1)),(0,t.eW)(" AI v"+(0,i.v_)(s.mealPlan.generation_version||"1.0"),1)]),(0,t.Lk)("span",ta,(0,i.v_)(s.mealPlan.ai_model_used||"AI Model"),1)]),(0,t.Lk)("button",{onClick:a[0]||(a[0]=a=>e.$emit("close")),class:"close-btn"},a[8]||(a[8]=[(0,t.Lk)("i",{class:"fas fa-times"},null,-1)]))]),(0,t.Lk)("div",ia,[(0,t.Lk)("div",na,[(0,t.Lk)("div",la,[(0,t.Lk)("div",ra,[a[9]||(a[9]=(0,t.Lk)("span",{class:"stat-label"},"Date Range:",-1)),(0,t.Lk)("span",oa,(0,i.v_)(r.formatDateRange(s.mealPlan.start_date,s.mealPlan.end_date)),1)]),(0,t.Lk)("div",ca,[a[10]||(a[10]=(0,t.Lk)("span",{class:"stat-label"},"Total Calories:",-1)),(0,t.Lk)("span",da,(0,i.v_)(Math.round(s.mealPlan.total_calories||0)),1)]),(0,t.Lk)("div",pa,[a[11]||(a[11]=(0,t.Lk)("span",{class:"stat-label"},"Avg Daily Calories:",-1)),(0,t.Lk)("span",ua,(0,i.v_)(Math.round(s.mealPlan.avg_daily_calories||0)),1)]),(0,t.Lk)("div",ga,[a[12]||(a[12]=(0,t.Lk)("span",{class:"stat-label"},"Total Meals:",-1)),(0,t.Lk)("span",ma,(0,i.v_)(r.getTotalMeals()),1)]),s.mealPlan.nutritional_balance_score?((0,t.uX)(),(0,t.CE)("div",ha,[a[13]||(a[13]=(0,t.Lk)("span",{class:"stat-label"},"Balance Score:",-1)),(0,t.Lk)("span",va,(0,i.v_)(s.mealPlan.nutritional_balance_score.toFixed(1))+"/10",1)])):(0,t.Q3)("",!0),s.mealPlan.days_count?((0,t.uX)(),(0,t.CE)("div",ka,[a[14]||(a[14]=(0,t.Lk)("span",{class:"stat-label"},"Days:",-1)),(0,t.Lk)("span",ya,(0,i.v_)(s.mealPlan.days_count),1)])):(0,t.Q3)("",!0)]),s.mealPlan.daily_averages?((0,t.uX)(),(0,t.CE)("div",fa,[a[19]||(a[19]=(0,t.Lk)("h4",null,"Daily Nutritional Averages",-1)),(0,t.Lk)("div",La,[(0,t.Lk)("div",_a,[a[15]||(a[15]=(0,t.Lk)("span",{class:"nutrition-label"},"Protein:",-1)),(0,t.Lk)("span",ba,(0,i.v_)(Math.round(s.mealPlan.daily_averages.protein||0))+"g",1)]),(0,t.Lk)("div",Ca,[a[16]||(a[16]=(0,t.Lk)("span",{class:"nutrition-label"},"Carbohydrates:",-1)),(0,t.Lk)("span",Ma,(0,i.v_)(Math.round(s.mealPlan.daily_averages.carbs||0))+"g",1)]),(0,t.Lk)("div",wa,[a[17]||(a[17]=(0,t.Lk)("span",{class:"nutrition-label"},"Fat:",-1)),(0,t.Lk)("span",Pa,(0,i.v_)(Math.round(s.mealPlan.daily_averages.fat||0))+"g",1)]),(0,t.Lk)("div",Sa,[a[18]||(a[18]=(0,t.Lk)("span",{class:"nutrition-label"},"Calories:",-1)),(0,t.Lk)("span",Ra,(0,i.v_)(Math.round(s.mealPlan.daily_averages.calories||0)),1)])])])):(0,t.Q3)("",!0),s.mealPlan.variety_score||s.mealPlan.preference_match_score?((0,t.uX)(),(0,t.CE)("div",Ea,[a[23]||(a[23]=(0,t.Lk)("h4",null,"Plan Quality Metrics",-1)),(0,t.Lk)("div",Ia,[s.mealPlan.nutritional_balance_score?((0,t.uX)(),(0,t.CE)("div",Aa,[a[20]||(a[20]=(0,t.Lk)("span",{class:"score-label"},"Nutritional Balance:",-1)),(0,t.Lk)("div",Ta,[(0,t.Lk)("div",{class:"score-fill",style:(0,i.Tr)({width:10*s.mealPlan.nutritional_balance_score+"%"})},null,4)]),(0,t.Lk)("span",Da,(0,i.v_)(s.mealPlan.nutritional_balance_score.toFixed(1))+"/10",1)])):(0,t.Q3)("",!0),s.mealPlan.variety_score?((0,t.uX)(),(0,t.CE)("div",Xa,[a[21]||(a[21]=(0,t.Lk)("span",{class:"score-label"},"Variety Score:",-1)),(0,t.Lk)("div",$a,[(0,t.Lk)("div",{class:"score-fill",style:(0,i.Tr)({width:10*s.mealPlan.variety_score+"%"})},null,4)]),(0,t.Lk)("span",xa,(0,i.v_)(s.mealPlan.variety_score.toFixed(1))+"/10",1)])):(0,t.Q3)("",!0),s.mealPlan.preference_match_score?((0,t.uX)(),(0,t.CE)("div",Fa,[a[22]||(a[22]=(0,t.Lk)("span",{class:"score-label"},"Preference Match:",-1)),(0,t.Lk)("div",Na,[(0,t.Lk)("div",{class:"score-fill",style:(0,i.Tr)({width:10*s.mealPlan.preference_match_score+"%"})},null,4)]),(0,t.Lk)("span",Wa,(0,i.v_)(s.mealPlan.preference_match_score.toFixed(1))+"/10",1)])):(0,t.Q3)("",!0)])])):(0,t.Q3)("",!0)]),s.mealPlan.meal_plan_data&&s.mealPlan.meal_plan_data.meals?((0,t.uX)(),(0,t.CE)("div",ja,[a[46]||(a[46]=(0,t.Lk)("h3",null,"Detailed Meal Plan",-1)),(0,t.Lk)("div",Qa,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(s.mealPlan.meal_plan_data.meals,(e,s)=>((0,t.uX)(),(0,t.CE)("div",{key:s,class:"day-meals"},[(0,t.Lk)("h4",Ua,(0,i.v_)(r.formatDate(s)),1),(0,t.Lk)("div",za,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e,(e,n)=>((0,t.uX)(),(0,t.CE)("div",{key:n,class:"meal-card"},[(0,t.Lk)("div",Oa,[(0,t.Lk)("div",Ga,[(0,t.Lk)("h5",Ba,(0,i.v_)(r.getMealTitle(e)),1),(0,t.Lk)("span",{class:(0,i.C4)(["meal-type-badge",r.getMealTypeClass(e.meal_type||"meal")])},(0,i.v_)(r.formatMealType(e.meal_type||"Meal")),3)]),(0,t.Lk)("div",Za,[(0,t.Lk)("span",Va,[a[24]||(a[24]=(0,t.Lk)("i",{class:"fas fa-clock"},null,-1)),(0,t.eW)(" "+(0,i.v_)(r.getMealTime(e)),1)]),e.recipe?.cuisine||e.cuisine?((0,t.uX)(),(0,t.CE)("span",Ha,[a[25]||(a[25]=(0,t.Lk)("i",{class:"fas fa-globe"},null,-1)),(0,t.eW)(" "+(0,i.v_)(e.recipe?.cuisine||e.cuisine),1)])):(0,t.Q3)("",!0)])]),e.recipe||r.getMealRecipe(e)?((0,t.uX)(),(0,t.CE)("div",qa,[r.getMealRecipe(e).readyInMinutes||r.getMealRecipe(e).prep_time||r.getMealRecipe(e).cook_time||r.getMealRecipe(e).total_time?((0,t.uX)(),(0,t.CE)("div",Ka,[(0,t.Lk)("div",Ja,[r.getMealRecipe(e).readyInMinutes?((0,t.uX)(),(0,t.CE)("span",Ya,[a[26]||(a[26]=(0,t.Lk)("i",{class:"fas fa-hourglass-half"},null,-1)),(0,t.eW)(" Ready: "+(0,i.v_)(r.getMealRecipe(e).readyInMinutes)+"min ",1)])):(0,t.Q3)("",!0),r.getMealRecipe(e).prep_time?((0,t.uX)(),(0,t.CE)("span",es,[a[27]||(a[27]=(0,t.Lk)("i",{class:"fas fa-cut"},null,-1)),(0,t.eW)(" Prep: "+(0,i.v_)(r.getMealRecipe(e).prep_time)+"min ",1)])):(0,t.Q3)("",!0),r.getMealRecipe(e).cook_time?((0,t.uX)(),(0,t.CE)("span",as,[a[28]||(a[28]=(0,t.Lk)("i",{class:"fas fa-fire"},null,-1)),(0,t.eW)(" Cook: "+(0,i.v_)(r.getMealRecipe(e).cook_time)+"min ",1)])):(0,t.Q3)("",!0),r.getMealRecipe(e).total_time?((0,t.uX)(),(0,t.CE)("span",ss,[a[29]||(a[29]=(0,t.Lk)("i",{class:"fas fa-hourglass-half"},null,-1)),(0,t.eW)(" Total: "+(0,i.v_)(r.getMealRecipe(e).total_time)+"min ",1)])):(0,t.Q3)("",!0),r.getMealRecipe(e).servings?((0,t.uX)(),(0,t.CE)("span",ts,[a[30]||(a[30]=(0,t.Lk)("i",{class:"fas fa-users"},null,-1)),(0,t.eW)(" Serves: "+(0,i.v_)(r.getMealRecipe(e).servings),1)])):(0,t.Q3)("",!0)])])):(0,t.Q3)("",!0),(0,t.Lk)("div",is,[a[35]||(a[35]=(0,t.Lk)("h6",null,"Nutritional Information",-1)),(0,t.Lk)("div",ns,[(0,t.Lk)("div",ls,[a[31]||(a[31]=(0,t.Lk)("span",{class:"nutrition-label"},"Calories:",-1)),(0,t.Lk)("span",rs,(0,i.v_)(r.getNutritionValue(r.getMealRecipe(e),"calories")),1)]),(0,t.Lk)("div",os,[a[32]||(a[32]=(0,t.Lk)("span",{class:"nutrition-label"},"Protein:",-1)),(0,t.Lk)("span",cs,(0,i.v_)(r.getNutritionValue(r.getMealRecipe(e),"protein"))+"g",1)]),(0,t.Lk)("div",ds,[a[33]||(a[33]=(0,t.Lk)("span",{class:"nutrition-label"},"Carbs:",-1)),(0,t.Lk)("span",ps,(0,i.v_)(r.getNutritionValue(r.getMealRecipe(e),"carbs"))+"g",1)]),(0,t.Lk)("div",us,[a[34]||(a[34]=(0,t.Lk)("span",{class:"nutrition-label"},"Fat:",-1)),(0,t.Lk)("span",gs,(0,i.v_)(r.getNutritionValue(r.getMealRecipe(e),"fat"))+"g",1)])])]),r.getMealIngredients(e).length?((0,t.uX)(),(0,t.CE)("div",ms,[a[36]||(a[36]=(0,t.Lk)("h6",null,"Ingredients",-1)),(0,t.Lk)("div",hs,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(r.getMealIngredients(e),(e,a)=>((0,t.uX)(),(0,t.CE)("div",{key:a,class:"ingredient-item"},[(0,t.Lk)("span",vs,(0,i.v_)(e.quantity||e.amount||""),1),(0,t.Lk)("span",ks,(0,i.v_)(e.unit||""),1),(0,t.Lk)("span",ys,(0,i.v_)(e.name||e.original||e.text),1)]))),128))])])):(0,t.Q3)("",!0),r.normalizedInstructions(e).length?((0,t.uX)(),(0,t.CE)("div",fs,[a[37]||(a[37]=(0,t.Lk)("h6",null,"Instructions",-1)),(0,t.Lk)("div",Ls,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(r.normalizedInstructions(e),(e,a)=>((0,t.uX)(),(0,t.CE)("div",{key:a,class:"instruction-item"},[(0,t.Lk)("span",_s,(0,i.v_)(e.number),1),(0,t.Lk)("span",bs,(0,i.v_)(e.step),1)]))),128))])])):(0,t.Q3)("",!0),e.target_calories||e.target_protein||e.target_carbs||e.target_fat?((0,t.uX)(),(0,t.CE)("div",Cs,[a[42]||(a[42]=(0,t.Lk)("h6",null,"Meal Targets",-1)),(0,t.Lk)("div",Ms,[e.target_calories?((0,t.uX)(),(0,t.CE)("div",ws,[a[38]||(a[38]=(0,t.Lk)("span",{class:"target-label"},"Target Calories:",-1)),(0,t.Lk)("span",Ps,(0,i.v_)(Math.round(e.target_calories)),1)])):(0,t.Q3)("",!0),e.target_protein?((0,t.uX)(),(0,t.CE)("div",Ss,[a[39]||(a[39]=(0,t.Lk)("span",{class:"target-label"},"Target Protein:",-1)),(0,t.Lk)("span",Rs,(0,i.v_)(Math.round(e.target_protein))+"g",1)])):(0,t.Q3)("",!0),e.target_carbs?((0,t.uX)(),(0,t.CE)("div",Es,[a[40]||(a[40]=(0,t.Lk)("span",{class:"target-label"},"Target Carbs:",-1)),(0,t.Lk)("span",Is,(0,i.v_)(Math.round(e.target_carbs))+"g",1)])):(0,t.Q3)("",!0),e.target_fat?((0,t.uX)(),(0,t.CE)("div",As,[a[41]||(a[41]=(0,t.Lk)("span",{class:"target-label"},"Target Fat:",-1)),(0,t.Lk)("span",Ts,(0,i.v_)(Math.round(e.target_fat))+"g",1)])):(0,t.Q3)("",!0)])])):(0,t.Q3)("",!0)])):(0,t.Q3)("",!0),(0,t.Lk)("div",Ds,[(0,t.Lk)("button",{onClick:a=>r.toggleRecipeSave(e.recipe||e),class:(0,i.C4)(["btn btn-sm",(e.recipe||e)?.is_saved_by_user?"btn-outline-danger":"btn-primary"]),disabled:l.savingRecipe===(e.recipe||e)?.id},[l.savingRecipe===(e.recipe||e)?.id?((0,t.uX)(),(0,t.CE)("i",$s)):((0,t.uX)(),(0,t.CE)("i",{key:1,class:(0,i.C4)((e.recipe||e)?.is_saved_by_user?"fas fa-heart":"far fa-heart")},null,2)),(0,t.eW)(" "+(0,i.v_)(l.savingRecipe===(e.recipe||e)?.id?(e.recipe||e)?.is_saved_by_user?"Removing...":"Saving...":(e.recipe||e)?.is_saved_by_user?"Remove":"Save"),1)],10,Xs),(0,t.Lk)("button",{onClick:a=>r.regenerateMeal(s,e.meal_type||r.inferMealTypeFromTime(new Date)),class:"btn btn-sm btn-outline"},a[43]||(a[43]=[(0,t.Lk)("i",{class:"fas fa-redo"},null,-1),(0,t.eW)(" Regenerate ")]),8,xs),(0,t.Lk)("button",{onClick:a=>r.getAlternatives(s,e.meal_type||r.inferMealTypeFromTime(new Date)),class:"btn btn-sm btn-secondary"},a[44]||(a[44]=[(0,t.Lk)("i",{class:"fas fa-exchange-alt"},null,-1),(0,t.eW)(" Alternatives ")]),8,Fs),(0,t.Lk)("button",{onClick:a=>r.viewRecipeDetails(e),class:"btn btn-sm btn-info"},a[45]||(a[45]=[(0,t.Lk)("i",{class:"fas fa-info-circle"},null,-1),(0,t.eW)(" Recipe Details ")]),8,Ns)])]))),128))])]))),128))])])):((0,t.uX)(),(0,t.CE)("div",Ws,a[47]||(a[47]=[(0,t.Lk)("i",{class:"fas fa-utensils"},null,-1),(0,t.Lk)("p",null,"No meal details available",-1)])))]),(0,t.Lk)("div",js,[(0,t.Lk)("button",{onClick:a[1]||(a[1]=a=>e.$emit("close")),class:"btn btn-secondary"},"Close"),(0,t.Lk)("button",{onClick:a[2]||(a[2]=(...e)=>r.generateShoppingList&&r.generateShoppingList(...e)),class:"btn btn-success"},a[48]||(a[48]=[(0,t.Lk)("i",{class:"fas fa-shopping-cart"},null,-1),(0,t.eW)(" Generate Shopping List ")])),(0,t.Lk)("button",{onClick:a[3]||(a[3]=(...e)=>r.analyzePlan&&r.analyzePlan(...e)),class:"btn btn-info"},a[49]||(a[49]=[(0,t.Lk)("i",{class:"fas fa-chart-line"},null,-1),(0,t.eW)(" AI Analysis ")])),(0,t.Lk)("button",{onClick:a[4]||(a[4]=(...e)=>r.deletePlan&&r.deletePlan(...e)),class:"btn btn-danger"},a[50]||(a[50]=[(0,t.Lk)("i",{class:"fas fa-trash"},null,-1),(0,t.eW)(" Delete Plan ")]))])]),l.showRecipeModal&&l.selectedRecipe?((0,t.uX)(),(0,t.Wv)(o,{key:0,recipe:l.selectedRecipe,onClose:r.closeRecipeModal,onRecipeSaved:r.onRecipeSaved},null,8,["recipe","onClose","onRecipeSaved"])):(0,t.Q3)("",!0),l.showShoppingListModal?((0,t.uX)(),(0,t.Wv)(c,{key:1,"shopping-list":l.shoppingListData,loading:l.shoppingListLoading,error:l.shoppingListError,onClose:r.closeShoppingListModal,onRetry:r.generateShoppingList},null,8,["shopping-list","loading","error","onClose","onRetry"])):(0,t.Q3)("",!0)])}const Us={class:"modal-header"},zs={class:"header-content"},Os={class:"recipe-meta"},Gs={class:"badge cuisine"},Bs={class:"badge meal-type"},Zs={class:"modal-body"},Vs={class:"recipe-hero"},Hs={key:0,class:"image-wrapper"},qs=["src","alt"],Ks={class:"image-overlay"},Js={class:"recipe-stats"},Ys={class:"stat"},et={class:"stat"},at={class:"stat"},st={class:"nutrition-panel"},tt={class:"nutrition-toggle"},it={class:"toggle-label"},nt={class:"toggle-text"},lt={class:"nutrition-grid"},rt={class:"nutrition-item calories"},ot={class:"nutrition-value"},ct={class:"nutrition-item protein"},dt={class:"nutrition-value"},pt={class:"nutrition-item carbs"},ut={class:"nutrition-value"},gt={class:"nutrition-item fat"},mt={class:"nutrition-value"},ht={key:0,class:"dietary-tags"},vt={class:"serving-adjustment-section"},kt={class:"serving-controls"},yt={class:"serving-input-group"},ft={class:"serving-input-wrapper"},Lt=["disabled"],_t=["disabled"],bt={class:"serving-info"},Ct={class:"original-info"},Mt={key:0,class:"multiplier-info"},wt={key:0,class:"summary-section"},Pt=["innerHTML"],St={key:1,class:"ingredients-section"},Rt={key:0,class:"ingredients-multiplier"},Et={class:"ingredients-grid"},It={class:"ingredient-text"},At={key:0,class:"ingredient-original"},Tt={key:2,class:"instructions-section"},Dt={class:"instructions-list"},Xt={class:"step-number"},$t={class:"step-content"},xt={key:3,class:"source-section"},Ft={class:"source-info"},Nt=["href"],Wt={key:1,class:"source-text"},jt={class:"modal-footer"},Qt=["disabled"],Ut={key:0,class:"fas fa-spinner fa-spin"},zt={key:1,class:"fas fa-heart"},Ot={key:2,class:"far fa-heart"};function Gt(e,a,s,n,l,r){const o=(0,t.g2)("shopping-list-modal");return(0,t.uX)(),(0,t.CE)("div",{class:"recipe-modal-overlay",onClick:a[11]||(a[11]=(0,m.D$)(a=>e.$emit("close"),["self"]))},[(0,t.Lk)("div",{class:"recipe-modal",onClick:a[10]||(a[10]=(0,m.D$)(()=>{},["stop"]))},[(0,t.Lk)("div",Us,[(0,t.Lk)("div",zs,[(0,t.Lk)("h2",null,(0,i.v_)(s.recipe.title),1),(0,t.Lk)("div",Os,[(0,t.Lk)("span",Gs,(0,i.v_)(r.formatCuisine(s.recipe.cuisine)),1),(0,t.Lk)("span",Bs,(0,i.v_)(r.formatMealType(s.recipe.meal_type)),1),(0,t.Lk)("span",{class:(0,i.C4)(["badge difficulty",r.getDifficultyClass(s.recipe.difficulty_level)])},(0,i.v_)(r.formatDifficulty(s.recipe.difficulty_level)),3)])]),(0,t.Lk)("button",{class:"close-btn",onClick:a[0]||(a[0]=a=>e.$emit("close"))},a[12]||(a[12]=[(0,t.Lk)("i",{class:"fas fa-times"},null,-1)]))]),(0,t.Lk)("div",Zs,[(0,t.Lk)("div",Vs,[s.recipe.image_url?((0,t.uX)(),(0,t.CE)("div",Hs,[(0,t.Lk)("img",{src:s.recipe.image_url,alt:s.recipe.title,onError:a[1]||(a[1]=(...e)=>r.imageError&&r.imageError(...e))},null,40,qs),(0,t.Lk)("div",Ks,[(0,t.Lk)("div",Js,[(0,t.Lk)("div",Ys,[a[13]||(a[13]=(0,t.Lk)("i",{class:"fas fa-clock"},null,-1)),(0,t.Lk)("span",null,(0,i.v_)(r.formatTime(s.recipe.total_time_minutes)),1)]),(0,t.Lk)("div",et,[a[14]||(a[14]=(0,t.Lk)("i",{class:"fas fa-users"},null,-1)),(0,t.Lk)("span",null,(0,i.v_)(s.recipe.servings)+" "+(0,i.v_)(1===s.recipe.servings?"serving":"servings"),1)]),(0,t.Lk)("div",at,[a[15]||(a[15]=(0,t.Lk)("i",{class:"fas fa-fire"},null,-1)),(0,t.Lk)("span",null,(0,i.v_)(Math.round(s.recipe.calories_per_serving)||"N/A")+" cal",1)])])])])):(0,t.Q3)("",!0),(0,t.Lk)("div",st,[a[20]||(a[20]=(0,t.Lk)("h3",null,"Nutrition Information",-1)),(0,t.Lk)("div",tt,[(0,t.Lk)("label",it,[(0,t.bo)((0,t.Lk)("input",{type:"checkbox","onUpdate:modelValue":a[2]||(a[2]=e=>l.showTotalNutrition=e),class:"nutrition-toggle-input"},null,512),[[m.lH,l.showTotalNutrition]]),(0,t.Lk)("span",nt,(0,i.v_)(l.showTotalNutrition?"Total for "+l.adjustedServings+" servings":"Per serving"),1)])]),(0,t.Lk)("div",lt,[(0,t.Lk)("div",rt,[(0,t.Lk)("div",ot,(0,i.v_)(r.calculatedNutrition.calories||"N/A"),1),a[16]||(a[16]=(0,t.Lk)("div",{class:"nutrition-label"},"Calories",-1))]),(0,t.Lk)("div",ct,[(0,t.Lk)("div",dt,(0,i.v_)(r.calculatedNutrition.protein)+"g",1),a[17]||(a[17]=(0,t.Lk)("div",{class:"nutrition-label"},"Protein",-1))]),(0,t.Lk)("div",pt,[(0,t.Lk)("div",ut,(0,i.v_)(r.calculatedNutrition.carbs)+"g",1),a[18]||(a[18]=(0,t.Lk)("div",{class:"nutrition-label"},"Carbs",-1))]),(0,t.Lk)("div",gt,[(0,t.Lk)("div",mt,(0,i.v_)(r.calculatedNutrition.fat)+"g",1),a[19]||(a[19]=(0,t.Lk)("div",{class:"nutrition-label"},"Fat",-1))])]),s.recipe.dietary_tags&&s.recipe.dietary_tags.length?((0,t.uX)(),(0,t.CE)("div",ht,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(s.recipe.dietary_tags,e=>((0,t.uX)(),(0,t.CE)("span",{key:e,class:"dietary-tag"},(0,i.v_)(r.formatTag(e)),1))),128))])):(0,t.Q3)("",!0)])]),(0,t.Lk)("div",vt,[a[24]||(a[24]=(0,t.Lk)("h3",null,[(0,t.Lk)("i",{class:"fas fa-utensils"}),(0,t.eW)(" Adjust Serving Size ")],-1)),(0,t.Lk)("div",kt,[(0,t.Lk)("div",yt,[a[23]||(a[23]=(0,t.Lk)("label",{for:"serving-input"},"Number of Servings:",-1)),(0,t.Lk)("div",ft,[(0,t.Lk)("button",{class:"serving-btn decrease",onClick:a[3]||(a[3]=(...e)=>r.decreaseServings&&r.decreaseServings(...e)),disabled:l.adjustedServings<=1},a[21]||(a[21]=[(0,t.Lk)("i",{class:"fas fa-minus"},null,-1)]),8,Lt),(0,t.bo)((0,t.Lk)("input",{id:"serving-input",type:"number","onUpdate:modelValue":a[4]||(a[4]=e=>l.adjustedServings=e),min:"1",max:"20",class:"serving-input no-arrows",onInput:a[5]||(a[5]=(...e)=>r.validateServings&&r.validateServings(...e))},null,544),[[m.Jo,l.adjustedServings,void 0,{number:!0}]]),(0,t.Lk)("button",{class:"serving-btn increase",onClick:a[6]||(a[6]=(...e)=>r.increaseServings&&r.increaseServings(...e)),disabled:l.adjustedServings>=20},a[22]||(a[22]=[(0,t.Lk)("i",{class:"fas fa-plus"},null,-1)]),8,_t)]),(0,t.Lk)("div",bt,[(0,t.Lk)("span",Ct,"Original: "+(0,i.v_)(s.recipe.servings)+" "+(0,i.v_)(1===s.recipe.servings?"serving":"servings"),1),1!==r.servingMultiplier?((0,t.uX)(),(0,t.CE)("span",Mt," ("+(0,i.v_)(r.servingMultiplier.toFixed(2))+"x "+(0,i.v_)(r.servingMultiplier>1?"larger":"smaller")+") ",1)):(0,t.Q3)("",!0)])])])]),s.recipe.summary?((0,t.uX)(),(0,t.CE)("div",wt,[a[25]||(a[25]=(0,t.Lk)("h3",null,"About This Recipe",-1)),(0,t.Lk)("p",{class:"summary",innerHTML:r.cleanSummary(s.recipe.summary)},null,8,Pt)])):(0,t.Q3)("",!0),s.recipe.ingredients_data&&s.recipe.ingredients_data.length?((0,t.uX)(),(0,t.CE)("div",St,[(0,t.Lk)("h3",null,[a[26]||(a[26]=(0,t.Lk)("i",{class:"fas fa-list-ul"},null,-1)),a[27]||(a[27]=(0,t.eW)(" Ingredients ")),1!==r.servingMultiplier?((0,t.uX)(),(0,t.CE)("span",Rt," (adjusted for "+(0,i.v_)(l.adjustedServings)+" "+(0,i.v_)(1===l.adjustedServings?"serving":"servings")+") ",1)):(0,t.Q3)("",!0)]),(0,t.Lk)("div",Et,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(r.adjustedIngredients,(e,a)=>((0,t.uX)(),(0,t.CE)("div",{key:a,class:"ingredient-item"},[(0,t.Lk)("span",It,(0,i.v_)(e.formatted),1),1!==r.servingMultiplier&&e.original!==e.formatted?((0,t.uX)(),(0,t.CE)("span",At," Original: "+(0,i.v_)(e.original),1)):(0,t.Q3)("",!0)]))),128))])])):(0,t.Q3)("",!0),r.normalizedInstructions.length?((0,t.uX)(),(0,t.CE)("div",Tt,[a[28]||(a[28]=(0,t.Lk)("h3",null,[(0,t.Lk)("i",{class:"fas fa-clipboard-list"}),(0,t.eW)(" Instructions ")],-1)),(0,t.Lk)("div",Dt,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(r.normalizedInstructions,(e,a)=>((0,t.uX)(),(0,t.CE)("div",{key:a,class:"instruction-step"},[(0,t.Lk)("div",Xt,(0,i.v_)(a+1),1),(0,t.Lk)("div",$t,(0,i.v_)(e.step||e.description||e),1)]))),128))])])):(0,t.Q3)("",!0),s.recipe.source_url||s.recipe.source?((0,t.uX)(),(0,t.CE)("div",xt,[(0,t.Lk)("div",Ft,[a[30]||(a[30]=(0,t.Lk)("span",{class:"source-label"},"Source:",-1)),s.recipe.source_url?((0,t.uX)(),(0,t.CE)("a",{key:0,href:s.recipe.source_url,target:"_blank",class:"source-link"},a[29]||(a[29]=[(0,t.eW)(" View Original Recipe "),(0,t.Lk)("i",{class:"fas fa-external-link-alt"},null,-1)]),8,Nt)):((0,t.uX)(),(0,t.CE)("span",Wt,(0,i.v_)(s.recipe.source||"Recipe Database"),1))])])):(0,t.Q3)("",!0)]),(0,t.Lk)("div",jt,[(0,t.Lk)("button",{class:"btn btn-outline",onClick:a[7]||(a[7]=a=>e.$emit("close"))},a[31]||(a[31]=[(0,t.Lk)("i",{class:"fas fa-times"},null,-1),(0,t.eW)(" Close ")])),l.localRecipe?((0,t.uX)(),(0,t.CE)("button",{key:0,class:(0,i.C4)(["btn",l.localRecipe.is_saved_by_user?"btn-success":"btn-primary"]),onClick:a[8]||(a[8]=(...e)=>r.toggleSaveRecipe&&r.toggleSaveRecipe(...e)),disabled:l.saving},[l.saving?((0,t.uX)(),(0,t.CE)("i",Ut)):l.localRecipe.is_saved_by_user?((0,t.uX)(),(0,t.CE)("i",zt)):((0,t.uX)(),(0,t.CE)("i",Ot)),(0,t.eW)(" "+(0,i.v_)(l.saving?l.localRecipe.is_saved_by_user?"Removing...":"Saving...":l.localRecipe.is_saved_by_user?"Saved":"Save Recipe"),1)],10,Qt)):(0,t.Q3)("",!0),(0,t.Lk)("button",{class:"btn btn-info",onClick:a[9]||(a[9]=(...e)=>r.generateShoppingList&&r.generateShoppingList(...e))},a[32]||(a[32]=[(0,t.Lk)("i",{class:"fas fa-shopping-cart"},null,-1),(0,t.eW)(" Shopping List ")]))])]),l.showShoppingListModal?((0,t.uX)(),(0,t.Wv)(o,{key:0,"shopping-list":l.shoppingListData,loading:l.shoppingListLoading,error:l.shoppingListError,onClose:r.closeShoppingListModal,onRetry:r.generateShoppingList},null,8,["shopping-list","loading","error","onClose","onRetry"])):(0,t.Q3)("",!0)])}const Bt={class:"shopping-list-modal"},Zt={class:"modal-content"},Vt={class:"modal-header"},Ht={class:"modal-actions"},qt={class:"modal-body"},Kt={key:0,class:"loading-state"},Jt={key:1,class:"error-state"},Yt={key:2,class:"shopping-list-content"},ei={class:"shopping-list-meta"},ai={class:"meta-item"},si={key:0,class:"meta-item"},ti={key:1,class:"meta-item"},ii={class:"shopping-categories"},ni=["onClick"],li={class:"category-info"},ri={class:"category-icon"},oi={class:"category-name"},ci={class:"item-count"},di={class:"category-toggle"},pi={class:"category-items"},ui={class:"item-checkbox"},gi=["onUpdate:modelValue"],mi={class:"item-details"},hi={class:"item-quantity"},vi={key:0,class:"item-notes"},ki={class:"progress-section"},yi={class:"progress-info"},fi={class:"progress-percentage"},Li={class:"progress-bar"},_i={key:0,class:"recipe-list"},bi={class:"recipe-chips"};function Ci(e,a,s,n,l,r){return(0,t.uX)(),(0,t.CE)("div",Bt,[(0,t.Lk)("div",{class:"modal-overlay",onClick:a[0]||(a[0]=a=>e.$emit("close"))}),(0,t.Lk)("div",Zt,[(0,t.Lk)("div",Vt,[a[7]||(a[7]=(0,t.Lk)("h2",{class:"modal-title"},[(0,t.Lk)("i",{class:"fas fa-shopping-cart"}),(0,t.eW)(" Shopping List ")],-1)),(0,t.Lk)("div",Ht,[(0,t.Lk)("button",{onClick:a[1]||(a[1]=(...e)=>r.printShoppingList&&r.printShoppingList(...e)),class:"btn btn-secondary",title:"Print Shopping List"},a[5]||(a[5]=[(0,t.Lk)("i",{class:"fas fa-print"},null,-1)])),(0,t.Lk)("button",{onClick:a[2]||(a[2]=a=>e.$emit("close")),class:"btn btn-ghost"},a[6]||(a[6]=[(0,t.Lk)("i",{class:"fas fa-times"},null,-1)]))])]),(0,t.Lk)("div",qt,[s.loading?((0,t.uX)(),(0,t.CE)("div",Kt,a[8]||(a[8]=[(0,t.Lk)("div",{class:"spinner"},null,-1),(0,t.Lk)("p",null,"Generating your shopping list...",-1)]))):s.error?((0,t.uX)(),(0,t.CE)("div",Jt,[a[10]||(a[10]=(0,t.Lk)("div",{class:"error-icon"},[(0,t.Lk)("i",{class:"fas fa-exclamation-triangle"})],-1)),a[11]||(a[11]=(0,t.Lk)("h3",null,"Unable to Generate Shopping List",-1)),(0,t.Lk)("p",null,(0,i.v_)(s.error),1),(0,t.Lk)("button",{onClick:a[3]||(a[3]=(...e)=>r.retry&&r.retry(...e)),class:"btn btn-primary"},a[9]||(a[9]=[(0,t.Lk)("i",{class:"fas fa-redo"},null,-1),(0,t.eW)(" Try Again ")]))])):s.shoppingList?((0,t.uX)(),(0,t.CE)("div",Yt,[(0,t.Lk)("div",ei,[(0,t.Lk)("div",ai,[a[12]||(a[12]=(0,t.Lk)("i",{class:"fas fa-info-circle"},null,-1)),(0,t.Lk)("span",null,(0,i.v_)(s.shoppingList.metadata.total_items)+" items",1)]),s.shoppingList.metadata.recipe_names?((0,t.uX)(),(0,t.CE)("div",si,[a[13]||(a[13]=(0,t.Lk)("i",{class:"fas fa-utensils"},null,-1)),(0,t.Lk)("span",null,(0,i.v_)(s.shoppingList.metadata.recipe_names.length)+" recipes",1)])):(0,t.Q3)("",!0),"meal_plan"===s.shoppingList.metadata.generated_from?((0,t.uX)(),(0,t.CE)("div",ti,[a[14]||(a[14]=(0,t.Lk)("i",{class:"fas fa-calendar"},null,-1)),(0,t.Lk)("span",null,(0,i.v_)(r.formatDateRange()),1)])):(0,t.Q3)("",!0)]),(0,t.Lk)("div",ii,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(r.sortedCategories,(e,s)=>((0,t.uX)(),(0,t.CE)("div",{key:s,class:(0,i.C4)(["shopping-category",{"category-completed":r.isCategoryCompleted(e)}])},[(0,t.Lk)("div",{class:"category-header",onClick:e=>r.toggleCategory(s)},[(0,t.Lk)("div",li,[(0,t.Lk)("span",ri,(0,i.v_)(e.icon),1),(0,t.Lk)("h3",oi,(0,i.v_)(e.name),1),(0,t.Lk)("span",ci,"("+(0,i.v_)(r.getCompletedCount(e))+"/"+(0,i.v_)(e.item_count)+")",1)]),(0,t.Lk)("div",di,[(0,t.Lk)("i",{class:(0,i.C4)(["fas",l.collapsedCategories[s]?"fa-chevron-down":"fa-chevron-up"])},null,2)])],8,ni),(0,t.bo)((0,t.Lk)("div",pi,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.items,(e,s)=>((0,t.uX)(),(0,t.CE)("div",{key:s,class:(0,i.C4)(["shopping-item",{"item-checked":e.checked}])},[(0,t.Lk)("label",ui,[(0,t.bo)((0,t.Lk)("input",{type:"checkbox","onUpdate:modelValue":a=>e.checked=a,onChange:a[4]||(a[4]=(...e)=>r.updateProgress&&r.updateProgress(...e))},null,40,gi),[[m.lH,e.checked]]),a[15]||(a[15]=(0,t.Lk)("span",{class:"checkmark"},null,-1))]),(0,t.Lk)("div",mi,[(0,t.Lk)("span",{class:(0,i.C4)(["item-name",{strikethrough:e.checked}])},(0,i.v_)(e.name),3),(0,t.Lk)("span",hi,(0,i.v_)(e.quantity),1),e.notes&&e.notes.length>0?((0,t.uX)(),(0,t.CE)("div",vi,[(0,t.Lk)("small",null,"Additional: "+(0,i.v_)(e.notes.join(", ")),1)])):(0,t.Q3)("",!0)])],2))),128))],512),[[m.aG,!l.collapsedCategories[s]]])],2))),128))]),(0,t.Lk)("div",ki,[(0,t.Lk)("div",yi,[(0,t.Lk)("span",null,"Progress: "+(0,i.v_)(l.completedItems)+"/"+(0,i.v_)(l.totalItems)+" items",1),(0,t.Lk)("span",fi,(0,i.v_)(r.progressPercentage)+"%",1)]),(0,t.Lk)("div",Li,[(0,t.Lk)("div",{class:"progress-fill",style:(0,i.Tr)({width:r.progressPercentage+"%"})},null,4)])]),s.shoppingList.metadata.recipe_names?((0,t.uX)(),(0,t.CE)("div",_i,[a[16]||(a[16]=(0,t.Lk)("h4",null,"Recipes included:",-1)),(0,t.Lk)("div",bi,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(s.shoppingList.metadata.recipe_names,e=>((0,t.uX)(),(0,t.CE)("span",{key:e,class:"recipe-chip"},(0,i.v_)(e),1))),128))])])):(0,t.Q3)("",!0)])):(0,t.Q3)("",!0)])])])}s(1148),s(8237);var Mi={name:"ShoppingListModal",props:{shoppingList:{type:Object,default:null},loading:{type:Boolean,default:!1},error:{type:String,default:null}},data(){return{collapsedCategories:{},completedItems:0,totalItems:0}},computed:{sortedCategories(){if(!this.shoppingList?.categories)return{};const e=this.shoppingList.categories;return Object.keys(e).sort((a,s)=>e[a].order-e[s].order).reduce((a,s)=>(a[s]=e[s],a),{})},progressPercentage(){return 0===this.totalItems?0:Math.round(this.completedItems/this.totalItems*100)}},watch:{shoppingList:{handler(){this.updateProgress(),this.initializeCategories()},immediate:!0}},methods:{initializeCategories(){this.shoppingList?.categories&&Object.keys(this.shoppingList.categories).forEach(e=>{e in this.collapsedCategories||(this.collapsedCategories[e]=!1)})},toggleCategory(e){this.collapsedCategories[e]=!this.collapsedCategories[e]},updateProgress(){if(!this.shoppingList?.categories)return;let e=0,a=0;Object.values(this.shoppingList.categories).forEach(s=>{s.items.forEach(s=>{a++,s.checked&&e++})}),this.completedItems=e,this.totalItems=a},isCategoryCompleted(e){return e.items.every(e=>e.checked)},getCompletedCount(e){return e.items.filter(e=>e.checked).length},formatDateRange(){if(!this.shoppingList?.metadata)return"";const e=new Date(this.shoppingList.metadata.start_date).toLocaleDateString(),a=new Date(this.shoppingList.metadata.end_date).toLocaleDateString();return e===a?e:`${e} - ${a}`},printShoppingList(){const e=this.generatePrintContent(),a=window.open("","_blank");a.document.write(`\n        <html>\n          <head>\n            <title>Shopping List</title>\n            <style>\n              body { font-family: Arial, sans-serif; margin: 20px; }\n              h1 { color: #2563eb; border-bottom: 2px solid #2563eb; padding-bottom: 10px; }\n              h2 { color: #374151; margin-top: 25px; margin-bottom: 10px; }\n              .category-section { margin-bottom: 20px; }\n              .item { margin: 5px 0; padding: 5px; }\n              .item-name { font-weight: 500; }\n              .item-quantity { color: #6b7280; margin-left: 10px; }\n              .meta-info { background: #f3f4f6; padding: 10px; border-radius: 5px; margin-bottom: 20px; }\n              ul { list-style-type: none; padding-left: 0; }\n              li { margin: 8px 0; }\n              .checkbox { width: 15px; height: 15px; border: 1px solid #ccc; display: inline-block; margin-right: 10px; }\n              @media print {\n                .no-print { display: none; }\n              }\n            </style>\n          </head>\n          <body>\n            ${e}\n          </body>\n        </html>\n      `),a.document.close(),a.print(),a.close()},generatePrintContent(){if(!this.shoppingList)return"";let e="<h1>🛒 Shopping List</h1>";return this.shoppingList.metadata&&(e+='<div class="meta-info">',e+=`<p><strong>Total Items:</strong> ${this.shoppingList.metadata.total_items}</p>`,this.shoppingList.metadata.recipe_names&&(e+=`<p><strong>Recipes:</strong> ${this.shoppingList.metadata.recipe_names.join(", ")}</p>`),"meal_plan"===this.shoppingList.metadata.generated_from&&(e+=`<p><strong>Meal Plan Period:</strong> ${this.formatDateRange()}</p>`),e+="</div>"),Object.entries(this.sortedCategories).forEach(([,a])=>{e+='<div class="category-section">',e+=`<h2>${a.icon} ${a.name}</h2>`,e+="<ul>",a.items.forEach(a=>{e+="<li>",e+='<span class="checkbox"></span>',e+=`<span class="item-name">${a.name}</span>`,e+=`<span class="item-quantity">${a.quantity}</span>`,a.notes&&a.notes.length>0&&(e+=`<br><small>Additional: ${a.notes.join(", ")}</small>`),e+="</li>"}),e+="</ul></div>"}),e},retry(){this.$emit("retry")}}};const wi=(0,V.A)(Mi,[["render",Ci],["__scopeId","data-v-37d6b95d"]]);var Pi=wi;async function Si(e,a={}){try{const i=await fetch(e,a);if(!i.ok){let e="";try{e=await i.text()}catch(s){console.warn("Could not read error response text:",s)}throw console.error("API Error Response:",e),new Error(`HTTP error! status: ${i.status}, message: ${e||"Unknown error"}`)}const n=await i.text();if(console.log("API Response Text Length:",n.length),!n||""===n.trim())throw new Error("Empty response from server");const l=i.headers.get("content-type");if(!l||!l.includes("application/json"))throw console.error("Invalid content type:",l),console.error("Response text:",n),new Error(`Expected JSON response, got: ${l||"unknown"}`);let r;try{r=JSON.parse(n)}catch(t){throw console.error("JSON Parse Error:",t),console.error("Response text that failed to parse:",n.substring(0,1e3)+(n.length>1e3?"...":"")),new Error(`Invalid JSON response: ${t.message}`)}return r}catch(i){if("TypeError"===i.name&&i.message.includes("fetch"))throw new Error(`Network error: ${i.message}`);throw i}}async function Ri(e,a,s){return Si(e,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify(a)})}var Ei={name:"RecipeDetailModal",components:{ShoppingListModal:Pi},props:{recipe:{type:Object,required:!0}},data(){return{saving:!1,showShoppingListModal:!1,shoppingListData:null,shoppingListLoading:!1,shoppingListError:null,localRecipe:null,adjustedServings:4,showTotalNutrition:!1}},mounted(){this.localRecipe={...this.recipe},this.adjustedServings=this.recipe.servings||4},watch:{recipe:{handler(e){this.localRecipe={...e},this.adjustedServings=e.servings||4},immediate:!0}},computed:{servingMultiplier(){const e=this.recipe.servings||4;return this.adjustedServings/e},calculatedNutrition(){const e=this.showTotalNutrition?this.adjustedServings:1,a=this.servingMultiplier*e;return{calories:Math.round((this.recipe.calories_per_serving||0)*a),protein:Math.round((this.recipe.protein_per_serving||0)*a),carbs:Math.round((this.recipe.carbs_per_serving||0)*a),fat:Math.round((this.recipe.fat_per_serving||0)*a),fiber:Math.round((this.recipe.fiber_per_serving||0)*a)}},adjustedIngredients(){return this.recipe.ingredients_data&&Array.isArray(this.recipe.ingredients_data)?this.recipe.ingredients_data.map(e=>{const a=this.formatIngredient(e),s=this.adjustIngredientQuantity(e);return{original:a,formatted:s,raw:e}}):[]},normalizedInstructions(){const e=this.recipe.instructions||[];return e&&0!==e.length?e.length&&"object"===typeof e[0]&&e[0].step?e:e.length&&"string"===typeof e[0]?e.map((e,a)=>({number:a+1,step:e,description:e})):e.length&&"object"===typeof e[0]?e.map((e,a)=>({number:e.number||a+1,step:e.step||e.description||e.instruction||`Step ${a+1}`,description:e.step||e.description||e.instruction||`Step ${a+1}`})):[]:[]}},methods:{formatIngredient(e){if("string"===typeof e)return e;if(e.original)return e.original;const a=e.amount||e.quantity||"",s=e.unit||"",t=e.name||e.ingredient||"";return a&&s?`${a} ${s} ${t}`.trim():a?`${a} ${t}`.trim():t||"Ingredient"},adjustIngredientQuantity(e){if("string"===typeof e)return this.adjustStringIngredient(e);if(e.original)return this.adjustStringIngredient(e.original);const a=e.amount||e.quantity||"",s=e.unit||"",t=e.name||e.ingredient||"";if(a&&!isNaN(parseFloat(a))){const e=this.adjustQuantity(parseFloat(a));return s?`${e} ${s} ${t}`.trim():`${e} ${t}`.trim()}return t||"Ingredient"},adjustStringIngredient(e){if(!e||1===this.servingMultiplier)return e;const a=[/^(\d+\/\d+|\d+\s+\d+\/\d+)/,/^(\d+\.?\d*)/,/^(\d+)-(\d+)/];for(const s of a){const a=e.match(s);if(a){const s=a[0];let t;if(s.includes("/"))t=this.adjustFraction(s);else if(s.includes("-")){const[e,a]=s.split("-").map(e=>parseFloat(e)),i=this.adjustQuantity(e),n=this.adjustQuantity(a);t=`${i}-${n}`}else t=this.adjustQuantity(parseFloat(s));return e.replace(s,t)}}return e},adjustQuantity(e){const a=e*this.servingMultiplier;return a<.1?a.toFixed(2):a<1?a.toFixed(1):a<10?Math.round(4*a)/4:Math.round(a)},adjustFraction(e){const a=e.trim().split(/\s+/);let s=0;for(const i of a)if(i.includes("/")){const[e,a]=i.split("/").map(e=>parseInt(e));s+=e/a}else s+=parseInt(i);const t=s*this.servingMultiplier;return this.decimalToFraction(t)},decimalToFraction(e){const a=1e-6;let s=e,t=1;while(Math.abs(s-Math.round(s))>a)s*=10,t*=10;s=Math.round(s);const i=this.findGCD(s,t);if(s/=i,t/=i,s>=t){const e=Math.floor(s/t),a=s%t;return 0===a?e.toString():`${e} ${a}/${t}`}return 1===t?s.toString():`${s}/${t}`},findGCD(e,a){return 0===a?e:this.findGCD(a,e%a)},increaseServings(){this.adjustedServings<20&&this.adjustedServings++},decreaseServings(){this.adjustedServings>1&&this.adjustedServings--},validateServings(){this.adjustedServings<1?this.adjustedServings=1:this.adjustedServings>20&&(this.adjustedServings=20)},formatTime(e){if(!e)return"N/A";if(e<60)return`${e}min`;const a=Math.floor(e/60),s=e%60;return s>0?`${a}h ${s}min`:`${a}h`},formatCuisine(e){return e?e.charAt(0).toUpperCase()+e.slice(1):""},formatMealType(e){const a={breakfast:"Breakfast",lunch:"Lunch",dinner:"Dinner",snack:"Snack",dessert:"Dessert"};return a[e]||e},formatDifficulty(e){const a={easy:"Easy",medium:"Medium",hard:"Hard"};return a[e]||"Medium"},getDifficultyClass(e){return`difficulty-${e||"medium"}`},formatTag(e){return e.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase())},cleanSummary(e){return e?e.replace(/<[^>]*>/g,"").replace(/\n/g,"<br>"):""},imageError(e){e.target.src=this.getPlaceholderImage(),e.target.style.background="#f8f9fa",e.target.style.border="2px dashed #dee2e6",e.target.style.color="#6c757d",e.target.style.display="flex",e.target.style.alignItems="center",e.target.style.justifyContent="center",e.target.style.fontSize="14px",e.target.onerror=null},getPlaceholderImage(){return"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDMwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIzMDAiIGhlaWdodD0iMjAwIiBmaWxsPSIjRjhGOUZBIiBzdHJva2U9IiNERUUyRTYiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWRhc2hhcnJheT0iNSA1Ii8+Cjx0ZXh0IHg9IjE1MCIgeT0iMTAwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmaWxsPSIjNkM3NTdEIiBmb250LWZhbWlseT0iLWFwcGxlLXN5c3RlbSwgQmxpbmtNYWNTeXN0ZW1Gb250LCBTZWdvZSBVSSwgUm9ib3RvLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0cHgiPk5vIEltYWdlPC90ZXh0Pgo8cGF0aCBkPSJNMTIwIDgwSDEzMFY5MEgxMjBWODBaTTE0MCA4MEgxNTBWOTBIMTQwVjgwWk0xNjAgODBIMTcwVjkwSDE2MFY4MFoiIGZpbGw9IiM2Qzc1N0QiLz4KPC9zdmc+"},async toggleSaveRecipe(){if(this.localRecipe){this.saving=!0;try{console.log("Toggling save status for recipe:",this.localRecipe);const{mealPlanningApi:e}=await Promise.resolve().then(s.bind(s,5090));let a;if(this.localRecipe.is_saved_by_user){if(!this.localRecipe.id)throw new Error("Cannot remove recipe: No recipe ID found");const s=this.localRecipe.id.toString().startsWith("fallback_");if(s)throw new Error("Cannot remove fallback recipe: Not saved in database");a=await e.removeRecipeFromMyCollection(this.localRecipe.id),this.localRecipe.is_saved_by_user=!1;const t=a.data?.message||"Recipe removed from your collection!";this.$toast?.success?.(t)||alert(t)}else{const s=this.localRecipe.id&&this.localRecipe.id.toString().startsWith("fallback_");a=this.localRecipe.spoonacular_id&&!this.localRecipe.created_by?await e.saveRecipeFromMealPlan(this.localRecipe):this.localRecipe.id&&!s&&this.localRecipe.created_by?await e.saveRecipeToMyCollection(this.localRecipe.id):await e.saveRecipeFromMealPlan(this.localRecipe),this.localRecipe.is_saved_by_user=!0;const t=a.data?.message||"Recipe saved to your collection!";this.$toast?.success?.(t)||alert(t),this.$emit("recipe-saved",a.data.recipe||this.localRecipe)}}catch(e){console.error("Error toggling recipe save status:",e);let a="An error occurred while saving the recipe";navigator.onLine?404===e.response?.status?a="Recipe not found. This may be a temporary recipe that cannot be saved.":403===e.response?.status?a="You don't have permission to perform this action. Please log in again.":500===e.response?.status?a="Server error. Please try again in a moment.":400===e.response?.status?a=e.response?.data?.message||"Invalid recipe data. Please try again.":e.response?.data?.error?a=e.response.data.error:e.response?.data?.message?a=e.response.data.message:e.message?.includes("Network Error")?a="Network error. Please check your connection and try again.":e.message&&(a=e.message):a="No internet connection. Please check your network and try again.",this.$toast?.error?.(a)||alert(`Error: ${a}`),this.localRecipe.is_saved_by_user&&(this.localRecipe.is_saved_by_user=!1)}finally{this.saving=!1}}else console.warn("No recipe provided to toggle")},async generateShoppingList(){try{this.shoppingListLoading=!0,this.shoppingListError=null,this.showShoppingListModal=!0;const e=this.localRecipe?.id||this.recipe?.id,a=e&&e.toString().startsWith("fallback_");if(a){const e=this.adjustedIngredients||[];return this.shoppingListData={metadata:{total_items:e.length,generated_from:"recipe",recipe_names:[this.localRecipe.title||"Recipe"]},categories:{other:{name:"Other Items",icon:"🛒",order:1,item_count:e.length,items:e.map(e=>({name:e.formatted||e.original||e.name||"Unknown ingredient",quantity:`${e.amount||1} ${e.unit||""}`.trim(),checked:!1,notes:[]}))}}},this.shoppingListLoading=!1,void(this.$toast?.success?.("Shopping list generated successfully!")||console.log("Shopping list generated successfully!"))}const s=await Ri(`/api/meal-planning/recipes/${e}/generate_shopping_list/`,{servings_multiplier:this.servingMultiplier,adjusted_servings:this.adjustedServings},this.$store.state.auth.token);this.shoppingListData=s.shopping_list,this.shoppingListLoading=!1,this.$toast?.success?.("Shopping list generated successfully!")||console.log("Shopping list generated successfully!")}catch(e){if(console.error("Error generating shopping list:",e),e.message.includes("JSON")||e.message.includes("Empty response")){console.log("Attempting fallback shopping list generation...");try{const e=this.adjustedIngredients||[];return this.shoppingListData={metadata:{total_items:e.length,generated_from:"recipe",recipe_names:[this.localRecipe?.title||this.recipe?.title||"Recipe"]},categories:{other:{name:"Other Items",icon:"🛒",order:1,item_count:e.length,items:e.map(e=>({name:e.formatted||e.original||e.name||"Unknown ingredient",quantity:`${e.amount||1} ${e.unit||""}`.trim(),checked:!1,notes:[]}))}}},this.shoppingListLoading=!1,void(this.$toast?.warning?.("Shopping list generated with basic ingredients (API unavailable)")||console.log("Fallback shopping list generated"))}catch(a){console.error("Fallback generation also failed:",a)}}this.shoppingListError=e.message||"Failed to generate shopping list",this.shoppingListLoading=!1,this.$toast?.error?.(`Error: ${this.shoppingListError}`)||alert(`Error generating shopping list: ${this.shoppingListError}`)}},closeShoppingListModal(){this.showShoppingListModal=!1,this.shoppingListData=null,this.shoppingListError=null,this.shoppingListLoading=!1}}};const Ii=(0,V.A)(Ei,[["render",Gt],["__scopeId","data-v-4136110e"]]);var Ai=Ii,Ti={name:"MealPlanDetailModal",components:{RecipeDetailModal:Ai,ShoppingListModal:Pi},props:{mealPlan:{type:Object,required:!0}},emits:["close","regenerate-meal","get-alternatives","analyze-plan","delete-plan"],data(){return{savingRecipe:null,showRecipeModal:!1,selectedRecipe:null,showShoppingListModal:!1,shoppingListData:null,shoppingListLoading:!1,shoppingListError:null}},computed:{normalizedInstructions(){return e=>{const a=e?.recipe?.instructions||e?.instructions||[];return a&&0!==a.length?a.length&&"object"===typeof a[0]&&a[0].step?a.map((e,a)=>({number:e.number||a+1,step:e.step,description:e.step})):a.length&&"string"===typeof a[0]?a.map((e,a)=>({number:a+1,step:e,description:e})):a.length&&"object"===typeof a[0]?a.map((e,a)=>({number:e.number||a+1,step:e.step||e.description||e.instruction||`Step ${a+1}`,description:e.step||e.description||e.instruction||`Step ${a+1}`})):[]:[]}}},mounted(){if(console.log("=== MealPlanDetailModal Mounted ==="),console.log("Meal Plan ID:",this.mealPlan?.id),console.log("Plan Type:",this.mealPlan?.plan_type),console.log("Has meal_plan_data:",!!this.mealPlan?.meal_plan_data),console.log("Has meals:",!!this.mealPlan?.meal_plan_data?.meals),this.mealPlan?.meal_plan_data?.meals){const e=Object.keys(this.mealPlan.meal_plan_data.meals);if(console.log("Available meal dates:",e),console.log("Total meal days:",e.length),e.length>0){const a=e[0],s=this.mealPlan.meal_plan_data.meals[a];console.log(`Sample meals for ${a}:`,s)}}else console.log("No meal data available - checking structure:"),console.log("mealPlan keys:",Object.keys(this.mealPlan||{})),this.mealPlan?.meal_plan_data&&console.log("meal_plan_data keys:",Object.keys(this.mealPlan.meal_plan_data));console.log("====================================="),document.addEventListener("keydown",this.handleEscapeKey)},beforeUnmount(){document.removeEventListener("keydown",this.handleEscapeKey)},methods:{formatPlanType(e){return e?e.charAt(0).toUpperCase()+e.slice(1):"Unknown"},formatDateRange(e,a){if(!e||!a)return console.log("formatDateRange: Missing dates - start:",e,"end:",a),"Date unknown";try{const s=new Date(e),t=new Date(a);if(isNaN(s.getTime())||isNaN(t.getTime()))return console.log("formatDateRange: Invalid dates - start:",e,"end:",a),"Invalid date range";const i=s.toLocaleDateString(),n=t.toLocaleDateString();return e===a?i:`${i} - ${n}`}catch(s){return console.error("formatDateRange error:",s,"for dates:",e,a),"Date error"}},formatDate(e){try{if(!e)return console.log("formatDate: dateStr is null/undefined"),"Unknown Date";const a={breakfast:"Breakfast Meals",lunch:"Lunch Meals",dinner:"Dinner Meals",snack:"Snack Meals"};if(a[e.toLowerCase()])return console.log("formatDate: Detected legacy meal type structure:",e),a[e.toLowerCase()];const s=new Date(e);return isNaN(s.getTime())?(console.log("formatDate: Invalid date for input:",e),e):s.toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"})}catch(a){return console.error("formatDate error:",a,"for input:",e),e||"Unknown Date"}},formatMealType(e){if(!e)return"Meal";const a=String(e).toLowerCase().trim(),s={breakfast:"Breakfast",lunch:"Lunch",dinner:"Dinner",snack:"Snack",dessert:"Dessert"};return s[a]||e.charAt(0).toUpperCase()+e.slice(1)},getMealTitle(e){if(console.log("getMealTitle called for meal:",e),e?.title)return e.title;if(e?.name)return e.name;if(e?.recipe?.title)return e.recipe.title;if(e?.recipe?.name)return e.recipe.name;const a=this.formatMealType(e?.meal_type);return console.log("getMealTitle fallback to meal type:",a),a||"Meal"},inferMealTypeFromTime(e){const a=e.getHours();return a>=5&&a<11?"breakfast":a>=11&&a<16?"lunch":a>=16&&a<22?"dinner":"snack"},getMealTime(e){if(console.log("getMealTime called for meal:",e),e?.time)return e.time;if(e?.scheduled_time)return e.scheduled_time;if(e?.recipe?.time)return e.recipe.time;if(e?.recipe?.scheduled_time)return e.recipe.scheduled_time;const a=e?.meal_type?.toLowerCase(),s={breakfast:"08:00",lunch:"12:30",dinner:"19:00",snack:"15:00"},t=s[a]||"12:00";return console.log("getMealTime using default time:",t,"for meal type:",a),t},getMealRecipe(e){return e?.recipe||e||{}},getMealIngredients(e){const a=this.getMealRecipe(e);return a.ingredients&&Array.isArray(a.ingredients)?a.ingredients:a.extendedIngredients&&Array.isArray(a.extendedIngredients)?a.extendedIngredients:[]},getMealTypeClass(e){return e?String(e).toLowerCase():"meal"},getTotalMeals(){if(!this.mealPlan.meal_plan_data?.meals)return 0;let e=0;return Object.values(this.mealPlan.meal_plan_data.meals).forEach(a=>{Array.isArray(a)&&(e+=a.length)}),e},getNutritionValue(e,a){if(!e)return 0;if(e.estimated_nutrition&&void 0!==e.estimated_nutrition[a])return Math.round(e.estimated_nutrition[a]);if(e.nutrition&&void 0!==e.nutrition[a])return Math.round(e.nutrition[a]);const s={calories:["calories_per_serving","kcal"],protein:["protein_per_serving"],carbs:["carbs_per_serving","carbohydrates"],fat:["fat_per_serving","fats"]};if(s[a])for(const t of s[a])if(void 0!==e[t])return Math.round(e[t]);return 0},regenerateMeal(e,a){if(console.log("=== regenerateMeal called ==="),console.log("Date:",e),console.log("MealType (raw):",a),console.log("MealType type:",typeof a),!a||"undefined"===a||"null"===a){console.error("Invalid mealType provided:",a);const e=this.inferMealTypeFromTime(new Date);console.log("Using inferred meal type:",e),a=e}const s=String(a).toLowerCase().trim();console.log("Final cleaned mealType:",s),console.log("============================="),this.$emit("regenerate-meal",{day:e,mealType:s})},getAlternatives(e,a){if(console.log("=== getAlternatives called ==="),console.log("Date:",e),console.log("MealType (raw):",a),!a||"undefined"===a||"null"===a){console.error("Invalid mealType provided for alternatives:",a);const e=this.inferMealTypeFromTime(new Date);console.log("Using inferred meal type for alternatives:",e),a=e}const s=String(a).toLowerCase().trim();console.log("Final cleaned mealType for alternatives:",s),console.log("=================================="),this.$emit("get-alternatives",{day:e,mealType:s})},async toggleRecipeSave(e){if(this.savingRecipe!==(e.id||e.spoonacular_id)){this.savingRecipe=e.id||e.spoonacular_id;try{console.log("Toggling save status for recipe:",e);const a=e.spoonacular_id||e.id;if(a&&String(a).startsWith("fallback_"))return void(this.$toast?.error?.("This is a temporary recipe that cannot be saved to your collection.")||alert("This is a temporary recipe that cannot be saved to your collection."));const{mealPlanningApi:t}=await Promise.resolve().then(s.bind(s,5090));let i;if(e.is_saved_by_user){if(!e.id)throw new Error("Cannot remove recipe: No recipe ID found");const a=e.id.toString().startsWith("fallback_");if(a)throw new Error("Cannot remove fallback recipe: Not saved in database");i=await t.removeRecipeFromMyCollection(e.id),e.is_saved_by_user=!1;const s=i.data?.message||"Recipe removed from your collection!";this.$toast?.success?.(s)||alert(s)}else{if(!e.title&&!e.name)throw new Error("Recipe must have a title to be saved");const a={title:e.title||e.name||"Untitled Recipe",summary:e.summary||"",cuisine:e.cuisine||"",meal_type:e.meal_type||"dinner",servings:e.servings||4,prep_time_minutes:e.prep_time||e.prep_time_minutes||30,cook_time_minutes:e.cook_time||e.cook_time_minutes||0,total_time_minutes:e.total_time||e.total_time_minutes||30,difficulty_level:e.difficulty_level||"medium",spoonacular_id:e.spoonacular_id||e.id,ingredients_data:e.ingredients||e.ingredients_data||[],instructions:e.instructions||[],calories_per_serving:this.getNutritionValue(e,"calories")||300,protein_per_serving:this.getNutritionValue(e,"protein")||15,carbs_per_serving:this.getNutritionValue(e,"carbs")||30,fat_per_serving:this.getNutritionValue(e,"fat")||10,fiber_per_serving:this.getNutritionValue(e,"fiber")||0,dietary_tags:e.dietary_tags||[],allergens:e.allergens||[],image_url:e.image_url||e.image||"",source_url:e.source_url||"",source_type:"spoonacular"};i=await t.saveRecipeFromMealPlan(a),e.is_saved_by_user=!0;const s=i.data?.message||"Recipe saved to your collection!";this.$toast?.success?.(s)||alert(s)}}catch(a){console.error("Error toggling recipe save status:",a);let e="An error occurred while saving the recipe";if(navigator.onLine)if(400===a.response?.status){const s=a.response.data;e="Cannot save fallback recipe"===s.error?s.message||"This is a temporary recipe that cannot be saved.":s.message||"Invalid recipe data. Please try again."}else if(404===a.response?.status)e="Recipe not found. This may be a temporary recipe that cannot be saved.";else if(403===a.response?.status)e="You don't have permission to perform this action. Please log in again.";else if(500===a.response?.status){const s=a.response.data;e=s.details?`Server error: ${s.details}`:"A server error occurred. Please try again later."}else a.message&&(e=a.message);else e="No internet connection. Please check your network and try again.";this.$toast?.error?.(e)||alert(e)}finally{this.savingRecipe=null}}},viewRecipeDetails(e){if(e){const a=e.recipe||e;a.is_saved_by_user||(a.is_saved_by_user=!1),this.selectedRecipe=a,this.showRecipeModal=!0}},async generateShoppingList(){try{this.shoppingListLoading=!0,this.shoppingListError=null,this.showShoppingListModal=!0;const e=await Ri(`/api/meal-planning/meal-plans/${this.mealPlan.id}/generate_shopping_list/`,{exclude_items:[],group_by_category:!0},this.$store.state.auth.token);this.shoppingListData=e.shopping_list,this.shoppingListLoading=!1,this.$toast?.success?.("Shopping list generated successfully!")||console.log("Shopping list generated successfully!")}catch(e){if(console.error("Error generating shopping list:",e),e.message.includes("JSON")||e.message.includes("Empty response")){console.log("Attempting fallback shopping list generation...");try{const e=[],a=[];this.mealPlan?.meal_plan_data?.meals&&Object.entries(this.mealPlan.meal_plan_data.meals).forEach(([,s])=>{s.forEach(s=>{s.title&&a.push(s.title),s.extendedIngredients?s.extendedIngredients.forEach(a=>{e.push({name:a.name||a.original||"Unknown ingredient",quantity:`${a.amount||1} ${a.unit||""}`.trim(),checked:!1,notes:[]})}):s.ingredients&&s.ingredients.forEach(a=>{e.push({name:a,quantity:"1",checked:!1,notes:[]})})})});const s=this.mealPlan?.meal_plan_data?.start_date||(new Date).toISOString(),t=this.mealPlan?.meal_plan_data?.end_date||(new Date).toISOString();return this.shoppingListData={metadata:{total_items:e.length,generated_from:"meal_plan",start_date:s,end_date:t,recipe_names:a},categories:{other:{name:"Other Items",icon:"🛒",order:1,item_count:e.length,items:e}}},this.shoppingListLoading=!1,void(this.$toast?.warning?.("Shopping list generated with basic ingredients (API unavailable)")||console.log("Fallback shopping list generated"))}catch(a){console.error("Fallback generation also failed:",a)}}this.shoppingListError=e.message||"Failed to generate shopping list",this.shoppingListLoading=!1,this.$toast?.error?.(`Error: ${this.shoppingListError}`)||alert(`Error generating shopping list: ${this.shoppingListError}`)}},analyzePlan(){this.$emit("analyze-plan",this.mealPlan)},deletePlan(){this.$emit("delete-plan",this.mealPlan)},closeRecipeModal(){this.showRecipeModal=!1,this.selectedRecipe=null},closeShoppingListModal(){this.showShoppingListModal=!1,this.shoppingListData=null,this.shoppingListError=null,this.shoppingListLoading=!1},async onRecipeSaved(e){console.log("Recipe saved from meal plan detail:",e),this.$toast?.success?.("Recipe saved to your collection!")||alert("Recipe saved to your collection!")},handleEscapeKey(e){"Escape"===e.key&&this.$emit("close")}}};const Di=(0,V.A)(Ti,[["render",Qs],["__scopeId","data-v-36bae79e"]]);var Xi=Di;const $i={class:"modal-header"},xi={class:"header-content"},Fi={class:"modal-body"},Ni={key:0,class:"loading-state"},Wi={key:1,class:"error-state"},ji={key:2,class:"analysis-results"},Qi={class:"overall-score-section"},Ui={class:"score-circle"},zi={viewBox:"0 0 100 100",class:"circular-progress"},Oi={class:"score-content"},Gi={class:"score-number"},Bi={class:"score-description"},Zi={class:"analysis-section"},Vi={key:0,class:"adequacy-grid"},Hi={class:"nutrient-header"},qi={class:"nutrient-name"},Ki={class:"nutrient-status"},Ji={class:"nutrient-progress"},Yi={class:"progress-bar"},en={class:"percentage"},an={key:0,class:"analysis-section"},sn={class:"distribution-chart"},tn={class:"distribution-bars"},nn={class:"meal-bar"},ln={class:"bar"},rn={class:"percentage"},on={class:"meal-bar"},cn={class:"bar"},dn={class:"percentage"},pn={class:"meal-bar"},un={class:"bar"},gn={class:"percentage"},mn={class:"distribution-rating"},hn={key:1,class:"analysis-section"},vn={class:"variety-metrics"},kn={class:"variety-item"},yn={class:"variety-item"},fn={class:"variety-item"},Ln={key:2,class:"analysis-section"},_n={class:"highlights-list"},bn={key:3,class:"analysis-section"},Cn={class:"recommendations-list"},Mn={key:4,class:"analysis-section"},wn={class:"improvements-list"},Pn={class:"modal-footer"},Sn=["disabled"];function Rn(e,a,s,n,l,r){return(0,t.uX)(),(0,t.CE)("div",{class:"modal-overlay",onClick:a[4]||(a[4]=a=>e.$emit("close"))},[(0,t.Lk)("div",{class:"modal-content analysis-modal",onClick:a[3]||(a[3]=(0,m.D$)(()=>{},["stop"]))},[(0,t.Lk)("div",$i,[(0,t.Lk)("div",xi,[a[5]||(a[5]=(0,t.Lk)("h2",null,[(0,t.Lk)("i",{class:"fas fa-chart-line"}),(0,t.eW)(" AI Nutritional Analysis ")],-1)),(0,t.Lk)("p",null,(0,i.v_)(r.formatPlanType(s.mealPlan.plan_type))+" Plan - "+(0,i.v_)(r.formatDateRange(s.mealPlan.start_date,s.mealPlan.end_date)),1)]),(0,t.Lk)("button",{onClick:a[0]||(a[0]=a=>e.$emit("close")),class:"close-btn"},a[6]||(a[6]=[(0,t.Lk)("i",{class:"fas fa-times"},null,-1)]))]),(0,t.Lk)("div",Fi,[s.analysis.loading?((0,t.uX)(),(0,t.CE)("div",Ni,[a[7]||(a[7]=(0,t.Lk)("div",{class:"loading-spinner"},null,-1)),a[8]||(a[8]=(0,t.Lk)("h3",null,"AI is Analyzing Your Meal Plan",-1)),(0,t.Lk)("p",null,(0,i.v_)(s.analysis.message),1)])):s.analysis.error?((0,t.uX)(),(0,t.CE)("div",Wi,[a[9]||(a[9]=(0,t.Lk)("i",{class:"fas fa-exclamation-triangle"},null,-1)),a[10]||(a[10]=(0,t.Lk)("h3",null,"Analysis Unavailable",-1)),(0,t.Lk)("p",null,(0,i.v_)(s.analysis.message),1)])):((0,t.uX)(),(0,t.CE)("div",ji,[(0,t.Lk)("div",Qi,[(0,t.Lk)("div",Ui,[((0,t.uX)(),(0,t.CE)("svg",zi,[a[11]||(a[11]=(0,t.Lk)("circle",{cx:"50",cy:"50",r:"45",class:"circle-bg"},null,-1)),(0,t.Lk)("circle",{cx:"50",cy:"50",r:"45",class:"circle-progress",style:(0,i.Tr)(`stroke-dasharray: ${2.827*s.analysis.overall_score}, 282.7`)},null,4)])),(0,t.Lk)("div",Oi,[(0,t.Lk)("span",Gi,(0,i.v_)(s.analysis.overall_score||0),1),a[12]||(a[12]=(0,t.Lk)("span",{class:"score-label"},"Overall Score",-1))])]),(0,t.Lk)("div",Bi,[a[13]||(a[13]=(0,t.Lk)("h3",null,"Nutritional Quality Assessment",-1)),(0,t.Lk)("p",null,(0,i.v_)(r.getScoreDescription(s.analysis.overall_score)),1)])]),(0,t.Lk)("div",Zi,[a[14]||(a[14]=(0,t.Lk)("h3",null,[(0,t.Lk)("i",{class:"fas fa-balance-scale"}),(0,t.eW)(" Nutritional Adequacy ")],-1)),s.analysis.nutritional_adequacy?((0,t.uX)(),(0,t.CE)("div",Vi,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(s.analysis.nutritional_adequacy,(e,a)=>((0,t.uX)(),(0,t.CE)("div",{key:a,class:(0,i.C4)(["nutrient-card",r.getAdequacyClass(e.status)])},[(0,t.Lk)("div",Hi,[(0,t.Lk)("span",qi,(0,i.v_)(r.formatNutrientName(a)),1),(0,t.Lk)("span",Ki,(0,i.v_)(r.formatStatus(e.status)),1)]),(0,t.Lk)("div",Ji,[(0,t.Lk)("div",Yi,[(0,t.Lk)("div",{class:"progress-fill",style:(0,i.Tr)(`width: ${Math.min(e.percentage_of_target||0,150)}%`)},null,4)]),(0,t.Lk)("span",en,(0,i.v_)(e.percentage_of_target||0)+"% of target",1)])],2))),128))])):(0,t.Q3)("",!0)]),s.analysis.meal_distribution?((0,t.uX)(),(0,t.CE)("div",an,[a[19]||(a[19]=(0,t.Lk)("h3",null,[(0,t.Lk)("i",{class:"fas fa-clock"}),(0,t.eW)(" Meal Distribution ")],-1)),(0,t.Lk)("div",sn,[(0,t.Lk)("div",tn,[(0,t.Lk)("div",nn,[a[15]||(a[15]=(0,t.Lk)("span",{class:"meal-label"},"Breakfast",-1)),(0,t.Lk)("div",ln,[(0,t.Lk)("div",{class:"bar-fill breakfast",style:(0,i.Tr)(`width: ${s.analysis.meal_distribution.breakfast_percentage||0}%`)},null,4)]),(0,t.Lk)("span",rn,(0,i.v_)(s.analysis.meal_distribution.breakfast_percentage||0)+"%",1)]),(0,t.Lk)("div",on,[a[16]||(a[16]=(0,t.Lk)("span",{class:"meal-label"},"Lunch",-1)),(0,t.Lk)("div",cn,[(0,t.Lk)("div",{class:"bar-fill lunch",style:(0,i.Tr)(`width: ${s.analysis.meal_distribution.lunch_percentage||0}%`)},null,4)]),(0,t.Lk)("span",dn,(0,i.v_)(s.analysis.meal_distribution.lunch_percentage||0)+"%",1)]),(0,t.Lk)("div",pn,[a[17]||(a[17]=(0,t.Lk)("span",{class:"meal-label"},"Dinner",-1)),(0,t.Lk)("div",un,[(0,t.Lk)("div",{class:"bar-fill dinner",style:(0,i.Tr)(`width: ${s.analysis.meal_distribution.dinner_percentage||0}%`)},null,4)]),(0,t.Lk)("span",gn,(0,i.v_)(s.analysis.meal_distribution.dinner_percentage||0)+"%",1)])]),(0,t.Lk)("div",mn,[a[18]||(a[18]=(0,t.Lk)("span",{class:"rating-label"},"Balance Rating:",-1)),(0,t.Lk)("span",{class:(0,i.C4)(["rating-value",r.getRatingClass(s.analysis.meal_distribution.balance_rating)])},(0,i.v_)(r.formatRating(s.analysis.meal_distribution.balance_rating)),3)])])])):(0,t.Q3)("",!0),s.analysis.variety_analysis?((0,t.uX)(),(0,t.CE)("div",hn,[a[23]||(a[23]=(0,t.Lk)("h3",null,[(0,t.Lk)("i",{class:"fas fa-seedling"}),(0,t.eW)(" Variety & Diversity ")],-1)),(0,t.Lk)("div",vn,[(0,t.Lk)("div",kn,[a[20]||(a[20]=(0,t.Lk)("span",{class:"metric-label"},"Cuisine Diversity:",-1)),(0,t.Lk)("span",{class:(0,i.C4)(["metric-badge",r.getVarietyClass(s.analysis.variety_analysis.cuisine_diversity)])},(0,i.v_)(r.formatRating(s.analysis.variety_analysis.cuisine_diversity)),3)]),(0,t.Lk)("div",yn,[a[21]||(a[21]=(0,t.Lk)("span",{class:"metric-label"},"Ingredient Variety:",-1)),(0,t.Lk)("span",{class:(0,i.C4)(["metric-badge",r.getVarietyClass(s.analysis.variety_analysis.ingredient_variety)])},(0,i.v_)(r.formatRating(s.analysis.variety_analysis.ingredient_variety)),3)]),(0,t.Lk)("div",fn,[a[22]||(a[22]=(0,t.Lk)("span",{class:"metric-label"},"Cooking Methods:",-1)),(0,t.Lk)("span",{class:(0,i.C4)(["metric-badge",r.getVarietyClass(s.analysis.variety_analysis.cooking_method_diversity)])},(0,i.v_)(r.formatRating(s.analysis.variety_analysis.cooking_method_diversity)),3)])])])):(0,t.Q3)("",!0),s.analysis.health_highlights&&s.analysis.health_highlights.length?((0,t.uX)(),(0,t.CE)("div",Ln,[a[25]||(a[25]=(0,t.Lk)("h3",null,[(0,t.Lk)("i",{class:"fas fa-star"}),(0,t.eW)(" Health Highlights ")],-1)),(0,t.Lk)("div",_n,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(s.analysis.health_highlights,(e,s)=>((0,t.uX)(),(0,t.CE)("div",{key:s,class:"highlight-item"},[a[24]||(a[24]=(0,t.Lk)("i",{class:"fas fa-check-circle"},null,-1)),(0,t.Lk)("span",null,(0,i.v_)(e),1)]))),128))])])):(0,t.Q3)("",!0),s.analysis.recommendations&&s.analysis.recommendations.length?((0,t.uX)(),(0,t.CE)("div",bn,[a[27]||(a[27]=(0,t.Lk)("h3",null,[(0,t.Lk)("i",{class:"fas fa-lightbulb"}),(0,t.eW)(" AI Recommendations ")],-1)),(0,t.Lk)("div",Cn,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(s.analysis.recommendations,(e,s)=>((0,t.uX)(),(0,t.CE)("div",{key:s,class:"recommendation-item"},[a[26]||(a[26]=(0,t.Lk)("i",{class:"fas fa-arrow-right"},null,-1)),(0,t.Lk)("span",null,(0,i.v_)(e),1)]))),128))])])):(0,t.Q3)("",!0),s.analysis.areas_for_improvement&&s.analysis.areas_for_improvement.length?((0,t.uX)(),(0,t.CE)("div",Mn,[a[29]||(a[29]=(0,t.Lk)("h3",null,[(0,t.Lk)("i",{class:"fas fa-target"}),(0,t.eW)(" Areas for Improvement ")],-1)),(0,t.Lk)("div",wn,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(s.analysis.areas_for_improvement,(e,s)=>((0,t.uX)(),(0,t.CE)("div",{key:s,class:"improvement-item"},[a[28]||(a[28]=(0,t.Lk)("i",{class:"fas fa-exclamation-circle"},null,-1)),(0,t.Lk)("span",null,(0,i.v_)(e),1)]))),128))])])):(0,t.Q3)("",!0)]))]),(0,t.Lk)("div",Pn,[(0,t.Lk)("button",{onClick:a[1]||(a[1]=a=>e.$emit("close")),class:"btn btn-secondary"},"Close Analysis"),(0,t.Lk)("button",{onClick:a[2]||(a[2]=(...e)=>r.downloadReport&&r.downloadReport(...e)),class:"btn btn-primary",disabled:s.analysis.loading||s.analysis.error},a[30]||(a[30]=[(0,t.Lk)("i",{class:"fas fa-download"},null,-1),(0,t.eW)(" Download Report ")]),8,Sn)])])])}s(4603),s(7566),s(8721);var En={name:"NutritionalAnalysisModal",props:{analysis:{type:Object,required:!0},mealPlan:{type:Object,required:!0}},emits:["close"],methods:{formatPlanType(e){return e.charAt(0).toUpperCase()+e.slice(1)},formatDateRange(e,a){const s=new Date(e).toLocaleDateString(),t=new Date(a).toLocaleDateString();return e===a?s:`${s} - ${t}`},getScoreDescription(e){return e>=90?"Excellent nutritional balance! Your meal plan meets all dietary guidelines.":e>=80?"Very good nutritional quality with minor areas for optimization.":e>=70?"Good nutritional foundation with some room for improvement.":e>=60?"Adequate nutrition but several areas could be enhanced.":"Significant nutritional improvements recommended."},formatNutrientName(e){const a={calories:"Calories",protein:"Protein",carbs:"Carbohydrates",fat:"Fat",fiber:"Fiber",sodium:"Sodium"};return a[e]||e.charAt(0).toUpperCase()+e.slice(1)},formatStatus(e){const a={adequate:"Adequate",insufficient:"Low",excessive:"High",too_high:"Too High",too_low:"Too Low",within_range:"Good",balanced:"Balanced"};return a[e]||e.replace("_"," ").toUpperCase()},formatRating(e){return e?e.charAt(0).toUpperCase()+e.slice(1):"N/A"},getAdequacyClass(e){const a={adequate:"adequate",within_range:"adequate",balanced:"adequate",insufficient:"insufficient",too_low:"insufficient",excessive:"excessive",too_high:"excessive"};return a[e]||"neutral"},getRatingClass(e){const a={excellent:"excellent",very_good:"very-good",good:"good",fair:"fair",poor:"poor"};return a[e]||"neutral"},getVarietyClass(e){const a={excellent:"excellent",very_good:"very-good",good:"good",fair:"fair",poor:"poor"};return a[e]||"neutral"},downloadReport(){let e="AI Nutritional Analysis Report\n";e+="================================\n\n",e+=`Meal Plan: ${this.formatPlanType(this.mealPlan.plan_type)} Plan\n`,e+=`Date Range: ${this.formatDateRange(this.mealPlan.start_date,this.mealPlan.end_date)}\n`,e+=`Generated: ${(new Date).toLocaleDateString()}\n\n`,e+=`Overall Score: ${this.analysis.overall_score||"N/A"}/100\n\n`,this.analysis.health_highlights&&this.analysis.health_highlights.length&&(e+="Health Highlights:\n",this.analysis.health_highlights.forEach(a=>{e+=`• ${a}\n`}),e+="\n"),this.analysis.recommendations&&this.analysis.recommendations.length&&(e+="AI Recommendations:\n",this.analysis.recommendations.forEach(a=>{e+=`• ${a}\n`}),e+="\n"),this.analysis.areas_for_improvement&&this.analysis.areas_for_improvement.length&&(e+="Areas for Improvement:\n",this.analysis.areas_for_improvement.forEach(a=>{e+=`• ${a}\n`}));const a=new Blob([e],{type:"text/plain"}),s=window.URL.createObjectURL(a),t=document.createElement("a");t.href=s,t.download=`nutrition-analysis-${this.mealPlan.start_date}.txt`,document.body.appendChild(t),t.click(),document.body.removeChild(t),window.URL.revokeObjectURL(s)}}};const In=(0,V.A)(En,[["render",Rn],["__scopeId","data-v-213abc86"]]);var An=In;const Tn={class:"modal fade show",style:{display:"block"},tabindex:"-1",role:"dialog","aria-labelledby":"alternativesModalLabel","aria-modal":"true"},Dn={class:"modal-dialog modal-xl",role:"document"},Xn={class:"modal-content"},$n={class:"modal-header"},xn={class:"modal-title",id:"alternativesModalLabel"},Fn={key:0,class:"text-muted"},Nn={class:"modal-body"},Wn={class:"alternatives-options mb-4"},jn={class:"row"},Qn={class:"col-md-6"},Un={class:"form-check form-switch"},zn={class:"col-md-6"},On={class:"form-group"},Gn={key:0,class:"text-center py-5"},Bn={key:1,class:"alert alert-danger",role:"alert"},Zn={key:2,class:"alternatives-grid"},Vn={class:"alternatives-summary mb-3"},Hn={class:"row"},qn={class:"col-md-8"},Kn={class:"mb-1"},Jn={key:0,class:"badge bg-danger ms-2"},Yn={key:1,class:"badge bg-primary ms-1"},el={class:"row"},al=["onClick"],sl={class:"recipe-source-badge"},tl={key:0,class:"badge bg-danger"},il={key:1,class:"badge bg-primary"},nl={class:"recipe-image-container"},ll=["src","alt"],rl={class:"card-body"},ol={class:"card-title"},cl={class:"recipe-info mb-2"},dl={class:"text-muted d-flex justify-content-between"},pl={key:0},ul={class:"card-text small"},gl={key:0,class:"nutrition-preview"},ml={class:"nutrition-mini d-flex justify-content-between mt-1"},hl={key:0},vl={key:1},kl={key:2},yl={key:3,class:"text-center py-5"},fl={class:"text-muted"},Ll={key:0},_l={key:1},bl={class:"modal-footer"},Cl=["disabled"];function Ml(e,a,s,n,l,r){return(0,t.uX)(),(0,t.CE)("div",Tn,[(0,t.Lk)("div",Dn,[(0,t.Lk)("div",Xn,[(0,t.Lk)("div",$n,[(0,t.Lk)("h5",xn,[a[10]||(a[10]=(0,t.Lk)("i",{class:"fas fa-exchange-alt"},null,-1)),(0,t.eW)(" Recipe Alternatives for "+(0,i.v_)(r.formatMealType(s.mealType))+" ",1),s.day?((0,t.uX)(),(0,t.CE)("span",Fn,"- "+(0,i.v_)(r.formatDate(s.day)),1)):(0,t.Q3)("",!0)]),(0,t.Lk)("button",{type:"button",class:"btn-close",onClick:a[0]||(a[0]=a=>e.$emit("close")),"aria-label":"Close"})]),(0,t.Lk)("div",Nn,[(0,t.Lk)("div",Wn,[(0,t.Lk)("div",jn,[(0,t.Lk)("div",Qn,[(0,t.Lk)("div",Un,[(0,t.bo)((0,t.Lk)("input",{class:"form-check-input",type:"checkbox",id:"includeUserRecipes","onUpdate:modelValue":a[1]||(a[1]=e=>l.includeUserRecipes=e),onChange:a[2]||(a[2]=(...e)=>r.loadAlternatives&&r.loadAlternatives(...e))},null,544),[[m.lH,l.includeUserRecipes]]),a[11]||(a[11]=(0,t.Lk)("label",{class:"form-check-label",for:"includeUserRecipes"},[(0,t.Lk)("i",{class:"fas fa-heart text-danger"}),(0,t.eW)(" Include My Saved Recipes ")],-1))])]),(0,t.Lk)("div",zn,[(0,t.Lk)("div",On,[a[13]||(a[13]=(0,t.Lk)("label",{for:"alternativeCount",class:"form-label"},"Number of alternatives:",-1)),(0,t.bo)((0,t.Lk)("select",{class:"form-select form-select-sm",id:"alternativeCount","onUpdate:modelValue":a[3]||(a[3]=e=>l.alternativeCount=e),onChange:a[4]||(a[4]=(...e)=>r.loadAlternatives&&r.loadAlternatives(...e)),style:{width:"auto",display:"inline-block"}},a[12]||(a[12]=[(0,t.Lk)("option",{value:"3"},"3",-1),(0,t.Lk)("option",{value:"5"},"5",-1),(0,t.Lk)("option",{value:"8"},"8",-1),(0,t.Lk)("option",{value:"10"},"10",-1)]),544),[[m.u1,l.alternativeCount]])])])])]),l.loading?((0,t.uX)(),(0,t.CE)("div",Gn,a[14]||(a[14]=[(0,t.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,t.Lk)("span",{class:"visually-hidden"},"Loading alternatives...")],-1),(0,t.Lk)("p",{class:"mt-3 text-muted"},"Finding the perfect alternatives for you...",-1)]))):l.error?((0,t.uX)(),(0,t.CE)("div",Bn,[a[16]||(a[16]=(0,t.Lk)("i",{class:"fas fa-exclamation-triangle"},null,-1)),(0,t.eW)(" "+(0,i.v_)(l.error)+" ",1),(0,t.Lk)("button",{class:"btn btn-sm btn-outline-danger ms-2",onClick:a[5]||(a[5]=(...e)=>r.loadAlternatives&&r.loadAlternatives(...e))},a[15]||(a[15]=[(0,t.Lk)("i",{class:"fas fa-redo"},null,-1),(0,t.eW)(" Retry ")]))])):l.alternatives.length>0?((0,t.uX)(),(0,t.CE)("div",Zn,[(0,t.Lk)("div",Vn,[(0,t.Lk)("div",Hn,[(0,t.Lk)("div",qn,[(0,t.Lk)("p",Kn,[(0,t.Lk)("strong",null,(0,i.v_)(l.alternatives.length),1),a[19]||(a[19]=(0,t.eW)(" alternatives found ")),r.userRecipeCount>0?((0,t.uX)(),(0,t.CE)("span",Jn,[a[17]||(a[17]=(0,t.Lk)("i",{class:"fas fa-heart"},null,-1)),(0,t.eW)(" "+(0,i.v_)(r.userRecipeCount)+" from your recipes ",1)])):(0,t.Q3)("",!0),r.externalRecipeCount>0?((0,t.uX)(),(0,t.CE)("span",Yn,[a[18]||(a[18]=(0,t.Lk)("i",{class:"fas fa-globe"},null,-1)),(0,t.eW)(" "+(0,i.v_)(r.externalRecipeCount)+" suggestions ",1)])):(0,t.Q3)("",!0)])]),a[20]||(a[20]=(0,t.Lk)("div",{class:"col-md-4 text-end"},[(0,t.Lk)("small",{class:"text-muted"},[(0,t.Lk)("i",{class:"fas fa-info-circle"}),(0,t.eW)(" Click any recipe to replace your current meal ")])],-1))])]),(0,t.Lk)("div",el,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(l.alternatives,e=>((0,t.uX)(),(0,t.CE)("div",{key:e.id,class:"col-md-6 col-lg-4 mb-4"},[(0,t.Lk)("div",{class:(0,i.C4)(["recipe-alternative-card card h-100",{"user-recipe":e.is_user_recipe}]),onClick:a=>r.selectAlternative(e),style:{cursor:"pointer"}},[(0,t.Lk)("div",sl,[e.is_user_recipe?((0,t.uX)(),(0,t.CE)("span",tl,a[21]||(a[21]=[(0,t.Lk)("i",{class:"fas fa-heart"},null,-1),(0,t.eW)(" My Recipe ")]))):((0,t.uX)(),(0,t.CE)("span",il,a[22]||(a[22]=[(0,t.Lk)("i",{class:"fas fa-globe"},null,-1),(0,t.eW)(" Suggestion ")])))]),(0,t.Lk)("div",nl,[(0,t.Lk)("img",{src:e.image||"/api/placeholder/300/200",class:"card-img-top recipe-image",alt:e.title,onError:a[6]||(a[6]=(...e)=>r.handleImageError&&r.handleImageError(...e))},null,40,ll),a[23]||(a[23]=(0,t.Lk)("div",{class:"recipe-overlay"},[(0,t.Lk)("button",{class:"btn btn-primary btn-sm"},[(0,t.Lk)("i",{class:"fas fa-exchange-alt"}),(0,t.eW)(" Use This Recipe ")])],-1))]),(0,t.Lk)("div",rl,[(0,t.Lk)("h6",ol,(0,i.v_)(e.title),1),(0,t.Lk)("div",cl,[(0,t.Lk)("small",dl,[(0,t.Lk)("span",null,[a[24]||(a[24]=(0,t.Lk)("i",{class:"fas fa-clock"},null,-1)),(0,t.eW)(" "+(0,i.v_)(e.readyInMinutes||30)+"min ",1)]),(0,t.Lk)("span",null,[a[25]||(a[25]=(0,t.Lk)("i",{class:"fas fa-users"},null,-1)),(0,t.eW)(" "+(0,i.v_)(e.servings||1),1)]),e.rating?((0,t.uX)(),(0,t.CE)("span",pl,[a[26]||(a[26]=(0,t.Lk)("i",{class:"fas fa-star text-warning"},null,-1)),(0,t.eW)(" "+(0,i.v_)(e.rating.toFixed(1)),1)])):(0,t.Q3)("",!0)])]),(0,t.Lk)("p",ul,(0,i.v_)(r.truncateSummary(e.summary)),1),e.nutrition&&Object.keys(e.nutrition).length>0?((0,t.uX)(),(0,t.CE)("div",gl,[a[27]||(a[27]=(0,t.Lk)("small",{class:"text-muted"},[(0,t.Lk)("i",{class:"fas fa-chart-bar"}),(0,t.eW)(" Nutrition per serving ")],-1)),(0,t.Lk)("div",ml,[e.nutrition.calories?((0,t.uX)(),(0,t.CE)("span",hl,(0,i.v_)(Math.round(e.nutrition.calories))+"cal ",1)):(0,t.Q3)("",!0),e.nutrition.protein?((0,t.uX)(),(0,t.CE)("span",vl,(0,i.v_)(Math.round(e.nutrition.protein))+"g protein ",1)):(0,t.Q3)("",!0),e.nutrition.carbs?((0,t.uX)(),(0,t.CE)("span",kl,(0,i.v_)(Math.round(e.nutrition.carbs))+"g carbs ",1)):(0,t.Q3)("",!0)])])):(0,t.Q3)("",!0)])],10,al)]))),128))])])):((0,t.uX)(),(0,t.CE)("div",yl,[a[29]||(a[29]=(0,t.Lk)("i",{class:"fas fa-search fa-3x text-muted mb-3"},null,-1)),a[30]||(a[30]=(0,t.Lk)("h5",{class:"text-muted"},"No alternatives found",-1)),(0,t.Lk)("p",fl,[l.includeUserRecipes?((0,t.uX)(),(0,t.CE)("span",_l," No matching recipes found for "+(0,i.v_)(r.formatMealType(s.mealType))+". ",1)):((0,t.uX)(),(0,t.CE)("span",Ll,' Try enabling "Include My Saved Recipes" or save some recipes first. '))]),(0,t.Lk)("button",{class:"btn btn-outline-primary",onClick:a[7]||(a[7]=(...e)=>r.loadAlternatives&&r.loadAlternatives(...e))},a[28]||(a[28]=[(0,t.Lk)("i",{class:"fas fa-redo"},null,-1),(0,t.eW)(" Try Again ")]))]))]),(0,t.Lk)("div",bl,[(0,t.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:a[8]||(a[8]=a=>e.$emit("close"))},a[31]||(a[31]=[(0,t.Lk)("i",{class:"fas fa-times"},null,-1),(0,t.eW)(" Cancel ")])),(0,t.Lk)("button",{type:"button",class:"btn btn-outline-primary",onClick:a[9]||(a[9]=(...e)=>r.loadAlternatives&&r.loadAlternatives(...e)),disabled:l.loading},a[32]||(a[32]=[(0,t.Lk)("i",{class:"fas fa-redo"},null,-1),(0,t.eW)(" Refresh Alternatives ")]),8,Cl)])])])])}var wl={name:"AlternativesModal",props:{planId:{type:[String,Number],required:!0},day:{type:String,required:!0},mealType:{type:String,required:!0}},emits:["close","alternative-selected"],data(){return{loading:!1,error:null,alternatives:[],includeUserRecipes:!0,alternativeCount:5,selectedRecipe:null}},computed:{userRecipeCount(){return this.alternatives.filter(e=>e.is_user_recipe).length},externalRecipeCount(){return this.alternatives.filter(e=>!e.is_user_recipe).length}},mounted(){this.loadAlternatives(),document.addEventListener("keydown",this.handleEscapeKey)},beforeUnmount(){document.removeEventListener("keydown",this.handleEscapeKey)},methods:{async loadAlternatives(){this.loading=!0,this.error=null;try{console.log("Loading alternatives:",{planId:this.planId,day:this.day,mealType:this.mealType,count:this.alternativeCount,includeUserRecipes:this.includeUserRecipes});const e=await Ye.mealPlanningApi.getMealAlternatives(this.planId,this.day,this.mealType,this.alternativeCount,this.includeUserRecipes);console.log("Alternatives response:",e.data),e.data&&e.data.alternatives?this.alternatives=e.data.alternatives:Array.isArray(e.data)?this.alternatives=e.data:this.alternatives=[],console.log(`Loaded ${this.alternatives.length} alternatives`)}catch(e){console.error("Error loading alternatives:",e),this.error=e.response?.data?.error||e.message||"Failed to load alternatives",this.alternatives=[]}finally{this.loading=!1}},async selectAlternative(e){try{console.log("Selecting alternative:",e),this.$emit("alternative-selected",{day:this.day,mealType:this.mealType,recipe:e}),this.$emit("close")}catch(a){console.error("Error selecting alternative:",a),this.error="Failed to select alternative recipe"}},handleEscapeKey(e){"Escape"===e.key&&this.$emit("close")},formatMealType(e){return e?e.charAt(0).toUpperCase()+e.slice(1).toLowerCase():""},formatDate(e){if(!e)return"";try{const a=new Date(e);return a.toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"})}catch(a){return e}},truncateSummary(e){if(!e)return"No description available.";const a=e.replace(/<[^>]*>/g,"");return a.length<=120?a:a.substring(0,120)+"..."},handleImageError(e){e.target.src="/api/placeholder/300/200"}}};const Pl=(0,V.A)(wl,[["render",Ml],["__scopeId","data-v-7a0126ee"]]);var Sl=Pl,Rl={name:"MealPlanManager",components:{MealPlanDetailModal:Xi,NutritionalAnalysisModal:An,AlternativesModal:Sl},props:{loading:{type:Boolean,default:!1},nutritionProfile:{type:Object,default:null}},emits:["meal-plan-generated"],data(){return{mealPlans:[],selectedPlan:null,selectedPlanForAnalysis:null,currentAnalysis:null,showAnalysisModal:!1,showAlternativesModal:!1,alternativesModalData:null,generating:!1,showAdvancedOptions:!1,generationStatus:null,generateForm:{plan_type:"daily",start_date:"",target_calories:null,cuisine_preferences:[],max_cook_time:null},availableCuisines:["Mediterranean","Asian","Italian","Mexican","American","Indian","Middle Eastern","French","Japanese","Thai"]}},computed:{today(){return(new Date).toISOString().split("T")[0]}},async mounted(){this.generateForm.start_date=this.today,await this.loadMealPlans()},methods:{async loadMealPlans(){try{0;const e=await Ye.mealPlanningApi.getMealPlans(),a=e?.data?.results||e?.data||[];0,this.mealPlans=a}catch(e){console.error("❌ Failed to load meal plans:",e.message),console.error("Response:",e.response?.data),console.error("================================"),this.mealPlans=[],this.showError("Failed to load meal plans")}},getMealCount(e){if(!e?.meal_plan_data?.meals)return"N/A";if(void 0!==e._cachedMealCount)return e._cachedMealCount;let a=0;Object.values(e.meal_plan_data.meals).forEach(e=>{Array.isArray(e)&&(a+=e.length)});const s=a||"N/A";return e._cachedMealCount=s,s},async generateMealPlan(){this.generating=!0,this.showGenerationStatus();try{const e={...this.generateForm};e.target_calories||(this.nutritionProfile?.calorie_target?e.target_calories=this.nutritionProfile.calorie_target:delete e.target_calories),e.max_cook_time||delete e.max_cook_time,0===e.cuisine_preferences.length&&delete e.cuisine_preferences,this.updateGenerationStep("strategy",!0);const a=await Ye.mealPlanningApi.generateMealPlan(e);this.updateGenerationStep("recipes",!0),this.generationStatus.steps.forEach(e=>{e.completed=!0,e.active=!1}),this.generationStatus={type:"success",icon:"fas fa-check-circle",title:"Meal Plan Generated Successfully!",message:"Your personalized AI meal plan is ready to view."},this.mealPlans.unshift(a.data),this.showSuccess("AI meal plan generated successfully!"),this.$emit("meal-plan-generated",a.data),setTimeout(()=>{this.generationStatus=null,this.viewMealPlan(a.data)},2e3)}catch(e){console.error("Failed to generate meal plan:",e),this.generationStatus={type:"error",icon:"fas fa-exclamation-circle",title:"Generation Failed",message:"Failed to generate meal plan. Please try again."},this.showError("Failed to generate meal plan. Please try again."),setTimeout(()=>{this.generationStatus=null},3e3)}finally{this.generating=!1}},showGenerationStatus(){this.generationStatus={type:"generating",icon:"fas fa-brain",title:"AI is Creating Your Meal Plan",message:"Our AI is analyzing your profile and generating personalized meals...",steps:[{name:"Analyzing your health profile",completed:!1,active:!0},{name:"Creating meal strategy",completed:!1,active:!1},{name:"Generating meal structure",completed:!1,active:!1},{name:"Creating detailed recipes",completed:!1,active:!1},{name:"Optimizing nutrition balance",completed:!1,active:!1}]},setTimeout(()=>this.updateGenerationStep("strategy"),1e3),setTimeout(()=>this.updateGenerationStep("structure"),3e3),setTimeout(()=>this.updateGenerationStep("recipes"),5e3),setTimeout(()=>this.updateGenerationStep("optimization"),7e3)},updateGenerationStep(e,a=!1){if(!this.generationStatus||!this.generationStatus.steps)return;const s={profile:0,strategy:1,structure:2,recipes:3,optimization:4}[e];if(void 0!==s){for(let e=0;e<s;e++)this.generationStatus.steps[e].completed=!0,this.generationStatus.steps[e].active=!1;a?(this.generationStatus.steps[s].completed=!0,this.generationStatus.steps[s].active=!1):this.generationStatus.steps[s].active=!0}},async regeneratePlan(e){try{const a=confirm("Generate a new AI meal plan with the same settings? This will create a completely new plan.");if(!a)return;this.generating=!0,this.showGenerationStatus();const s={plan_type:e.plan_type,start_date:e.start_date},t=await Ye.mealPlanningApi.generateMealPlan(s);this.mealPlans.unshift(t.data),this.generationStatus={type:"success",icon:"fas fa-check-circle",title:"New Meal Plan Generated!",message:"Your fresh AI meal plan is ready."},this.showSuccess("New AI meal plan generated!"),this.$emit("meal-plan-generated",t.data),setTimeout(()=>{this.generationStatus=null},2e3)}catch(a){console.error("Failed to regenerate meal plan:",a),this.generationStatus={type:"error",icon:"fas fa-exclamation-circle",title:"Regeneration Failed",message:"Failed to regenerate meal plan."},this.showError("Failed to regenerate meal plan"),setTimeout(()=>{this.generationStatus=null},3e3)}finally{this.generating=!1}},async deleteMealPlan(e){try{const a=confirm(`Are you sure you want to delete this ${e.plan_type} meal plan? This action cannot be undone.`);if(!a)return;await Ye.mealPlanningApi.deleteMealPlan(e.id),this.mealPlans=this.mealPlans.filter(a=>a.id!==e.id),this.showSuccess("Meal plan deleted successfully"),this.selectedPlan&&this.selectedPlan.id===e.id&&(this.selectedPlan=null)}catch(a){console.error("Error deleting meal plan:",a),this.showError("Failed to delete meal plan")}},viewMealPlan(e){console.log("=== Meal Plan Details ==="),console.log("Plan ID:",e?.id),console.log("Plan Type:",e?.plan_type),console.log("Has meal_plan_data:",!!e?.meal_plan_data),console.log("Has meals:",!!e?.meal_plan_data?.meals),console.log("Meals structure:",e?.meal_plan_data?.meals),e?.meal_plan_data?.meals&&(console.log("Available meal dates:",Object.keys(e.meal_plan_data.meals)),console.log("Sample meal data for first date:",Object.values(e.meal_plan_data.meals)[0])),console.log("========================="),this.selectedPlan=e},async regenerateMeal(e,a){try{if(console.log("=== Regenerating Meal ==="),console.log("Plan ID:",e),console.log("Meal Data:",a),!a)throw console.error("regenerateMeal: mealData is null/undefined"),new Error("Meal data is required");const{day:s,mealType:t}=a;if(console.log("Day:",s),console.log("Meal Type:",t),!s||!t)throw console.error("regenerateMeal: day or mealType missing",{day:s,mealType:t}),new Error("Day and meal type are required");console.log("Making API call to regenerate meal...");const i=await Ye.mealPlanningApi.regenerateMeal(e,s,t);console.log("Regeneration successful, updating UI...");const n=this.mealPlans.findIndex(a=>a.id===e);-1!==n&&(this.mealPlans[n]=i.data,this.selectedPlan=i.data,console.log("Meal plan updated in list")),this.showSuccess(`${t} meal regenerated successfully!`),console.log("========================")}catch(s){console.error("=== Failed to regenerate meal ==="),console.error("Error message:",s.message),console.error("Error response:",s.response?.data),console.error("Full error:",s),console.error("================================"),this.showError(`Failed to regenerate meal: ${s.message}`)}},async getMealAlternatives(e,a){try{if(console.log("=== Opening Meal Alternatives Modal ==="),console.log("Plan ID:",e),console.log("Meal Data:",a),!a)return console.error("getMealAlternatives: mealData is null/undefined"),void this.showError("Meal data is required");const{day:s,mealType:t}=a;if(console.log("Day:",s),console.log("Meal Type:",t),!s||!t)return console.error("getMealAlternatives: day or mealType missing",{day:s,mealType:t}),void this.showError("Day and meal type are required");this.alternativesModalData={planId:e,day:s,mealType:t},this.showAlternativesModal=!0,console.log("Alternatives modal opened"),console.log("===============================")}catch(s){console.error("=== Failed to open alternatives modal ==="),console.error("Error message:",s.message),console.error("Full error:",s),console.error("====================================="),this.showError(`Failed to open alternatives: ${s.message}`)}},closeAlternativesModal(){this.showAlternativesModal=!1,this.alternativesModalData=null},async handleAlternativeSelected(e){try{console.log("=== Handling Alternative Selection ==="),console.log("Selection data:",e);const{day:a,mealType:s,recipe:t}=e,i=await Ye.mealPlanningApi.swapMeal(this.alternativesModalData.planId,a,s,t);if(console.log("Meal swapped successfully:",i.data),await this.loadMealPlans(),this.selectedPlan&&this.selectedPlan.id===this.alternativesModalData.planId){const e=this.mealPlans.find(e=>e.id===this.selectedPlan.id);e&&(this.selectedPlan=e)}this.showSuccess(`${s} meal replaced successfully with "${t.title}"!`),console.log("========================")}catch(a){console.error("=== Failed to swap meal ==="),console.error("Error message:",a.message),console.error("Error response:",a.response?.data),console.error("Full error:",a),console.error("================================"),this.showError(`Failed to replace meal: ${a.message}`)}},async analyzeMealPlan(e){try{this.selectedPlanForAnalysis=e,this.currentAnalysis={loading:!0,message:"AI is analyzing your meal plan nutrition..."},this.showAnalysisModal=!0;const a=await Ye.mealPlanningApi.analyzeMealPlan(e.id);this.currentAnalysis=a.data}catch(a){console.error("Failed to analyze meal plan:",a),this.currentAnalysis={error:!0,message:"Failed to analyze meal plan. Please try again."},this.showError("Failed to analyze meal plan")}},async analyzeMealPlanFromModal(e){this.selectedPlan=null,await this.analyzeMealPlan(e)},closeAnalysisModal(){this.showAnalysisModal=!1,this.currentAnalysis=null,this.selectedPlanForAnalysis=null},formatPlanType(e){return e&&"string"===typeof e?e.charAt(0).toUpperCase()+e.slice(1):"Unknown"},formatDateRange(e,a){if(!e||!a)return console.log("formatDateRange: Missing dates - start:",e,"end:",a),"Date unknown";try{const s=new Date(e),t=new Date(a);if(isNaN(s.getTime())||isNaN(t.getTime()))return console.log("formatDateRange: Invalid dates - start:",e,"end:",a),"Invalid date range";const i=s.toLocaleDateString(),n=t.toLocaleDateString();return e===a?i:`${i} - ${n}`}catch(s){return console.error("formatDateRange error:",s,"for dates:",e,a),"Date error"}},showSuccess(e){this.$toast?.success?.(e)||alert(e)},showError(e){this.$toast?.error?.(e)||alert(e)}}};const El=(0,V.A)(Rl,[["render",Je],["__scopeId","data-v-0338268e"]]);var Il=El;const Al={class:"coming-soon-card"},Tl={class:"card-content"},Dl={class:"icon-container"},Xl={class:"features-preview"},$l={class:"progress-indicator"},xl={class:"progress-bar"},Fl={class:"progress-text"},Nl={class:"cta-section"};function Wl(e,a,s,n,l,r){return(0,t.uX)(),(0,t.CE)("div",Al,[(0,t.Lk)("div",Tl,[(0,t.Lk)("div",Dl,[(0,t.Lk)("i",{class:(0,i.C4)(s.icon)},null,2)]),(0,t.Lk)("h2",null,(0,i.v_)(s.title),1),(0,t.Lk)("p",null,(0,i.v_)(s.description),1),(0,t.Lk)("div",Xl,[a[2]||(a[2]=(0,t.Lk)("h3",null,"Coming Features:",-1)),(0,t.Lk)("ul",null,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(r.features,e=>((0,t.uX)(),(0,t.CE)("li",{key:e},[a[1]||(a[1]=(0,t.Lk)("i",{class:"fas fa-check-circle"},null,-1)),(0,t.eW)(" "+(0,i.v_)(e),1)]))),128))])]),(0,t.Lk)("div",$l,[(0,t.Lk)("div",xl,[(0,t.Lk)("div",{class:"progress-fill",style:(0,i.Tr)({width:s.progress+"%"})},null,4)]),(0,t.Lk)("span",Fl,(0,i.v_)(s.progress)+"% Complete",1)]),(0,t.Lk)("div",Nl,[a[4]||(a[4]=(0,t.Lk)("p",{class:"cta-text"},"Want to be notified when this feature launches?",-1)),(0,t.Lk)("button",{class:"btn btn-primary",onClick:a[0]||(a[0]=(...e)=>r.subscribeToUpdates&&r.subscribeToUpdates(...e))},a[3]||(a[3]=[(0,t.Lk)("i",{class:"fas fa-bell"},null,-1),(0,t.eW)(" Notify Me ")]))])])])}var jl={name:"ComingSoonCard",props:{title:{type:String,required:!0},description:{type:String,required:!0},icon:{type:String,default:"fas fa-rocket"},progress:{type:Number,default:75}},computed:{features(){const e={"Meal Plans":["AI-generated daily meal plans","Weekly meal planning","Personalized recipe suggestions","Automatic shopping lists","Nutritional balance optimization"],"Nutrition Analytics":["Daily nutrition tracking","Macro breakdown charts","Progress towards goals","Trend analysis","AI-powered insights"]};return e[this.title]||["Personalized recommendations","Smart AI integration","Beautiful visualizations","Easy-to-use interface"]}},methods:{subscribeToUpdates(){alert("Thanks for your interest! We'll notify you when this feature is ready.")}}};const Ql=(0,V.A)(jl,[["render",Wl],["__scopeId","data-v-2b85b24d"]]);var Ul=Ql,zl={name:"MealPlanningDashboard",components:{RecipeBrowser:q,MealPlanManager:Il,ComingSoonCard:Ul,RecipeDetailModal:Ai},data(){return{activeTab:"recipes",tabs:[{id:"recipes",name:"My Recipes",icon:"fas fa-utensils"},{id:"meal-plans",name:"Meal Plans",icon:"fas fa-calendar-alt"},{id:"analytics",name:"Analytics",icon:"fas fa-chart-line"}],recipes:[],nutritionProfile:null,recipesLoading:!1,mealPlansLoading:!1,showRecipeModal:!1,selectedRecipe:null}},computed:{currentUser(){return this.$store.getters["auth/currentUser"]}},async mounted(){this.currentUser?await this.loadInitialData():this.$router.push("/login")},methods:{async loadInitialData(){await Promise.all([this.loadRecipes(),this.loadNutritionProfile()])},async loadRecipes(){this.recipesLoading=!0;try{const e={_t:Date.now(),page_size:100};0;const a=await Ye.mealPlanningApi.getMyRecipes(e);a?.data?.results&&Array.isArray(a.data.results)?this.recipes=a.data.results:Array.isArray(a?.data)?this.recipes=a.data:(console.warn("⚠️ Unexpected API response structure:",a?.data),this.recipes=[])}catch(e){console.error("❌ Failed to load my recipes:",e.message),this.recipes=[],this.$toast?.error?.("Failed to load your recipes")||alert("Failed to load your recipes")}finally{this.recipesLoading=!1}},async loadNutritionProfile(){try{const e=await Ye.mealPlanningApi.getNutritionProfile();this.nutritionProfile=e.data}catch(e){console.error("Failed to load nutrition profile:",e),this.nutritionProfile={calorie_target:2e3,protein_target:100,carb_target:250,fat_target:67,dietary_preferences:[],allergies_intolerances:[],cuisine_preferences:[],disliked_ingredients:[],meals_per_day:3,timezone:"Europe/Tallinn"}}},selectRecipe(e){this.selectedRecipe=e,this.showRecipeModal=!0},closeRecipeModal(){this.showRecipeModal=!1,this.selectedRecipe=null},async onRecipeRemoved(e){console.log("Recipe removed event received:",e),this.recipes=this.recipes.filter(a=>a.id!==e.id),await this.loadRecipes()},async onRecipeSaved(e){console.log("Recipe saved event received:",e),await this.loadRecipes(),"recipes"===this.activeTab&&this.$nextTick(()=>{console.log("My recipes refreshed after saving new recipe")})},async onMealPlanGenerated(e){console.log("New meal plan generated:",e),this.$toast?.success?.("Meal plan generated successfully!")||alert("Meal plan generated successfully!")}}};const Ol=(0,V.A)(zl,[["render",g],["__scopeId","data-v-0064e48d"]]);var Gl=Ol}}]);
//# sourceMappingURL=148.dd941cbb.js.map