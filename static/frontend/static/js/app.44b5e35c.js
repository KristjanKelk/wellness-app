(function(){"use strict";var e={1233:function(e,t,s){s(4979);var a=s(4373);const i="https://wellness-app-tx2c.onrender.com/api".replace(/\/+$/,"")+"/",o="user";class r{getStorage(e=!1){return e?localStorage:sessionStorage}getCurrentUser(){const e=localStorage.getItem(o)||sessionStorage.getItem(o);if(!e)return null;try{return JSON.parse(e)}catch(t){return console.error("Error parsing user data:",t),null}}storeUser(e,t=!1){const s=this.getStorage(t);s.setItem(o,JSON.stringify(e))}clearUser(){localStorage.removeItem(o),sessionStorage.removeItem(o)}validateToken(){const e=localStorage.getItem(o)||sessionStorage.getItem(o);if(!e)return!1;try{const t=JSON.parse(e);if(!t.access)return!1;const s=t.access.split(".");if(3!==s.length)return!1;const a=JSON.parse(atob(s[1])),i=Math.floor(Date.now()/1e3);return!(a.exp&&a.exp<i)}catch(t){return console.error("Error validating token:",t),!1}}async login(e,t,s=!1){try{const o=await a.A.post(i+"token/",{username:e,password:t}),r=o.data;return r.two_factor_enabled||this.storeUser(r,s),r}catch(o){throw console.error("Login error:",o),o}}async verifyTwoFactorLogin(e,t){try{if(!e||!t||!t.access)return Promise.reject(new Error("Missing required 2FA verification data"));const s=await a.A.post(i+"token/2fa-verify/",{token:t.access,code:e});if(s.data&&s.data.access){const e={...t,...s.data,two_factor_verified:!0};return this.storeUser(e,!0),e}return console.error("Incomplete 2FA response:",s.data),Promise.reject(new Error("Invalid 2FA verification response"))}catch(s){return console.error("2FA verification error:",s),Promise.reject(s)}}logout(){this.clearUser()}register(e,t,s,o){return a.A.post(i+"register/",{username:e,email:t,password:s,password2:o})}async refreshToken(){const e=this.getCurrentUser();if(!e||!e.refresh)return Promise.reject("No refresh token available");try{const t=await a.A.post(i+"token/refresh/",{refresh:e.refresh});if(t.data.access){const s={...e,access:t.data.access};return localStorage.getItem(o)?localStorage.setItem(o,JSON.stringify(s)):sessionStorage.getItem(o)&&sessionStorage.setItem(o,JSON.stringify(s)),t.data}return Promise.reject("Failed to refresh token")}catch(t){throw console.error("Token refresh error:",t),t}}}t.A=new r},1575:function(e,t,s){s.d(t,{A:function(){return m}});var a=s(6768),i=s(5130),o=s(4232);const r={class:"modal-content"},n={class:"form-group"},l={key:0,class:"alert alert-error"},c={class:"form-actions"},d=["disabled"],u={key:0,class:"loading-spinner"};function h(e,t,s,h,g,p){return(0,a.uX)(),(0,a.CE)("div",{class:"modal is-active",onClick:t[4]||(t[4]=(0,i.D$)(t=>e.$emit("close"),["self"]))},[(0,a.Lk)("div",r,[(0,a.Lk)("span",{class:"close-button",onClick:t[0]||(t[0]=t=>e.$emit("close"))},"Ã—"),t[6]||(t[6]=(0,a.Lk)("h2",null,"Log New Weight",-1)),(0,a.Lk)("form",{onSubmit:t[3]||(t[3]=(0,i.D$)((...e)=>p.handleSubmit&&p.handleSubmit(...e),["prevent"]))},[(0,a.Lk)("div",n,[t[5]||(t[5]=(0,a.Lk)("label",{for:"weight",class:"form-label"},"Weight (kg)",-1)),(0,a.bo)((0,a.Lk)("input",{type:"number",id:"weight","onUpdate:modelValue":t[1]||(t[1]=e=>g.weight=e),step:"0.1",required:"",min:"20",max:"300",placeholder:"Enter your weight in kg",class:"form-control"},null,512),[[i.Jo,g.weight]])]),s.error?((0,a.uX)(),(0,a.CE)("div",l,(0,o.v_)(s.error),1)):(0,a.Q3)("",!0),(0,a.Lk)("div",c,[(0,a.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:t[2]||(t[2]=t=>e.$emit("close"))}," Cancel "),(0,a.Lk)("button",{type:"submit",class:"btn btn-primary",disabled:s.loading},[s.loading?((0,a.uX)(),(0,a.CE)("span",u)):(0,a.Q3)("",!0),(0,a.Lk)("span",null,(0,o.v_)(s.loading?"Saving...":"Save"),1)],8,d)])],32)])])}var g={name:"AddWeightModal",props:{loading:{type:Boolean,default:!1},error:{type:String,default:null}},data(){return{weight:null}},methods:{handleSubmit(){!this.weight||this.weight<20||this.weight>300?this.$emit("error","Please enter a valid weight between 20 and 300 kg"):this.$emit("save",this.weight)}}},p=s(1241);const v=(0,p.A)(g,[["render",h],["__scopeId","data-v-94758290"]]);var m=v},1703:function(e,t,s){var a=s(5130),i=s(6768);const o={id:"app"},r={class:"main-content"};function n(e,t,s,a,n,l){const c=(0,i.g2)("AppHeader"),d=(0,i.g2)("router-view");return(0,i.uX)(),(0,i.CE)("div",o,[(0,i.bF)(c),(0,i.Lk)("main",r,[(0,i.bF)(d)])])}s(4114);var l=s(4232);const c={class:"app-header"},d={class:"container"},u={class:"navbar"},h={class:"nav-menu"},g={class:"mobile-menu-container"},p={class:"mobile-menu-items"};function v(e,t,s,a,o,r){const n=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("header",c,[(0,i.Lk)("div",d,[(0,i.Lk)("nav",u,[(0,i.bF)(n,{to:"/",class:"navbar-brand"},{default:(0,i.k6)(()=>t[4]||(t[4]=[(0,i.Lk)("div",{class:"logo"},[(0,i.Lk)("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,i.Lk)("path",{d:"M16 2C8.268 2 2 8.268 2 16C2 23.732 8.268 30 16 30C23.732 30 30 23.732 30 16C30 8.268 23.732 2 16 2Z",fill:"#30C1B1"}),(0,i.Lk)("path",{d:"M16 6C13.791 6 12 7.791 12 10V16C12 18.209 13.791 20 16 20C18.209 20 20 18.209 20 16V10C20 7.791 18.209 6 16 6Z",fill:"white"}),(0,i.Lk)("path",{d:"M12 22C12 23.105 12.895 24 14 24H18C19.105 24 20 23.105 20 22C20 20.895 19.105 20 18 20H14C12.895 20 12 20.895 12 22Z",fill:"white"})])],-1),(0,i.Lk)("span",{class:"brand-name"},"Wellness",-1)])),_:1,__:[4]}),(0,i.Lk)("div",h,[a.isLoggedIn?((0,i.uX)(),(0,i.CE)(i.FK,{key:0},[(0,i.bF)(n,{to:"/dashboard",class:"nav-link"},{default:(0,i.k6)(()=>t[5]||(t[5]=[(0,i.eW)("Dashboard")])),_:1,__:[5]}),(0,i.bF)(n,{to:"/progress",class:"nav-link"},{default:(0,i.k6)(()=>t[6]||(t[6]=[(0,i.eW)("Progress")])),_:1,__:[6]}),(0,i.bF)(n,{to:"/activities",class:"nav-link"},{default:(0,i.k6)(()=>t[7]||(t[7]=[(0,i.eW)("Activities")])),_:1,__:[7]}),(0,i.bF)(n,{to:"/meal-planning",class:"nav-link"},{default:(0,i.k6)(()=>t[8]||(t[8]=[(0,i.eW)("Meal Planning")])),_:1,__:[8]}),(0,i.bF)(n,{to:"/profile",class:"nav-link"},{default:(0,i.k6)(()=>t[9]||(t[9]=[(0,i.eW)("Profile")])),_:1,__:[9]}),(0,i.bF)(n,{to:"/settings",class:"nav-link"},{default:(0,i.k6)(()=>t[10]||(t[10]=[(0,i.eW)("Settings")])),_:1,__:[10]}),(0,i.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>a.logout&&a.logout(...e)),class:"btn-logout"},"Logout")],64)):((0,i.uX)(),(0,i.CE)(i.FK,{key:1},[(0,i.bF)(n,{to:"/login",class:"nav-link"},{default:(0,i.k6)(()=>t[11]||(t[11]=[(0,i.eW)("Login")])),_:1,__:[11]}),(0,i.bF)(n,{to:"/register",class:"btn-primary"},{default:(0,i.k6)(()=>t[12]||(t[12]=[(0,i.eW)("Sign Up")])),_:1,__:[12]})],64))]),(0,i.Lk)("button",{class:"mobile-menu-toggle",onClick:t[1]||(t[1]=(...e)=>a.toggleMobileMenu&&a.toggleMobileMenu(...e)),"aria-label":"Toggle menu"},t[13]||(t[13]=[(0,i.Lk)("span",null,null,-1),(0,i.Lk)("span",null,null,-1),(0,i.Lk)("span",null,null,-1)])),(0,i.Lk)("div",{class:(0,l.C4)(["mobile-menu",{"is-active":a.mobileMenuOpen}])},[(0,i.Lk)("div",g,[(0,i.Lk)("button",{class:"mobile-menu-close",onClick:t[2]||(t[2]=(...e)=>a.closeMobileMenu&&a.closeMobileMenu(...e))},t[14]||(t[14]=[(0,i.Lk)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,i.Lk)("path",{d:"M18 6L6 18",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),(0,i.Lk)("path",{d:"M6 6L18 18",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])),(0,i.Lk)("div",p,[a.isLoggedIn?((0,i.uX)(),(0,i.CE)(i.FK,{key:0},[(0,i.bF)(n,{to:"/dashboard",class:"mobile-menu-link",onClick:a.closeMobileMenu},{default:(0,i.k6)(()=>t[15]||(t[15]=[(0,i.eW)("Dashboard")])),_:1,__:[15]},8,["onClick"]),(0,i.bF)(n,{to:"/progress",class:"mobile-menu-link",onClick:a.closeMobileMenu},{default:(0,i.k6)(()=>t[16]||(t[16]=[(0,i.eW)("Progress")])),_:1,__:[16]},8,["onClick"]),(0,i.bF)(n,{to:"/profile",class:"mobile-menu-link",onClick:a.closeMobileMenu},{default:(0,i.k6)(()=>t[17]||(t[17]=[(0,i.eW)("Profile")])),_:1,__:[17]},8,["onClick"]),(0,i.bF)(n,{to:"/settings",class:"mobile-menu-link",onClick:a.closeMobileMenu},{default:(0,i.k6)(()=>t[18]||(t[18]=[(0,i.eW)("Settings")])),_:1,__:[18]},8,["onClick"]),(0,i.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>a.logoutAndCloseMobile&&a.logoutAndCloseMobile(...e)),class:"mobile-menu-button"},"Logout")],64)):((0,i.uX)(),(0,i.CE)(i.FK,{key:1},[(0,i.bF)(n,{to:"/login",class:"mobile-menu-link",onClick:a.closeMobileMenu},{default:(0,i.k6)(()=>t[19]||(t[19]=[(0,i.eW)("Login")])),_:1,__:[19]},8,["onClick"]),(0,i.bF)(n,{to:"/register",class:"mobile-menu-button",onClick:a.closeMobileMenu},{default:(0,i.k6)(()=>t[20]||(t[20]=[(0,i.eW)("Sign Up")])),_:1,__:[20]},8,["onClick"])],64))])])],2)])])])}var m=s(144),k=s(782),y=s(1387),f={name:"AppHeader",setup(){const e=(0,k.Pj)(),t=(0,y.rd)(),s=(0,m.KR)(!1),a=(0,i.EW)(()=>e.getters["auth/isLoggedIn"]),o=()=>{e.dispatch("auth/logout"),t.push("/login")},r=()=>{s.value=!s.value,s.value?document.body.style.overflow="hidden":document.body.style.overflow=""},n=()=>{s.value=!1,document.body.style.overflow=""},l=()=>{n(),o()};return{isLoggedIn:a,mobileMenuOpen:s,logout:o,toggleMobileMenu:r,closeMobileMenu:n,logoutAndCloseMobile:l}}},w=s(1241);const b=(0,w.A)(f,[["render",v],["__scopeId","data-v-1c3e1eec"]]);var L=b,_={name:"App",components:{AppHeader:L},created(){const e=localStorage.getItem("user")||sessionStorage.getItem("user"),t=this.$store.state.auth&&this.$store.state.auth.status&&this.$store.state.auth.status.loggedIn;e&&!t?(console.log("Inconsistent auth state detected, attempting to restore session"),this.$store.dispatch("auth/checkAuth").catch(()=>{console.log("Failed to restore session, continuing as unauthenticated")})):t&&this.$store.dispatch("auth/checkAuth").catch(()=>{console.log("Session validation failed, logging out"),this.$store.dispatch("auth/logout"),this.$router.push("/login")})}};const C=(0,w.A)(_,[["render",n]]);var A=C,S=(s(8111),s(3579),s.p+"static/img/hero-illustration.e1e22ac4.svg");const E={class:"home"},M={class:"hero"},F={class:"container"},P={class:"hero-content"},x={class:"hero-actions"},D={class:"how-it-works"},I={class:"container"},T={class:"cta-container"};function W(e,t,s,a,o,r){const n=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("div",E,[(0,i.Lk)("section",M,[(0,i.Lk)("div",F,[(0,i.Lk)("div",P,[t[3]||(t[3]=(0,i.Lk)("h1",{class:"hero-title"},"Track your wellness journey with AI-powered insights",-1)),t[4]||(t[4]=(0,i.Lk)("p",{class:"hero-description"},"Monitor your health metrics, receive personalized recommendations, and visualize your progress with our intelligent wellness platform.",-1)),(0,i.Lk)("div",x,[a.isLoggedIn?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.Wv)(n,{key:0,to:"/register",class:"btn-primary"},{default:(0,i.k6)(()=>t[0]||(t[0]=[(0,i.eW)("Get Started")])),_:1,__:[0]})),a.isLoggedIn?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.Wv)(n,{key:1,to:"/login",class:"btn-secondary"},{default:(0,i.k6)(()=>t[1]||(t[1]=[(0,i.eW)("Sign In")])),_:1,__:[1]})),a.isLoggedIn?((0,i.uX)(),(0,i.Wv)(n,{key:2,to:"/dashboard",class:"btn-primary"},{default:(0,i.k6)(()=>t[2]||(t[2]=[(0,i.eW)("Go to Dashboard")])),_:1,__:[2]})):(0,i.Q3)("",!0)])]),t[5]||(t[5]=(0,i.Lk)("div",{class:"hero-image"},[(0,i.Lk)("img",{src:S,alt:"Wellness tracking illustration"})],-1))])]),t[8]||(t[8]=(0,i.Fv)('<section class="features" data-v-6e1544dc><div class="container" data-v-6e1544dc><h2 class="section-title" data-v-6e1544dc>Why choose our platform?</h2><div class="features-grid" data-v-6e1544dc><div class="feature-card" data-v-6e1544dc><div class="feature-icon" data-v-6e1544dc><svg width="40" height="40" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-6e1544dc><path d="M21 8V20.993C21 21.549 20.55 22 19.993 22H4.007C3.451 22 3 21.55 3 20.993V8M21 8H3M21 8L12 3L3 8" stroke="#30C1B1" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-6e1544dc></path><path d="M9 16H15" stroke="#30C1B1" stroke-width="2" stroke-linecap="round" data-v-6e1544dc></path><path d="M12 13L12 19" stroke="#30C1B1" stroke-width="2" stroke-linecap="round" data-v-6e1544dc></path></svg></div><h3 class="feature-title" data-v-6e1544dc>Track Your Health Metrics</h3><p class="feature-description" data-v-6e1544dc>Monitor key health indicators like weight, BMI, activity levels, and more in one unified dashboard.</p></div><div class="feature-card" data-v-6e1544dc><div class="feature-icon" data-v-6e1544dc><svg width="40" height="40" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-6e1544dc><path d="M9 3.5V2M5.5 5.5H4M14.5 5.5H16M5.5 14.5H4M14.5 14.5H16" stroke="#30C1B1" stroke-width="2" stroke-linecap="round" data-v-6e1544dc></path><path d="M9 21.5V20M9 14.5V9.5" stroke="#30C1B1" stroke-width="2" stroke-linecap="round" data-v-6e1544dc></path><circle cx="9" cy="7" r="2.5" stroke="#30C1B1" stroke-width="2" data-v-6e1544dc></circle><circle cx="9" cy="17" r="2.5" stroke="#30C1B1" stroke-width="2" data-v-6e1544dc></circle></svg></div><h3 class="feature-title" data-v-6e1544dc>AI-Powered Insights</h3><p class="feature-description" data-v-6e1544dc>Receive personalized recommendations and health insights based on your unique profile and goals.</p></div><div class="feature-card" data-v-6e1544dc><div class="feature-icon" data-v-6e1544dc><svg width="40" height="40" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-6e1544dc><path d="M3 8L7 4M7 4L11 8M7 4V20" stroke="#30C1B1" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-6e1544dc></path><path d="M21 16L17 20M17 20L13 16M17 20V4" stroke="#30C1B1" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-6e1544dc></path></svg></div><h3 class="feature-title" data-v-6e1544dc>Visualize Your Progress</h3><p class="feature-description" data-v-6e1544dc>See your health journey with clear, intuitive charts and visualizations that help you stay motivated.</p></div></div></div></section>',1)),(0,i.Lk)("section",D,[(0,i.Lk)("div",I,[t[7]||(t[7]=(0,i.Fv)('<h2 class="section-title" data-v-6e1544dc>How It Works</h2><div class="steps" data-v-6e1544dc><div class="step" data-v-6e1544dc><div class="step-number" data-v-6e1544dc>1</div><h3 class="step-title" data-v-6e1544dc>Create Your Profile</h3><p class="step-description" data-v-6e1544dc>Sign up and enter your health information, goals, and preferences to get started.</p></div><div class="step" data-v-6e1544dc><div class="step-number" data-v-6e1544dc>2</div><h3 class="step-title" data-v-6e1544dc>Track Your Journey</h3><p class="step-description" data-v-6e1544dc>Regularly update your metrics and activities to build a comprehensive health picture.</p></div><div class="step" data-v-6e1544dc><div class="step-number" data-v-6e1544dc>3</div><h3 class="step-title" data-v-6e1544dc>Get Smart Insights</h3><p class="step-description" data-v-6e1544dc>Receive AI-generated recommendations tailored to your specific health profile and goals.</p></div><div class="step" data-v-6e1544dc><div class="step-number" data-v-6e1544dc>4</div><h3 class="step-title" data-v-6e1544dc>Achieve Your Goals</h3><p class="step-description" data-v-6e1544dc>Follow your personalized plan and watch as you make progress toward better health.</p></div></div>',2)),(0,i.Lk)("div",T,[a.isLoggedIn?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.Wv)(n,{key:0,to:"/register",class:"btn-primary"},{default:(0,i.k6)(()=>t[6]||(t[6]=[(0,i.eW)("Start Your Journey")])),_:1,__:[6]}))])])])])}var X={name:"Home",setup(){const e=(0,k.Pj)(),t=(0,i.EW)(()=>e.getters["auth/isLoggedIn"]);return{isLoggedIn:t}}};const V=(0,w.A)(X,[["render",W],["__scopeId","data-v-6e1544dc"]]);var B=V;const $={class:"auth-container"},U={class:"auth-form-container"},H={key:0},R={class:"form-group"},N={key:1,class:"two-factor-form"},O={key:3,class:"form-group text-center mt-4"},q={class:"form-group text-center mt-4"},G={class:"mt-2"},j={class:"social-login-container"};function Q(e,t,s,o,r,n){const c=(0,i.g2)("FormInput"),d=(0,i.g2)("FormCheckbox"),u=(0,i.g2)("Alert"),h=(0,i.g2)("BaseButton"),g=(0,i.g2)("router-link"),p=(0,i.g2)("SocialLoginButton");return(0,i.uX)(),(0,i.CE)("div",$,[(0,i.Lk)("div",U,[t[11]||(t[11]=(0,i.Lk)("h2",{class:"text-center"},"Sign In",-1)),(0,i.Lk)("form",{onSubmit:t[4]||(t[4]=(0,a.D$)((...e)=>o.handleLogin&&o.handleLogin(...e),["prevent"]))},[o.showTwoFactorForm?((0,i.uX)(),(0,i.CE)("div",N,[t[6]||(t[6]=(0,i.Lk)("p",null,"Please enter the verification code from your authenticator app.",-1)),(0,i.bF)(c,{id:"twoFactorCode",label:"Verification Code",placeholder:"000000",maxlength:"6",pattern:"[0-9]*",inputmode:"numeric",modelValue:o.twoFactorCode,"onUpdate:modelValue":t[3]||(t[3]=e=>o.twoFactorCode=e),disabled:o.loading,ref:"twoFactorInput"},null,8,["modelValue","disabled"])])):((0,i.uX)(),(0,i.CE)("div",H,[(0,i.bF)(c,{id:"username",label:"Username",placeholder:"Enter your username",modelValue:o.username,"onUpdate:modelValue":t[0]||(t[0]=e=>o.username=e),disabled:o.loading,required:""},null,8,["modelValue","disabled"]),(0,i.bF)(c,{id:"password",type:"password",label:"Password",placeholder:"Enter your password",modelValue:o.password,"onUpdate:modelValue":t[1]||(t[1]=e=>o.password=e),disabled:o.loading,required:""},null,8,["modelValue","disabled"]),(0,i.Lk)("div",R,[(0,i.bF)(d,{id:"remember",modelValue:o.remember,"onUpdate:modelValue":t[2]||(t[2]=e=>o.remember=e),disabled:o.loading},{default:(0,i.k6)(()=>t[5]||(t[5]=[(0,i.eW)(" Remember me ")])),_:1,__:[5]},8,["modelValue","disabled"])])])),o.message?((0,i.uX)(),(0,i.Wv)(u,{key:2,message:o.message,type:o.successful?"success":"error"},null,8,["message","type"])):(0,i.Q3)("",!0),(0,i.bF)(h,{type:"submit",variant:"primary",block:"",loading:o.loading,"loading-text":o.showTwoFactorForm?"Verifying...":"Signing in..."},{default:(0,i.k6)(()=>[(0,i.eW)((0,l.v_)(o.showTwoFactorForm?"Verify":"Sign In"),1)]),_:1},8,["loading","loading-text"]),o.showTwoFactorForm?((0,i.uX)(),(0,i.CE)("div",O,[(0,i.bF)(h,{variant:"text",onClick:o.cancelTwoFactor},{default:(0,i.k6)(()=>t[7]||(t[7]=[(0,i.eW)(" Back to Login ")])),_:1,__:[7]},8,["onClick"])])):(0,i.Q3)("",!0),(0,i.Lk)("div",q,[(0,i.Lk)("p",null,[(0,i.bF)(g,{to:"/reset-password"},{default:(0,i.k6)(()=>t[8]||(t[8]=[(0,i.eW)("Forgot Password?")])),_:1,__:[8]})]),(0,i.Lk)("p",G,[t[10]||(t[10]=(0,i.eW)(" Don't have an account? ")),(0,i.bF)(g,{to:"/register"},{default:(0,i.k6)(()=>t[9]||(t[9]=[(0,i.eW)("Register here")])),_:1,__:[9]})])])],32)]),(0,i.Lk)("div",j,[t[16]||(t[16]=(0,i.Lk)("div",{class:"divider"},[(0,i.Lk)("span",null,"OR")],-1)),(0,i.bF)(p,{provider:"google",loading:o.googleLoading,disabled:o.loading,onClick:o.loginWithGoogle},{icon:(0,i.k6)(()=>t[12]||(t[12]=[(0,i.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 48 48"},[(0,i.Lk)("path",{fill:"#FFC107",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"}),(0,i.Lk)("path",{fill:"#FF3D00",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"}),(0,i.Lk)("path",{fill:"#4CAF50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"}),(0,i.Lk)("path",{fill:"#1976D2",d:"M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"})],-1)])),default:(0,i.k6)(()=>[t[13]||(t[13]=(0,i.eW)(" Continue with Google "))]),_:1,__:[13]},8,["loading","disabled","onClick"]),(0,i.bF)(p,{provider:"github",loading:o.githubLoading,disabled:o.loading,onClick:o.loginWithGitHub},{icon:(0,i.k6)(()=>t[14]||(t[14]=[(0,i.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24"},[(0,i.Lk)("path",{fill:"#24292F",d:"M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"})],-1)])),default:(0,i.k6)(()=>[t[15]||(t[15]=(0,i.eW)(" Continue with GitHub "))]),_:1,__:[15]},8,["loading","disabled","onClick"])])])}var J=s(2022),Y=s(5994),K=s(6988),z=s(5560),Z=s(8852),ee=s(7667),te={name:"Login",components:{BaseButton:Y.A,FormInput:K.A,FormCheckbox:z.A,Alert:Z.A,SocialLoginButton:ee.A},setup(){const e=(0,k.Pj)(),t=(0,y.rd)(),s=(0,m.KR)(""),a=(0,m.KR)(""),o=(0,m.KR)(""),r=(0,m.KR)(!1),n=(0,m.KR)(!1),l=(0,m.KR)(null),c=(0,m.KR)(null),d=(0,m.KR)(!1),u=(0,m.KR)(!1),h=(0,m.KR)(!1),g=(0,m.KR)(""),p=(0,m.KR)(!1),v=(0,i.EW)(()=>e.getters["auth/isLoggedIn"]);v.value&&t.push("/dashboard"),(0,i.wB)(n,async e=>{e&&l.value&&(await(0,i.dY)(),l.value.$el.querySelector("input").focus())});const f=async()=>{if(n.value)await w();else{if(!s.value||!a.value)return g.value="Please enter both username and password",void(p.value=!1);try{d.value=!0,g.value="";const t=await e.dispatch("auth/login",{username:s.value,password:a.value,remember:r.value});t.two_factor_enabled?(n.value=!0,c.value=t,d.value=!1):b(t)}catch(t){L(t)}}},w=async()=>{if(!o.value||6!==o.value.length||!/^\d+$/.test(o.value))return g.value="Please enter a valid 6-digit verification code",void(p.value=!1);try{d.value=!0,g.value="";const t=await e.dispatch("auth/verifyTwoFactor",{code:o.value,tempAuthData:c.value});b(t)}catch(t){d.value=!1,p.value=!1,console.error("Login error:",t),t.response?.data?.detail?g.value=t.response.data.detail:g.value="Invalid verification code. Please try again."}},b=s=>{e.getters["auth/isLoggedIn"]||e.commit("auth/loginSuccess",s),p.value=!0,g.value="Login successful! Redirecting...",setTimeout(()=>{t.push("/dashboard")},500)},L=e=>{if(d.value=!1,p.value=!1,console.error("Login error:",e),e.response?.data)if(e.response.data.detail)g.value=e.response.data.detail;else if(e.response.data.non_field_errors)g.value=e.response.data.non_field_errors.join(" ");else{const t=Object.values(e.response.data)[0];Array.isArray(t)?g.value=t[0]:g.value="Failed to login. Please check your credentials."}else g.value="Failed to login. Please check your credentials."},_=()=>{n.value=!1,o.value="",c.value=null},C=async()=>{try{g.value="",u.value=!0,localStorage.removeItem("oauth_error"),await J.A.loginWithGoogle()}catch(e){console.error("Google login initialization error:",e),g.value=e.message||"Failed to start Google authentication. Please try again.",p.value=!1}finally{u.value=!1}},A=async()=>{try{g.value="",h.value=!0,localStorage.removeItem("oauth_error"),await J.A.loginWithGitHub()}catch(e){console.error("GitHub login initialization error:",e),g.value=e.message||"Failed to start GitHub authentication. Please try again.",p.value=!1}finally{h.value=!1}};return{username:s,password:a,twoFactorCode:o,remember:r,showTwoFactorForm:n,twoFactorInput:l,loading:d,googleLoading:u,githubLoading:h,message:g,successful:p,handleLogin:f,verifyTwoFactor:w,cancelTwoFactor:_,loginWithGoogle:C,loginWithGitHub:A}}};const se=(0,w.A)(te,[["render",Q],["__scopeId","data-v-5ebdecc0"]]);var ae=se;const ie={class:"register-container"},oe={class:"form-group"},re={class:"form-group"},ne={class:"form-group"},le={class:"form-group"},ce={class:"form-group"},de=["disabled"],ue={key:0},he={key:1},ge={class:"form-group text-center"};function pe(e,t,s,o,r,n){const c=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("div",ie,[(0,i.Lk)("form",{onSubmit:t[4]||(t[4]=(0,a.D$)((...e)=>n.handleRegister&&n.handleRegister(...e),["prevent"])),class:"register-form"},[t[11]||(t[11]=(0,i.Lk)("h2",null,"Register",-1)),(0,i.Lk)("div",oe,[t[5]||(t[5]=(0,i.Lk)("label",{for:"username"},"Username",-1)),(0,i.bo)((0,i.Lk)("input",{type:"text",id:"username","onUpdate:modelValue":t[0]||(t[0]=e=>r.username=e),required:"",placeholder:"Choose a username"},null,512),[[a.Jo,r.username]])]),(0,i.Lk)("div",re,[t[6]||(t[6]=(0,i.Lk)("label",{for:"email"},"Email",-1)),(0,i.bo)((0,i.Lk)("input",{type:"email",id:"email","onUpdate:modelValue":t[1]||(t[1]=e=>r.email=e),required:"",placeholder:"Enter your email"},null,512),[[a.Jo,r.email]])]),(0,i.Lk)("div",ne,[t[7]||(t[7]=(0,i.Lk)("label",{for:"password"},"Password",-1)),(0,i.bo)((0,i.Lk)("input",{type:"password",id:"password","onUpdate:modelValue":t[2]||(t[2]=e=>r.password=e),required:"",placeholder:"Create a password"},null,512),[[a.Jo,r.password]])]),(0,i.Lk)("div",le,[t[8]||(t[8]=(0,i.Lk)("label",{for:"password2"},"Confirm Password",-1)),(0,i.bo)((0,i.Lk)("input",{type:"password",id:"password2","onUpdate:modelValue":t[3]||(t[3]=e=>r.password2=e),required:"",placeholder:"Confirm your password"},null,512),[[a.Jo,r.password2]])]),r.message?((0,i.uX)(),(0,i.CE)("div",{key:0,class:(0,l.C4)(["alert",r.successful?"alert-success":"alert-danger"])},(0,l.v_)(r.message),3)):(0,i.Q3)("",!0),(0,i.Lk)("div",ce,[(0,i.Lk)("button",{class:"btn btn-primary btn-block",disabled:r.loading},[r.loading?((0,i.uX)(),(0,i.CE)("span",ue,"Loading...")):((0,i.uX)(),(0,i.CE)("span",he,"Register"))],8,de)]),(0,i.Lk)("div",ge,[(0,i.Lk)("p",null,[t[10]||(t[10]=(0,i.eW)(" Already have an account? ")),(0,i.bF)(c,{to:"/login"},{default:(0,i.k6)(()=>t[9]||(t[9]=[(0,i.eW)("Login here")])),_:1,__:[9]})])])],32)])}var ve={name:"Register",data(){return{username:"",email:"",password:"",password2:"",loading:!1,message:"",successful:!1}},methods:{handleRegister(){if(this.message="",this.successful=!1,this.loading=!0,this.password!==this.password2)return this.message="Passwords don't match",void(this.loading=!1);this.$store.dispatch("auth/register",{username:this.username,email:this.email,password:this.password,password2:this.password2}).then(e=>{this.message=e.message||"Registration successful! Please check your email for verification.",this.successful=!0,this.loading=!1,setTimeout(()=>{this.$router.push("/login")},2e3)},e=>{this.message=e.response&&e.response.data?Object.values(e.response.data).flat().join(", "):"Registration failed. Please try again.",this.successful=!1,this.loading=!1})}}};const me=(0,w.A)(ve,[["render",pe],["__scopeId","data-v-2a7cf59a"]]);var ke=me;const ye={class:"dashboard-page"},fe={class:"dashboard"},we={class:"dashboard__header"},be={key:0,class:"last-updated"},Le={key:0,class:"dashboard__loading"},_e={key:1,class:"dashboard__error"},Ce={class:"error-content"},Ae={class:"error-message"},Se={class:"error-actions"},Ee={key:2,class:"dashboard__content"},Me={key:0,class:"milestones-notification"},Fe={class:"notification-header"},Pe={class:"milestone-list"},xe={class:"milestone-icon"},De={class:"milestone-text"};function Ie(e,t,s,a,o,r){const n=(0,i.g2)("router-link"),c=(0,i.g2)("wellness-score-card"),d=(0,i.g2)("bmi-status-card"),u=(0,i.g2)("activity-level-card"),h=(0,i.g2)("activities-card"),g=(0,i.g2)("weight-history-card"),p=(0,i.g2)("ai-insights-card"),v=(0,i.g2)("milestones-card"),m=(0,i.g2)("add-weight-modal"),k=(0,i.g2)("milestone-achievement-modal"),y=(0,i.g2)("meal-planning-card");return(0,i.uX)(),(0,i.CE)("div",ye,[(0,i.Lk)("div",fe,[(0,i.Lk)("div",we,[t[5]||(t[5]=(0,i.Lk)("h1",null,"Health Dashboard",-1)),(0,i.Lk)("p",null,"Welcome back, "+(0,l.v_)(r.getUsernameDisplay())+"!",1),o.lastUpdated?((0,i.uX)(),(0,i.CE)("div",be," Last updated: "+(0,l.v_)(r.formatDateTime(o.lastUpdated)),1)):(0,i.Q3)("",!0)]),o.loading?((0,i.uX)(),(0,i.CE)("div",Le,t[6]||(t[6]=[(0,i.Lk)("div",{class:"loading-spinner"},null,-1),(0,i.Lk)("p",null,"Loading your health data...",-1)]))):o.error?((0,i.uX)(),(0,i.CE)("div",_e,[(0,i.Lk)("div",Ce,[t[8]||(t[8]=(0,i.Lk)("div",{class:"error-icon"},"âš ï¸",-1)),(0,i.Lk)("p",Ae,(0,l.v_)(o.error),1),(0,i.Lk)("div",Se,[(0,i.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>r.fetchHealthData&&r.fetchHealthData(...e)),class:"btn btn-primary"}," Try Again "),(0,i.bF)(n,{to:"/profile",class:"btn btn-secondary"},{default:(0,i.k6)(()=>t[7]||(t[7]=[(0,i.eW)(" Complete Profile ")])),_:1,__:[7]})])])])):((0,i.uX)(),(0,i.CE)("div",Ee,[o.newMilestones.length>0?((0,i.uX)(),(0,i.CE)("div",Me,[(0,i.Lk)("div",Fe,[t[9]||(t[9]=(0,i.Lk)("h3",null,"ðŸŽ‰ New Achievements!",-1)),(0,i.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>r.dismissMilestones&&r.dismissMilestones(...e)),class:"dismiss-btn"},"Ã—")]),(0,i.Lk)("div",Pe,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.newMilestones,e=>((0,i.uX)(),(0,i.CE)("div",{key:e.id,class:"milestone-item"},[(0,i.Lk)("span",xe,(0,l.v_)(r.getMilestoneIcon(e.milestone_type)),1),(0,i.Lk)("span",De,(0,l.v_)(e.description),1)]))),128))])])):(0,i.Q3)("",!0),(0,i.bF)(c,{class:"dashboard-card",profile:o.profile,score:r.formattedWellnessScore?.total||0,"bmi-score":r.formattedWellnessScore?.components?.bmi?.score||0,"activity-score":r.formattedWellnessScore?.components?.activity?.score||0,"progress-score":r.formattedWellnessScore?.components?.progress?.score||0,"habits-score":r.formattedWellnessScore?.components?.habits?.score||0,"score-breakdown":r.formattedWellnessScore?.breakdown,onRecalculate:r.recalculateWellnessScore},null,8,["profile","score","bmi-score","activity-score","progress-score","habits-score","score-breakdown","onRecalculate"]),(0,i.bF)(d,{class:"dashboard-card",bmi:o.bmi,profile:o.profile},null,8,["bmi","profile"]),(0,i.bF)(u,{class:"dashboard-card",profile:o.profile},null,8,["profile"]),(0,i.bF)(h,{class:"dashboard-card",activities:o.activities,onActivityAdded:r.onActivityAdded},null,8,["activities","onActivityAdded"]),(0,i.bF)(g,{class:"dashboard-card",profile:o.profile,"weight-history":o.weightHistory,"weight-change":o.weightChange,onAddWeight:t[2]||(t[2]=e=>o.showAddWeightModal=!0),onWeightGoalAchieved:r.onWeightGoalAchieved},null,8,["profile","weight-history","weight-change","onWeightGoalAchieved"]),(0,i.bF)(p,{class:"dashboard-card","user-data":r.enhancedUserData,loading:o.insightsLoading,onReload:r.regenerateInsights},null,8,["user-data","loading","onReload"]),(0,i.bF)(v,{class:"dashboard-card",milestones:o.recentMilestones,summary:o.milestoneSummary,onMilestoneAchieved:r.onMilestoneAchieved},null,8,["milestones","summary","onMilestoneAchieved"])])),o.showAddWeightModal?((0,i.uX)(),(0,i.Wv)(m,{key:3,class:"modal",loading:o.weightLoading,error:o.weightError,onClose:t[3]||(t[3]=e=>o.showAddWeightModal=!1),onSave:r.saveNewWeight},null,8,["loading","error","onSave"])):(0,i.Q3)("",!0),o.showMilestoneModal?((0,i.uX)(),(0,i.Wv)(k,{key:4,milestones:o.achievedMilestones,onClose:r.closeMilestoneModal},null,8,["milestones","onClose"])):(0,i.Q3)("",!0),(0,i.bF)(y,{class:"dashboard-card",onNavigateToMealPlanning:t[4]||(t[4]=t=>e.$router.push("/meal-planning"))})])])}s(2489),s(1701),s(7642),s(8004),s(3853),s(5876),s(2475),s(5024),s(1698),s(4979);var Te=s(4188),We=s(4687);class Xe{getWellnessScores(e={}){return We.A.get("analytics/wellness-scores/",{params:e})}calculateWellnessScore(e={}){return We.A.post("analytics/wellness-score/calculate/",e)}getLatestWellnessScore(){return We.A.get("analytics/wellness-score/latest/")}getWellnessScoreTrends(e=30){return We.A.get("analytics/wellness-score/trends/",{params:{days:e}})}getInsights(){return We.A.get("analytics/aiinsight/")}generateInsights(e={},t=!1){const s=t?"analytics/aiinsight/generate/?force=true":"analytics/aiinsight/generate/";return We.A.post(s,e)}getMilestones(e={}){return We.A.get("analytics/milestones/",{params:e})}getRecentMilestones(e=30){return We.A.get("analytics/milestones/recent/",{params:{days:e}})}getMilestoneSummary(){return We.A.get("analytics/milestones/summary/")}trackHabitStreak(e,t){return We.A.post("analytics/milestones/track_habit/",{habit_name:e,streak_days:t})}getProgressMetrics(e={}){return We.A.get("analytics/progress-metrics/",{params:e})}exportHealthData(e={}){return We.A.post("analytics/export/",e,{responseType:"csv"===e.format?"blob":"json"})}getActivityTrends(e={}){return We.A.get("analytics/activity-trends/",{params:e})}getWellnessScoreHistory(e={}){return We.A.get("analytics/wellness-history/",{params:e})}async getDashboardAnalytics(){try{const[e,t,s,a]=await Promise.allSettled([this.getLatestWellnessScore(),this.getRecentMilestones(30),this.getMilestoneSummary(),this.getInsights()]);return{wellnessScore:"fulfilled"===e.status?e.value.data:null,milestones:"fulfilled"===t.status?t.value.data:[],milestoneSummary:"fulfilled"===s.status?s.value.data:null,insights:"fulfilled"===a.status?a.value.data:[]}}catch(e){throw console.error("Error fetching dashboard analytics:",e),e}}async checkForNewMilestones(e={}){try{const t=await this.calculateWellnessScore(e);return t.data?.milestones_achieved||[]}catch(t){return console.error("Error checking for milestones:",t),[]}}getWellnessScoreExplanations(){return{bmi_score:{name:"BMI Score",weight:30,description:"Based on your Body Mass Index relative to healthy ranges",optimal:"BMI between 18.5-24.9 for maximum points"},activity_score:{name:"Activity Score",weight:30,description:"Based on your logged activities and declared activity level",optimal:"Regular activities logged with good variety and consistency"},progress_score:{name:"Progress Score",weight:20,description:"Based on milestone achievements and goal progress",optimal:"Regular milestones and steady progress toward goals"},habits_score:{name:"Habits Score",weight:20,description:"Based on consistency in logging and profile completeness",optimal:"Regular weight logging and complete health profile"}}}formatWellnessScore(e){if(!e)return null;const t=this.getWellnessScoreExplanations();return{total:Math.round(e.total_score||0),components:{bmi:{score:Math.round(e.bmi_score||0),points:Math.round(.3*(e.bmi_score||0)),...t.bmi_score},activity:{score:Math.round(e.activity_score||0),points:Math.round(.3*(e.activity_score||0)),...t.activity_score},progress:{score:Math.round(e.progress_score||0),points:Math.round(.2*(e.progress_score||0)),...t.progress_score},habits:{score:Math.round(e.habits_score||0),points:Math.round(.2*(e.habits_score||0)),...t.habits_score}},breakdown:e.score_breakdown||null,lastUpdated:e.created_at||(new Date).toISOString()}}}var Ve=new Xe;s(8237);class Be{calculateBMI(e,t){if(!e||!t||e<=0||t<=0)return null;const s=e/100;return t/(s*s)}getBMICategory(e){return null===e||void 0===e?"":e<18.5?"Underweight":e<25?"Normal Weight":e<30?"Overweight":"Obese"}calculateBMIScore(e){if(!e)return 0;let t=0;return t=e>=18.5&&e<=25?100:e<18.5?100-10*(18.5-e):100-5*(e-25),Math.max(0,Math.min(100,t))}calculateActivityScore(e){console.warn("Deprecated: use calculateActivityScoreFromActivities instead");const t={sedentary:20,light:40,moderate:70,active:90,very_active:100};return t[e]??50}calculateActivityScoreFromActivities(e=[]){if(!Array.isArray(e)||0===e.length)return 0;const t=new Date,s=new Date(t);s.setDate(t.getDate()-7);const a=e.filter(e=>{const a=new Date(e.performed_at);return a>=s&&a<=t}),i=new Set(a.map(e=>new Date(e.performed_at).toDateString())).size,o=100*Math.min(i/7,1),r=a.reduce((e,t)=>e+(t.duration_minutes||0),0),n=420,l=100*Math.min(r/n,1);return Math.round((o+l)/2)}calculateWellnessScoreFromActivities(e,t,s,a){const i=this.calculateActivityScoreFromActivities(t);return this.calculateWellnessScore(e,i,s,a)}calculateWellnessScore(e,t,s,a){return Math.round(.3*e+.3*t+.2*s+.2*a)}getScoreCategory(e){return e>=80?"excellent":e>=60?"good":e>=40?"fair":"poor"}getActivityLevelDisplay(e){const t={sedentary:"Sedentary",light:"Lightly Active",moderate:"Moderately Active",active:"Active",very_active:"Very Active"};return t[e]||"Unknown"}getActivityDescription(e){const t={sedentary:"Little to no regular exercise",light:"Light exercise 1-3 days per week",moderate:"Moderate exercise 3-5 days per week",active:"Hard exercise 6-7 days per week",very_active:"Very hard exercise & physical job or twice daily training"};return t[e]||""}getActivitySuggestions(e){const t={sedentary:["Start with a 10-minute daily walk","Take breaks to stretch every hour","Try using stairs instead of elevators"],light:["Aim for 20-30 minute walks 4-5 days/week","Consider adding 1-2 strength sessions weekly","Try a beginner yoga or flexibility routine"],moderate:["Increase intensity in 1-2 workouts per week","Add variety with different exercise types","Consider tracking heart rate during exercise"],active:["Focus on recovery between intense sessions","Consider periodization in your training","Add mobility work to prevent injuries"],very_active:["Ensure adequate recovery and sleep","Consider professional guidance for programming","Focus on nutrition to support your activity level"]};return t[e]||[]}getPriorityDisplay(e){const t={high:"High Priority",medium:"Medium Priority",low:"Low Priority"};return t[e]||""}evaluateWeightChange(e,t){return 0===e?"neutral":"weight_loss"===t?e<0?"positive":"negative":"muscle_gain"===t?e>0?"positive":"negative":"neutral"}}var $e=new Be;s(7588);class Ue{getAllActivities(e={}){return We.A.get("activities/",{params:e})}getActivitiesByDateRange(e,t){return We.A.get("activities/",{params:{start_date:e,end_date:t}})}getActivitiesByType(e){return We.A.get("activities/",{params:{activity_type:e}})}getActivity(e){return We.A.get(`activities/${e}/`)}createActivity(e){return We.A.post("activities/",e)}updateActivity(e,t){return We.A.put(`activities/${e}/`,t)}deleteActivity(e){return We.A.delete(`activities/${e}/`)}getActivitySummary(){return We.A.get("activities/summary/")}getActivitiesByTypeGrouped(){return We.A.get("activities/by_type/")}getRecentActivities(){return We.A.get("activities/recent/")}getCalendarData(e,t){return We.A.get("activities/calendar_data/",{params:{start_date:e,end_date:t}})}estimateCalories(e,t,s=70){const a={cardio:7,strength:6,flexibility:2.5,sports:8,hiit:8,yoga:2.5,other:4},i=a[e]||4,o=i*s*(t/60);return Math.round(o)}async getActivityStats(e="week"){const t=new Date;let s=new Date;switch(e){case"week":s.setDate(t.getDate()-7);break;case"month":s.setMonth(t.getMonth()-1);break;case"year":s.setFullYear(t.getFullYear()-1);break}const a=await this.getActivitiesByDateRange(s.toISOString().split("T")[0],t.toISOString().split("T")[0]),i=a.data;return{totalActivities:i.length,totalDuration:i.reduce((e,t)=>e+t.duration_minutes,0),totalDistance:i.reduce((e,t)=>e+(t.distance_km||0),0),totalCalories:i.reduce((e,t)=>e+(t.calories_burned||0),0),activeDays:this.calculateActiveDays(i),activityDistribution:this.calculateActivityDistribution(i)}}calculateActiveDays(e){const t=new Set(e.map(e=>new Date(e.performed_at).toLocaleDateString()));return t.size}calculateActivityDistribution(e){const t={};return e.forEach(e=>{t[e.activity_type]||(t[e.activity_type]=0),t[e.activity_type]++}),t}}var He=new Ue;const Re={class:"score-card"},Ne={class:"score-number"},Oe={class:"score-breakdown"},qe={class:"score-component"},Ge={class:"component-info"},je={class:"component-value"},Qe={class:"progress-bar"},Je={class:"score-component"},Ye={class:"component-info"},Ke={class:"component-value"},ze={class:"progress-bar"},Ze={class:"score-component"},et={class:"component-info"},tt={class:"component-value"},st={class:"progress-bar"},at={class:"score-component"},it={class:"component-info"},ot={class:"component-value"},rt={class:"progress-bar"};function nt(e,t,s,a,o,r){const n=(0,i.g2)("router-link"),c=(0,i.g2)("dashboard-card");return(0,i.uX)(),(0,i.Wv)(c,{title:"Wellness Score",isEmpty:!r.hasProfileData},{empty:(0,i.k6)(()=>[t[1]||(t[1]=(0,i.Lk)("p",null,"Your wellness score will be calculated once you've completed your health profile.",-1)),(0,i.bF)(n,{to:"/profile",class:"btn btn-primary"},{default:(0,i.k6)(()=>t[0]||(t[0]=[(0,i.eW)("Complete Profile")])),_:1,__:[0]})]),default:(0,i.k6)(()=>[(0,i.Lk)("div",Re,[(0,i.Lk)("div",{class:(0,l.C4)(["score-circle",r.scoreClass])},[(0,i.Lk)("span",Ne,(0,l.v_)(s.score),1)],2),(0,i.Lk)("div",Oe,[(0,i.Lk)("div",qe,[(0,i.Lk)("div",Ge,[t[2]||(t[2]=(0,i.Lk)("span",{class:"component-label"},"BMI Score",-1)),(0,i.Lk)("span",je,(0,l.v_)(s.bmiScore)+"% ("+(0,l.v_)((.3*s.bmiScore).toFixed(1))+"pts)",1)]),(0,i.Lk)("div",Qe,[(0,i.Lk)("div",{class:"progress",style:(0,l.Tr)({width:s.bmiScore+"%"})},null,4)])]),(0,i.Lk)("div",Je,[(0,i.Lk)("div",Ye,[t[3]||(t[3]=(0,i.Lk)("span",{class:"component-label"},"Activity",-1)),(0,i.Lk)("span",Ke,(0,l.v_)(s.activityScore)+"% ("+(0,l.v_)((.3*s.activityScore).toFixed(1))+"pts)",1)]),(0,i.Lk)("div",ze,[(0,i.Lk)("div",{class:"progress",style:(0,l.Tr)({width:s.activityScore+"%"})},null,4)])]),(0,i.Lk)("div",Ze,[(0,i.Lk)("div",et,[t[4]||(t[4]=(0,i.Lk)("span",{class:"component-label"},"Progress",-1)),(0,i.Lk)("span",tt,(0,l.v_)(s.progressScore)+"% ("+(0,l.v_)((.2*s.progressScore).toFixed(1))+"pts)",1)]),(0,i.Lk)("div",st,[(0,i.Lk)("div",{class:"progress",style:(0,l.Tr)({width:s.progressScore+"%"})},null,4)])]),(0,i.Lk)("div",at,[(0,i.Lk)("div",it,[t[5]||(t[5]=(0,i.Lk)("span",{class:"component-label"},"Habits",-1)),(0,i.Lk)("span",ot,(0,l.v_)(s.habitsScore)+"% ("+(0,l.v_)((.2*s.habitsScore).toFixed(1))+"pts)",1)]),(0,i.Lk)("div",rt,[(0,i.Lk)("div",{class:"progress",style:(0,l.Tr)({width:s.habitsScore+"%"})},null,4)])])])])]),_:1},8,["isEmpty"])}const lt={class:"dashboard-card"},ct={class:"dashboard-card__title"},dt={key:0,class:"dashboard-card__loading"},ut={key:1,class:"dashboard-card__error"},ht={class:"error-text"},gt={key:2,class:"dashboard-card__empty"},pt={key:3,class:"dashboard-card__body"};function vt(e,t,s,a,o,r){return(0,i.uX)(),(0,i.CE)("div",lt,[(0,i.Lk)("h2",ct,(0,l.v_)(s.title),1),s.loading?((0,i.uX)(),(0,i.CE)("div",dt,[t[0]||(t[0]=(0,i.Lk)("div",{class:"loading-spinner"},null,-1)),(0,i.Lk)("p",null,(0,l.v_)(s.loadingText),1)])):s.error?((0,i.uX)(),(0,i.CE)("div",ut,[(0,i.Lk)("p",ht,(0,l.v_)(s.error),1),(0,i.RG)(e.$slots,"error-action")])):s.isEmpty?((0,i.uX)(),(0,i.CE)("div",gt,[(0,i.RG)(e.$slots,"empty")])):((0,i.uX)(),(0,i.CE)("div",pt,[(0,i.RG)(e.$slots,"default")]))])}var mt={name:"DashboardCard",props:{title:{type:String,required:!0},loading:{type:Boolean,default:!1},loadingText:{type:String,default:"Loading..."},error:{type:String,default:null},isEmpty:{type:Boolean,default:!1}}};const kt=(0,w.A)(mt,[["render",vt]]);var yt=kt,ft={name:"WellnessScoreCard",components:{DashboardCard:yt},props:{profile:{type:Object,default:null},score:{type:Number,default:0},bmiScore:{type:Number,default:0},activityScore:{type:Number,default:0},progressScore:{type:Number,default:0},habitsScore:{type:Number,default:0}},computed:{hasProfileData(){return this.profile&&this.profile.height_cm&&this.profile.weight_kg},scoreClass(){return $e.getScoreCategory(this.score)}}};const wt=(0,w.A)(ft,[["render",nt],["__scopeId","data-v-230c21a4"]]);var bt=wt;const Lt={class:"bmi-card"},_t={class:"bmi-value"},Ct={class:"bmi-category"},At={class:"bmi-scale"},St={class:"bmi-scale-bar"};function Et(e,t,s,a,o,r){const n=(0,i.g2)("router-link"),c=(0,i.g2)("dashboard-card");return(0,i.uX)(),(0,i.Wv)(c,{title:"BMI Status",isEmpty:null===s.bmi},{empty:(0,i.k6)(()=>[t[1]||(t[1]=(0,i.Lk)("p",null,"Your BMI will be calculated once you've added your height and weight.",-1)),(0,i.bF)(n,{to:"/profile",class:"btn btn-primary"},{default:(0,i.k6)(()=>t[0]||(t[0]=[(0,i.eW)("Update Profile")])),_:1,__:[0]})]),default:(0,i.k6)(()=>[(0,i.Lk)("div",Lt,[(0,i.Lk)("div",_t,(0,l.v_)(s.bmi.toFixed(1)),1),(0,i.Lk)("div",Ct,(0,l.v_)(r.bmiCategory),1),(0,i.Lk)("div",At,[(0,i.Lk)("div",St,[(0,i.Lk)("div",{class:"bmi-marker",style:(0,l.Tr)({left:r.markerPosition+"%"})},null,4)]),t[2]||(t[2]=(0,i.Lk)("div",{class:"bmi-segments"},[(0,i.Lk)("div",{class:"segment underweight"},"Underweight"),(0,i.Lk)("div",{class:"segment normal"},"Normal"),(0,i.Lk)("div",{class:"segment overweight"},"Overweight"),(0,i.Lk)("div",{class:"segment obese"},"Obese")],-1))])])]),_:1},8,["isEmpty"])}var Mt={name:"BmiStatusCard",components:{DashboardCard:yt},props:{bmi:{type:Number,default:null},profile:{type:Object,default:null}},computed:{bmiCategory(){return $e.getBMICategory(this.bmi)},markerPosition(){if(null===this.bmi)return 0;const e=Math.min(Math.max(this.bmi,15),40)-15;return e/25*100}}};const Ft=(0,w.A)(Mt,[["render",Et]]);var Pt=Ft;const xt={class:"activity-card"},Dt={class:"activity-level"},It={class:"activity-description"},Tt={class:"activity-suggestions"};function Wt(e,t,s,a,o,r){const n=(0,i.g2)("router-link"),c=(0,i.g2)("dashboard-card");return(0,i.uX)(),(0,i.Wv)(c,{title:"Activity Level",isEmpty:!s.profile||!s.profile.activity_level},{empty:(0,i.k6)(()=>[t[1]||(t[1]=(0,i.Lk)("p",null,"Your activity tracking will appear once you've updated your profile.",-1)),(0,i.bF)(n,{to:"/profile",class:"btn btn-primary"},{default:(0,i.k6)(()=>t[0]||(t[0]=[(0,i.eW)("Update Profile")])),_:1,__:[0]})]),default:(0,i.k6)(()=>[(0,i.Lk)("div",xt,[(0,i.Lk)("div",Dt,(0,l.v_)(r.activityLevelDisplay),1),(0,i.Lk)("p",It,(0,l.v_)(r.activityDescription),1),(0,i.Lk)("div",Tt,[t[2]||(t[2]=(0,i.Lk)("h3",null,"Suggestions",-1)),(0,i.Lk)("ul",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.activitySuggestions,(e,t)=>((0,i.uX)(),(0,i.CE)("li",{key:t},(0,l.v_)(e),1))),128))])])])]),_:1},8,["isEmpty"])}var Xt={name:"ActivityLevelCard",components:{DashboardCard:yt},props:{profile:{type:Object,default:null}},computed:{activityLevelDisplay(){return $e.getActivityLevelDisplay(this.profile?.activity_level)},activityDescription(){return $e.getActivityDescription(this.profile?.activity_level)},activitySuggestions(){return $e.getActivitySuggestions(this.profile?.activity_level)}}};const Vt=(0,w.A)(Xt,[["render",Wt]]);var Bt=Vt;const $t={class:"weight-container"},Ut={class:"weight-summary"},Ht={class:"weight-item"},Rt={class:"weight-value"},Nt={key:0,class:"weight-item"},Ot={class:"weight-value"},qt={key:1,class:"weight-item"},Gt={key:0,class:"goal-progress"},jt={class:"progress-bar-container"},Qt={class:"progress-bar"},Jt={class:"progress-labels"},Yt={class:"goal-status"},Kt={key:0},zt={key:1,class:"goal-achieved"},Zt={key:1,class:"goal-completed"},es={key:2,class:"weight-trend"},ts={class:"weight-mini-chart"},ss=["title"],as={key:3,class:"weight-history-list"},is={class:"weight-table"},os={key:4,class:"view-all-link"};function rs(e,t,s,a,o,r){const n=(0,i.g2)("router-link"),c=(0,i.g2)("goal-achieved-modal"),d=(0,i.g2)("dashboard-card");return(0,i.uX)(),(0,i.Wv)(d,{title:"Weight History",isEmpty:!s.weightHistory||0===s.weightHistory.length,error:s.error},{empty:(0,i.k6)(()=>[t[3]||(t[3]=(0,i.Lk)("p",null,"Your weight history will appear once you start tracking your weight.",-1)),(0,i.Lk)("button",{onClick:t[0]||(t[0]=t=>e.$emit("add-weight")),class:"btn btn-primary"}," Start Tracking Weight ")]),default:(0,i.k6)(()=>[(0,i.Lk)("div",$t,[(0,i.Lk)("div",Ut,[(0,i.Lk)("div",Ht,[t[4]||(t[4]=(0,i.Lk)("span",{class:"weight-label"},"Current:",-1)),(0,i.Lk)("span",Rt,(0,l.v_)(s.profile?.weight_kg)+" kg",1)]),s.profile?.target_weight_kg?((0,i.uX)(),(0,i.CE)("div",Nt,[t[5]||(t[5]=(0,i.Lk)("span",{class:"weight-label"},"Target:",-1)),(0,i.Lk)("span",Ot,(0,l.v_)(s.profile.target_weight_kg)+" kg",1)])):(0,i.Q3)("",!0),null!==s.weightChange?((0,i.uX)(),(0,i.CE)("div",qt,[t[6]||(t[6]=(0,i.Lk)("span",{class:"weight-label"},"Recent Change:",-1)),(0,i.Lk)("span",{class:(0,l.C4)(["weight-value",r.weightChangeClass])},(0,l.v_)(s.weightChange>0?"+":"")+(0,l.v_)(s.weightChange.toFixed(1))+" kg ",3)])):(0,i.Q3)("",!0)]),s.profile?.target_weight_kg&&!r.goalCompleted?((0,i.uX)(),(0,i.CE)("div",Gt,[t[8]||(t[8]=(0,i.Lk)("h3",null,"Goal Progress",-1)),(0,i.Lk)("div",jt,[(0,i.Lk)("div",Qt,[(0,i.Lk)("div",{class:(0,l.C4)(["progress-fill",r.goalProgressClass]),style:(0,l.Tr)({width:r.goalProgressPercentage+"%"})},null,6)]),(0,i.Lk)("div",Jt,[(0,i.Lk)("span",{class:"current-position",style:(0,l.Tr)({left:r.goalProgressPercentage+"%"})},t[7]||(t[7]=[(0,i.Lk)("span",{class:"current-marker"},null,-1)]),4)])]),(0,i.Lk)("p",Yt,[0!==r.remainingToGoal?((0,i.uX)(),(0,i.CE)("span",Kt,[(0,i.Lk)("strong",null,(0,l.v_)(Math.abs(r.remainingToGoal).toFixed(1))+" kg",1),(0,i.eW)(" "+(0,l.v_)(r.remainingToGoal>0?"to lose":"to gain")+" to reach your goal ",1)])):((0,i.uX)(),(0,i.CE)("span",zt," ðŸŽ‰ Congratulations! You've reached your target weight! "))])])):(0,i.Q3)("",!0),s.profile?.target_weight_kg&&r.goalCompleted?((0,i.uX)(),(0,i.CE)("div",Zt,[t[10]||(t[10]=(0,i.Lk)("h3",null,"Weight Goal Achieved! ðŸŽ‰",-1)),(0,i.Lk)("p",null,"You've reached your target weight of "+(0,l.v_)(s.profile.target_weight_kg)+"kg!",1),(0,i.bF)(n,{to:"/profile",class:"btn btn-primary"},{default:(0,i.k6)(()=>t[9]||(t[9]=[(0,i.eW)("Set a New Goal")])),_:1,__:[9]})])):(0,i.Q3)("",!0),s.weightHistory.length>0?((0,i.uX)(),(0,i.CE)("div",es,[(0,i.Lk)("div",ts,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.normalizedEntries,(e,t)=>((0,i.uX)(),(0,i.CE)("div",{key:t,class:"mini-chart-bar",style:(0,l.Tr)({height:e.height+"%",background:r.getBarColor(e.value,s.profile?.fitness_goal)}),title:`${r.formatDate(e.recorded_at)}: ${e.value} kg`},null,12,ss))),128))])])):(0,i.Q3)("",!0),s.weightHistory.length>1?((0,i.uX)(),(0,i.CE)("div",as,[t[12]||(t[12]=(0,i.Lk)("h3",null,"Recent Entries",-1)),(0,i.Lk)("table",is,[t[11]||(t[11]=(0,i.Lk)("thead",null,[(0,i.Lk)("tr",null,[(0,i.Lk)("th",null,"Date & Time"),(0,i.Lk)("th",null,"Weight")])],-1)),(0,i.Lk)("tbody",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.recentEntries,e=>((0,i.uX)(),(0,i.CE)("tr",{key:e.id},[(0,i.Lk)("td",null,(0,l.v_)(r.formatDateTime(e.recorded_at)),1),(0,i.Lk)("td",null,(0,l.v_)(e.weight_kg)+" kg",1)]))),128))])])])):(0,i.Q3)("",!0),(0,i.Lk)("button",{onClick:t[1]||(t[1]=t=>e.$emit("add-weight")),class:"btn btn-secondary"}," Log New Weight "),s.weightHistory.length>5?((0,i.uX)(),(0,i.CE)("div",os,[(0,i.bF)(n,{to:"/progress"},{default:(0,i.k6)(()=>t[13]||(t[13]=[(0,i.eW)("View full weight history and charts")])),_:1,__:[13]})])):(0,i.Q3)("",!0)]),o.showGoalAchievedModal?((0,i.uX)(),(0,i.Wv)(c,{key:0,show:o.showGoalAchievedModal,"goal-weight":Number(s.profile?.target_weight_kg),"current-weight":Number(s.profile?.weight_kg),"start-weight":Number(r.startWeight),onClose:t[2]||(t[2]=e=>o.showGoalAchievedModal=!1)},null,8,["show","goal-weight","current-weight","start-weight"])):(0,i.Q3)("",!0)]),_:1},8,["isEmpty","error"])}const ns={key:0,class:"goal-achieved-modal"},ls={class:"modal-content"},cs={class:"confetti-container"},ds={class:"achievement-content"},us={class:"achievement-details"},hs={class:"detail-item"},gs={class:"detail-value"},ps={class:"detail-item"},vs={class:"detail-value"},ms={class:"detail-item"},ks={class:"detail-value"};function ys(e,t,s,a,o,r){return s.show?((0,i.uX)(),(0,i.CE)("div",ns,[(0,i.Lk)("div",ls,[(0,i.Lk)("div",cs,[((0,i.uX)(),(0,i.CE)(i.FK,null,(0,i.pI)(50,e=>(0,i.Lk)("div",{key:e,class:"confetti",style:(0,l.Tr)(r.randomConfettiStyle())},null,4)),64))]),(0,i.Lk)("div",ds,[t[4]||(t[4]=(0,i.Lk)("div",{class:"achievement-icon"},"ðŸ†",-1)),t[5]||(t[5]=(0,i.Lk)("h2",null,"Goal Achieved!",-1)),(0,i.Lk)("p",null,"Congratulations! You've reached your weight goal of "+(0,l.v_)(s.goalWeight)+"kg.",1),(0,i.Lk)("div",us,[(0,i.Lk)("div",hs,[t[1]||(t[1]=(0,i.Lk)("span",{class:"detail-label"},"Starting Weight:",-1)),(0,i.Lk)("span",gs,(0,l.v_)(s.startWeight)+"kg",1)]),(0,i.Lk)("div",ps,[t[2]||(t[2]=(0,i.Lk)("span",{class:"detail-label"},"Current Weight:",-1)),(0,i.Lk)("span",vs,(0,l.v_)(s.currentWeight)+"kg",1)]),(0,i.Lk)("div",ms,[t[3]||(t[3]=(0,i.Lk)("span",{class:"detail-label"},"Total Change:",-1)),(0,i.Lk)("span",ks,(0,l.v_)((s.startWeight-s.currentWeight).toFixed(1))+"kg",1)])]),(0,i.Lk)("button",{onClick:t[0]||(t[0]=t=>e.$emit("close")),class:"btn-primary"},"Continue")])])])):(0,i.Q3)("",!0)}var fs={name:"GoalAchievedModal",props:{show:{type:Boolean,default:!1},goalWeight:{type:Number,required:!0},currentWeight:{type:Number,required:!0},startWeight:{type:Number,required:!0}},created(){this.recordGoalAchievement()},methods:{async recordGoalAchievement(){try{await Ve.calculateWellnessScore()}catch(e){console.error("Failed to record goal achievement:",e)}},randomConfettiStyle(){const e=["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722"];return{backgroundColor:e[Math.floor(Math.random()*e.length)],left:100*Math.random()+"vw",top:-10*Math.random()-10+"vh",transform:"rotate("+360*Math.random()+"deg)",width:Math.random()+.5+"rem",height:.3*Math.random()+.1+"rem",animationDelay:5*Math.random()+"s",animationDuration:3*Math.random()+3+"s"}}}};const ws=(0,w.A)(fs,[["render",ys],["__scopeId","data-v-34894052"]]);var bs=ws,Ls={name:"WeightHistoryCard",components:{DashboardCard:yt,GoalAchievedModal:bs},props:{profile:{type:Object,default:null},weightHistory:{type:Array,default:()=>[]},weightChange:{type:Number,default:null},error:{type:String,default:null}},data(){return{showGoalAchievedModal:!1,goalAchieved:!1,lastAchievedGoal:null}},computed:{weightChangeClass(){return $e.evaluateWeightChange(this.weightChange,this.profile?.fitness_goal)},recentEntries(){return this.weightHistory&&this.weightHistory.length?[...this.weightHistory].sort((e,t)=>new Date(t.recorded_at)-new Date(e.recorded_at)).slice(0,5):[]},normalizedEntries(){if(!this.weightHistory||0===this.weightHistory.length)return[];const e=[...this.weightHistory].sort((e,t)=>new Date(e.recorded_at)-new Date(t.recorded_at)).slice(-10),t=e.map(e=>parseFloat(e.weight_kg)),s=Math.min(...t),a=Math.max(...t),i=Math.max(a-s,2);return e.map(e=>({value:parseFloat(e.weight_kg),recorded_at:e.recorded_at,height:(parseFloat(e.weight_kg)-s)/i*80+10}))},startWeight(){if(!this.weightHistory||0===this.weightHistory.length)return this.profile?.weight_kg;const e=[...this.weightHistory].sort((e,t)=>new Date(e.recorded_at)-new Date(t.recorded_at)).shift();return e.weight_kg},goalProgressPercentage(){if(!this.profile?.target_weight_kg||!this.startWeight)return 0;const e=parseFloat(this.profile.weight_kg),t=parseFloat(this.profile.target_weight_kg),s=parseFloat(this.startWeight);if(s===t)return 100;const a=Math.abs(s-t),i=Math.abs(s-e),o=i/a*100;return Math.min(Math.max(o,0),100)},remainingToGoal(){if(!this.profile?.target_weight_kg)return 0;const e=parseFloat(this.profile.weight_kg),t=parseFloat(this.profile.target_weight_kg);return e-t},goalProgressClass(){return this.profile?.target_weight_kg&&this.profile?.fitness_goal?"weight_loss"===this.profile.fitness_goal?this.remainingToGoal>0?"progress-loss":"progress-complete":"muscle_gain"===this.profile.fitness_goal?this.remainingToGoal<0?"progress-gain":"progress-complete":"":""},goalCompleted(){return this.profile?.target_weight_kg&&Math.abs(parseFloat(this.profile.weight_kg)-parseFloat(this.profile.target_weight_kg))<=.5}},watch:{remainingToGoal(e){!this.goalAchieved&&Math.abs(e)<.5&&(this.lastAchievedGoal=this.profile?.target_weight_kg,this.showGoalAchievedModal=!0,this.goalAchieved=!0)},"profile.target_weight_kg":function(e){e!==this.lastAchievedGoal&&(this.goalAchieved=!1)}},methods:{formatDate(e){const t=new Date(e);return t.toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})},formatDateTime(e){const t=new Date(e);return t.toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})+" "+t.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit"})},getBarColor(e,t){if(!t||!this.profile?.weight_kg)return this.$primary||"#30C1B1";const s=parseFloat(this.profile.weight_kg),a=getComputedStyle(document.documentElement).getPropertyValue("--success-color")||"#4CAF50",i=getComputedStyle(document.documentElement).getPropertyValue("--warning-color")||"#FF9800";return"weight_loss"===t?e<=s?a:i:"muscle_gain"===t?e>=s?a:i:"#30C1B1"}}};const _s=(0,w.A)(Ls,[["render",rs],["__scopeId","data-v-f6cda6b4"]]);var Cs=_s;const As={key:0,class:"daily-limit-warning"},Ss={key:2,class:"dashboard-card__loading"},Es={key:3,class:"dashboard-card__empty"},Ms={class:"empty-actions"},Fs=["disabled"],Ps={key:0,class:"context-summary"},xs={class:"context-items"},Ds={key:0,class:"context-item"},Is={key:1,class:"context-item"},Ts={key:2,class:"context-item"},Ws={class:"insights-container"},Xs={class:"insight-header"},Vs={class:"insight-date"},Bs={class:"insight-content"},$s={class:"insights-actions"},Us=["disabled","title"],Hs={key:0,class:"btn-spinner",width:"16",height:"16",viewBox:"0 0 24 24"},Rs=["disabled"],Ns={class:"generation-info"},Os={class:"info-row"},qs={class:"info-value"},Gs={key:0,class:"info-row"};function js(e,t,s,a,o,r){const n=(0,i.g2)("dashboard-card");return(0,i.uX)(),(0,i.Wv)(n,{title:"AI Insights"},{default:(0,i.k6)(()=>[o.dailyLimitReached?((0,i.uX)(),(0,i.CE)("div",As,t[3]||(t[3]=[(0,i.Lk)("div",{class:"warning-icon"},"âš ï¸",-1),(0,i.Lk)("p",null,"You've reached your daily AI insight generation limit. Showing cached insights.",-1)]))):(0,i.Q3)("",!0),o.statusMessage?((0,i.uX)(),(0,i.CE)("p",{key:1,class:(0,l.C4)(["status-message",o.statusMessageClass])},(0,l.v_)(o.statusMessage),3)):(0,i.Q3)("",!0),o.loading?((0,i.uX)(),(0,i.CE)("div",Ss,[t[4]||(t[4]=(0,i.Lk)("div",{class:"loading-spinner"},null,-1)),(0,i.Lk)("p",null,(0,l.v_)(o.loadingMessage),1)])):o.insights.length?((0,i.uX)(),(0,i.CE)(i.FK,{key:4},[o.contextSummary?((0,i.uX)(),(0,i.CE)("div",Ps,[t[8]||(t[8]=(0,i.Lk)("h4",null,"Based on your profile:",-1)),(0,i.Lk)("div",xs,[o.contextSummary.bmi?((0,i.uX)(),(0,i.CE)("span",Ds," BMI: "+(0,l.v_)(o.contextSummary.bmi),1)):(0,i.Q3)("",!0),o.contextSummary.recent_activities?((0,i.uX)(),(0,i.CE)("span",Is,(0,l.v_)(o.contextSummary.recent_activities)+" recent activities ",1)):(0,i.Q3)("",!0),o.contextSummary.milestones_this_month?((0,i.uX)(),(0,i.CE)("span",Ts,(0,l.v_)(o.contextSummary.milestones_this_month)+" milestones this month ",1)):(0,i.Q3)("",!0)])])):(0,i.Q3)("",!0),(0,i.Lk)("div",Ws,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.insights,(e,t)=>((0,i.uX)(),(0,i.CE)("div",{key:e.id||t,class:(0,l.C4)(["insight-item",`priority-${e.priority}`])},[(0,i.Lk)("div",Xs,[(0,i.Lk)("span",{class:(0,l.C4)(["priority-badge",`priority-${e.priority}`])},(0,l.v_)(r.getPriorityIcon(e.priority))+" "+(0,l.v_)(r.getPriorityDisplay(e.priority)),3),(0,i.Lk)("span",Vs,(0,l.v_)(r.formatDate(e.created_at)),1)]),(0,i.Lk)("p",Bs,(0,l.v_)(e.content),1)],2))),128))]),(0,i.Lk)("div",$s,[(0,i.Lk)("button",{onClick:t[1]||(t[1]=e=>r.reloadInsights(!0)),class:"btn btn-secondary",disabled:o.loading||o.dailyLimitReached,title:o.dailyLimitReached?"Daily regeneration limit reached":"Generate fresh insights (counts toward daily limit)"},[o.loading?((0,i.uX)(),(0,i.CE)("svg",Hs,t[9]||(t[9]=[(0,i.Lk)("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"2",fill:"none",opacity:"0.3"},null,-1),(0,i.Lk)("path",{d:"M2 12C2 6.48 6.48 2 12 2",stroke:"currentColor","stroke-width":"2",fill:"none"},null,-1)]))):(0,i.Q3)("",!0),(0,i.eW)(" "+(0,l.v_)(o.loading?"Generating...":"Regenerate Insights"),1)],8,Us),(0,i.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>r.refreshCachedInsights&&r.refreshCachedInsights(...e)),class:"btn btn-text",disabled:o.loading}," Refresh ",8,Rs)]),(0,i.Lk)("div",Ns,[(0,i.Lk)("div",Os,[t[10]||(t[10]=(0,i.Lk)("span",{class:"info-label"},"Last updated:",-1)),(0,i.Lk)("span",qs,(0,l.v_)(r.formatDate(o.insights[0]?.created_at)),1)]),o.cached?((0,i.uX)(),(0,i.CE)("div",Gs,t[11]||(t[11]=[(0,i.Lk)("span",{class:"cached-indicator"},"ðŸ“‹ Showing cached insights",-1)]))):(0,i.Q3)("",!0)])],64)):((0,i.uX)(),(0,i.CE)("div",Es,[t[6]||(t[6]=(0,i.Lk)("div",{class:"empty-icon"},"ðŸ¤–",-1)),t[7]||(t[7]=(0,i.Lk)("p",null,"No insights available yet.",-1)),(0,i.Lk)("div",Ms,[(0,i.Lk)("button",{onClick:t[0]||(t[0]=e=>r.reloadInsights(!1)),class:"btn btn-primary",disabled:o.loading}," Generate Insights ",8,Fs),t[5]||(t[5]=(0,i.Lk)("p",{class:"help-text"},"Complete your health profile for personalized insights",-1))])]))]),_:1})}class Qs{getInsights(){return We.A.get("analytics/aiinsight/").then(e=>e.data)}generateInsights(e,t=!1){const s="analytics/aiinsight/generate/"+(t?"?force=true":"");return We.A.post(s,e).then(e=>e.data)}}var Js=new Qs,Ys={name:"AiInsightsCard",components:{DashboardCard:yt},props:{userData:{type:Object,required:!0}},data(){return{insights:[],loading:!1,error:null,statusMessage:"",statusMessageClass:"",loadingMessage:"Loading your personalized AI insights...",dailyLimitReached:!1,cached:!1,contextSummary:null}},created(){this.loadInsights(!1)},methods:{async loadInsights(e=!1){this.loading=!0,this.error=null,this.statusMessage="",this.statusMessageClass="",this.loadingMessage=e?"Generating fresh insights...":"Loading your personalized AI insights...";try{const t=await Js.generateInsights(this.userData,e);t.insights?(this.insights=Array.isArray(t.insights)?t.insights:[],this.cached=t.cached||!1,this.contextSummary=t.context_summary||null,e&&t.cached?(this.statusMessage="Daily regeneration limit reached. Showing cached insights.",this.statusMessageClass="warning",this.dailyLimitReached=!0):e&&!t.cached&&(this.statusMessage="Fresh insights generated successfully!",this.statusMessageClass="success",this.dailyLimitReached=!1)):this.insights=Array.isArray(t)?t:[]}catch(t){if(console.error("AI Insights error:",t),429===t.response?.status){this.statusMessage=t.response.data?.detail||"Daily insight generation limit reached.",this.statusMessageClass="warning",this.dailyLimitReached=!0;try{const e=await Js.generateInsights(this.userData,!1);e.insights&&(this.insights=Array.isArray(e.insights)?e.insights:[],this.cached=!0)}catch(s){console.error("Failed to load cached insights:",s),this.insights=this.generateFallbackInsights()}}else this.insights=this.generateFallbackInsights(),this.statusMessage="AI service temporarily unavailable. Showing general recommendations.",this.statusMessageClass="info"}finally{this.loading=!1}},async reloadInsights(e=!1){await this.loadInsights(e)},async refreshCachedInsights(){await this.loadInsights(!1)},generateFallbackInsights(){const e=[{content:"Stay hydrated by drinking at least 8 glasses of water daily for optimal health.",priority:"medium",created_at:(new Date).toISOString()},{content:"Aim for 7-9 hours of quality sleep each night to support recovery and wellness.",priority:"high",created_at:(new Date).toISOString()},{content:"Take a 10-minute walk after meals to improve digestion and blood sugar control.",priority:"low",created_at:(new Date).toISOString()}];return"weight_loss"===this.userData.fitness_goal&&e.unshift({content:"Focus on creating a moderate caloric deficit through both diet and exercise for sustainable weight loss.",priority:"high",created_at:(new Date).toISOString()}),e},getPriorityDisplay(e){const t={high:"High Priority",medium:"Medium Priority",low:"Low Priority"};return t[e]||e},getPriorityIcon(e){const t={high:"ðŸ”´",medium:"ðŸŸ¡",low:"ðŸŸ¢"};return t[e]||"ðŸ”µ"},formatDate(e){if(!e)return"";const t=new Date(e);return t.toLocaleDateString(void 0,{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}}};const Ks=(0,w.A)(Ys,[["render",js],["__scopeId","data-v-57dd1efb"]]);var zs=Ks,Zs=s(1575);const ea={class:"milestones-container"},ta={class:"milestone-icon"},sa={key:0},aa={key:1},ia={key:2},oa={key:3},ra={class:"milestone-details"},na={class:"milestone-title"},la={class:"milestone-date"};function ca(e,t,s,a,o,r){const n=(0,i.g2)("dashboard-card");return(0,i.uX)(),(0,i.Wv)(n,{title:"Achievements & Milestones",isEmpty:!r.filteredMilestones||0===r.filteredMilestones.length,loading:o.loading},{empty:(0,i.k6)(()=>t[0]||(t[0]=[(0,i.Lk)("p",null,"Complete your health profile and start tracking your progress to earn achievements!",-1)])),default:(0,i.k6)(()=>[(0,i.Lk)("div",ea,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.filteredMilestones,e=>((0,i.uX)(),(0,i.CE)("div",{key:e.id,class:(0,l.C4)(["milestone-item",`milestone-${e.milestone_type}`])},[(0,i.Lk)("div",ta,["weight"===e.milestone_type?((0,i.uX)(),(0,i.CE)("span",sa,"âš–ï¸")):"activity"===e.milestone_type?((0,i.uX)(),(0,i.CE)("span",aa,"ðŸƒ")):"habit"===e.milestone_type?((0,i.uX)(),(0,i.CE)("span",ia,"ðŸ”„")):((0,i.uX)(),(0,i.CE)("span",oa,"ðŸ†"))]),(0,i.Lk)("div",ra,[(0,i.Lk)("h4",na,(0,l.v_)(e.description||"Achievement unlocked!"),1),(0,i.Lk)("span",la,(0,l.v_)(r.formatDate(e.achieved_at)),1)])],2))),128)),t[1]||(t[1]=(0,i.Lk)("div",{class:"milestone-footer"},[(0,i.Lk)("p",{class:"milestone-info"},"Milestones contribute to your wellness score!")],-1))])]),_:1},8,["isEmpty","loading"])}var da={name:"MilestonesCard",components:{DashboardCard:yt},props:{milestones:{type:[Array,Object],default:()=>[]},summary:{type:Object,default:null}},data(){return{localMilestones:[],loading:!1,error:null}},computed:{filteredMilestones(){let e=[];return this.milestones&&(Array.isArray(this.milestones)?e=this.milestones:this.milestones.milestones&&Array.isArray(this.milestones.milestones)?e=this.milestones.milestones:this.milestones.results&&Array.isArray(this.milestones.results)&&(e=this.milestones.results)),0===e.length&&Array.isArray(this.localMilestones)&&(e=this.localMilestones),e.filter(e=>null!==e&&void 0!==e&&e.id&&e.description)}},created(){(!this.milestones||Array.isArray(this.milestones)&&0===this.milestones.length)&&this.loadMilestones()},methods:{async loadMilestones(){this.loading=!0;try{const e=await Ve.getMilestones();e.data&&e.data.results?this.localMilestones=e.data.results.filter(e=>null!==e):Array.isArray(e.data)?this.localMilestones=e.data.filter(e=>null!==e):this.localMilestones=[]}catch(e){console.error("Failed to load milestones:",e),this.error=e,this.localMilestones=[]}finally{this.loading=!1}},formatDate(e){if(!e)return"Date unknown";try{const t=new Date(e);return t.toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})}catch(t){return console.error("Error formatting date:",e,t),"Invalid date"}}}};const ua=(0,w.A)(da,[["render",ca],["__scopeId","data-v-6bf7c8fa"]]);var ha=ua;const ga={class:"activities-container"},pa={class:"activities-stats"},va={class:"stats-header"},ma={class:"time-period-selector"},ka=["onClick"],ya={class:"stats-grid"},fa={class:"stat-item"},wa={class:"stat-info"},ba={class:"stat-value"},La={class:"stat-item"},_a={class:"stat-info"},Ca={class:"stat-value"},Aa={class:"stat-item"},Sa={class:"stat-info"},Ea={class:"stat-value"},Ma={key:0,class:"stat-item"},Fa={class:"stat-info"},Pa={class:"stat-value"},xa={key:0,class:"activity-distribution"},Da={class:"distribution-chart"},Ia=["title"],Ta={key:0},Wa={class:"distribution-legend"},Xa={class:"legend-label"},Va={key:1,class:"recent-activities"},Ba={class:"activity-list"},$a={class:"activity-details"},Ua={class:"activity-name"},Ha={class:"activity-meta"},Ra={key:0},Na={key:1},Oa={key:2,class:"view-all-link"};function qa(e,t,s,a,o,r){const n=(0,i.g2)("router-link"),c=(0,i.g2)("add-activity-modal"),d=(0,i.g2)("dashboard-card");return(0,i.uX)(),(0,i.Wv)(d,{title:"Activities",loading:o.loading,error:o.error},{default:(0,i.k6)(()=>[(0,i.Lk)("div",ga,[(0,i.Lk)("div",pa,[(0,i.Lk)("div",va,[t[2]||(t[2]=(0,i.Lk)("h3",null,"Activity Summary",-1)),(0,i.Lk)("div",ma,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.timePeriods,e=>((0,i.uX)(),(0,i.CE)("button",{key:e.value,onClick:t=>o.selectedPeriod=e.value,class:(0,l.C4)([{active:o.selectedPeriod===e.value},"period-btn"])},(0,l.v_)(e.label),11,ka))),128))])]),(0,i.Lk)("div",ya,[(0,i.Lk)("div",fa,[t[4]||(t[4]=(0,i.Lk)("div",{class:"stat-icon"},[(0,i.Lk)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,i.Lk)("path",{d:"M12 2L2 7V17C2 19.21 3.79 21 6 21H18C20.21 21 22 19.21 22 17V7L12 2Z",stroke:"#30C1B1","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),(0,i.Lk)("path",{d:"M12 12L2 7",stroke:"#30C1B1","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),(0,i.Lk)("path",{d:"M12 12L22 7",stroke:"#30C1B1","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),(0,i.Lk)("path",{d:"M12 12V22",stroke:"#30C1B1","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)),(0,i.Lk)("div",wa,[(0,i.Lk)("div",ba,(0,l.v_)(r.periodStats.totalActivities),1),t[3]||(t[3]=(0,i.Lk)("div",{class:"stat-label"},"Activities",-1))])]),(0,i.Lk)("div",La,[t[6]||(t[6]=(0,i.Lk)("div",{class:"stat-icon"},[(0,i.Lk)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,i.Lk)("circle",{cx:"12",cy:"12",r:"10",stroke:"#30C1B1","stroke-width":"2"}),(0,i.Lk)("path",{d:"M12 6V12L16 14",stroke:"#30C1B1","stroke-width":"2","stroke-linecap":"round"})])],-1)),(0,i.Lk)("div",_a,[(0,i.Lk)("div",Ca,(0,l.v_)(r.formatDuration(r.periodStats.totalDuration)),1),t[5]||(t[5]=(0,i.Lk)("div",{class:"stat-label"},"Total Time",-1))])]),(0,i.Lk)("div",Aa,[t[8]||(t[8]=(0,i.Lk)("div",{class:"stat-icon"},[(0,i.Lk)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,i.Lk)("path",{d:"M20 6L9 17L4 12",stroke:"#30C1B1","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)),(0,i.Lk)("div",Sa,[(0,i.Lk)("div",Ea,(0,l.v_)(r.periodStats.activeDays),1),t[7]||(t[7]=(0,i.Lk)("div",{class:"stat-label"},"Active Days",-1))])]),r.periodStats.totalDistance>0?((0,i.uX)(),(0,i.CE)("div",Ma,[t[10]||(t[10]=(0,i.Lk)("div",{class:"stat-icon"},[(0,i.Lk)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,i.Lk)("path",{d:"M13 16H12V12H11M12 8H12.01M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z",stroke:"#30C1B1","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)),(0,i.Lk)("div",Fa,[(0,i.Lk)("div",Pa,(0,l.v_)(r.periodStats.totalDistance.toFixed(1)),1),t[9]||(t[9]=(0,i.Lk)("div",{class:"stat-label"},"Distance (km)",-1))])])):(0,i.Q3)("",!0)])]),r.activityDistribution.length>0?((0,i.uX)(),(0,i.CE)("div",xa,[t[11]||(t[11]=(0,i.Lk)("h3",null,"Activity Breakdown",-1)),(0,i.Lk)("div",Da,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.activityDistribution,(e,t)=>((0,i.uX)(),(0,i.CE)("div",{key:t,class:(0,l.C4)(["distribution-bar",`type-${e.type}`]),style:(0,l.Tr)({width:e.percentage+"%"}),title:`${e.label}: ${e.count} activities`},[e.percentage>10?((0,i.uX)(),(0,i.CE)("span",Ta,(0,l.v_)(e.count),1)):(0,i.Q3)("",!0)],14,Ia))),128))]),(0,i.Lk)("div",Wa,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.activityDistribution,(e,t)=>((0,i.uX)(),(0,i.CE)("div",{key:t,class:"legend-item"},[(0,i.Lk)("span",{class:(0,l.C4)(["legend-color",`type-${e.type}`])},null,2),(0,i.Lk)("span",Xa,(0,l.v_)(e.label)+" ("+(0,l.v_)(e.count)+")",1)]))),128))])])):(0,i.Q3)("",!0),o.recentActivities.length>0?((0,i.uX)(),(0,i.CE)("div",Va,[t[12]||(t[12]=(0,i.Lk)("h3",null,"Recent Activities",-1)),(0,i.Lk)("div",Ba,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.recentActivities,e=>((0,i.uX)(),(0,i.CE)("div",{key:e.id,class:"activity-item"},[(0,i.Lk)("div",{class:(0,l.C4)(`activity-icon type-${e.activity_type}`)},[(0,i.Lk)("span",null,(0,l.v_)(r.getActivityIcon(e.activity_type)),1)],2),(0,i.Lk)("div",$a,[(0,i.Lk)("div",Ua,(0,l.v_)(e.name),1),(0,i.Lk)("div",Ha,[(0,i.Lk)("span",null,(0,l.v_)(r.formatDate(e.performed_at)),1),(0,i.Lk)("span",null,(0,l.v_)(e.duration_minutes)+" min",1),e.distance_km?((0,i.uX)(),(0,i.CE)("span",Ra,(0,l.v_)(e.distance_km)+" km",1)):(0,i.Q3)("",!0),e.calories_burned?((0,i.uX)(),(0,i.CE)("span",Na,(0,l.v_)(e.calories_burned)+" cal",1)):(0,i.Q3)("",!0)])])]))),128))])])):(0,i.Q3)("",!0),(0,i.Lk)("button",{onClick:t[0]||(t[0]=e=>o.showAddActivityModal=!0),class:"btn btn-primary btn-block"},t[13]||(t[13]=[(0,i.Lk)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,i.Lk)("path",{d:"M12 5V19M5 12H19",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),(0,i.eW)(" Log New Activity ")])),o.recentActivities.length>=5?((0,i.uX)(),(0,i.CE)("div",Oa,[(0,i.bF)(n,{to:"/activities"},{default:(0,i.k6)(()=>t[14]||(t[14]=[(0,i.eW)("View all activities")])),_:1,__:[14]})])):(0,i.Q3)("",!0)]),o.showAddActivityModal?((0,i.uX)(),(0,i.Wv)(c,{key:0,loading:o.modalLoading,error:o.modalError,onClose:t[1]||(t[1]=e=>o.showAddActivityModal=!1),onSave:r.saveNewActivity},null,8,["loading","error","onSave"])):(0,i.Q3)("",!0)]),_:1},8,["loading","error"])}const Ga={class:"modal-content"},ja={class:"modal-header"},Qa={class:"form-group"},Ja={class:"activity-type-grid"},Ya=["onClick"],Ka={class:"activity-type-icon"},za={class:"activity-type-label"},Za={class:"form-group"},ei={class:"form-group"},ti={class:"duration-input"},si={class:"duration-presets"},ai=["onClick"],ii={key:0,class:"form-group"},oi={class:"form-group"},ri={class:"form-group"},ni={for:"calories",class:"form-label"},li={class:"form-group"},ci={key:1,class:"alert alert-error"},di={class:"form-actions"},ui=["disabled"],hi={key:0,class:"loading-spinner"};function gi(e,t,s,o,r,n){return(0,i.uX)(),(0,i.CE)("div",{class:"modal is-active",onClick:t[10]||(t[10]=(0,a.D$)(t=>e.$emit("close"),["self"]))},[(0,i.Lk)("div",Ga,[(0,i.Lk)("div",ja,[t[12]||(t[12]=(0,i.Lk)("h2",null,"Log New Activity",-1)),(0,i.Lk)("button",{class:"close-button",onClick:t[0]||(t[0]=t=>e.$emit("close")),"aria-label":"Close"},t[11]||(t[11]=[(0,i.Lk)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,i.Lk)("path",{d:"M18 6L6 18M6 6L18 18",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]))]),(0,i.Lk)("form",{onSubmit:t[9]||(t[9]=(0,a.D$)((...e)=>n.handleSubmit&&n.handleSubmit(...e),["prevent"])),class:"activity-form"},[(0,i.Lk)("div",Qa,[t[13]||(t[13]=(0,i.Lk)("label",{class:"form-label"},"Activity Type",-1)),(0,i.Lk)("div",Ja,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.activityTypes,e=>((0,i.uX)(),(0,i.CE)("button",{key:e.value,type:"button",onClick:t=>r.activity.activity_type=e.value,class:(0,l.C4)([{active:r.activity.activity_type===e.value},"activity-type-btn"])},[(0,i.Lk)("span",Ka,(0,l.v_)(e.icon),1),(0,i.Lk)("span",za,(0,l.v_)(e.label),1)],10,Ya))),128))])]),(0,i.Lk)("div",Za,[t[14]||(t[14]=(0,i.Lk)("label",{for:"activityName",class:"form-label"},"Activity Name",-1)),(0,i.bo)((0,i.Lk)("input",{type:"text",id:"activityName","onUpdate:modelValue":t[1]||(t[1]=e=>r.activity.name=e),class:"form-control",placeholder:"e.g., Morning Run, Yoga Session",required:""},null,512),[[a.Jo,r.activity.name]])]),(0,i.Lk)("div",ei,[t[15]||(t[15]=(0,i.Lk)("label",{for:"duration",class:"form-label"},"Duration (minutes)",-1)),(0,i.Lk)("div",ti,[(0,i.bo)((0,i.Lk)("input",{type:"number",id:"duration","onUpdate:modelValue":t[2]||(t[2]=e=>r.activity.duration_minutes=e),class:"form-control",min:"1",max:"480",required:""},null,512),[[a.Jo,r.activity.duration_minutes,void 0,{number:!0}]]),(0,i.Lk)("div",si,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.durationPresets,e=>((0,i.uX)(),(0,i.CE)("button",{key:e,type:"button",onClick:t=>r.activity.duration_minutes=e,class:"preset-btn"},(0,l.v_)(e)+"m ",9,ai))),128))])])]),n.showDistanceField?((0,i.uX)(),(0,i.CE)("div",ii,[t[16]||(t[16]=(0,i.Lk)("label",{for:"distance",class:"form-label"},"Distance (km)",-1)),(0,i.bo)((0,i.Lk)("input",{type:"number",id:"distance","onUpdate:modelValue":t[3]||(t[3]=e=>r.activity.distance_km=e),class:"form-control",min:"0",step:"0.1",placeholder:"Optional"},null,512),[[a.Jo,r.activity.distance_km,void 0,{number:!0}]])])):(0,i.Q3)("",!0),(0,i.Lk)("div",oi,[t[18]||(t[18]=(0,i.Lk)("label",{for:"location",class:"form-label"},"Location",-1)),(0,i.bo)((0,i.Lk)("select",{id:"location","onUpdate:modelValue":t[4]||(t[4]=e=>r.activity.location=e),class:"form-control"},t[17]||(t[17]=[(0,i.Lk)("option",{value:"home"},"Home",-1),(0,i.Lk)("option",{value:"gym"},"Gym",-1),(0,i.Lk)("option",{value:"outdoors"},"Outdoors",-1),(0,i.Lk)("option",{value:"other"},"Other",-1)]),512),[[a.u1,r.activity.location]])]),(0,i.Lk)("div",ri,[(0,i.Lk)("label",ni,[t[19]||(t[19]=(0,i.eW)(" Calories Burned (optional) ")),r.activity.activity_type&&r.activity.duration_minutes?((0,i.uX)(),(0,i.CE)("button",{key:0,type:"button",onClick:t[5]||(t[5]=(...e)=>n.estimateCalories&&n.estimateCalories(...e)),class:"estimate-btn"}," Estimate ")):(0,i.Q3)("",!0)]),(0,i.bo)((0,i.Lk)("input",{type:"number",id:"calories","onUpdate:modelValue":t[6]||(t[6]=e=>r.activity.calories_burned=e),class:"form-control",min:"0",placeholder:"Optional"},null,512),[[a.Jo,r.activity.calories_burned,void 0,{number:!0}]])]),(0,i.Lk)("div",li,[t[20]||(t[20]=(0,i.Lk)("label",{for:"notes",class:"form-label"},"Notes (optional)",-1)),(0,i.bo)((0,i.Lk)("textarea",{id:"notes","onUpdate:modelValue":t[7]||(t[7]=e=>r.activity.notes=e),class:"form-control",rows:"3",placeholder:"How did you feel? Any achievements?"},null,512),[[a.Jo,r.activity.notes]])]),s.error?((0,i.uX)(),(0,i.CE)("div",ci,(0,l.v_)(s.error),1)):(0,i.Q3)("",!0),(0,i.Lk)("div",di,[(0,i.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:t[8]||(t[8]=t=>e.$emit("close"))}," Cancel "),(0,i.Lk)("button",{type:"submit",class:"btn btn-primary",disabled:s.loading||!n.isFormValid},[s.loading?((0,i.uX)(),(0,i.CE)("span",hi)):(0,i.Q3)("",!0),(0,i.eW)(" "+(0,l.v_)(s.loading?"Saving...":"Save Activity"),1)],8,ui)])],32)])])}var pi={name:"AddActivityModal",props:{loading:{type:Boolean,default:!1},error:{type:String,default:null}},data(){return{activity:{name:"",activity_type:"cardio",duration_minutes:null,location:"home",distance_km:null,calories_burned:null,notes:""},activityTypes:[{value:"cardio",label:"Cardio",icon:"ðŸƒ"},{value:"strength",label:"Strength",icon:"ðŸ’ª"},{value:"flexibility",label:"Flexibility",icon:"ðŸ§˜"},{value:"sports",label:"Sports",icon:"âš½"},{value:"hiit",label:"HIIT",icon:"âš¡"},{value:"yoga",label:"Yoga",icon:"ðŸ§˜"},{value:"other",label:"Other",icon:"ðŸ‹ï¸"}],durationPresets:[15,30,45,60,90,120]}},computed:{showDistanceField(){return["cardio","sports"].includes(this.activity.activity_type)},isFormValid(){return this.activity.name&&this.activity.activity_type&&this.activity.duration_minutes>0}},methods:{handleSubmit(){if(!this.isFormValid)return;const e={name:this.activity.name,activity_type:this.activity.activity_type,duration_minutes:parseInt(this.activity.duration_minutes),location:this.activity.location,distance_km:this.activity.distance_km?parseFloat(this.activity.distance_km):null,calories_burned:this.activity.calories_burned?parseInt(this.activity.calories_burned):null,notes:this.activity.notes||null};this.$emit("save",e)},estimateCalories(){const e={cardio:10,strength:8,flexibility:3,sports:9,hiit:12,yoga:4,other:6},t=e[this.activity.activity_type]||6;this.activity.calories_burned=Math.round(this.activity.duration_minutes*t)}}};const vi=(0,w.A)(pi,[["render",gi],["__scopeId","data-v-cafb1d7c"]]);var mi=vi,ki={name:"ActivitiesCard",components:{DashboardCard:yt,AddActivityModal:mi},data(){return{loading:!1,error:null,selectedPeriod:"week",timePeriods:[{value:"week",label:"Week"},{value:"month",label:"Month"},{value:"year",label:"Year"}],activities:[],recentActivities:[],showAddActivityModal:!1,modalLoading:!1,modalError:null}},computed:{periodStats(){const e=new Date;let t=new Date;switch(this.selectedPeriod){case"week":t.setDate(e.getDate()-7);break;case"month":t.setMonth(e.getMonth()-1);break;case"year":t.setFullYear(e.getFullYear()-1);break}const s=this.activities.filter(e=>{const s=new Date(e.performed_at);return s>=t}),a=s.length,i=s.reduce((e,t)=>e+(t.duration_minutes||0),0),o=s.reduce((e,t)=>e+(parseFloat(t.distance_km)||0),0),r=new Set(s.map(e=>new Date(e.performed_at).toLocaleDateString())),n=r.size;return{totalActivities:a,totalDuration:i,totalDistance:o,activeDays:n}},activityDistribution(){const e={},t=this.getActivitiesForPeriod();t.forEach(t=>{e[t.activity_type]||(e[t.activity_type]=0),e[t.activity_type]++});const s=t.length;return Object.entries(e).map(([e,t])=>({type:e,label:this.getActivityTypeLabel(e),count:t,percentage:s>0?t/s*100:0})).sort((e,t)=>t.count-e.count)}},mounted(){this.fetchActivities()},methods:{async fetchActivities(){this.loading=!0,this.error=null;try{const e=await He.getAllActivities();e.data&&e.data.results?this.activities=e.data.results:Array.isArray(e.data)?this.activities=e.data:this.activities=[],this.recentActivities=[...this.activities].sort((e,t)=>new Date(t.performed_at)-new Date(e.performed_at)).slice(0,5)}catch(e){console.error("Error fetching activities:",e),this.error="Failed to load activities. Please try again.",this.activities=[],this.recentActivities=[]}finally{this.loading=!1}},getActivitiesForPeriod(){const e=new Date;let t=new Date;switch(this.selectedPeriod){case"week":t.setDate(e.getDate()-7);break;case"month":t.setMonth(e.getMonth()-1);break;case"year":t.setFullYear(e.getFullYear()-1);break}return this.activities.filter(e=>{const s=new Date(e.performed_at);return s>=t})},async saveNewActivity(e){this.modalLoading=!0,this.modalError=null;try{console.log("Saving activity data:",e),await He.createActivity(e),await this.fetchActivities(),this.showAddActivityModal=!1,this.$emit("activity-added")}catch(t){console.error("Error saving activity:",t),t.response&&t.response.data?this.modalError=`Failed to save activity: ${t.response.data.message||"Please check your input and try again."}`:this.modalError="Failed to save activity. Please try again."}finally{this.modalLoading=!1}},formatDuration(e){if(e<60)return`${e}m`;const t=Math.floor(e/60),s=e%60;return s>0?`${t}h ${s}m`:`${t}h`},formatDate(e){const t=new Date(e),s=new Date,a=new Date(s);return a.setDate(a.getDate()-1),t.toDateString()===s.toDateString()?"Today":t.toDateString()===a.toDateString()?"Yesterday":t.toLocaleDateString(void 0,{month:"short",day:"numeric"})},getActivityIcon(e){const t={cardio:"ðŸƒ",strength:"ðŸ’ª",flexibility:"ðŸ§˜",sports:"âš½",hiit:"âš¡",yoga:"ðŸ§˜",other:"ðŸ‹ï¸"};return t[e]||"ðŸƒ"},getActivityTypeLabel(e){const t={cardio:"Cardio",strength:"Strength",flexibility:"Flexibility",sports:"Sports",hiit:"HIIT",yoga:"Yoga",other:"Other"};return t[e]||e}}};const yi=(0,w.A)(ki,[["render",qa],["__scopeId","data-v-32002ede"]]);var fi=yi;const wi={class:"milestone-modal"},bi={class:"confetti-container"},Li={class:"modal-content"},_i={class:"achievement-header"},Ci={class:"achievement-subtitle"},Ai={class:"milestones-list"},Si={class:"milestone-icon"},Ei={class:"milestone-content"},Mi={class:"milestone-details"},Fi={class:"milestone-type"},Pi={key:0,class:"milestone-value"},xi={key:0,class:"progress-impact"},Di={class:"impact-details"},Ii={class:"impact-item"},Ti={class:"impact-value"},Wi={class:"impact-item"},Xi={class:"impact-value"},Vi={key:1,class:"sharing-section"},Bi={class:"sharing-buttons"},$i={class:"modal-actions"};function Ui(e,t,s,o,r,n){return(0,i.uX)(),(0,i.CE)("div",{class:"milestone-modal-overlay",onClick:t[5]||(t[5]=(0,a.D$)(t=>e.$emit("close"),["self"]))},[(0,i.Lk)("div",wi,[(0,i.Lk)("div",bi,[((0,i.uX)(),(0,i.CE)(i.FK,null,(0,i.pI)(50,e=>(0,i.Lk)("div",{key:e,class:"confetti",style:(0,l.Tr)(n.getConfettiStyle(e))},null,4)),64))]),(0,i.Lk)("div",Li,[(0,i.Lk)("div",_i,[t[6]||(t[6]=(0,i.Lk)("div",{class:"achievement-icon"},"ðŸ†",-1)),(0,i.Lk)("h2",null,(0,l.v_)(n.getModalTitle()),1),(0,i.Lk)("p",Ci,(0,l.v_)(n.getModalSubtitle()),1)]),(0,i.Lk)("div",Ai,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(s.milestones,(e,t)=>((0,i.uX)(),(0,i.CE)("div",{key:t,class:"milestone-card",style:(0,l.Tr)({animationDelay:.2*t+"s"})},[(0,i.Lk)("div",Si,(0,l.v_)(n.getMilestoneIcon(e.milestone_type)),1),(0,i.Lk)("div",Ei,[(0,i.Lk)("h3",null,(0,l.v_)(e.description),1),(0,i.Lk)("div",Mi,[(0,i.Lk)("span",Fi,(0,l.v_)(n.getMilestoneTypeLabel(e.milestone_type)),1),e.progress_value?((0,i.uX)(),(0,i.CE)("span",Pi,(0,l.v_)(n.formatProgressValue(e)),1)):(0,i.Q3)("",!0)])])],4))),128))]),s.showProgressImpact?((0,i.uX)(),(0,i.CE)("div",xi,[t[9]||(t[9]=(0,i.Lk)("h4",null,"Impact on Your Wellness Score",-1)),(0,i.Lk)("div",Di,[(0,i.Lk)("div",Ii,[t[7]||(t[7]=(0,i.Lk)("span",{class:"impact-label"},"Progress Score Boost:",-1)),(0,i.Lk)("span",Ti,"+"+(0,l.v_)(5*s.milestones.length)+" points",1)]),(0,i.Lk)("div",Wi,[t[8]||(t[8]=(0,i.Lk)("span",{class:"impact-label"},"Total Milestones:",-1)),(0,i.Lk)("span",Xi,(0,l.v_)(s.totalMilestones)+" achieved",1)])])])):(0,i.Q3)("",!0),s.showSharing?((0,i.uX)(),(0,i.CE)("div",Vi,[t[13]||(t[13]=(0,i.Lk)("h4",null,"Share Your Achievement",-1)),(0,i.Lk)("div",Bi,[(0,i.Lk)("button",{onClick:t[0]||(t[0]=e=>n.shareToSocial("twitter")),class:"share-btn twitter"},t[10]||(t[10]=[(0,i.Lk)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor"},[(0,i.Lk)("path",{d:"M23 3a10.9 10.9 0 01-3.14 1.53 4.48 4.48 0 00-7.86 3v1A10.66 10.66 0 013 4s-4 9 5 13a11.64 11.64 0 01-7 2c9 5 20 0 20-11.5a4.5 4.5 0 00-.08-.83A7.72 7.72 0 0023 3z"})],-1),(0,i.eW)(" Tweet ")])),(0,i.Lk)("button",{onClick:t[1]||(t[1]=e=>n.shareToSocial("facebook")),class:"share-btn facebook"},t[11]||(t[11]=[(0,i.Lk)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor"},[(0,i.Lk)("path",{d:"M18 2h-3a5 5 0 00-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 011-1h3z"})],-1),(0,i.eW)(" Share ")])),(0,i.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>n.copyToClipboard&&n.copyToClipboard(...e)),class:"share-btn copy"},t[12]||(t[12]=[(0,i.Lk)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[(0,i.Lk)("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),(0,i.Lk)("path",{d:"M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"})],-1),(0,i.eW)(" Copy ")]))])])):(0,i.Q3)("",!0),(0,i.Lk)("div",$i,[(0,i.Lk)("button",{onClick:t[3]||(t[3]=t=>e.$emit("close")),class:"btn btn-primary"}," Continue Your Journey "),(0,i.Lk)("button",{onClick:t[4]||(t[4]=(...e)=>n.viewAllMilestones&&n.viewAllMilestones(...e)),class:"btn btn-secondary"}," View All Achievements ")])])])])}var Hi={name:"MilestoneAchievementModal",props:{milestones:{type:Array,required:!0},showProgressImpact:{type:Boolean,default:!0},showSharing:{type:Boolean,default:!0},totalMilestones:{type:Number,default:0}},emits:["close"],methods:{getModalTitle(){return 1===this.milestones.length?"Achievement Unlocked!":`${this.milestones.length} New Achievements!`},getModalSubtitle(){return 1===this.milestones.length?"Congratulations on reaching this milestone!":"You're making incredible progress on your wellness journey!"},getMilestoneIcon(e){const t={weight:"âš–ï¸",activity:"ðŸƒ",habit:"ðŸ”„",goal:"ðŸŽ¯",streak:"ðŸ”¥"};return t[e]||"ðŸ†"},getMilestoneTypeLabel(e){const t={weight:"Weight Goal",activity:"Activity Milestone",habit:"Habit Streak",goal:"Goal Achievement",streak:"Streak Milestone"};return t[e]||"Achievement"},formatProgressValue(e){if(!e.progress_value)return"";switch(e.milestone_type){case"weight":return`${e.progress_value} kg`;case"activity":return`${e.progress_value} days/week`;case"habit":return`${e.progress_value} day streak`;default:return e.progress_value}},getConfettiStyle(e){const t=["#FFD700","#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FECA57","#FF9FF3","#54A0FF"];return{backgroundColor:t[e%t.length],left:100*Math.random()+"vw",animationDelay:3*Math.random()+"s",animationDuration:3*Math.random()+2+"s"}},shareToSocial(e){const t=this.getShareText(),s=window.location.origin;let a="";switch(e){case"twitter":a=`https://twitter.com/intent/tweet?text=${encodeURIComponent(t)}&url=${encodeURIComponent(s)}`;break;case"facebook":a=`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(s)}&quote=${encodeURIComponent(t)}`;break}a&&window.open(a,"_blank","width=600,height=400")},async copyToClipboard(){const e=this.getShareText();try{await navigator.clipboard.writeText(e)}catch(t){console.error("Failed to copy to clipboard:",t)}},getShareText(){return 1===this.milestones.length?`Just achieved a new milestone: ${this.milestones[0].description} ðŸ† #WellnessJourney #HealthGoals`:`Just unlocked ${this.milestones.length} new achievements on my wellness journey! ðŸ† #WellnessJourney #HealthGoals`},viewAllMilestones(){this.$emit("close"),this.$router.push("/achievements")}}};const Ri=(0,w.A)(Hi,[["render",Ui],["__scopeId","data-v-597e4ab6"]]);var Ni=Ri;const Oi={class:"meal-planning-card dashboard-card"},qi={class:"card__content"},Gi={class:"features-grid"},ji={class:"feature"},Qi={key:0,class:"quick-stats"},Ji={class:"stat"},Yi={class:"stat-value"},Ki={class:"stat"},zi={class:"stat-value"},Zi={key:1,class:"setup-prompt"},eo={class:"card__actions"};function to(e,t,s,a,o,r){return(0,i.uX)(),(0,i.CE)("div",Oi,[t[7]||(t[7]=(0,i.Lk)("div",{class:"card__header"},[(0,i.Lk)("h3",{class:"card__title"},[(0,i.Lk)("i",{class:"fas fa-utensils card__icon"}),(0,i.eW)(" Meal Planning ")]),(0,i.Lk)("p",{class:"card__subtitle"},"AI-powered nutrition planning")],-1)),(0,i.Lk)("div",qi,[(0,i.Lk)("div",Gi,[(0,i.Lk)("div",ji,[t[1]||(t[1]=(0,i.Lk)("i",{class:"fas fa-search"},null,-1)),(0,i.Lk)("span",null,"Browse "+(0,l.v_)(o.recipeCount)+" Recipes",1)]),t[2]||(t[2]=(0,i.Fv)('<div class="feature" data-v-08a7be21><i class="fas fa-user-cog" data-v-08a7be21></i><span data-v-08a7be21>Set Nutrition Goals</span></div><div class="feature" data-v-08a7be21><i class="fas fa-calendar-alt" data-v-08a7be21></i><span data-v-08a7be21>Generate Meal Plans</span></div><div class="feature" data-v-08a7be21><i class="fas fa-chart-line" data-v-08a7be21></i><span data-v-08a7be21>Track Progress</span></div>',3))]),o.hasNutritionProfile?((0,i.uX)(),(0,i.CE)("div",Qi,[(0,i.Lk)("div",Ji,[t[3]||(t[3]=(0,i.Lk)("span",{class:"stat-label"},"Daily Calories",-1)),(0,i.Lk)("span",Yi,(0,l.v_)(o.nutritionProfile?.calorie_target||2e3),1)]),(0,i.Lk)("div",Ki,[t[4]||(t[4]=(0,i.Lk)("span",{class:"stat-label"},"Meal Plans",-1)),(0,i.Lk)("span",zi,(0,l.v_)(o.mealPlanCount),1)])])):((0,i.uX)(),(0,i.CE)("div",Zi,t[5]||(t[5]=[(0,i.Lk)("i",{class:"fas fa-arrow-right"},null,-1),(0,i.Lk)("span",null,"Complete your nutrition profile to get started",-1)])))]),(0,i.Lk)("div",eo,[(0,i.Lk)("button",{onClick:t[0]||(t[0]=t=>e.$emit("navigate-to-meal-planning")),class:"btn btn-primary"},t[6]||(t[6]=[(0,i.Lk)("i",{class:"fas fa-utensils"},null,-1),(0,i.eW)(" Open Meal Planning ")]))])])}var so={name:"MealPlanningCard",emits:["navigate-to-meal-planning"],data(){return{recipeCount:5,mealPlanCount:0,nutritionProfile:null,hasNutritionProfile:!1}},async mounted(){}};const ao=(0,w.A)(so,[["render",to],["__scopeId","data-v-08a7be21"]]);var io=ao,oo={name:"Dashboard",components:{MealPlanningCard:io,WellnessScoreCard:bt,BmiStatusCard:Pt,ActivityLevelCard:Bt,WeightHistoryCard:Cs,AiInsightsCard:zs,MilestonesCard:ha,AddWeightModal:Zs.A,ActivitiesCard:fi,MilestoneAchievementModal:Ni},data(){return{profile:null,weightHistory:[],insights:[],insightsLoading:!1,activities:[],recentMilestones:[],milestoneSummary:null,newMilestones:[],achievedMilestones:[],loading:!0,error:null,bmi:null,rawWellnessScore:null,weightChange:null,lastUpdated:null,showAddWeightModal:!1,showMilestoneModal:!1,newWeight:null,weightLoading:!1,weightError:null}},computed:{currentUser(){return this.$store.getters["auth/currentUser"]},hasProfileData(){return this.profile&&this.profile.height_cm&&this.profile.weight_kg},formattedWellnessScore(){return Ve.formatWellnessScore(this.rawWellnessScore)},enhancedUserData(){return{...this.profile,bmi:this.bmi,recentActivities:Array.isArray(this.activities)?this.activities.length:0,recentMilestones:Array.isArray(this.recentMilestones)?this.recentMilestones.length:0,restrictions:this.getUserRestrictions()}}},async mounted(){this.currentUser?await this.initializeDashboard():this.$router.push("/login")},methods:{async initializeDashboard(){try{this.loading=!0,this.error=null,await this.fetchHealthData(),this.hasProfileData&&await Promise.all([this.calculateBMI(),this.fetchAnalyticsData(),this.calculateWeightChange()]),this.lastUpdated=new Date}catch(e){console.error("Dashboard initialization error:",e),this.error="Failed to load your health data. Please try again."}finally{this.loading=!1}},async fetchHealthData(){try{const[t,s]=await Promise.all([Te.A.getHealthProfile(),Te.A.getWeightHistory()]);this.profile=t.data,s.data&&s.data.results?this.weightHistory=s.data.results:Array.isArray(s.data)?this.weightHistory=s.data:this.weightHistory=[];const a=(new Date).toISOString().split("T")[0],i=(()=>{const e=new Date;return e.setDate(e.getDate()-14),e.toISOString().split("T")[0]})();try{const e=await He.getActivitiesByDateRange(i,a);e.data&&e.data.results?this.activities=e.data.results:Array.isArray(e.data)?this.activities=e.data:this.activities=[]}catch(e){console.error("Error fetching activities:",e),this.activities=[]}}catch(t){throw console.error("Error fetching health data:",t),t.response&&404===t.response.status?this.error="Please complete your health profile to view your dashboard.":this.error="Failed to load health data. Please try again.",t}},async fetchAnalyticsData(){try{const e=await Ve.getDashboardAnalytics();this.rawWellnessScore=e.wellnessScore,this.recentMilestones=e.milestones,this.milestoneSummary=e.milestoneSummary,this.insights=e.insights,!this.rawWellnessScore&&this.hasProfileData&&await this.recalculateWellnessScore()}catch(e){console.error("Error fetching analytics data:",e)}},async recalculateWellnessScore(){try{const e=await Ve.calculateWellnessScore({weekly_activity_days:this.getWeeklyActivityDays()});this.rawWellnessScore=e.data,e.data.milestones_achieved&&e.data.milestones_achieved.length>0&&(this.achievedMilestones=e.data.milestones_achieved,this.showMilestoneModal=!0,await this.fetchRecentMilestones())}catch(e){console.error("Error calculating wellness score:",e)}},async fetchRecentMilestones(){try{const e=await Ve.getRecentMilestones(30);e.data&&e.data.milestones?this.recentMilestones=Array.isArray(e.data.milestones)?e.data.milestones.filter(e=>null!==e):[]:e.data&&e.data.results?this.recentMilestones=Array.isArray(e.data.results)?e.data.results.filter(e=>null!==e):[]:Array.isArray(e.data)?this.recentMilestones=e.data.filter(e=>null!==e):this.recentMilestones=[]}catch(e){console.error("Error fetching milestones:",e),this.recentMilestones=[]}},calculateBMI(){this.profile.height_cm&&this.profile.weight_kg&&(this.bmi=$e.calculateBMI(this.profile.height_cm,this.profile.weight_kg))},calculateWeightChange(){if(!this.weightHistory||this.weightHistory.length<2)this.weightChange=0;else try{const e=[...this.weightHistory].sort((e,t)=>new Date(t.recorded_at)-new Date(e.recorded_at));this.weightChange=e[0].weight_kg-e[1].weight_kg}catch(e){this.weightChange=0}},getWeeklyActivityDays(){if(!Array.isArray(this.activities))return 0;try{const e=new Date,t=new Date(e);t.setDate(e.getDate()-e.getDay());const s=this.activities.filter(e=>{const s=new Date(e.performed_at);return s>=t}),a=new Set(s.map(e=>new Date(e.performed_at).toDateString()));return a.size}catch(e){return console.error("Error calculating weekly activity days:",e),0}},getUserRestrictions(){if(!this.profile)return[];const e=[];return this.profile.is_gluten_free&&e.push("gluten_free"),this.profile.is_dairy_free&&e.push("dairy_free"),this.profile.is_nut_free&&e.push("nut_free"),this.profile.has_other_restrictions&&this.profile.other_restrictions_note&&e.push(this.profile.other_restrictions_note),e},async saveNewWeight(e){if(!e||e<20||e>300)this.weightError="Please enter a valid weight between 20 and 300 kg";else{this.weightLoading=!0,this.weightError=null;try{await Te.A.addWeightEntry(e),await Te.A.updateHealthProfile({...this.profile,weight_kg:e}),await this.fetchHealthData(),this.calculateBMI(),this.calculateWeightChange();const t=await Ve.checkForNewMilestones({weight_kg:e});t.length>0&&(this.achievedMilestones=t,this.showMilestoneModal=!0),await this.recalculateWellnessScore(),this.showAddWeightModal=!1}catch(t){this.weightError="Failed to save weight. Please try again."}finally{this.weightLoading=!1}}},async onActivityAdded(){await this.fetchHealthData(),await this.recalculateWellnessScore()},onWeightGoalAchieved(){this.achievedMilestones.push({milestone_type:"weight",description:`Congratulations! You've reached your weight goal of ${this.profile.target_weight_kg}kg!`}),this.showMilestoneModal=!0},onMilestoneAchieved(e){this.newMilestones.push(e),this.fetchRecentMilestones()},dismissMilestones(){this.newMilestones=[]},closeMilestoneModal(){this.showMilestoneModal=!1,this.achievedMilestones=[]},getMilestoneIcon(e){const t={weight:"âš–ï¸",activity:"ðŸƒ",habit:"ðŸ”„"};return t[e]||"ðŸ†"},getUsernameDisplay(){if(this.currentUser){if(this.currentUser.username)return this.currentUser.username;if(this.currentUser.access)try{const e=this.currentUser.access.split(".")[1],t=e.replace(/-/g,"+").replace(/_/g,"/"),s=decodeURIComponent(atob(t).split("").map(e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)).join("")),a=JSON.parse(s);return a.username||`User #${a.user_id}`}catch(e){console.error("Error extracting username from token:",e)}}return"User"},formatDateTime(e){return new Date(e).toLocaleString(void 0,{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})},async generateInsights(){if(this.hasProfileData){this.insightsLoading=!0;try{const e=await Ve.generateInsights(this.enhancedUserData);this.insights=e.data||[]}catch(e){console.error("Error generating insights:",e),this.insights=[]}finally{this.insightsLoading=!1}}},async regenerateInsights(){this.insightsLoading=!0;try{await Ve.generateInsights(this.enhancedUserData,!0),await this.fetchAnalyticsData()}catch(e){console.error("Regeneration error:",e)}finally{this.insightsLoading=!1}}}};const ro=(0,w.A)(oo,[["render",Ie],["__scopeId","data-v-7b34279c"]]);var no=ro;const lo={class:"profile-container"},co={key:0,class:"loading-container"},uo={class:"form-section"},ho={class:"form-row"},go={class:"form-group"},po={key:0,class:"error-text"},vo={class:"form-group"},mo={class:"form-section"},ko={class:"form-row"},yo={class:"form-group"},fo={key:0,class:"error-text"},wo={class:"form-group"},bo={key:0,class:"error-text"},Lo={key:0,class:"metrics-summary"},_o={class:"metric-item"},Co={class:"metric-value"},Ao={class:"metric-category"},So={class:"form-section"},Eo={class:"form-group"},Mo={class:"form-group"},Fo={class:"form-group"},Po={key:0,class:"form-group"},xo={key:0,class:"error-text"},Do={key:1,class:"goal-achieved-message"},Io={class:"form-section"},To={class:"subsection"},Wo={class:"form-group"},Xo={key:0,class:"error-text"},Vo={class:"form-group"},Bo={class:"checkbox-group"},$o={class:"checkbox-item"},Uo={class:"checkbox-item"},Ho={class:"checkbox-item"},Ro={class:"checkbox-item"},No={class:"subsection"},Oo={class:"form-group"},qo={class:"form-group"},Go={class:"subsection"},jo={class:"form-row"},Qo={class:"form-group"},Jo={class:"form-group"},Yo={class:"subsection"},Ko={class:"form-row"},zo={class:"form-group"},Zo={key:0,class:"error-text"},er={class:"form-group"},tr={key:0,class:"error-text"},sr={class:"form-group"},ar={key:0,class:"error-text"},ir={class:"form-section"},or={class:"form-group"},rr={class:"form-group"},nr={class:"checkbox-group"},lr={class:"checkbox-item"},cr={class:"checkbox-item"},dr={class:"checkbox-item"},ur={class:"checkbox-item"},hr={key:0,class:"form-group"},gr={class:"form-section"},pr={class:"form-group"},vr={class:"checkbox-item privacy-checkbox"},mr={key:0},kr={key:1},yr={class:"form-actions"},fr=["disabled"],wr=["disabled"],br={key:0},Lr={key:1};function _r(e,t,s,o,r,n){return(0,i.uX)(),(0,i.CE)("div",lo,[t[89]||(t[89]=(0,i.Lk)("h1",null,"Health Profile",-1)),t[90]||(t[90]=(0,i.Lk)("p",{class:"profile-description"},"Complete your health profile to receive personalized recommendations and insights.",-1)),r.loading?((0,i.uX)(),(0,i.CE)("div",co,t[29]||(t[29]=[(0,i.Lk)("div",{class:"loading-spinner"},null,-1),(0,i.Lk)("p",null,"Loading your profile data...",-1)]))):((0,i.uX)(),(0,i.CE)("form",{key:1,onSubmit:t[28]||(t[28]=(0,a.D$)((...e)=>n.saveProfile&&n.saveProfile(...e),["prevent"])),class:"profile-form"},[(0,i.Lk)("section",uo,[t[33]||(t[33]=(0,i.Lk)("h2",null,"Personal Information",-1)),t[34]||(t[34]=(0,i.Lk)("p",{class:"section-description"},"Basic information helps us personalize your experience.",-1)),(0,i.Lk)("div",ho,[(0,i.Lk)("div",go,[t[30]||(t[30]=(0,i.Lk)("label",{for:"age"},"Age",-1)),(0,i.bo)((0,i.Lk)("input",{type:"number",id:"age","onUpdate:modelValue":t[0]||(t[0]=e=>r.profile.age=e),placeholder:"Your age",min:"13",max:"120"},null,512),[[a.Jo,r.profile.age,void 0,{number:!0}]]),r.validationErrors.age?((0,i.uX)(),(0,i.CE)("small",po,(0,l.v_)(r.validationErrors.age),1)):(0,i.Q3)("",!0)]),(0,i.Lk)("div",vo,[t[32]||(t[32]=(0,i.Lk)("label",{for:"gender"},"Gender",-1)),(0,i.bo)((0,i.Lk)("select",{id:"gender","onUpdate:modelValue":t[1]||(t[1]=e=>r.profile.gender=e)},t[31]||(t[31]=[(0,i.Lk)("option",{value:""},"Select gender",-1),(0,i.Lk)("option",{value:"M"},"Male",-1),(0,i.Lk)("option",{value:"F"},"Female",-1),(0,i.Lk)("option",{value:"O"},"Other",-1)]),512),[[a.u1,r.profile.gender]])])])]),(0,i.Lk)("section",mo,[t[38]||(t[38]=(0,i.Lk)("h2",null,"Physical Metrics",-1)),t[39]||(t[39]=(0,i.Lk)("p",{class:"section-description"},"Your height and weight help us calculate important health indicators like BMI.",-1)),(0,i.Lk)("div",ko,[(0,i.Lk)("div",yo,[t[35]||(t[35]=(0,i.Lk)("label",{for:"height"},"Height (cm)",-1)),(0,i.bo)((0,i.Lk)("input",{type:"number",id:"height","onUpdate:modelValue":t[2]||(t[2]=e=>r.profile.height_cm=e),placeholder:"Your height in cm",min:"100",max:"250",step:"0.1"},null,512),[[a.Jo,r.profile.height_cm,void 0,{number:!0}]]),r.validationErrors.height_cm?((0,i.uX)(),(0,i.CE)("small",fo,(0,l.v_)(r.validationErrors.height_cm),1)):(0,i.Q3)("",!0)]),(0,i.Lk)("div",wo,[t[36]||(t[36]=(0,i.Lk)("label",{for:"weight"},"Weight (kg)",-1)),(0,i.bo)((0,i.Lk)("input",{type:"number",id:"weight","onUpdate:modelValue":t[3]||(t[3]=e=>r.profile.weight_kg=e),placeholder:"Your weight in kg",min:"30",max:"300",step:"0.1"},null,512),[[a.Jo,r.profile.weight_kg,void 0,{number:!0}]]),r.validationErrors.weight_kg?((0,i.uX)(),(0,i.CE)("small",bo,(0,l.v_)(r.validationErrors.weight_kg),1)):(0,i.Q3)("",!0)])]),r.profile.height_cm&&r.profile.weight_kg?((0,i.uX)(),(0,i.CE)("div",Lo,[(0,i.Lk)("div",_o,[t[37]||(t[37]=(0,i.Lk)("span",{class:"metric-label"},"Current BMI:",-1)),(0,i.Lk)("span",Co,(0,l.v_)(n.calculateBMI().toFixed(1)),1),(0,i.Lk)("span",Ao,(0,l.v_)(n.getBMICategory()),1)])])):(0,i.Q3)("",!0)]),(0,i.Lk)("section",So,[t[48]||(t[48]=(0,i.Lk)("h2",null,"Lifestyle & Goals",-1)),t[49]||(t[49]=(0,i.Lk)("p",{class:"section-description"},"Tell us about your lifestyle and what you want to achieve.",-1)),(0,i.Lk)("div",Eo,[t[40]||(t[40]=(0,i.Lk)("label",{for:"occupation"},"Occupation Type",-1)),(0,i.bo)((0,i.Lk)("input",{type:"text",id:"occupation","onUpdate:modelValue":t[4]||(t[4]=e=>r.profile.occupation_type=e),placeholder:"e.g., Office worker, Construction, etc."},null,512),[[a.Jo,r.profile.occupation_type]])]),(0,i.Lk)("div",Mo,[t[42]||(t[42]=(0,i.Lk)("label",{for:"activity"},"Activity Level",-1)),(0,i.bo)((0,i.Lk)("select",{id:"activity","onUpdate:modelValue":t[5]||(t[5]=e=>r.profile.activity_level=e)},t[41]||(t[41]=[(0,i.Fv)('<option value="sedentary" data-v-403910a8>Sedentary (little or no exercise)</option><option value="light" data-v-403910a8>Lightly Active (light exercise 1-3 days/week)</option><option value="moderate" data-v-403910a8>Moderately Active (moderate exercise 3-5 days/week)</option><option value="active" data-v-403910a8>Active (hard exercise 6-7 days/week)</option><option value="very_active" data-v-403910a8>Very Active (very hard exercise &amp; physical job)</option>',5)]),512),[[a.u1,r.profile.activity_level]]),t[43]||(t[43]=(0,i.Lk)("small",{class:"help-text"},"Choose the option that best describes your typical week.",-1))]),(0,i.Lk)("div",Fo,[t[45]||(t[45]=(0,i.Lk)("label",{for:"goal"},"Fitness Goal",-1)),(0,i.bo)((0,i.Lk)("select",{id:"goal","onUpdate:modelValue":t[6]||(t[6]=e=>r.profile.fitness_goal=e)},t[44]||(t[44]=[(0,i.Fv)('<option value="weight_loss" data-v-403910a8>Weight Loss</option><option value="muscle_gain" data-v-403910a8>Muscle Gain</option><option value="general_fitness" data-v-403910a8>General Fitness</option><option value="endurance" data-v-403910a8>Endurance</option><option value="flexibility" data-v-403910a8>Flexibility</option>',5)]),512),[[a.u1,r.profile.fitness_goal]])]),"weight_loss"===r.profile.fitness_goal||"muscle_gain"===r.profile.fitness_goal?((0,i.uX)(),(0,i.CE)("div",Po,[t[46]||(t[46]=(0,i.Lk)("label",{for:"target_weight"},"Target Weight (kg)",-1)),(0,i.bo)((0,i.Lk)("input",{type:"number",id:"target_weight","onUpdate:modelValue":t[7]||(t[7]=e=>r.profile.target_weight_kg=e),placeholder:"Your target weight in kg",min:"30",max:"300",step:"0.1"},null,512),[[a.Jo,r.profile.target_weight_kg,void 0,{number:!0}]]),r.validationErrors.target_weight_kg?((0,i.uX)(),(0,i.CE)("small",xo,(0,l.v_)(r.validationErrors.target_weight_kg),1)):(0,i.Q3)("",!0)])):(0,i.Q3)("",!0),n.isGoalAchieved?((0,i.uX)(),(0,i.CE)("div",Do,[(0,i.Lk)("p",null,[t[47]||(t[47]=(0,i.Lk)("strong",null,"Congratulations!",-1)),(0,i.eW)(" You've reached your weight goal of "+(0,l.v_)(r.profile.target_weight_kg)+"kg!",1)])])):(0,i.Q3)("",!0)]),(0,i.Lk)("section",Io,[t[72]||(t[72]=(0,i.Lk)("h2",null,"Fitness Assessment",-1)),t[73]||(t[73]=(0,i.Lk)("p",{class:"section-description"}," This information helps us provide more personalized fitness recommendations and track your progress. ",-1)),(0,i.Lk)("div",To,[t[57]||(t[57]=(0,i.Lk)("h3",null,"Current Activity",-1)),(0,i.Lk)("div",Wo,[t[50]||(t[50]=(0,i.Lk)("label",{for:"weeklyActivityDays"},"How many days per week do you currently exercise?",-1)),(0,i.bo)((0,i.Lk)("input",{type:"number",id:"weeklyActivityDays","onUpdate:modelValue":t[8]||(t[8]=e=>r.profile.weekly_activity_days=e),min:"0",max:"7",placeholder:"0-7 days"},null,512),[[a.Jo,r.profile.weekly_activity_days,void 0,{number:!0}]]),t[51]||(t[51]=(0,i.Lk)("small",{class:"help-text"},"Enter a number between 0 and 7",-1)),r.validationErrors.weekly_activity_days?((0,i.uX)(),(0,i.CE)("small",Xo,(0,l.v_)(r.validationErrors.weekly_activity_days),1)):(0,i.Q3)("",!0)]),(0,i.Lk)("div",Vo,[t[56]||(t[56]=(0,i.Lk)("label",null,"What types of exercise do you currently do?",-1)),(0,i.Lk)("div",Bo,[(0,i.Lk)("div",$o,[(0,i.bo)((0,i.Lk)("input",{type:"checkbox",id:"cardio","onUpdate:modelValue":t[9]||(t[9]=e=>r.profile.does_cardio=e)},null,512),[[a.lH,r.profile.does_cardio]]),t[52]||(t[52]=(0,i.Lk)("label",{for:"cardio",class:"checkbox-label"},"Cardio (running, cycling, swimming, etc.)",-1))]),(0,i.Lk)("div",Uo,[(0,i.bo)((0,i.Lk)("input",{type:"checkbox",id:"strength","onUpdate:modelValue":t[10]||(t[10]=e=>r.profile.does_strength=e)},null,512),[[a.lH,r.profile.does_strength]]),t[53]||(t[53]=(0,i.Lk)("label",{for:"strength",class:"checkbox-label"},"Strength Training (weights, resistance, etc.)",-1))]),(0,i.Lk)("div",Ho,[(0,i.bo)((0,i.Lk)("input",{type:"checkbox",id:"flexibility","onUpdate:modelValue":t[11]||(t[11]=e=>r.profile.does_flexibility=e)},null,512),[[a.lH,r.profile.does_flexibility]]),t[54]||(t[54]=(0,i.Lk)("label",{for:"flexibility",class:"checkbox-label"},"Flexibility (yoga, stretching, etc.)",-1))]),(0,i.Lk)("div",Ro,[(0,i.bo)((0,i.Lk)("input",{type:"checkbox",id:"sports","onUpdate:modelValue":t[12]||(t[12]=e=>r.profile.does_sports=e)},null,512),[[a.lH,r.profile.does_sports]]),t[55]||(t[55]=(0,i.Lk)("label",{for:"sports",class:"checkbox-label"},"Sports (team sports, racket sports, etc.)",-1))])])])]),(0,i.Lk)("div",No,[t[62]||(t[62]=(0,i.Lk)("h3",null,"Workout Details",-1)),(0,i.Lk)("div",Oo,[t[59]||(t[59]=(0,i.Lk)("label",{for:"sessionDuration"},"Average workout duration",-1)),(0,i.bo)((0,i.Lk)("select",{id:"sessionDuration","onUpdate:modelValue":t[13]||(t[13]=e=>r.profile.avg_session_duration=e)},t[58]||(t[58]=[(0,i.Lk)("option",{value:""},"Select duration",-1),(0,i.Lk)("option",{value:"short"},"15-30 minutes",-1),(0,i.Lk)("option",{value:"medium"},"30-60 minutes",-1),(0,i.Lk)("option",{value:"long"},"60+ minutes",-1)]),512),[[a.u1,r.profile.avg_session_duration]])]),(0,i.Lk)("div",qo,[t[61]||(t[61]=(0,i.Lk)("label",{for:"fitnessLevel"},"How would you rate your current fitness level?",-1)),(0,i.bo)((0,i.Lk)("select",{id:"fitnessLevel","onUpdate:modelValue":t[14]||(t[14]=e=>r.profile.fitness_level=e)},t[60]||(t[60]=[(0,i.Lk)("option",{value:""},"Select level",-1),(0,i.Lk)("option",{value:"beginner"},"Beginner - New to regular exercise",-1),(0,i.Lk)("option",{value:"intermediate"},"Intermediate - Regularly active for 3+ months",-1),(0,i.Lk)("option",{value:"advanced"},"Advanced - Consistently training for 1+ years",-1)]),512),[[a.u1,r.profile.fitness_level]])])]),(0,i.Lk)("div",Go,[t[67]||(t[67]=(0,i.Lk)("h3",null,"Preferences",-1)),(0,i.Lk)("div",jo,[(0,i.Lk)("div",Qo,[t[64]||(t[64]=(0,i.Lk)("label",{for:"environment"},"Preferred exercise environment",-1)),(0,i.bo)((0,i.Lk)("select",{id:"environment","onUpdate:modelValue":t[15]||(t[15]=e=>r.profile.preferred_environment=e)},t[63]||(t[63]=[(0,i.Lk)("option",{value:""},"Select preference",-1),(0,i.Lk)("option",{value:"home"},"Home",-1),(0,i.Lk)("option",{value:"gym"},"Gym",-1),(0,i.Lk)("option",{value:"outdoors"},"Outdoors",-1)]),512),[[a.u1,r.profile.preferred_environment]])]),(0,i.Lk)("div",Jo,[t[66]||(t[66]=(0,i.Lk)("label",{for:"timePreference"},"Preferred time to exercise",-1)),(0,i.bo)((0,i.Lk)("select",{id:"timePreference","onUpdate:modelValue":t[16]||(t[16]=e=>r.profile.time_preference=e)},t[65]||(t[65]=[(0,i.Lk)("option",{value:""},"Select time",-1),(0,i.Lk)("option",{value:"morning"},"Morning",-1),(0,i.Lk)("option",{value:"afternoon"},"Afternoon",-1),(0,i.Lk)("option",{value:"evening"},"Evening",-1)]),512),[[a.u1,r.profile.time_preference]])])])]),(0,i.Lk)("div",Yo,[t[71]||(t[71]=(0,i.Lk)("h3",null,"Physical Capacity",-1)),(0,i.Lk)("div",Ko,[(0,i.Lk)("div",zo,[t[68]||(t[68]=(0,i.Lk)("label",{for:"endurance"},"How long can you walk/run continuously? (minutes)",-1)),(0,i.bo)((0,i.Lk)("input",{type:"number",id:"endurance","onUpdate:modelValue":t[17]||(t[17]=e=>r.profile.endurance_minutes=e),min:"0",max:"300",placeholder:"Enter minutes"},null,512),[[a.Jo,r.profile.endurance_minutes,void 0,{number:!0}]]),r.validationErrors.endurance_minutes?((0,i.uX)(),(0,i.CE)("small",Zo,(0,l.v_)(r.validationErrors.endurance_minutes),1)):(0,i.Q3)("",!0)]),(0,i.Lk)("div",er,[t[69]||(t[69]=(0,i.Lk)("label",{for:"pushups"},"Maximum pushups in one set",-1)),(0,i.bo)((0,i.Lk)("input",{type:"number",id:"pushups","onUpdate:modelValue":t[18]||(t[18]=e=>r.profile.pushup_count=e),min:"0",max:"200",placeholder:"Enter count"},null,512),[[a.Jo,r.profile.pushup_count,void 0,{number:!0}]]),r.validationErrors.pushup_count?((0,i.uX)(),(0,i.CE)("small",tr,(0,l.v_)(r.validationErrors.pushup_count),1)):(0,i.Q3)("",!0)])]),(0,i.Lk)("div",sr,[t[70]||(t[70]=(0,i.Lk)("label",{for:"squats"},"Maximum bodyweight squats in one set",-1)),(0,i.bo)((0,i.Lk)("input",{type:"number",id:"squats","onUpdate:modelValue":t[19]||(t[19]=e=>r.profile.squat_count=e),min:"0",max:"200",placeholder:"Enter count"},null,512),[[a.Jo,r.profile.squat_count,void 0,{number:!0}]]),r.validationErrors.squat_count?((0,i.uX)(),(0,i.CE)("small",ar,(0,l.v_)(r.validationErrors.squat_count),1)):(0,i.Q3)("",!0)])])]),(0,i.Lk)("section",ir,[t[82]||(t[82]=(0,i.Lk)("h2",null,"Dietary Preferences",-1)),t[83]||(t[83]=(0,i.Lk)("p",{class:"section-description"}," This helps us tailor nutritional recommendations to your dietary needs and preferences. ",-1)),(0,i.Lk)("div",or,[t[75]||(t[75]=(0,i.Lk)("label",{for:"dietaryPreference"},"Primary dietary preference",-1)),(0,i.bo)((0,i.Lk)("select",{id:"dietaryPreference","onUpdate:modelValue":t[20]||(t[20]=e=>r.profile.dietary_preference=e)},t[74]||(t[74]=[(0,i.Fv)('<option value="" data-v-403910a8>Select preference</option><option value="omnivore" data-v-403910a8>Omnivore (Eats Everything)</option><option value="vegetarian" data-v-403910a8>Vegetarian</option><option value="vegan" data-v-403910a8>Vegan</option><option value="pescatarian" data-v-403910a8>Pescatarian</option><option value="keto" data-v-403910a8>Keto</option><option value="paleo" data-v-403910a8>Paleo</option>',7)]),512),[[a.u1,r.profile.dietary_preference]])]),(0,i.Lk)("div",rr,[t[80]||(t[80]=(0,i.Lk)("label",null,"Food restrictions or allergies",-1)),(0,i.Lk)("div",nr,[(0,i.Lk)("div",lr,[(0,i.bo)((0,i.Lk)("input",{type:"checkbox",id:"glutenFree","onUpdate:modelValue":t[21]||(t[21]=e=>r.profile.is_gluten_free=e)},null,512),[[a.lH,r.profile.is_gluten_free]]),t[76]||(t[76]=(0,i.Lk)("label",{for:"glutenFree",class:"checkbox-label"},"Gluten-Free",-1))]),(0,i.Lk)("div",cr,[(0,i.bo)((0,i.Lk)("input",{type:"checkbox",id:"dairyFree","onUpdate:modelValue":t[22]||(t[22]=e=>r.profile.is_dairy_free=e)},null,512),[[a.lH,r.profile.is_dairy_free]]),t[77]||(t[77]=(0,i.Lk)("label",{for:"dairyFree",class:"checkbox-label"},"Dairy-Free",-1))]),(0,i.Lk)("div",dr,[(0,i.bo)((0,i.Lk)("input",{type:"checkbox",id:"nutFree","onUpdate:modelValue":t[23]||(t[23]=e=>r.profile.is_nut_free=e)},null,512),[[a.lH,r.profile.is_nut_free]]),t[78]||(t[78]=(0,i.Lk)("label",{for:"nutFree",class:"checkbox-label"},"Nut-Free",-1))]),(0,i.Lk)("div",ur,[(0,i.bo)((0,i.Lk)("input",{type:"checkbox",id:"otherRestrictions","onUpdate:modelValue":t[24]||(t[24]=e=>r.profile.has_other_restrictions=e)},null,512),[[a.lH,r.profile.has_other_restrictions]]),t[79]||(t[79]=(0,i.Lk)("label",{for:"otherRestrictions",class:"checkbox-label"},"Other Restrictions",-1))])])]),r.profile.has_other_restrictions?((0,i.uX)(),(0,i.CE)("div",hr,[t[81]||(t[81]=(0,i.Lk)("label",{for:"otherRestrictionsNote"},"Please describe your other dietary restrictions",-1)),(0,i.bo)((0,i.Lk)("textarea",{id:"otherRestrictionsNote","onUpdate:modelValue":t[25]||(t[25]=e=>r.profile.other_restrictions_note=e),rows:"3",placeholder:"Enter any other dietary restrictions or allergies"},null,512),[[a.Jo,r.profile.other_restrictions_note]])])):(0,i.Q3)("",!0)]),(0,i.Lk)("section",gr,[t[86]||(t[86]=(0,i.Lk)("h2",null,"Privacy Settings",-1)),t[87]||(t[87]=(0,i.Lk)("p",{class:"section-description"}," We take your privacy seriously. You control how your data is used. ",-1)),(0,i.Lk)("div",pr,[(0,i.Lk)("div",vr,[(0,i.bo)((0,i.Lk)("input",{type:"checkbox",id:"data_sharing","onUpdate:modelValue":t[26]||(t[26]=e=>r.profile.data_sharing_consent=e)},null,512),[[a.lH,r.profile.data_sharing_consent]]),t[84]||(t[84]=(0,i.Lk)("label",{for:"data_sharing",class:"checkbox-label"}," I consent to share my health data for personalized recommendations ",-1))]),t[85]||(t[85]=(0,i.Lk)("small",{class:"help-text"},"Your data privacy is important to us. We use this information only to provide personalized wellness recommendations.",-1))])]),r.message?((0,i.uX)(),(0,i.CE)("div",{key:0,class:(0,l.C4)(["alert",r.successful?"alert-success":"alert-danger"])},[r.successful?((0,i.uX)(),(0,i.CE)("span",mr,"âœ“")):((0,i.uX)(),(0,i.CE)("span",kr,"!")),(0,i.eW)(" "+(0,l.v_)(r.message),1)],2)):(0,i.Q3)("",!0),(0,i.Lk)("div",yr,[(0,i.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:t[27]||(t[27]=(...e)=>n.resetForm&&n.resetForm(...e)),disabled:r.saveLoading}," Reset ",8,fr),(0,i.Lk)("button",{type:"submit",class:"btn btn-primary",disabled:r.saveLoading||Object.keys(r.validationErrors).length>0},[r.saveLoading?((0,i.uX)(),(0,i.CE)("span",br,t[88]||(t[88]=[(0,i.Lk)("span",{class:"spinner"},null,-1),(0,i.eW)(" Saving... ")]))):((0,i.uX)(),(0,i.CE)("span",Lr,"Save Profile"))],8,wr)])],32))])}var Cr={name:"Profile",data(){return{profile:{age:null,gender:"",height_cm:null,weight_kg:null,occupation_type:"",activity_level:"moderate",fitness_goal:"general_fitness",target_weight_kg:null,weekly_activity_days:null,does_cardio:!1,does_strength:!1,does_flexibility:!1,does_sports:!1,avg_session_duration:"",fitness_level:"",preferred_environment:"",time_preference:"",endurance_minutes:null,pushup_count:null,squat_count:null,dietary_preference:"",is_gluten_free:!1,is_dairy_free:!1,is_nut_free:!1,has_other_restrictions:!1,other_restrictions_note:"",data_sharing_consent:!1},originalProfile:null,loading:!0,saveLoading:!1,message:"",successful:!1,validationErrors:{}}},mounted(){this.fetchProfile()},computed:{isGoalAchieved(){return this.profile?.target_weight_kg&&this.profile?.weight_kg&&Math.abs(parseFloat(this.profile.weight_kg)-parseFloat(this.profile.target_weight_kg))<=.5}},methods:{fetchProfile(){this.loading=!0,this.message="",Te.A.getHealthProfile().then(e=>{e.data&&(Object.keys(this.profile).forEach(t=>{t in e.data&&(this.profile[t]=e.data[t])}),this.originalProfile=JSON.parse(JSON.stringify(this.profile))),this.loading=!1}).catch(e=>{console.error("Error fetching profile:",e),this.loading=!1,e.response&&404===e.response.status?this.originalProfile=JSON.parse(JSON.stringify(this.profile)):(this.message="Failed to load profile. Please try again.",this.successful=!1)})},resetGoal(){this.profile.target_weight_kg=null,this.saveProfile()},calculateBMI(){if(!this.profile.height_cm||!this.profile.weight_kg)return 0;const e=this.profile.height_cm/100;return this.profile.weight_kg/(e*e)},getBMICategory(){const e=this.calculateBMI();return e<18.5?"Underweight":e<25?"Normal weight":e<30?"Overweight":"Obese"},validateForm(){return this.validationErrors={},null!==this.profile.age&&(this.profile.age<13?this.validationErrors.age="Age must be at least 13":this.profile.age>120&&(this.validationErrors.age="Age must be below 120")),null!==this.profile.height_cm&&(this.profile.height_cm<100?this.validationErrors.height_cm="Height must be at least 100 cm":this.profile.height_cm>250&&(this.validationErrors.height_cm="Height must be below 250 cm")),null!==this.profile.weight_kg&&(this.profile.weight_kg<30?this.validationErrors.weight_kg="Weight must be at least 30 kg":this.profile.weight_kg>300&&(this.validationErrors.weight_kg="Weight must be below 300 kg")),null!==this.profile.target_weight_kg&&(this.profile.target_weight_kg<30?this.validationErrors.target_weight_kg="Target weight must be at least 30 kg":this.profile.target_weight_kg>300&&(this.validationErrors.target_weight_kg="Target weight must be below 300 kg")),null!==this.profile.weekly_activity_days&&(this.profile.weekly_activity_days<0?this.validationErrors.weekly_activity_days="Activity days cannot be negative":this.profile.weekly_activity_days>7&&(this.validationErrors.weekly_activity_days="Activity days cannot exceed 7")),null!==this.profile.endurance_minutes&&this.profile.endurance_minutes>300&&(this.validationErrors.endurance_minutes="Please enter a value below 300 minutes"),null!==this.profile.pushup_count&&this.profile.pushup_count>200&&(this.validationErrors.pushup_count="Please enter a realistic value"),null!==this.profile.squat_count&&this.profile.squat_count>200&&(this.validationErrors.squat_count="Please enter a realistic value"),0===Object.keys(this.validationErrors).length},saveProfile(){if(!this.validateForm())return this.message="Please correct the validation errors before saving.",void(this.successful=!1);if(this.saveLoading=!0,this.message="",JSON.stringify(this.profile)===JSON.stringify(this.originalProfile))return this.message="No changes to save.",this.successful=!0,void(this.saveLoading=!1);const e={...this.profile};["age","height_cm","weight_kg","target_weight_kg","weekly_activity_days","endurance_minutes","pushup_count","squat_count"].forEach(t=>{null!==e[t]&&""!==e[t]&&(e[t]=Number(e[t]))}),Te.A.updateHealthProfile(e).then(e=>{console.log("Profile saved successfully:",e.data),this.successful=!0,this.message="Profile saved successfully!",this.originalProfile=JSON.parse(JSON.stringify(this.profile)),this.triggerWellnessScoreUpdate()}).catch(e=>{if(console.error("Error saving profile:",e),this.successful=!1,e.response&&e.response.data){const t=e.response.data;if("object"===typeof t){const e=Object.entries(t).map(([e,t])=>Array.isArray(t)?`${e}: ${t.join(", ")}`:`${e}: ${t}`).join("; ");this.message=`Failed to save profile: ${e}`}else this.message="Failed to save profile. Please check your inputs and try again."}else this.message="Failed to save profile. Please try again."}).finally(()=>{this.saveLoading=!1,setTimeout(()=>{const e=document.querySelector(".alert");e&&e.scrollIntoView({behavior:"smooth",block:"center"})},100)})},resetForm(){confirm("Are you sure you want to reset all changes?")&&(this.originalProfile?this.profile=JSON.parse(JSON.stringify(this.originalProfile)):this.profile={age:null,gender:"",height_cm:null,weight_kg:null,occupation_type:"",activity_level:"moderate",fitness_goal:"general_fitness",target_weight_kg:null,weekly_activity_days:null,does_cardio:!1,does_strength:!1,does_flexibility:!1,does_sports:!1,avg_session_duration:"",fitness_level:"",preferred_environment:"",time_preference:"",endurance_minutes:null,pushup_count:null,squat_count:null,dietary_preference:"",is_gluten_free:!1,is_dairy_free:!1,is_nut_free:!1,has_other_restrictions:!1,other_restrictions_note:"",data_sharing_consent:!1},this.message="Form has been reset.",this.successful=!0,this.validationErrors={})},triggerWellnessScoreUpdate(){Ve.calculateWellnessScore().then(e=>{console.log("Wellness score updated:",e.data)}).catch(e=>{console.error("Error updating wellness score:",e)})}}};const Ar=(0,w.A)(Cr,[["render",_r],["__scopeId","data-v-403910a8"]]);var Sr=Ar;const Er={class:"settings-container"},Mr={class:"settings-card"},Fr={class:"setting-item"},Pr={class:"setting-status"},xr=["disabled"],Dr={class:"setting-item"},Ir={class:"setting-status"},Tr=["disabled"],Wr=["disabled"],Xr={class:"setting-item"},Vr={class:"setting-status"},Br={class:"modal-content"},$r={class:"form-group"},Ur={class:"form-group"},Hr={class:"form-group"},Rr={key:0,class:"error-message"},Nr={key:1,class:"success-message"},Or={class:"form-actions"},qr=["disabled"],Gr={class:"settings-card"},jr={class:"setting-item"},Qr={class:"setting-status"},Jr={class:"toggle-switch"},Yr={class:"toggle-label"},Kr={class:"setting-item"},zr={class:"setting-status"},Zr=["disabled"],en={class:"settings-card"},tn={class:"setting-item"},sn={class:"setting-status"},an={class:"toggle-switch"},on={class:"toggle-label"},rn={class:"setting-item"},nn={class:"setting-status"},ln={class:"toggle-switch"},cn=["disabled"],dn={class:"toggle-label"};function un(e,t,s,o,r,n){const c=(0,i.g2)("TwoFactorModal");return(0,i.uX)(),(0,i.CE)("div",Er,[r.notification.show?((0,i.uX)(),(0,i.CE)("div",{key:0,class:(0,l.C4)(["notification-alert",r.notification.type])},[(0,i.eW)((0,l.v_)(r.notification.message)+" ",1),(0,i.Lk)("button",{class:"notification-close",onClick:t[0]||(t[0]=e=>r.notification.show=!1)},"Ã—")],2)):(0,i.Q3)("",!0),t[40]||(t[40]=(0,i.Lk)("h1",null,"Account Settings",-1)),(0,i.Lk)("div",Mr,[t[30]||(t[30]=(0,i.Lk)("h2",null,"Security Settings",-1)),(0,i.Lk)("div",Fr,[t[22]||(t[22]=(0,i.Lk)("div",{class:"setting-info"},[(0,i.Lk)("h3",null,"Email Verification"),(0,i.Lk)("p",null,"Verify your email address to access all platform features")],-1)),(0,i.Lk)("div",Pr,[(0,i.Lk)("span",{class:(0,l.C4)({"status-verified":r.user.email_verified,"status-unverified":!r.user.email_verified})},(0,l.v_)(r.user.email_verified?"Verified":"Unverified"),3),r.user.email_verified?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("button",{key:0,onClick:t[1]||(t[1]=(...e)=>n.resendVerificationEmail&&n.resendVerificationEmail(...e)),class:"btn btn-secondary",disabled:r.loading.verification},(0,l.v_)(r.loading.verification?"Sending...":"Resend Email"),9,xr))])]),(0,i.Lk)("div",Dr,[t[23]||(t[23]=(0,i.Lk)("div",{class:"setting-info"},[(0,i.Lk)("h3",null,"Two-Factor Authentication"),(0,i.Lk)("p",null,"Add an extra layer of security to your account")],-1)),(0,i.Lk)("div",Ir,[(0,i.Lk)("span",{class:(0,l.C4)({"status-enabled":r.user.two_factor_enabled,"status-disabled":!r.user.two_factor_enabled})},(0,l.v_)(r.user.two_factor_enabled?"Enabled":"Disabled"),3),r.user.two_factor_enabled?((0,i.uX)(),(0,i.CE)("button",{key:1,onClick:t[3]||(t[3]=(...e)=>n.disableTwoFactor&&n.disableTwoFactor(...e)),class:"btn btn-danger",disabled:r.loading.twoFactor},(0,l.v_)(r.loading.twoFactor?"Disabling...":"Disable"),9,Wr)):((0,i.uX)(),(0,i.CE)("button",{key:0,onClick:t[2]||(t[2]=(...e)=>n.setupTwoFactor&&n.setupTwoFactor(...e)),class:"btn btn-primary",disabled:r.loading.twoFactor},(0,l.v_)(r.loading.twoFactor?"Setting up...":"Enable"),9,Tr))])]),(0,i.Lk)("div",Xr,[t[24]||(t[24]=(0,i.Lk)("div",{class:"setting-info"},[(0,i.Lk)("h3",null,"Password"),(0,i.Lk)("p",null,"Update your password regularly to keep your account secure")],-1)),(0,i.Lk)("div",Vr,[(0,i.Lk)("button",{onClick:t[4]||(t[4]=e=>r.showPasswordModal=!0),class:"btn btn-secondary"}," Change Password ")])]),r.showPasswordModal?((0,i.uX)(),(0,i.CE)("div",{key:0,class:"modal",onClick:t[11]||(t[11]=(0,a.D$)(e=>r.showPasswordModal=!1,["self"]))},[(0,i.Lk)("div",Br,[(0,i.Lk)("span",{class:"close-button",onClick:t[5]||(t[5]=e=>r.showPasswordModal=!1)},"Ã—"),t[29]||(t[29]=(0,i.Lk)("h2",null,"Change Password",-1)),(0,i.Lk)("form",{onSubmit:t[10]||(t[10]=(0,a.D$)((...e)=>n.changePassword&&n.changePassword(...e),["prevent"]))},[(0,i.Lk)("div",$r,[t[25]||(t[25]=(0,i.Lk)("label",{for:"currentPassword"},"Current Password",-1)),(0,i.bo)((0,i.Lk)("input",{type:"password",id:"currentPassword","onUpdate:modelValue":t[6]||(t[6]=e=>r.passwordForm.currentPassword=e),required:""},null,512),[[a.Jo,r.passwordForm.currentPassword]])]),(0,i.Lk)("div",Ur,[t[26]||(t[26]=(0,i.Lk)("label",{for:"newPassword"},"New Password",-1)),(0,i.bo)((0,i.Lk)("input",{type:"password",id:"newPassword","onUpdate:modelValue":t[7]||(t[7]=e=>r.passwordForm.newPassword=e),required:"",minlength:"8"},null,512),[[a.Jo,r.passwordForm.newPassword]]),t[27]||(t[27]=(0,i.Lk)("small",null,"Password must be at least 8 characters long",-1))]),(0,i.Lk)("div",Hr,[t[28]||(t[28]=(0,i.Lk)("label",{for:"confirmPassword"},"Confirm New Password",-1)),(0,i.bo)((0,i.Lk)("input",{type:"password",id:"confirmPassword","onUpdate:modelValue":t[8]||(t[8]=e=>r.passwordForm.confirmPassword=e),required:""},null,512),[[a.Jo,r.passwordForm.confirmPassword]])]),r.passwordError?((0,i.uX)(),(0,i.CE)("div",Rr,(0,l.v_)(r.passwordError),1)):(0,i.Q3)("",!0),r.passwordSuccess?((0,i.uX)(),(0,i.CE)("div",Nr,(0,l.v_)(r.passwordSuccess),1)):(0,i.Q3)("",!0),(0,i.Lk)("div",Or,[(0,i.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:t[9]||(t[9]=e=>r.showPasswordModal=!1)}," Cancel "),(0,i.Lk)("button",{type:"submit",class:"btn btn-primary",disabled:r.loading.password},(0,l.v_)(r.loading.password?"Updating...":"Update Password"),9,qr)])],32)])])):(0,i.Q3)("",!0)]),(0,i.Lk)("div",Gr,[t[34]||(t[34]=(0,i.Lk)("h2",null,"Data Privacy",-1)),(0,i.Lk)("div",jr,[t[32]||(t[32]=(0,i.Lk)("div",{class:"setting-info"},[(0,i.Lk)("h3",null,"Data Sharing Consent"),(0,i.Lk)("p",null,"Control how your health data is used for personalized recommendations")],-1)),(0,i.Lk)("div",Qr,[(0,i.Lk)("label",Jr,[(0,i.bo)((0,i.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[12]||(t[12]=e=>r.privacySettings.dataSharingConsent=e),onChange:t[13]||(t[13]=(...e)=>n.updatePrivacySettings&&n.updatePrivacySettings(...e))},null,544),[[a.lH,r.privacySettings.dataSharingConsent]]),t[31]||(t[31]=(0,i.Lk)("span",{class:"slider"},null,-1))]),(0,i.Lk)("span",Yr,(0,l.v_)(r.privacySettings.dataSharingConsent?"Enabled":"Disabled"),1)])]),(0,i.Lk)("div",Kr,[t[33]||(t[33]=(0,i.Lk)("div",{class:"setting-info"},[(0,i.Lk)("h3",null,"Export Your Data"),(0,i.Lk)("p",null,"Download all your health data in a portable format")],-1)),(0,i.Lk)("div",zr,[(0,i.Lk)("button",{onClick:t[14]||(t[14]=(...e)=>n.exportData&&n.exportData(...e)),class:"btn btn-secondary",disabled:r.loading.export},(0,l.v_)(r.loading.export?"Preparing...":"Export Data"),9,Zr)])])]),(0,i.Lk)("div",en,[t[39]||(t[39]=(0,i.Lk)("h2",null,"Notifications",-1)),(0,i.Lk)("div",tn,[t[36]||(t[36]=(0,i.Lk)("div",{class:"setting-info"},[(0,i.Lk)("h3",null,"Email Notifications"),(0,i.Lk)("p",null,"Receive updates, insights, and recommendations via email")],-1)),(0,i.Lk)("div",sn,[(0,i.Lk)("label",an,[(0,i.bo)((0,i.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[15]||(t[15]=e=>r.notificationSettings.emailEnabled=e),onChange:t[16]||(t[16]=(...e)=>n.updateNotificationSettings&&n.updateNotificationSettings(...e))},null,544),[[a.lH,r.notificationSettings.emailEnabled]]),t[35]||(t[35]=(0,i.Lk)("span",{class:"slider"},null,-1))]),(0,i.Lk)("span",on,(0,l.v_)(r.notificationSettings.emailEnabled?"Enabled":"Disabled"),1)])]),(0,i.Lk)("div",rn,[t[38]||(t[38]=(0,i.Lk)("div",{class:"setting-info"},[(0,i.Lk)("h3",null,"Weekly Summary"),(0,i.Lk)("p",null,"Receive a weekly summary of your health metrics and progress")],-1)),(0,i.Lk)("div",nn,[(0,i.Lk)("label",ln,[(0,i.bo)((0,i.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[17]||(t[17]=e=>r.notificationSettings.weeklySummary=e),onChange:t[18]||(t[18]=(...e)=>n.updateNotificationSettings&&n.updateNotificationSettings(...e)),disabled:!r.notificationSettings.emailEnabled},null,40,cn),[[a.lH,r.notificationSettings.weeklySummary]]),t[37]||(t[37]=(0,i.Lk)("span",{class:"slider"},null,-1))]),(0,i.Lk)("span",dn,(0,l.v_)(r.notificationSettings.weeklySummary?"Enabled":"Disabled"),1)])])]),(0,i.bF)(c,{show:r.showTwoFactorModal,step:r.setupStep,"qr-code":r.qrCodeUrl,secret:r.secretKey,code:r.verificationCode,error:r.twoFactorError,verifying:r.loading.verification,onClose:t[19]||(t[19]=e=>r.showTwoFactorModal=!1),onStep:t[20]||(t[20]=e=>r.setupStep=e),"onUpdate:code":t[21]||(t[21]=e=>r.verificationCode=e),onVerify:n.verifyTwoFactor},null,8,["show","step","qr-code","secret","code","error","verifying","onVerify"])])}s(4603),s(7566),s(8721);class hn{getCurrentUser(){return We.A.get("users/me/")}verifyEmail(e){return We.A.post("users/verify-email/",{token:e})}resendVerificationEmail(e){return e?We.A.post("users/resend-verification/",{email:e}):We.A.post("users/resend-verification/")}generateTwoFactorSecret(){return We.A.post("users/2fa/generate/")}verifyTwoFactor(e){return We.A.post("users/2fa/verify/",{code:e})}disableTwoFactor(){return We.A.post("users/2fa/disable/")}changePassword(e,t){return We.A.post("users/change-password/",{current_password:e,new_password:t})}getNotificationSettings(){return We.A.get("users/notification-settings/")}updateNotificationSettings(e){return We.A.put("users/notification-settings/",e)}exportUserData(){return We.A.get("users/export-data/")}resetPassword(e){return We.A.post("users/reset-password/",{email:e})}confirmResetPassword(e,t){return We.A.post("users/reset-password/confirm/",{token:e,new_password:t})}}var gn=new hn;const pn={key:0,class:"setup-qr"},vn={class:"qr-container"},mn=["src"],kn={key:1,class:"loading-spinner"},yn={key:0,class:"manual-key"},fn=["disabled"],wn={key:1,class:"verify-code"},bn={class:"code-input"},Ln=["value"],_n={key:0,class:"error-message"},Cn={class:"form-actions"},An=["disabled"];function Sn(e,t,s,o,r,n){return(0,i.uX)(),(0,i.Wv)(a.eB,{name:"modal-fade"},{default:(0,i.k6)(()=>[s.show?((0,i.uX)(),(0,i.CE)("div",{key:0,class:"two-factor-modal-backdrop",onClick:t[6]||(t[6]=t=>e.$emit("close"))},[(0,i.Lk)("div",{class:"two-factor-modal-content",onClick:t[5]||(t[5]=(0,a.D$)(()=>{},["stop"]))},[(0,i.Lk)("button",{class:"two-factor-modal-close",onClick:t[0]||(t[0]=t=>e.$emit("close"))},"Ã—"),t[10]||(t[10]=(0,i.Lk)("h2",null,"Set Up Two-Factor Authentication",-1)),1===s.step?((0,i.uX)(),(0,i.CE)("div",pn,[t[8]||(t[8]=(0,i.Lk)("p",null,"Scan this QR code with your authenticator app (Google Authenticator, Authy, etc.)",-1)),(0,i.Lk)("div",vn,[s.qrCode?((0,i.uX)(),(0,i.CE)("img",{key:0,src:s.qrCode,alt:"QR Code for 2FA setup"},null,8,mn)):((0,i.uX)(),(0,i.CE)("div",kn))]),s.secret?((0,i.uX)(),(0,i.CE)("p",yn,[t[7]||(t[7]=(0,i.eW)(" Or enter this key manually: ")),(0,i.Lk)("strong",null,(0,l.v_)(s.secret),1)])):(0,i.Q3)("",!0),(0,i.Lk)("button",{onClick:t[1]||(t[1]=t=>e.$emit("step",2)),class:"btn btn-primary",disabled:!s.qrCode}," Next ",8,fn)])):(0,i.Q3)("",!0),2===s.step?((0,i.uX)(),(0,i.CE)("div",wn,[t[9]||(t[9]=(0,i.Lk)("p",null,"Enter the 6-digit code from your authenticator app to verify setup",-1)),(0,i.Lk)("div",bn,[(0,i.Lk)("input",{type:"text",value:s.code,onInput:t[2]||(t[2]=t=>e.$emit("update:code",t.target.value)),placeholder:"000000",maxlength:"6",pattern:"[0-9]*",inputmode:"numeric"},null,40,Ln)]),s.error?((0,i.uX)(),(0,i.CE)("div",_n,(0,l.v_)(s.error),1)):(0,i.Q3)("",!0),(0,i.Lk)("div",Cn,[(0,i.Lk)("button",{onClick:t[3]||(t[3]=t=>e.$emit("step",1)),class:"btn btn-secondary"}," Back "),(0,i.Lk)("button",{onClick:t[4]||(t[4]=t=>e.$emit("verify")),class:"btn btn-primary",disabled:6!==s.code.length||s.verifying},(0,l.v_)(s.verifying?"Verifying...":"Verify & Enable"),9,An)])])):(0,i.Q3)("",!0)])])):(0,i.Q3)("",!0)]),_:1})}var En={name:"TwoFactorModal",props:{show:{type:Boolean,required:!0},step:{type:Number,default:1},qrCode:{type:String,default:""},secret:{type:String,default:""},code:{type:String,default:""},error:{type:String,default:""},verifying:{type:Boolean,default:!1}},emits:["close","step","update:code","verify"]};const Mn=(0,w.A)(En,[["render",Sn],["__scopeId","data-v-12d5e2e3"]]);var Fn=Mn,Pn={name:"Settings",components:{TwoFactorModal:Fn},data(){return{user:{email_verified:!1,two_factor_enabled:!1},privacySettings:{dataSharingConsent:!1},notificationSettings:{emailEnabled:!0,weeklySummary:!0},notification:{show:!1,message:"",type:"success"},loading:{verification:!1,twoFactor:!1,password:!1,export:!1},showTwoFactorModal:!1,showPasswordModal:!1,setupStep:1,qrCodeUrl:"",secretKey:"",verificationCode:"",twoFactorError:"",passwordForm:{currentPassword:"",newPassword:"",confirmPassword:""},passwordError:"",passwordSuccess:""}},mounted(){this.loadUserData(),this.loadPrivacySettings(),this.loadNotificationSettings()},methods:{showToast(e,t="success",s=3e3){this.notification={show:!0,message:e,type:t},setTimeout(()=>{this.notification.show=!1},s)},async loadUserData(){try{const e=await gn.getCurrentUser();this.user=e.data}catch(e){console.error("Error loading user data:",e)}},async loadPrivacySettings(){try{const e=await Te.A.getHealthProfile();e.data&&(this.privacySettings.dataSharingConsent=e.data.data_sharing_consent||!1)}catch(e){console.error("Error loading privacy settings:",e)}},async loadNotificationSettings(){try{const e=await gn.getNotificationSettings();this.notificationSettings=e.data}catch(e){console.error("Error loading notification settings:",e),this.notificationSettings={emailEnabled:!0,weeklySummary:!0}}},async resendVerificationEmail(){this.loading.verification=!0;try{await gn.resendVerificationEmail(),this.showToast("Verification email sent successfully. Please check your inbox.","success",5e3)}catch(e){console.error("Error sending verification email:",e),this.showToast("Failed to send verification email. Please try again later.","error",5e3)}finally{this.loading.verification=!1}},async setupTwoFactor(){this.loading.twoFactor=!0;try{this.verificationCode="",this.twoFactorError="",this.setupStep=1;const e=await gn.generateTwoFactorSecret();this.qrCodeUrl=e.data.qr_code,this.secretKey=e.data.secret_key,this.showTwoFactorModal=!0}catch(e){console.error("Error setting up 2FA:",e),this.showToast("Failed to set up two-factor authentication. Please try again later.","error",5e3)}finally{this.loading.twoFactor=!1}},async verifyTwoFactor(){if(6===this.verificationCode.length){this.loading.verification=!0;try{await gn.verifyTwoFactor(this.verificationCode),this.user.two_factor_enabled=!0,this.showTwoFactorModal=!1,this.showToast("Two-factor authentication enabled successfully.","success",5e3)}catch(e){console.error("Error verifying 2FA code:",e),this.twoFactorError="Invalid verification code. Please try again."}finally{this.loading.verification=!1}}else this.twoFactorError="Please enter a valid 6-digit code"},async disableTwoFactor(){if(confirm("Are you sure you want to disable two-factor authentication? This will make your account less secure.")){this.loading.twoFactor=!0;try{await gn.disableTwoFactor(),this.user.two_factor_enabled=!1,this.showToast("Two-factor authentication disabled.","success",5e3)}catch(e){console.error("Failed to disable 2FA:",e),this.showToast("Failed to disable two-factor authentication. Please try again later.","error",5e3)}finally{this.loading.twoFactor=!1}}},async changePassword(){if(this.passwordError="",this.passwordSuccess="",this.passwordForm.newPassword===this.passwordForm.confirmPassword)if(this.passwordForm.newPassword.length<8)this.passwordError="Password must be at least 8 characters long";else{this.loading.password=!0;try{await gn.changePassword(this.passwordForm.currentPassword,this.passwordForm.newPassword),this.passwordSuccess="Password updated successfully",this.passwordForm={currentPassword:"",newPassword:"",confirmPassword:""},setTimeout(()=>{this.showPasswordModal=!1,this.passwordSuccess=""},2e3)}catch(e){console.error("Error changing password:",e),e.response&&e.response.data&&e.response.data.detail?this.passwordError=e.response.data.detail:this.passwordError="Failed to update password. Please try again."}finally{this.loading.password=!1}}else this.passwordError="New passwords do not match"},async updatePrivacySettings(){try{const e=await Te.A.getHealthProfile(),t={...e.data,data_sharing_consent:this.privacySettings.dataSharingConsent};await Te.A.updateHealthProfile(t),this.showToast("Privacy settings updated successfully.","success",3e3)}catch(e){console.error("Error updating privacy settings:",e),this.showToast("Failed to update privacy settings.","error",3e3),this.loadPrivacySettings()}},async updateNotificationSettings(){try{await gn.updateNotificationSettings(this.notificationSettings),this.showToast("Notification settings updated successfully.","success",3e3)}catch(e){console.error("Error updating notification settings:",e),this.showToast("Failed to update notification settings.","error",3e3),this.loadNotificationSettings()}},async exportData(){this.loading.export=!0;try{const e=await gn.exportUserData(),t=window.URL.createObjectURL(new Blob([JSON.stringify(e.data,null,2)])),s=document.createElement("a");s.href=t,s.setAttribute("download","my_wellness_data.json"),document.body.appendChild(s),s.click(),document.body.removeChild(s),this.showToast("Data exported successfully.","success",3e3)}catch(e){console.error("Error exporting data:",e),this.showToast("Failed to export data. Please try again later.","error",3e3)}finally{this.loading.export=!1}}}};const xn=(0,w.A)(Pn,[["render",un],["__scopeId","data-v-f7e8cf18"]]);var Dn=xn;const In={class:"verify-email-container"},Tn={class:"verify-card"},Wn={key:0,class:"loading"},Xn={key:1,class:"success"},Vn={key:2,class:"error"},Bn={class:"actions"},$n=["disabled"];function Un(e,t,s,a,o,r){const n=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("div",In,[(0,i.Lk)("div",Tn,[o.loading?((0,i.uX)(),(0,i.CE)("div",Wn,t[1]||(t[1]=[(0,i.Lk)("div",{class:"loading-spinner"},null,-1),(0,i.Lk)("p",null,"Verifying your email...",-1)]))):o.verified?((0,i.uX)(),(0,i.CE)("div",Xn,[t[3]||(t[3]=(0,i.Lk)("div",{class:"icon"},"âœ“",-1)),t[4]||(t[4]=(0,i.Lk)("h2",null,"Email Verified Successfully!",-1)),t[5]||(t[5]=(0,i.Lk)("p",null,"Your email has been verified. You can now access all features of the Wellness Platform.",-1)),(0,i.bF)(n,{to:"/login",class:"btn btn-primary"},{default:(0,i.k6)(()=>t[2]||(t[2]=[(0,i.eW)("Login")])),_:1,__:[2]})])):o.error?((0,i.uX)(),(0,i.CE)("div",Vn,[t[7]||(t[7]=(0,i.Lk)("div",{class:"icon"},"!",-1)),t[8]||(t[8]=(0,i.Lk)("h2",null,"Verification Failed",-1)),(0,i.Lk)("p",null,(0,l.v_)(o.error),1),(0,i.Lk)("div",Bn,[(0,i.bF)(n,{to:"/login",class:"btn btn-secondary"},{default:(0,i.k6)(()=>t[6]||(t[6]=[(0,i.eW)("Back to Login")])),_:1,__:[6]}),(0,i.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>r.resendVerification&&r.resendVerification(...e)),class:"btn btn-primary",disabled:o.resending},(0,l.v_)(o.resending?"Sending...":"Resend Verification Email"),9,$n)])])):(0,i.Q3)("",!0)])])}var Hn={name:"VerifyEmail",data(){return{loading:!0,verified:!1,error:null,token:null,resending:!1}},mounted(){if(this.token=this.$route.params.token,!this.token)return this.loading=!1,void(this.error="Invalid verification link. Please check your email and try again.");this.verifyEmail()},methods:{async verifyEmail(){try{await gn.verifyEmail(this.token),this.verified=!0}catch(e){console.error("Email verification failed:",e),e.response&&e.response.data&&e.response.data.detail?this.error=e.response.data.detail:this.error="Failed to verify your email. The link may have expired or is invalid."}finally{this.loading=!1}},async resendVerification(){this.resending=!0;try{await gn.resendVerificationEmail(this.$route.query.email),this.$toast.success("Verification email sent. Please check your inbox.",{position:"top-right",duration:5e3})}catch(e){console.error("Failed to resend verification email:",e),this.$toast.error("Failed to send verification email. Please try again later.",{position:"top-right",duration:5e3})}finally{this.resending=!1}}}};const Rn=(0,w.A)(Hn,[["render",Un],["__scopeId","data-v-a7b6c8e6"]]);var Nn=Rn;const On={class:"reset-password-container"},qn={key:0,class:"reset-card"},Gn={class:"form-group"},jn=["disabled"],Qn={class:"form-footer"},Jn={key:1,class:"reset-card"},Yn={class:"form-group"},Kn={class:"form-group"},zn=["disabled"],Zn={key:1,class:"form-footer"};function el(e,t,s,o,r,n){const c=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("div",On,[r.token?((0,i.uX)(),(0,i.CE)("div",Jn,[t[13]||(t[13]=(0,i.Lk)("h2",null,"Create New Password",-1)),t[14]||(t[14]=(0,i.Lk)("p",null,"Please enter your new password below.",-1)),(0,i.Lk)("form",{onSubmit:t[4]||(t[4]=(0,a.D$)((...e)=>n.resetPassword&&n.resetPassword(...e),["prevent"]))},[(0,i.Lk)("div",Yn,[t[9]||(t[9]=(0,i.Lk)("label",{for:"newPassword"},"New Password",-1)),(0,i.bo)((0,i.Lk)("input",{type:"password",id:"newPassword","onUpdate:modelValue":t[2]||(t[2]=e=>r.newPassword=e),required:"",minlength:"8",placeholder:"Enter new password"},null,512),[[a.Jo,r.newPassword]]),t[10]||(t[10]=(0,i.Lk)("small",null,"Password must be at least 8 characters long",-1))]),(0,i.Lk)("div",Kn,[t[11]||(t[11]=(0,i.Lk)("label",{for:"confirmPassword"},"Confirm Password",-1)),(0,i.bo)((0,i.Lk)("input",{type:"password",id:"confirmPassword","onUpdate:modelValue":t[3]||(t[3]=e=>r.confirmPassword=e),required:"",placeholder:"Confirm new password"},null,512),[[a.Jo,r.confirmPassword]])]),r.resetMessage?((0,i.uX)(),(0,i.CE)("div",{key:0,class:(0,l.C4)(["alert",r.resetSuccess?"alert-success":"alert-danger"])},(0,l.v_)(r.resetMessage),3)):(0,i.Q3)("",!0),(0,i.Lk)("button",{type:"submit",class:"btn btn-primary btn-block",disabled:r.loading||r.resetSuccess},(0,l.v_)(r.loading?"Updating...":"Reset Password"),9,zn),r.resetSuccess?((0,i.uX)(),(0,i.CE)("div",Zn,[(0,i.bF)(c,{to:"/login",class:"btn btn-secondary"},{default:(0,i.k6)(()=>t[12]||(t[12]=[(0,i.eW)("Go to Login")])),_:1,__:[12]})])):(0,i.Q3)("",!0)],32)])):((0,i.uX)(),(0,i.CE)("div",qn,[t[7]||(t[7]=(0,i.Lk)("h2",null,"Reset Password",-1)),t[8]||(t[8]=(0,i.Lk)("p",null,"Enter your email address and we'll send you a link to reset your password.",-1)),(0,i.Lk)("form",{onSubmit:t[1]||(t[1]=(0,a.D$)((...e)=>n.requestReset&&n.requestReset(...e),["prevent"]))},[(0,i.Lk)("div",Gn,[t[5]||(t[5]=(0,i.Lk)("label",{for:"email"},"Email Address",-1)),(0,i.bo)((0,i.Lk)("input",{type:"email",id:"email","onUpdate:modelValue":t[0]||(t[0]=e=>r.email=e),required:"",placeholder:"Enter your email"},null,512),[[a.Jo,r.email]])]),r.requestMessage?((0,i.uX)(),(0,i.CE)("div",{key:0,class:(0,l.C4)(["alert",r.requestSuccess?"alert-success":"alert-danger"])},(0,l.v_)(r.requestMessage),3)):(0,i.Q3)("",!0),(0,i.Lk)("button",{type:"submit",class:"btn btn-primary btn-block",disabled:r.loading},(0,l.v_)(r.loading?"Sending...":"Send Reset Link"),9,jn),(0,i.Lk)("div",Qn,[(0,i.bF)(c,{to:"/login"},{default:(0,i.k6)(()=>t[6]||(t[6]=[(0,i.eW)("Back to Login")])),_:1,__:[6]})])],32)]))])}var tl={name:"ResetPassword",data(){return{token:"",email:"",newPassword:"",confirmPassword:"",loading:!1,requestMessage:"",requestSuccess:!1,resetMessage:"",resetSuccess:!1}},created(){this.token=this.$route.params.token||""},methods:{async requestReset(){if(!this.email)return this.requestMessage="Please enter your email address",void(this.requestSuccess=!1);this.loading=!0,this.requestMessage="";try{await gn.resetPassword(this.email),this.requestSuccess=!0,this.requestMessage="If your email is registered, you will receive a password reset link shortly.",this.email=""}catch(e){console.error("Failed to request password reset:",e),this.requestSuccess=!0,this.requestMessage="If your email is registered, you will receive a password reset link shortly."}finally{this.loading=!1}},async resetPassword(){if(this.newPassword!==this.confirmPassword)return this.resetMessage="Passwords do not match",void(this.resetSuccess=!1);if(this.newPassword.length<8)return this.resetMessage="Password must be at least 8 characters long",void(this.resetSuccess=!1);this.loading=!0,this.resetMessage="";try{await gn.confirmResetPassword(this.token,this.newPassword),this.resetSuccess=!0,this.resetMessage="Your password has been reset successfully!",this.newPassword="",this.confirmPassword=""}catch(e){console.error("Failed to reset password:",e),this.resetSuccess=!1,e.response&&e.response.data&&e.response.data.detail?this.resetMessage=e.response.data.detail:this.resetMessage="Failed to reset your password. The link may have expired or is invalid."}finally{this.loading=!1}}}};const sl=(0,w.A)(tl,[["render",el],["__scopeId","data-v-66ed6f18"]]);var al=sl;const il={class:"verify-prompt-container"},ol={class:"verify-card"},rl={class:"actions"},nl=["disabled"],ll=["disabled"],cl={class:"logout-link"};function dl(e,t,s,a,o,r){return(0,i.uX)(),(0,i.CE)("div",il,[(0,i.Lk)("div",ol,[t[5]||(t[5]=(0,i.Lk)("div",{class:"icon"},"âœ‰ï¸",-1)),t[6]||(t[6]=(0,i.Lk)("h2",null,"Verify Your Email",-1)),(0,i.Lk)("p",null,[t[3]||(t[3]=(0,i.eW)(" To access all features of the Wellness Platform, please verify your email address. We've sent a verification link to ")),(0,i.Lk)("strong",null,(0,l.v_)(r.userEmail),1),t[4]||(t[4]=(0,i.eW)(". "))]),t[7]||(t[7]=(0,i.Lk)("div",{class:"instructions"},[(0,i.Lk)("ol",null,[(0,i.Lk)("li",null,"Check your email inbox (and spam folder)"),(0,i.Lk)("li",null,"Click on the verification link in the email"),(0,i.Lk)("li",null,"Return to this page after verification")])],-1)),o.message?((0,i.uX)(),(0,i.CE)("div",{key:0,class:(0,l.C4)(["alert",o.successful?"alert-success":"alert-danger"])},(0,l.v_)(o.message),3)):(0,i.Q3)("",!0),(0,i.Lk)("div",rl,[(0,i.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>r.resendVerificationEmail&&r.resendVerificationEmail(...e)),class:"btn btn-primary",disabled:o.loading},(0,l.v_)(o.loading?"Sending...":"Resend Verification Email"),9,nl),(0,i.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>r.checkVerificationStatus&&r.checkVerificationStatus(...e)),class:"btn btn-secondary",disabled:o.loading}," I've Verified My Email ",8,ll)]),t[8]||(t[8]=(0,i.Lk)("div",{class:"help-text"},[(0,i.Lk)("p",null,[(0,i.eW)(" Having trouble? "),(0,i.Lk)("a",{href:"mailto:support@wellnessplatform.com"},"Contact Support")])],-1)),(0,i.Lk)("div",cl,[(0,i.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>r.logout&&r.logout(...e)),class:"btn-text"},"Sign Out")])])])}var ul={name:"VerifyPrompt",data(){return{loading:!1,message:"",successful:!1}},computed:{currentUser(){return this.$store.getters["auth/currentUser"]},isEmailVerified(){return this.$store.getters["auth/isEmailVerified"]},userEmail(){return this.currentUser?.email||"your email address"}},created(){this.currentUser||this.$router.push("/login")},methods:{async resendVerificationEmail(){this.loading=!0,this.message="";try{await gn.resendVerificationEmail(),this.successful=!0,this.message="Verification email has been sent! Please check your inbox."}catch(e){console.error("Failed to resend verification email:",e),this.successful=!1,e.response&&e.response.data&&e.response.data.detail?this.message=e.response.data.detail:this.message="Failed to send verification email. Please try again later."}finally{this.loading=!1}},async checkVerificationStatus(){this.loading=!0,this.message="";try{const e=await gn.getCurrentUser(),t=e.data;t.email_verified?(this.$store.commit("auth/updateUser",{email_verified:!0}),this.successful=!0,this.message="Email verified successfully! Redirecting...",setTimeout(()=>{this.$router.push("/dashboard")},1500)):(this.successful=!1,this.message="Your email is not verified yet. Please check your inbox and click the verification link.")}catch(e){console.error("Failed to check verification status:",e),this.successful=!1,this.message="Failed to check verification status. Please try again."}finally{this.loading=!1}},logout(){this.$store.dispatch("auth/logout"),this.$router.push("/login")}}};const hl=(0,w.A)(ul,[["render",dl],["__scopeId","data-v-f693b14e"]]);var gl=hl;const pl={class:"activities-page"},vl={class:"page-header"},ml={class:"filters-section"},kl={class:"filters-grid"},yl={class:"filter-group"},fl={class:"filter-group"},wl={class:"filter-group"},bl=["value"],Ll={class:"filter-actions"},_l={key:0,class:"loading-container"},Cl={key:1,class:"error-container"},Al={class:"error-message"},Sl={key:2,class:"activities-content"},El={key:0,class:"activities-data"},Ml={class:"stats-section"},Fl={class:"stats-grid"},Pl={class:"stat-card"},xl={class:"stat-info"},Dl={class:"stat-value"},Il={class:"stat-card"},Tl={class:"stat-info"},Wl={class:"stat-value"},Xl={class:"stat-card"},Vl={class:"stat-info"},Bl={class:"stat-value"},$l={class:"stat-card"},Ul={class:"stat-info"},Hl={class:"stat-value"},Rl={class:"stat-card"},Nl={class:"stat-info"},Ol={class:"stat-value"},ql={ref:"statsChart",class:"stats-chart"},Gl={class:"activities-table-section"},jl={class:"table-container"},Ql={class:"activities-table"},Jl={class:"date-cell"},Yl={class:"date-info"},Kl={class:"date"},zl={class:"time"},Zl={class:"type-cell"},ec={class:"type-icon"},tc={class:"type-label"},sc={class:"name-cell"},ac={class:"activity-name"},ic={class:"duration-cell"},oc={class:"duration-value"},rc={class:"distance-cell"},nc={key:0,class:"distance-value"},lc={key:1,class:"no-data"},cc={class:"calories-cell"},dc={key:0,class:"calories-value"},uc={key:1,class:"no-data"},hc={class:"notes-cell"},gc=["title"],pc={key:1,class:"no-data"},vc={class:"actions-cell"},mc={class:"action-buttons"},kc=["onClick"],yc=["onClick"],fc={key:1,class:"empty-state"};function wc(e,t,s,o,r,n){const c=(0,i.g2)("add-activity-modal");return(0,i.uX)(),(0,i.CE)("div",pl,[(0,i.Lk)("div",vl,[t[9]||(t[9]=(0,i.Lk)("div",{class:"header-content"},[(0,i.Lk)("h1",{class:"page-title"},"My Activities"),(0,i.Lk)("p",{class:"page-description"},"Track and manage all your fitness activities in one place.")],-1)),(0,i.Lk)("button",{class:"btn btn-primary",onClick:t[0]||(t[0]=e=>r.showAddModal=!0)},t[8]||(t[8]=[(0,i.Lk)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,i.Lk)("path",{d:"M12 5V19M5 12H19",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),(0,i.eW)(" Log New Activity ")]))]),(0,i.Lk)("div",ml,[t[14]||(t[14]=(0,i.Lk)("h2",{class:"section-title"},"Filter Activities",-1)),(0,i.Lk)("div",kl,[(0,i.Lk)("div",yl,[t[10]||(t[10]=(0,i.Lk)("label",{class:"filter-label"},"From Date",-1)),(0,i.bo)((0,i.Lk)("input",{type:"date","onUpdate:modelValue":t[1]||(t[1]=e=>r.filters.startDate=e),class:"filter-input"},null,512),[[a.Jo,r.filters.startDate]])]),(0,i.Lk)("div",fl,[t[11]||(t[11]=(0,i.Lk)("label",{class:"filter-label"},"To Date",-1)),(0,i.bo)((0,i.Lk)("input",{type:"date","onUpdate:modelValue":t[2]||(t[2]=e=>r.filters.endDate=e),class:"filter-input"},null,512),[[a.Jo,r.filters.endDate]])]),(0,i.Lk)("div",wl,[t[12]||(t[12]=(0,i.Lk)("label",{class:"filter-label"},"Activity Type",-1)),(0,i.bo)((0,i.Lk)("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>r.filters.activityType=e),class:"filter-select"},[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.activityTypes,e=>((0,i.uX)(),(0,i.CE)("option",{key:e.value,value:e.value},(0,l.v_)(e.label),9,bl))),128))],512),[[a.u1,r.filters.activityType]])]),(0,i.Lk)("div",Ll,[(0,i.Lk)("button",{class:"btn btn-secondary",onClick:t[4]||(t[4]=(...e)=>n.fetchActivities&&n.fetchActivities(...e))},t[13]||(t[13]=[(0,i.Lk)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,i.Lk)("path",{d:"M21 21L16.5 16.5M19 11C19 15.4183 15.4183 19 11 19C6.58172 19 3 15.4183 3 11C3 6.58172 6.58172 3 11 3C15.4183 3 19 6.58172 19 11Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),(0,i.eW)(" Apply Filters ")])),(0,i.Lk)("button",{class:"btn btn-text",onClick:t[5]||(t[5]=(...e)=>n.clearFilters&&n.clearFilters(...e))}," Clear ")])])]),r.loading?((0,i.uX)(),(0,i.CE)("div",_l,t[15]||(t[15]=[(0,i.Lk)("div",{class:"loading-spinner"},null,-1),(0,i.Lk)("p",null,"Loading your activities...",-1)]))):r.error?((0,i.uX)(),(0,i.CE)("div",Cl,[t[16]||(t[16]=(0,i.Lk)("div",{class:"error-icon"},"âš ï¸",-1)),(0,i.Lk)("p",Al,(0,l.v_)(r.error),1),(0,i.Lk)("button",{class:"btn btn-secondary",onClick:t[6]||(t[6]=(...e)=>n.fetchActivities&&n.fetchActivities(...e))}," Try Again ")])):((0,i.uX)(),(0,i.CE)("div",Sl,[r.activities.length?((0,i.uX)(),(0,i.CE)("div",El,[(0,i.Lk)("div",Ml,[t[27]||(t[27]=(0,i.Lk)("h2",{class:"section-title"},"Activity Summary",-1)),(0,i.Lk)("div",Fl,[(0,i.Lk)("div",Pl,[t[18]||(t[18]=(0,i.Lk)("div",{class:"stat-icon activity-icon"},[(0,i.Lk)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,i.Lk)("path",{d:"M12 2L2 7V17C2 19.21 3.79 21 6 21H18C20.21 21 22 19.21 22 17V7L12 2Z",stroke:"#30C1B1","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)),(0,i.Lk)("div",xl,[(0,i.Lk)("div",Dl,(0,l.v_)(r.stats.totalActivities),1),t[17]||(t[17]=(0,i.Lk)("div",{class:"stat-label"},"Total Activities",-1))])]),(0,i.Lk)("div",Il,[t[20]||(t[20]=(0,i.Lk)("div",{class:"stat-icon duration-icon"},[(0,i.Lk)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,i.Lk)("circle",{cx:"12",cy:"12",r:"10",stroke:"#30C1B1","stroke-width":"2"}),(0,i.Lk)("path",{d:"M12 6V12L16 14",stroke:"#30C1B1","stroke-width":"2","stroke-linecap":"round"})])],-1)),(0,i.Lk)("div",Tl,[(0,i.Lk)("div",Wl,(0,l.v_)(n.formatDuration(r.stats.totalDuration)),1),t[19]||(t[19]=(0,i.Lk)("div",{class:"stat-label"},"Total Duration",-1))])]),(0,i.Lk)("div",Xl,[t[22]||(t[22]=(0,i.Lk)("div",{class:"stat-icon distance-icon"},[(0,i.Lk)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,i.Lk)("path",{d:"M9 11L12 14L22 4M21 12V19C21 20.1046 20.1046 21 19 21H5C3.89543 21 3 20.1046 3 19V5C3 3.89543 3.89543 3 5 3H16",stroke:"#30C1B1","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)),(0,i.Lk)("div",Vl,[(0,i.Lk)("div",Bl,(0,l.v_)(r.stats.totalDistance.toFixed(1))+" km",1),t[21]||(t[21]=(0,i.Lk)("div",{class:"stat-label"},"Total Distance",-1))])]),(0,i.Lk)("div",$l,[t[24]||(t[24]=(0,i.Lk)("div",{class:"stat-icon calories-icon"},[(0,i.Lk)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,i.Lk)("path",{d:"M12 2C13.5 2 16.5 7 16.5 10C16.5 13 14.5 15 12 15C9.5 15 7.5 13 7.5 10C7.5 7 10.5 2 12 2Z",stroke:"#30C1B1","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),(0,i.Lk)("path",{d:"M12 15V22",stroke:"#30C1B1","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)),(0,i.Lk)("div",Ul,[(0,i.Lk)("div",Hl,(0,l.v_)(r.stats.totalCalories),1),t[23]||(t[23]=(0,i.Lk)("div",{class:"stat-label"},"Total Calories",-1))])]),(0,i.Lk)("div",Rl,[t[26]||(t[26]=(0,i.Fv)('<div class="stat-icon days-icon" data-v-3c78ebb8><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-3c78ebb8><rect x="3" y="4" width="18" height="18" rx="2" ry="2" stroke="#30C1B1" stroke-width="2" data-v-3c78ebb8></rect><line x1="16" y1="2" x2="16" y2="6" stroke="#30C1B1" stroke-width="2" stroke-linecap="round" data-v-3c78ebb8></line><line x1="8" y1="2" x2="8" y2="6" stroke="#30C1B1" stroke-width="2" stroke-linecap="round" data-v-3c78ebb8></line><line x1="3" y1="10" x2="21" y2="10" stroke="#30C1B1" stroke-width="2" data-v-3c78ebb8></line></svg></div>',1)),(0,i.Lk)("div",Nl,[(0,i.Lk)("div",Ol,(0,l.v_)(r.stats.activeDays),1),t[25]||(t[25]=(0,i.Lk)("div",{class:"stat-label"},"Active Days",-1))])]),(0,i.Lk)("canvas",ql,null,512)])]),(0,i.Lk)("div",Gl,[t[31]||(t[31]=(0,i.Lk)("h2",{class:"section-title"},"Activity History",-1)),(0,i.Lk)("div",jl,[(0,i.Lk)("table",Ql,[t[30]||(t[30]=(0,i.Lk)("thead",null,[(0,i.Lk)("tr",null,[(0,i.Lk)("th",null,"Date & Time"),(0,i.Lk)("th",null,"Type"),(0,i.Lk)("th",null,"Activity Name"),(0,i.Lk)("th",null,"Duration"),(0,i.Lk)("th",null,"Distance"),(0,i.Lk)("th",null,"Calories"),(0,i.Lk)("th",null,"Notes"),(0,i.Lk)("th",null,"Actions")])],-1)),(0,i.Lk)("tbody",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.activities,e=>((0,i.uX)(),(0,i.CE)("tr",{key:e.id,class:"activity-row"},[(0,i.Lk)("td",Jl,[(0,i.Lk)("div",Yl,[(0,i.Lk)("div",Kl,(0,l.v_)(n.formatDate(e.performed_at)),1),(0,i.Lk)("div",zl,(0,l.v_)(n.formatTime(e.performed_at)),1)])]),(0,i.Lk)("td",Zl,[(0,i.Lk)("div",{class:(0,l.C4)(["activity-type-badge",`type-${e.activity_type}`])},[(0,i.Lk)("span",ec,(0,l.v_)(n.getActivityIcon(e.activity_type)),1),(0,i.Lk)("span",tc,(0,l.v_)(n.getActivityTypeLabel(e.activity_type)),1)],2)]),(0,i.Lk)("td",sc,[(0,i.Lk)("span",ac,(0,l.v_)(e.name),1)]),(0,i.Lk)("td",ic,[(0,i.Lk)("span",oc,(0,l.v_)(e.duration_minutes)+"m",1)]),(0,i.Lk)("td",rc,[e.distance_km?((0,i.uX)(),(0,i.CE)("span",nc,(0,l.v_)(e.distance_km)+" km",1)):((0,i.uX)(),(0,i.CE)("span",lc,"â€”"))]),(0,i.Lk)("td",cc,[e.calories_burned?((0,i.uX)(),(0,i.CE)("span",dc,(0,l.v_)(e.calories_burned)+" cal",1)):((0,i.uX)(),(0,i.CE)("span",uc,"â€”"))]),(0,i.Lk)("td",hc,[e.notes?((0,i.uX)(),(0,i.CE)("span",{key:0,class:"notes-text",title:e.notes},(0,l.v_)(n.truncateNotes(e.notes)),9,gc)):((0,i.uX)(),(0,i.CE)("span",pc,"â€”"))]),(0,i.Lk)("td",vc,[(0,i.Lk)("div",mc,[(0,i.Lk)("button",{class:"action-btn edit-btn",onClick:t=>n.editActivity(e),title:"Edit activity"},t[28]||(t[28]=[(0,i.Lk)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,i.Lk)("path",{d:"M11 4H4C3.46957 4 2.96086 4.21071 2.58579 4.58579C2.21071 4.96086 2 5.46957 2 6V20C2 20.5304 2.21071 21.0391 2.58579 21.4142C2.96086 21.7893 3.46957 22 4 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V13",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),(0,i.Lk)("path",{d:"M18.5 2.50023C18.8978 2.1024 19.4374 1.87891 20 1.87891C20.5626 1.87891 21.1022 2.1024 21.5 2.50023C21.8978 2.89805 22.1213 3.43762 22.1213 4.00023C22.1213 4.56284 21.8978 5.1024 21.5 5.50023L12 15.0002L8 16.0002L9 12.0002L18.5 2.50023Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]),8,kc),(0,i.Lk)("button",{class:"action-btn delete-btn",onClick:t=>n.deleteActivity(e.id),title:"Delete activity"},t[29]||(t[29]=[(0,i.Lk)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,i.Lk)("path",{d:"M3 6H5H21",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),(0,i.Lk)("path",{d:"M8 6V4C8 3.46957 8.21071 2.96086 8.58579 2.58579C8.96086 2.21071 9.46957 2 10 2H14C14.5304 2 15.0391 2.21071 15.4142 2.58579C15.7893 2.96086 16 3.46957 16 4V6M19 6V20C19 20.5304 18.7893 21.0391 18.4142 21.4142C18.0391 21.7893 17.5304 22 17 22H7C6.46957 22 5.96086 21.7893 5.58579 21.4142C5.21071 21.0391 5 20.5304 5 20V6H19Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]),8,yc)])])]))),128))])])])])])):((0,i.uX)(),(0,i.CE)("div",fc,[t[32]||(t[32]=(0,i.Fv)('<div class="empty-icon" data-v-3c78ebb8><svg width="64" height="64" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-3c78ebb8><path d="M12 2L2 7V17C2 19.21 3.79 21 6 21H18C20.21 21 22 19.21 22 17V7L12 2Z" stroke="#CBD5E0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-3c78ebb8></path></svg></div><h3 class="empty-title" data-v-3c78ebb8>No Activities Found</h3><p class="empty-description" data-v-3c78ebb8> No activities match your current filters. Try adjusting your date range or activity type. </p>',3)),(0,i.Lk)("button",{class:"btn btn-primary",onClick:t[7]||(t[7]=(...e)=>n.clearFilters&&n.clearFilters(...e))}," Clear Filters ")]))])),r.showAddModal?((0,i.uX)(),(0,i.Wv)(c,{key:3,loading:r.modalLoading,error:r.modalError,onClose:n.onCloseModal,onSave:n.onSaveActivity},null,8,["loading","error","onClose","onSave"])):(0,i.Q3)("",!0)])}s(116);var bc={name:"ActivitiesPage",components:{AddActivityModal:mi},data(){const e=(new Date).toISOString().substr(0,10),t=new Date;return t.setDate(t.getDate()-7),{activities:[],stats:{totalActivities:0,totalDuration:0,totalDistance:0,totalCalories:0,activeDays:0,distribution:{}},loading:!1,error:null,filters:{startDate:t.toISOString().substr(0,10),endDate:e,activityType:""},activityTypes:[{value:"",label:"All Types"},{value:"cardio",label:"Cardio"},{value:"strength",label:"Strength Training"},{value:"flexibility",label:"Flexibility"},{value:"sports",label:"Sports"},{value:"hiit",label:"HIIT"},{value:"yoga",label:"Yoga"},{value:"other",label:"Other"}],showAddModal:!1,modalLoading:!1,modalError:null}},created(){this.fetchActivities()},methods:{async fetchActivities(){this.loading=!0,this.error=null;try{let e;const{startDate:t,endDate:s,activityType:a}=this.filters;if(a){let i;e=await He.getActivitiesByType(a),i=e.data&&e.data.results?e.data.results:Array.isArray(e.data)?e.data:[],this.activities=i.filter(e=>{const a=e.performed_at.substr(0,10);return a>=t&&a<=s})}else e=await He.getActivitiesByDateRange(t,s),e.data&&e.data.results?this.activities=e.data.results:Array.isArray(e.data)?this.activities=e.data:this.activities=[];this.computeStats()}catch(e){console.error("Failed to fetch activities:",e),this.error="Failed to load activities. Please try again.",this.activities=[]}finally{this.loading=!1}},computeStats(){const e=Array.isArray(this.activities)?this.activities:[];try{this.stats={totalActivities:e.length,totalDuration:e.reduce((e,t)=>e+(t.duration_minutes||0),0),totalDistance:e.reduce((e,t)=>e+(parseFloat(t.distance_km)||0),0),totalCalories:e.reduce((e,t)=>e+(t.calories_burned||0),0),activeDays:He.calculateActiveDays(e),distribution:He.calculateActivityDistribution(e)}}catch(t){console.error("Error computing stats:",t),this.stats={totalActivities:0,totalDuration:0,totalDistance:0,totalCalories:0,activeDays:0,distribution:{}}}},clearFilters(){const e=(new Date).toISOString().substr(0,10),t=new Date;t.setMonth(t.getMonth()-1),this.filters={startDate:t.toISOString().substr(0,10),endDate:e,activityType:""},this.fetchActivities()},formatDate(e){const t=new Date(e);return t.toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})},formatTime(e){const t=new Date(e);return t.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit"})},formatDuration(e){if(e<60)return`${e}m`;const t=Math.floor(e/60),s=e%60;return s>0?`${t}h ${s}m`:`${t}h`},truncateNotes(e){return e?e.length>30?e.substring(0,30)+"...":e:""},getActivityIcon(e){const t={cardio:"ðŸƒ",strength:"ðŸ’ª",flexibility:"ðŸ§˜",sports:"âš½",hiit:"âš¡",yoga:"ðŸ§˜",other:"ðŸ‹ï¸"};return t[e]||"ðŸƒ"},getActivityTypeLabel(e){const t=this.activityTypes.find(t=>t.value===e);return t?t.label:e},async deleteActivity(e){if(confirm("Are you sure you want to delete this activity? This action cannot be undone."))try{await He.deleteActivity(e),await this.fetchActivities()}catch(t){console.error("Failed to delete activity:",t),alert("Failed to delete activity. Please try again.")}},editActivity(e){console.log("Edit functionality not yet implemented",e),alert("Edit functionality will be implemented in a future update.")},onCloseModal(){this.showAddModal=!1,this.modalError=null},async onSaveActivity(e){this.modalLoading=!0,this.modalError=null;try{await He.createActivity(e),this.showAddModal=!1,await this.fetchActivities()}catch(t){console.error("Failed to save activity:",t),this.modalError="Failed to save activity. Please try again."}finally{this.modalLoading=!1}}}};const Lc=(0,w.A)(bc,[["render",wc],["__scopeId","data-v-3c78ebb8"]]);var _c=Lc,Cc=s(5809);const Ac={class:"oauth-callback"},Sc={class:"callback-container"},Ec={key:0,class:"loading"},Mc={key:1,class:"error"},Fc={key:0,class:"debug-info"},Pc={class:"action-buttons"},xc={key:2,class:"success"};function Dc(e,t,s,a,o,r){const n=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("div",Ac,[(0,i.Lk)("div",Sc,[o.loading?((0,i.uX)(),(0,i.CE)("div",Ec,t[1]||(t[1]=[(0,i.Lk)("div",{class:"loading-spinner"},null,-1),(0,i.Lk)("p",null,"Processing login... Please wait.",-1)]))):o.error?((0,i.uX)(),(0,i.CE)("div",Mc,[t[4]||(t[4]=(0,i.Lk)("div",{class:"error-icon"},"!",-1)),t[5]||(t[5]=(0,i.Lk)("h2",null,"Authentication Failed",-1)),(0,i.Lk)("p",null,(0,l.v_)(o.error),1),o.debugInfo?((0,i.uX)(),(0,i.CE)("div",Fc,[(0,i.Lk)("details",null,[t[2]||(t[2]=(0,i.Lk)("summary",null,"Technical Details (For Developers)",-1)),(0,i.Lk)("pre",null,(0,l.v_)(o.debugInfo),1)])])):(0,i.Q3)("",!0),(0,i.Lk)("div",Pc,[(0,i.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>r.retryAuthentication&&r.retryAuthentication(...e)),class:"btn btn-primary"}," Try Again "),(0,i.bF)(n,{to:"/login",class:"btn btn-secondary"},{default:(0,i.k6)(()=>t[3]||(t[3]=[(0,i.eW)(" Return to Login ")])),_:1,__:[3]})])])):((0,i.uX)(),(0,i.CE)("div",xc,t[6]||(t[6]=[(0,i.Lk)("div",{class:"success-icon"},"âœ“",-1),(0,i.Lk)("h2",null,"Authentication Successful",-1),(0,i.Lk)("p",null,"Redirecting to dashboard...",-1)])))])])}const Ic={logAuthResponse(e){const t={hasCode:e.has("code"),codeLength:e.get("code")?.length||0,hasState:e.has("state"),stateValue:e.get("state"),hasError:e.has("error"),errorValue:e.get("error"),hasErrorDescription:e.has("error_description"),errorDescription:e.get("error_description"),allParams:Object.fromEntries(e.entries())};return t.allParams.code&&(t.allParams.code=`${t.allParams.code.substring(0,10)}... [truncated]`),t},validateConfig(){const e={hasGoogleClientId:!!{VUE_APP_API_URL:"https://wellness-app-tx2c.onrender.com/api",NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_GOOGLE_CLIENT_ID,redirectUriConfigured:!0,routeConfigured:!0,issues:[]};e.hasGoogleClientId||e.issues.push("Google Client ID not configured in environment variables");try{const t=s(6425);e.axiosConfigured=!!t.defaults.baseURL,e.axiosConfigured||e.issues.push("Axios base URL not configured")}catch(t){e.axiosConfigured=!1,e.issues.push("Error loading Axios configuration")}return console.log("OAuth Configuration Validation:",e),e},checkStorage(){const e={localStorage:{user:localStorage.getItem("user")?"Present":"Not present",oauth_state:localStorage.getItem("oauth_state")},sessionStorage:{auth_in_progress:sessionStorage.getItem("auth_in_progress")}};return e}};var Tc=Ic,Wc={name:"OAuthCallback",props:{provider:{type:String,default:null}},data(){return{loading:!0,error:null,debugInfo:null}},mounted(){Tc.checkStorage(),this.processCallback()},methods:{processCallback(){try{const e=new URLSearchParams(window.location.search),t=Tc.logAuthResponse(e);let s=this.provider||this.$route.params.provider;if(!s){const e=window.location.pathname.split("/");if(e.includes("callback")){const t=e.indexOf("callback")-1;t>=0&&e[t]&&(s=e[t])}}if(s=s||"google",this.debugInfo=JSON.stringify({url:window.location.href,search:window.location.search,pathname:window.location.pathname,debugData:t,provider:s,routeParams:this.$route.params,timestamp:(new Date).toISOString()},null,2),e.get("error")){const t=e.get("error_description")||e.get("error");return this.error=`Authentication error: ${t}`,void(this.loading=!1)}if(!e.get("code"))return this.error="No authorization code received. Please try again.",void(this.loading=!1);J.A.processCallback(e,s).then(e=>{this.$store.commit("auth/loginSuccess",e),this.loading=!1,setTimeout(()=>{this.$router.push("/dashboard")},1e3)}).catch(e=>{console.error("OAuth callback error:",e),this.error=e.message||"Failed to complete authentication. Please try again.",this.loading=!1})}catch(e){console.error("Error in processCallback:",e),this.error=`Authentication processing error: ${e.message}`,this.loading=!1}},retryAuthentication(){localStorage.removeItem("oauth_error"),sessionStorage.removeItem("auth_in_progress");const e=window.location.pathname.split("/");let t="google";if(e.includes("callback")){const s=e.indexOf("callback")-1;s>=0&&e[s]&&(t=e[s])}"github"===t?J.A.loginWithGitHub().catch(e=>{console.error("Failed to restart GitHub authentication:",e),this.error=`Failed to restart authentication: ${e.message}`}):J.A.loginWithGoogle().catch(e=>{console.error("Failed to restart Google authentication:",e),this.error=`Failed to restart authentication: ${e.message}`})}}};const Xc=(0,w.A)(Wc,[["render",Dc],["__scopeId","data-v-5899d3d1"]]);var Vc=Xc;const Bc={class:"oauth-success"},$c={class:"success-container"},Uc={key:0,class:"loading"},Hc={key:1,class:"error"},Rc={key:2,class:"success"};function Nc(e,t,s,a,o,r){const n=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("div",Bc,[(0,i.Lk)("div",$c,[o.loading?((0,i.uX)(),(0,i.CE)("div",Uc,t[0]||(t[0]=[(0,i.Lk)("div",{class:"loading-spinner"},null,-1),(0,i.Lk)("p",null,"Finalizing login... Please wait.",-1)]))):o.error?((0,i.uX)(),(0,i.CE)("div",Hc,[t[2]||(t[2]=(0,i.Lk)("div",{class:"error-icon"},"!",-1)),t[3]||(t[3]=(0,i.Lk)("h2",null,"Authentication Error",-1)),(0,i.Lk)("p",null,(0,l.v_)(o.error),1),(0,i.bF)(n,{to:"/login",class:"btn btn-primary"},{default:(0,i.k6)(()=>t[1]||(t[1]=[(0,i.eW)("Return to Login")])),_:1,__:[1]})])):((0,i.uX)(),(0,i.CE)("div",Rc,[t[5]||(t[5]=(0,i.Lk)("div",{class:"success-icon"},"âœ“",-1)),t[6]||(t[6]=(0,i.Lk)("h2",null,"Login Successful!",-1)),t[7]||(t[7]=(0,i.Lk)("p",null,"You have successfully logged in with your account.",-1)),(0,i.bF)(n,{to:"/dashboard",class:"btn btn-primary"},{default:(0,i.k6)(()=>t[4]||(t[4]=[(0,i.eW)("Go to Dashboard")])),_:1,__:[4]})]))])])}var Oc={name:"OAuthSuccess",data(){return{loading:!0,error:null}},created(){this.processTokens()},methods:{processTokens(){try{const e=new URLSearchParams(window.location.search),t=e.get("tokens");if(!t)throw new Error("No authentication tokens provided");const s=JSON.parse(decodeURIComponent(t));if(!s.access||!s.refresh)throw new Error("Invalid authentication tokens");const a={...s,username:"User",email_verified:!0};this.$store.commit("auth/loginSuccess",a),this.loading=!1,setTimeout(()=>{this.$router.push("/dashboard")},1500)}catch(e){console.error("Error processing OAuth tokens:",e),this.error=e.message||"Failed to process authentication.",this.loading=!1}}}};const qc=(0,w.A)(Oc,[["render",Nc],["__scopeId","data-v-0f00c168"]]);var Gc=qc,jc=s(1233);const Qc=[{path:"/",name:"Home",component:B},{path:"/login",name:"Login",component:ae,meta:{guest:!0}},{path:"/register",name:"Register",component:ke,meta:{guest:!0}},{path:"/dashboard",name:"Dashboard",component:no,meta:{requiresAuth:!0}},{path:"/profile",name:"Profile",component:Sr,meta:{requiresAuth:!0}},{path:"/settings",name:"Settings",component:Dn,meta:{requiresAuth:!0}},{path:"/verify-email/:token",name:"VerifyEmail",component:Nn,props:!0},{path:"/verify-prompt",name:"VerifyPrompt",component:gl,meta:{requiresAuth:!0}},{path:"/reset-password",name:"RequestPasswordReset",component:al,meta:{guest:!0}},{path:"/reset-password/:token",name:"ResetPassword",component:al,props:!0,meta:{guest:!0}},{path:"/auth/callback",name:"GenericOAuthCallback",component:Vc},{path:"/auth/callback/:provider",name:"ProviderOAuthCallback",component:Vc,props:!0},{path:"/auth/success",name:"OAuthSuccess",component:Gc},{path:"/auth/success",name:"OAuthSuccess",component:Gc},{path:"/design-system",name:"DesignSystem",component:()=>s.e(800).then(s.bind(s,3800))},{path:"/progress",name:"Progress",component:()=>s.e(911).then(s.bind(s,9911)),meta:{requiresAuth:!0}},{path:"/activities",name:"Activities",component:_c,meta:{requiresAuth:!0}},{path:"/meal-planning",name:"MealPlanningDashboard",component:()=>s.e(870).then(s.bind(s,870)),meta:{requiresAuth:!0}}],Jc=(0,y.aE)({history:(0,y.LA)("/"),routes:Qc});Jc.$store=Cc.A,Jc.beforeEach((e,t,s)=>{if(!Cc.A||!Cc.A.state||!Cc.A.state.auth)return void s();const a=jc.A.validateToken(),i=Cc.A.getters["auth/isLoggedIn"];if(i&&!a&&Cc.A.commit("auth/logout"),a&&!i){const e=localStorage.getItem("user")||sessionStorage.getItem("user");try{const t=JSON.parse(e);Cc.A.commit("auth/loginSuccess",t)}catch(r){console.error("Failed to restore user session:",r)}}const o=Cc.A.getters["auth/isLoggedIn"]&&a;if(e.matched.some(e=>e.meta.requiresAuth))if(o){if(!Cc.A.getters["auth/isEmailVerified"]&&"VerifyPrompt"!==e.name)return void s({path:"/verify-prompt"});s()}else s({path:"/login"});else e.matched.some(e=>e.meta.guest)&&o?s({path:"/dashboard"}):s()});var Yc=Jc;const Kc=(0,a.Ef)(A);Kc.use(Cc.A),Kc.use(Yc),Kc.mount("#app")},2022:function(e,t,s){var a=s(4373),i=s(1233);const o="https://wellness-app-tx2c.onrender.com/api".replace(/\/+$/,"")+"/";class r{async initiateOAuth(e){try{localStorage.removeItem("oauth_state"),sessionStorage.setItem("auth_in_progress","true"),sessionStorage.setItem("oauth_provider",e);const t=await a.A.get(`${o}oauth/${e}/`,{withCredentials:!0}),{authorization_url:s,state:i}=t.data||{};if(s)return i&&localStorage.setItem("oauth_state",i),window.location.href=s,!0;throw console.error("Invalid OAuth response:",t.data),new Error(`Failed to start ${e} authentication`)}catch(t){throw console.error(`OAuth login error for ${e}:`,t),sessionStorage.removeItem("auth_in_progress"),sessionStorage.removeItem("oauth_provider"),t}}async loginWithGoogle(){return this.initiateOAuth("google")}async loginWithGitHub(){return this.initiateOAuth("github")}async processCallback(e){try{const t=sessionStorage.getItem("oauth_provider")||"google",s=e.get("code");if(!s)throw new Error("Missing authorization code in callback");const r=e.get("state"),n=localStorage.getItem("oauth_state");if(n!==r)throw new Error("OAuth state mismatch â€“ possible CSRF attack");const l=await a.A.post(`${o}oauth/${t}/`,{code:s,state:r},{withCredentials:!0}),{access:c,refresh:d,user:u}=l.data||{};if(!c)throw console.error("Invalid backend response:",l.data),new Error("Invalid authentication response from server");return i.A.storeUser({access:c,refresh:d,user:u},!0),localStorage.removeItem("oauth_state"),sessionStorage.removeItem("auth_in_progress"),sessionStorage.removeItem("oauth_provider"),l.data}catch(t){throw console.error("OAuth callback processing error:",t),localStorage.removeItem("oauth_state"),sessionStorage.removeItem("auth_in_progress"),sessionStorage.removeItem("oauth_provider"),new Error(t.response?.data?.detail||t.message||"Authentication failed")}}}t.A=new r},4188:function(e,t,s){var a=s(4687);class i{getHealthProfile(){return a.A.get("health-profiles/my_profile/")}updateHealthProfile(e){return a.A.put("health-profiles/my_profile/",e)}createHealthProfile(e){return a.A.post("health-profiles/",e)}addWeightEntry(e){return a.A.post("weight-history/",{weight_kg:e})}getWeightHistory(){return a.A.get("weight-history/")}getWeightHistoryByDateRange(e){return a.A.get("weight-history/",{params:{start_date:e.start,end_date:e.end}})}getWeeklyWeightSummary(){return a.A.get("weight-history/weekly_summary/")}getMonthlyWeightSummary(){return a.A.get("weight-history/monthly_summary/")}deleteWeightEntry(e){return a.A.delete(`weight-history/${e}/`)}}t.A=new i},4687:function(e,t,s){var a=s(4373),i=s(1233),o=s(5809);const r="https://wellness-app-tx2c.onrender.com/api".replace(/\/+$/,"")+"/",n=a.A.create({baseURL:r,headers:{"Content-Type":"application/json"},timeout:3e4,withCredentials:!0});async function l(e){console.log("Service appears to be hibernating. Attempting to wake up..."),o.A?.commit&&o.A.commit("ui/setLoading",{isLoading:!0,message:"Service is starting up... This may take up to 60 seconds on the first request."});const t=4,s=[5e3,1e4,15e3,2e4];for(let c=0;c<t;c++)try{return console.log(`Wake-up attempt ${c+1}/${t}...`),o.A?.commit&&o.A.commit("ui/setLoading",{isLoading:!0,message:`Waking up service... Attempt ${c+1}/${t}`}),await new Promise(e=>setTimeout(e,s[c])),await a.A.get(r.replace("/api/","/"),{timeout:3e4,headers:{"Cache-Control":"no-cache",Pragma:"no-cache"}}),await new Promise(e=>setTimeout(e,3e3)),console.log("Service wake-up successful, retrying original request..."),n(e)}catch(i){if(console.log(`Wake-up attempt ${c+1} failed:`,i.message),c===t-1){console.log("All wake-up attempts failed, trying original request...");break}}try{return await n(e)}catch(l){throw o.A?.commit&&o.A.commit("ui/setError",{message:"Service is currently unavailable. Please try again in a few minutes.",details:"The backend service may be starting up or experiencing issues."}),l}finally{o.A?.commit&&o.A.commit("ui/setLoading",{isLoading:!1})}}function c(){if(o.A?.state?.auth?.user?.access)return o.A.state.auth.user.access;const e=i.A.getCurrentUser();return e?.access||null}n.interceptors.request.use(e=>{const t=c();return t&&(e.headers["Authorization"]="Bearer "+t),e},e=>(console.error("API request error:",e),Promise.reject(e))),n.interceptors.response.use(e=>e,async e=>{const t=e.config;if(503===e.response?.status&&!t._hibernation_retry)return t._hibernation_retry=!0,l(t);if(502===e.response?.status&&!t._gateway_retry)return t._gateway_retry=!0,console.log("Service gateway error, retrying in 5 seconds..."),await new Promise(e=>setTimeout(e,5e3)),n(t);if(401===e.response?.status&&!t._retry){t._retry=!0;try{const e=await i.A.refreshToken();if(e?.access)return t.headers["Authorization"]="Bearer "+e.access,o.A?.state?.auth?.status?.loggedIn&&await o.A.dispatch("auth/refreshToken",e.access),n(t)}catch(s){return i.A.logout(),o.A?.state?.auth?.status?.loggedIn&&o.A.commit("auth/logout"),setTimeout(()=>{window.location.href="/login"},100),Promise.reject(s)}}if(e.response){const t={status:e.response.status,statusText:e.response.statusText,url:e.config?.url,method:e.config?.method,data:e.response.data,headers:e.response.headers};503===e.response.status?console.error("Service hibernation detected:",t):502===e.response.status?console.error("Service gateway error:",t):console.error("API Error:",t)}else"ECONNABORTED"===e.code?console.error("API Request timeout:",e.message):console.error("API Network error:",e.message);return Promise.reject(e)}),t.A=n},5560:function(e,t,s){s.d(t,{A:function(){return h}});var a=s(6768),i=s(4232);const o={class:"checkbox-wrapper"},r=["id","checked","disabled"],n=["for"];function l(e,t,s,l,c,d){return(0,a.uX)(),(0,a.CE)("div",o,[(0,a.Lk)("input",{id:s.id,type:"checkbox",checked:s.modelValue,disabled:s.disabled,class:"checkbox-input",onChange:t[0]||(t[0]=t=>e.$emit("update:modelValue",t.target.checked))},null,40,r),(0,a.Lk)("label",{for:s.id,class:"checkbox-label"},[(0,a.RG)(e.$slots,"default",{},()=>[(0,a.eW)((0,i.v_)(s.label),1)],!0)],8,n)])}var c={name:"FormCheckbox",props:{modelValue:{type:Boolean,default:!1},id:{type:String,required:!0},label:{type:String,default:""},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"]},d=s(1241);const u=(0,d.A)(c,[["render",l],["__scopeId","data-v-587829e5"]]);var h=u},5809:function(e,t,s){s.d(t,{A:function(){return l}});var a=s(782),i=s(1233),o=s(2022);const r=(()=>i.A.validateToken()?{status:{loggedIn:!0},user:i.A.getCurrentUser()}:{status:{loggedIn:!1},user:null})();var n={namespaced:!0,state:r,getters:{isLoggedIn:e=>e.status.loggedIn,currentUser:e=>e.user,isEmailVerified:e=>e.user?.email_verified||!1,hasTwoFactorEnabled:e=>e.user?.two_factor_enabled||!1},actions:{login({commit:e},{username:t,password:s,remember:a}){return i.A.login(t,s,a).then(t=>(t.two_factor_enabled||e("loginSuccess",t),t)).catch(t=>(e("loginFailure"),Promise.reject(t)))},verifyTwoFactor({commit:e},{code:t,tempAuthData:s}){return i.A.verifyTwoFactorLogin(t,s).then(t=>(e("loginSuccess",t),t)).catch(e=>Promise.reject(e))},loginWithGoogle(){return o.A.loginWithGoogle()},loginWithGitHub(){return o.A.loginWithGitHub()},logout({commit:e}){i.A.logout(),e("logout")},register({commit:e},{username:t,email:s,password:a,password2:o}){return i.A.register(t,s,a,o).then(t=>(e("registerSuccess"),t.data)).catch(t=>(e("registerFailure"),Promise.reject(t)))},refreshToken({commit:e},t){e("refreshToken",t)},checkAuth({commit:e,state:t}){if(!t.status.loggedIn){if(i.A.validateToken()){const t=i.A.getCurrentUser();if(t)return e("loginSuccess",t),Promise.resolve(t)}return Promise.reject(new Error("Not authenticated"))}return i.A.validateToken()?Promise.resolve(t.user):i.A.refreshToken().then(s=>{if(s?.access){const a={...t.user,access:s.access};return e("loginSuccess",a),a}return e("logout"),Promise.reject(new Error("Failed to refresh token"))}).catch(t=>(e("logout"),Promise.reject(t)))}},mutations:{loginSuccess(e,t){e.status.loggedIn=!0,e.user=t},loginFailure(e){e.status.loggedIn=!1,e.user=null},logout(e){e.status.loggedIn=!1,e.user=null},registerSuccess(e){e.status.loggedIn=!1},registerFailure(e){e.status.loggedIn=!1},refreshToken(e,t){e.user&&(e.user={...e.user,access:t})},updateUser(e,t){if(e.user)if(e.user={...e.user,...t},localStorage.getItem("user")){const e=JSON.parse(localStorage.getItem("user"));localStorage.setItem("user",JSON.stringify({...e,...t}))}else if(sessionStorage.getItem("user")){const e=JSON.parse(sessionStorage.getItem("user"));sessionStorage.setItem("user",JSON.stringify({...e,...t}))}}}},l=(0,a.y$)({state:{},getters:{},mutations:{},actions:{},modules:{auth:n}})},5994:function(e,t,s){s.d(t,{A:function(){return h}});var a=s(6768),i=s(4232);const o=["type","disabled"],r={key:0},n={key:1};function l(e,t,s,l,c,d){return(0,a.uX)(),(0,a.CE)("button",{class:(0,i.C4)(d.buttonClasses),type:s.type,disabled:s.disabled||s.loading,onClick:t[0]||(t[0]=t=>e.$emit("click",t))},[s.loading&&s.loadingText?((0,a.uX)(),(0,a.CE)("span",r,(0,i.v_)(s.loadingText),1)):((0,a.uX)(),(0,a.CE)("span",n,[(0,a.RG)(e.$slots,"default",{},void 0,!0)]))],10,o)}var c={name:"BaseButton",props:{variant:{type:String,default:"primary",validator:e=>["primary","secondary","text","danger"].includes(e)},type:{type:String,default:"button"},block:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},loadingText:{type:String,default:""}},computed:{buttonClasses(){return{[`btn-${this.variant}`]:!0,"btn-block":this.block,"btn-loading":this.loading}}}},d=s(1241);const u=(0,d.A)(c,[["render",l],["__scopeId","data-v-ad971648"]]);var h=u},6988:function(e,t,s){s.d(t,{A:function(){return v}});var a=s(6768),i=s(4232);const o={class:"form-group"},r=["for"],n={class:"input-wrapper"},l=["id","type","value","placeholder","disabled","required","maxlength","pattern","inputmode"],c={key:1,class:"error-text"},d={key:2,class:"help-text"};function u(e,t,s,u,h,g){return(0,a.uX)(),(0,a.CE)("div",o,[s.label?((0,a.uX)(),(0,a.CE)("label",{key:0,for:s.id,class:"form-label"},(0,i.v_)(s.label),9,r)):(0,a.Q3)("",!0),(0,a.Lk)("div",n,[(0,a.Lk)("input",{id:s.id,type:s.type,value:s.modelValue,placeholder:s.placeholder,disabled:s.disabled,required:s.required,maxlength:s.maxlength,pattern:s.pattern,inputmode:s.inputmode,class:(0,i.C4)(["form-control",{error:s.error}]),onInput:t[0]||(t[0]=t=>e.$emit("update:modelValue",t.target.value))},null,42,l)]),s.error?((0,a.uX)(),(0,a.CE)("small",c,(0,i.v_)(s.error),1)):s.helpText?((0,a.uX)(),(0,a.CE)("small",d,(0,i.v_)(s.helpText),1)):(0,a.Q3)("",!0)])}var h={name:"FormInput",props:{modelValue:{type:[String,Number],default:""},id:{type:String,required:!0},label:{type:String,default:""},type:{type:String,default:"text"},placeholder:{type:String,default:""},helpText:{type:String,default:""},error:{type:String,default:""},disabled:{type:Boolean,default:!1},required:{type:Boolean,default:!1},maxlength:{type:String,default:null},pattern:{type:String,default:null},inputmode:{type:String,default:null}},emits:["update:modelValue"]},g=s(1241);const p=(0,g.A)(h,[["render",u],["__scopeId","data-v-920abb0e"]]);var v=p},7667:function(e,t,s){s.d(t,{A:function(){return g}});var a=s(6768),i=s(4232);const o=["disabled"],r={key:0,class:"loading-spinner"},n={key:1,class:"social-icon"},l={class:"social-text"};function c(e,t,s,c,d,u){return(0,a.uX)(),(0,a.CE)("button",{class:(0,i.C4)(["social-login-button",`social-login-button-${s.provider}`]),disabled:s.disabled||s.loading,onClick:t[0]||(t[0]=t=>e.$emit("click"))},[s.loading?((0,a.uX)(),(0,a.CE)("div",r)):((0,a.uX)(),(0,a.CE)("div",n,[(0,a.RG)(e.$slots,"icon",{},void 0,!0)])),(0,a.Lk)("span",l,[(0,a.RG)(e.$slots,"default",{},void 0,!0)])],10,o)}var d={name:"SocialLoginButton",props:{provider:{type:String,required:!0,validator:e=>["google","github","facebook","apple"].includes(e)},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1}},emits:["click"]},u=s(1241);const h=(0,u.A)(d,[["render",c],["__scopeId","data-v-c3d89334"]]);var g=h},8852:function(e,t,s){s.d(t,{A:function(){return g}});var a=s(6768),i=s(4232);const o={key:0,class:"alert-icon"},r={key:0},n={key:1},l={class:"alert-content"};function c(e,t,s,c,d,u){return s.message?((0,a.uX)(),(0,a.CE)("div",{key:0,class:(0,i.C4)(u.alertClasses)},["success"===s.type||"error"===s.type?((0,a.uX)(),(0,a.CE)("div",o,["success"===s.type?((0,a.uX)(),(0,a.CE)("span",r,"âœ“")):((0,a.uX)(),(0,a.CE)("span",n,"!"))])):(0,a.Q3)("",!0),(0,a.Lk)("div",l,(0,i.v_)(s.message),1),s.dismissible?((0,a.uX)(),(0,a.CE)("button",{key:1,class:"alert-close",onClick:t[0]||(t[0]=t=>e.$emit("dismiss")),"aria-label":"Close"}," Ã— ")):(0,a.Q3)("",!0)],2)):(0,a.Q3)("",!0)}var d={name:"Alert",props:{message:{type:String,default:""},type:{type:String,default:"info",validator:e=>["success","error","warning","info"].includes(e)},dismissible:{type:Boolean,default:!1}},emits:["dismiss"],computed:{alertClasses(){return["alert",`alert-${this.type}`,{"alert-dismissible":this.dismissible}]}}},u=s(1241);const h=(0,u.A)(d,[["render",c],["__scopeId","data-v-1e123d6c"]]);var g=h}},t={};function s(a){var i=t[a];if(void 0!==i)return i.exports;var o=t[a]={exports:{}};return e[a].call(o.exports,o,o.exports,s),o.exports}s.m=e,function(){var e=[];s.O=function(t,a,i,o){if(!a){var r=1/0;for(d=0;d<e.length;d++){a=e[d][0],i=e[d][1],o=e[d][2];for(var n=!0,l=0;l<a.length;l++)(!1&o||r>=o)&&Object.keys(s.O).every(function(e){return s.O[e](a[l])})?a.splice(l--,1):(n=!1,o<r&&(r=o));if(n){e.splice(d--,1);var c=i();void 0!==c&&(t=c)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[a,i,o]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){s.f={},s.e=function(e){return Promise.all(Object.keys(s.f).reduce(function(t,a){return s.f[a](e,t),t},[]))}}(),function(){s.u=function(e){return"static/js/"+e+"."+{800:"cc2ce603",870:"6de9212f",911:"d22716d3"}[e]+".js"}}(),function(){s.miniCssF=function(e){return"static/css/"+e+"."+{800:"8dc8b326",870:"d4e826e9",911:"ceb77a37"}[e]+".css"}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="frontend:";s.l=function(a,i,o,r){if(e[a])e[a].push(i);else{var n,l;if(void 0!==o)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==a||u.getAttribute("data-webpack")==t+o){n=u;break}}n||(l=!0,n=document.createElement("script"),n.charset="utf-8",n.timeout=120,s.nc&&n.setAttribute("nonce",s.nc),n.setAttribute("data-webpack",t+o),n.src=a),e[a]=[i];var h=function(t,s){n.onerror=n.onload=null,clearTimeout(g);var i=e[a];if(delete e[a],n.parentNode&&n.parentNode.removeChild(n),i&&i.forEach(function(e){return e(s)}),t)return t(s)},g=setTimeout(h.bind(null,void 0,{type:"timeout",target:n}),12e4);n.onerror=h.bind(null,n.onerror),n.onload=h.bind(null,n.onload),l&&document.head.appendChild(n)}}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){s.p="/"}(),function(){if("undefined"!==typeof document){var e=function(e,t,a,i,o){var r=document.createElement("link");r.rel="stylesheet",r.type="text/css",s.nc&&(r.nonce=s.nc);var n=function(s){if(r.onerror=r.onload=null,"load"===s.type)i();else{var a=s&&s.type,n=s&&s.target&&s.target.href||t,l=new Error("Loading CSS chunk "+e+" failed.\n("+a+": "+n+")");l.name="ChunkLoadError",l.code="CSS_CHUNK_LOAD_FAILED",l.type=a,l.request=n,r.parentNode&&r.parentNode.removeChild(r),o(l)}};return r.onerror=r.onload=n,r.href=t,a?a.parentNode.insertBefore(r,a.nextSibling):document.head.appendChild(r),r},t=function(e,t){for(var s=document.getElementsByTagName("link"),a=0;a<s.length;a++){var i=s[a],o=i.getAttribute("data-href")||i.getAttribute("href");if("stylesheet"===i.rel&&(o===e||o===t))return i}var r=document.getElementsByTagName("style");for(a=0;a<r.length;a++){i=r[a],o=i.getAttribute("data-href");if(o===e||o===t)return i}},a=function(a){return new Promise(function(i,o){var r=s.miniCssF(a),n=s.p+r;if(t(r,n))return i();e(a,n,null,i,o)})},i={524:0};s.f.miniCss=function(e,t){var s={800:1,870:1,911:1};i[e]?t.push(i[e]):0!==i[e]&&s[e]&&t.push(i[e]=a(e).then(function(){i[e]=0},function(t){throw delete i[e],t}))}}}(),function(){var e={524:0};s.f.j=function(t,a){var i=s.o(e,t)?e[t]:void 0;if(0!==i)if(i)a.push(i[2]);else{var o=new Promise(function(s,a){i=e[t]=[s,a]});a.push(i[2]=o);var r=s.p+s.u(t),n=new Error,l=function(a){if(s.o(e,t)&&(i=e[t],0!==i&&(e[t]=void 0),i)){var o=a&&("load"===a.type?"missing":a.type),r=a&&a.target&&a.target.src;n.message="Loading chunk "+t+" failed.\n("+o+": "+r+")",n.name="ChunkLoadError",n.type=o,n.request=r,i[1](n)}};s.l(r,l,"chunk-"+t,t)}},s.O.j=function(t){return 0===e[t]};var t=function(t,a){var i,o,r=a[0],n=a[1],l=a[2],c=0;if(r.some(function(t){return 0!==e[t]})){for(i in n)s.o(n,i)&&(s.m[i]=n[i]);if(l)var d=l(s)}for(t&&t(a);c<r.length;c++)o=r[c],s.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return s.O(d)},a=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=s.O(void 0,[504],function(){return s(1703)});a=s.O(a)})();
//# sourceMappingURL=app.44b5e35c.js.map