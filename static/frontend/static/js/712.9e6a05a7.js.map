{"version":3,"file":"static/js/712.9e6a05a7.js","mappings":"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","sources":["webpack://frontend/./src/views/MealPlanningDashboard.vue","webpack://frontend/./src/components/meal-planning/RecipeBrowser.vue","webpack://frontend/./src/components/meal-planning/RecipeBrowser.vue?d5bd","webpack://frontend/./src/components/meal-planning/MealPlanManager.vue","webpack://frontend/./src/components/meal-planning/MealPlanDetailModal.vue","webpack://frontend/./src/components/meal-planning/RecipeDetailModal.vue","webpack://frontend/./src/components/meal-planning/ShoppingListModal.vue","webpack://frontend/./src/components/meal-planning/ShoppingListModal.vue?1777","webpack://frontend/./src/utils/fetchUtils.js","webpack://frontend/./src/components/meal-planning/RecipeDetailModal.vue?8566","webpack://frontend/./src/components/meal-planning/MealPlanDetailModal.vue?89cd","webpack://frontend/./src/components/meal-planning/NutritionalAnalysisModal.vue","webpack://frontend/./src/components/meal-planning/NutritionalAnalysisModal.vue?dff1","webpack://frontend/./src/components/meal-planning/AlternativesModal.vue","webpack://frontend/./src/components/meal-planning/AlternativesModal.vue?9204","webpack://frontend/./src/components/meal-planning/MealPlanManager.vue?4c5c","webpack://frontend/./src/components/meal-planning/ComingSoonCard.vue","webpack://frontend/./src/components/meal-planning/ComingSoonCard.vue?29f3","webpack://frontend/./src/views/MealPlanningDashboard.vue?a0c3"],"sourcesContent":["<!-- src/views/MealPlanningDashboard.vue -->\n<template>\n  <div class=\"meal-planning-dashboard\">\n    <div class=\"dashboard-header\">\n      <h1>Meal Planning Dashboard</h1>\n      <p>AI-powered nutrition and meal planning</p>\n    </div>\n\n    <div class=\"dashboard-tabs\">\n      <nav class=\"tabs-nav\">\n        <button\n          v-for=\"tab in tabs\"\n          :key=\"tab.id\"\n          @click=\"activeTab = tab.id\"\n          class=\"tab-button\"\n          :class=\"{ 'active': activeTab === tab.id }\"\n        >\n          <i :class=\"tab.icon\"></i>\n          {{ tab.name }}\n        </button>\n      </nav>\n\n      <div class=\"tab-content\">\n        <div v-if=\"activeTab === 'recipes'\" class=\"tab-panel\">\n          <recipe-browser\n            :recipes=\"recipes\"\n            :loading=\"recipesLoading\"\n            @recipe-selected=\"selectRecipe\"\n            @refresh-recipes=\"loadRecipes\"\n            @recipe-saved=\"onRecipeSaved\"\n            @recipe-removed=\"onRecipeRemoved\"\n          />\n        </div>\n\n        <div v-if=\"activeTab === 'meal-plans'\" class=\"tab-panel\">\n          <meal-plan-manager\n            :loading=\"mealPlansLoading\"\n            :nutrition-profile=\"nutritionProfile\"\n            @meal-plan-generated=\"onMealPlanGenerated\"\n          />\n        </div>\n\n      <div v-if=\"activeTab === 'analytics'\" class=\"tab-panel\">\n        <coming-soon-card\n          title=\"Nutrition Analytics\"\n          description=\"Detailed nutrition analytics coming soon!\"\n          icon=\"fas fa-chart-line\"\n        />\n      </div>\n    </div>\n  </div>\n  <recipe-detail-modal\n    v-if=\"showRecipeModal\"\n    :recipe=\"selectedRecipe\"\n    @close=\"closeRecipeModal\"\n    @recipe-saved=\"onRecipeSaved\"\n  />\n</div>\n</template>\n\n<script>\nimport RecipeBrowser from '../components/meal-planning/RecipeBrowser.vue'\nimport MealPlanManager from '../components/meal-planning/MealPlanManager.vue'\nimport ComingSoonCard from '../components/meal-planning/ComingSoonCard.vue'\nimport RecipeDetailModal from '../components/meal-planning/RecipeDetailModal.vue'\nimport { mealPlanningApi } from '@/services/mealPlanningApi'\n\nexport default {\n  name: 'MealPlanningDashboard',\n  components: {\n    RecipeBrowser,\n    MealPlanManager,\n    ComingSoonCard,\n    RecipeDetailModal\n  },\n  data() {\n    return {\n      activeTab: 'recipes',\n      tabs: [\n        { id: 'recipes', name: 'My Recipes', icon: 'fas fa-utensils' },\n        { id: 'meal-plans', name: 'Meal Plans', icon: 'fas fa-calendar-alt' },\n        { id: 'analytics', name: 'Analytics', icon: 'fas fa-chart-line' }\n      ],\n      recipes: [],\n      nutritionProfile: null,\n      recipesLoading: false,\n      mealPlansLoading: false,\n      showRecipeModal: false,\n      selectedRecipe: null\n    }\n  },\n  computed: {\n    currentUser() {\n      return this.$store.getters['auth/currentUser'];\n    }\n  },\n  async mounted() {\n    if (!this.currentUser) {\n      this.$router.push('/login');\n      return;\n    }\n    await this.loadInitialData()\n  },\n  methods: {\n    async loadInitialData() {\n      await Promise.all([\n        this.loadRecipes(),\n        this.loadNutritionProfile()\n      ])\n    },\n\n    async loadRecipes() {\n      this.recipesLoading = true\n      try {\n        // Add cache busting parameter to ensure fresh data\n        const params = {\n          _t: Date.now(),\n          page_size: 100  // Load more recipes by default\n        }\n        if (process.env.NODE_ENV === 'development') {\n          console.log(' Loading my recipes from API...')\n        }\n        \n        const response = await mealPlanningApi.getMyRecipes(params)\n        \n        // Handle pagination response\n        if (response?.data?.results && Array.isArray(response.data.results)) {\n          this.recipes = response.data.results\n          if (process.env.NODE_ENV === 'development') {\n            console.log(` Loaded ${this.recipes.length} my recipes (${response.data.count} total available)`)\n          }\n        } else if (Array.isArray(response?.data)) {\n          this.recipes = response.data\n          if (process.env.NODE_ENV === 'development') {\n            console.log(` Loaded ${this.recipes.length} my recipes`)\n          }\n        } else {\n          console.warn(' Unexpected API response structure:', response?.data)\n          this.recipes = []\n        }\n      } catch (error) {\n        console.error(' Failed to load my recipes:', error.message)\n        if (process.env.NODE_ENV === 'development') {\n          console.error('Error details:', {\n            status: error.response?.status,\n            data: error.response?.data\n          })\n        }\n        \n        this.recipes = []\n        // Show user-friendly error\n        this.$toast?.error?.('Failed to load your recipes') ||\n        alert('Failed to load your recipes')\n      } finally {\n        this.recipesLoading = false\n      }\n    },\n\n    async loadNutritionProfile() {\n      try {\n        const response = await mealPlanningApi.getNutritionProfile()\n        this.nutritionProfile = response.data\n      } catch (error) {\n        console.error('Failed to load nutrition profile:', error)\n        // Create default profile if none exists\n        this.nutritionProfile = {\n          calorie_target: 2000,\n          protein_target: 100,\n          carb_target: 250,\n          fat_target: 67,\n          dietary_preferences: [],\n          allergies_intolerances: [],\n          cuisine_preferences: [],\n          disliked_ingredients: [],\n          meals_per_day: 3,\n          timezone: 'Europe/Tallinn'\n        }\n      }\n    },\n\n\n\n    selectRecipe(recipe) {\n      this.selectedRecipe = recipe\n      this.showRecipeModal = true\n    },\n\n    closeRecipeModal() {\n      this.showRecipeModal = false\n      this.selectedRecipe = null\n    },\n\n    async onRecipeRemoved(removedRecipe) {\n      console.log('Recipe removed event received:', removedRecipe)\n      \n      // Remove from local state\n      this.recipes = this.recipes.filter(r => r.id !== removedRecipe.id)\n      \n      // Refresh the recipes list to ensure consistency\n      await this.loadRecipes()\n    },\n\n    async onRecipeSaved(savedRecipe) {\n      console.log('Recipe saved event received:', savedRecipe)\n      \n      // Refresh the recipes list to show the newly saved recipe\n      await this.loadRecipes()\n      \n      // If we're on the recipes tab, show a brief highlight or message\n      if (this.activeTab === 'recipes') {\n        this.$nextTick(() => {\n          console.log('My recipes refreshed after saving new recipe')\n        })\n      }\n    },\n\n    async onMealPlanGenerated(mealPlan) {\n      console.log('New meal plan generated:', mealPlan)\n      \n      // Show success message\n      this.$toast?.success?.('Meal plan generated successfully!') ||\n      alert('Meal plan generated successfully!')\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import '@/assets/styles/_variables.scss';\n@import '@/assets/styles/_utilities.scss';\n\n.meal-planning-dashboard {\n  max-width: 1200px;\n  margin: 0 auto;\n  padding: $spacing-6;\n}\n\n.dashboard-header {\n  text-align: center;\n  margin-bottom: $spacing-8;\n\n  h1 {\n    margin: 0 0 $spacing-2 0;\n    color: $primary-dark;\n    font-size: 2rem;\n    font-weight: 600;\n  }\n\n  p {\n    margin: 0;\n    color: $gray;\n    font-size: 1.1rem;\n  }\n}\n\n.dashboard-tabs {\n  background: $white;\n  border-radius: $border-radius-lg;\n  box-shadow: $shadow;\n  overflow: hidden;\n}\n\n.tabs-nav {\n  display: flex;\n  background: $gray-light;\n  border-bottom: 1px solid $gray-lighter;\n}\n\n.tab-button {\n  flex: 1;\n  padding: $spacing-4 $spacing-6;\n  border: none;\n  background: transparent;\n  color: $gray;\n  font-size: 1rem;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: $spacing-2;\n\n  i {\n    font-size: 0.9rem;\n  }\n\n  &:hover {\n    background: rgba($primary, 0.1);\n    color: $primary;\n  }\n\n  &.active {\n    background: $primary;\n    color: $white;\n    box-shadow: inset 0 -3px 0 rgba($white, 0.3);\n  }\n}\n\n.tab-content {\n  min-height: 600px;\n}\n\n.tab-panel {\n  padding: $spacing-6;\n  animation: fadeIn 0.3s ease;\n}\n\n@keyframes fadeIn {\n  from {\n    opacity: 0;\n    transform: translateY(10px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n// Responsive design\n@media (max-width: 768px) {\n  .meal-planning-dashboard {\n    padding: $spacing-4;\n  }\n\n  .tabs-nav {\n    flex-direction: column;\n  }\n\n  .tab-button {\n    justify-content: flex-start;\n    padding: $spacing-3 $spacing-4;\n  }\n\n  .tab-panel {\n    padding: $spacing-4;\n  }\n\n  .dashboard-header {\n    h1 {\n      font-size: 1.5rem;\n    }\n  }\n}\n</style>","<!-- src/components/meal-planning/RecipeBrowser.vue -->\n<template>\n  <div class=\"recipe-browser\">\n    <!-- Search and Filters -->\n    <div class=\"search-section\">\n      <div class=\"search-header\">\n        <h3>My Recipe Collection</h3>\n        <button @click=\"$emit('refresh-recipes')\" class=\"refresh-btn\" :disabled=\"loading\">\n          <i :class=\"loading ? 'fas fa-spinner fa-spin' : 'fas fa-sync-alt'\"></i>\n          Refresh\n        </button>\n      </div>\n      \n      <div class=\"search-bar\">\n        <i class=\"fas fa-search search-icon\"></i>\n        <input\n          v-model=\"searchQuery\"\n          type=\"text\"\n          placeholder=\"Search recipes...\"\n          class=\"search-input\"\n          @input=\"debouncedSearch\"\n        />\n      </div>\n\n      <div class=\"filters\">\n        <select v-model=\"selectedCuisine\" @change=\"applyFilters\" class=\"filter-select\">\n          <option value=\"\">All Cuisines</option>\n          <option v-for=\"cuisine in cuisines\" :key=\"cuisine\" :value=\"cuisine\">\n            {{ formatCuisine(cuisine) }}\n          </option>\n        </select>\n\n        <select v-model=\"selectedMealType\" @change=\"applyFilters\" class=\"filter-select\">\n          <option value=\"\">All Meal Types</option>\n          <option value=\"breakfast\">Breakfast</option>\n          <option value=\"lunch\">Lunch</option>\n          <option value=\"dinner\">Dinner</option>\n          <option value=\"snack\">Snack</option>\n        </select>\n      </div>\n    </div>\n\n    <!-- Recipe Grid -->\n    <div v-if=\"loading\" class=\"loading-state\">\n      <div class=\"loading-spinner\"></div>\n      <p>Loading delicious recipes...</p>\n    </div>\n\n    <div v-else-if=\"filteredRecipes.length === 0\" class=\"empty-state\">\n      <i class=\"fas fa-utensils\"></i>\n      <h3>No recipes found</h3>\n      <p v-if=\"recipes.length === 0\">\n        You haven't saved any recipes yet! Save recipes from your meal plans to build your personal collection.\n        <br><br>\n        <strong> Tip:</strong> Go to the \"Meal Plans\" tab to create meal plans, then save your favorite recipes.\n      </p>\n      <p v-else>Try adjusting your search or filters</p>\n    </div>\n\n    <div v-else class=\"recipe-grid\">\n      <div\n        v-for=\"recipe in filteredRecipes\"\n        :key=\"recipe.id\"\n        class=\"recipe-card\"\n      >\n        <div class=\"recipe-image\" @click=\"$emit('recipe-selected', recipe)\">\n          <img\n            :src=\"recipe.image_url || 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZjBmMGYwIi8+CiAgPHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIxOCIgZmlsbD0iIzk5OTk5OSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkZvb2QgUmVjaXBlPC90ZXh0Pgo8L3N2Zz4K'\"\n            :alt=\"recipe.title\"\n            @error=\"handleImageError\"\n          />\n          <div class=\"recipe-badges\">\n            <span v-for=\"tag in (recipe.dietary_tags || []).slice(0, 2)\" :key=\"tag\" class=\"badge\">\n              {{ formatTag(tag) }}\n            </span>\n          </div>\n          <button \n            class=\"save-btn\" \n            @click.stop=\"toggleSaveRecipe(recipe)\"\n            :title=\"recipe.is_saved_by_user ? 'Remove from my recipes' : 'Save to my recipes'\"\n          >\n            <i :class=\"recipe.is_saved_by_user ? 'fas fa-heart' : 'far fa-heart'\"></i>\n          </button>\n        </div>\n\n        <div class=\"recipe-content\" @click=\"$emit('recipe-selected', recipe)\">\n          <h3 class=\"recipe-title\">{{ recipe.title }}</h3>\n          <p class=\"recipe-summary\" v-html=\"truncateSummary(recipe.summary)\"></p>\n\n          <div class=\"recipe-stats\">\n            <div class=\"stat\">\n              <i class=\"fas fa-clock\"></i>\n              <span>{{ recipe.total_time_minutes || 'N/A' }}{{ recipe.total_time_minutes ? 'min' : '' }}</span>\n            </div>\n            <div class=\"stat\">\n              <i class=\"fas fa-fire\"></i>\n              <span>{{ recipe.calories_per_serving ? Math.round(recipe.calories_per_serving) : 'N/A' }}{{ recipe.calories_per_serving ? ' cal' : '' }}</span>\n            </div>\n            <div class=\"stat\">\n              <i class=\"fas fa-users\"></i>\n              <span>{{ recipe.servings || 'N/A' }}{{ recipe.servings ? ' servings' : '' }}</span>\n            </div>\n          </div>\n\n          <div class=\"nutrition-preview\">\n            <div class=\"macro\">\n              <span class=\"macro-label\">Protein</span>\n              <span class=\"macro-value\">{{ recipe.protein_per_serving ? Math.round(recipe.protein_per_serving) : 'N/A' }}{{ recipe.protein_per_serving ? 'g' : '' }}</span>\n            </div>\n            <div class=\"macro\">\n              <span class=\"macro-label\">Carbs</span>\n              <span class=\"macro-value\">{{ recipe.carbs_per_serving ? Math.round(recipe.carbs_per_serving) : 'N/A' }}{{ recipe.carbs_per_serving ? 'g' : '' }}</span>\n            </div>\n            <div class=\"macro\">\n              <span class=\"macro-label\">Fat</span>\n              <span class=\"macro-value\">{{ recipe.fat_per_serving ? Math.round(recipe.fat_per_serving) : 'N/A' }}{{ recipe.fat_per_serving ? 'g' : '' }}</span>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n// Using a simple debounce function instead of lodash\nfunction debounce(func, wait) {\n  let timeout;\n  return function executedFunction(...args) {\n    const later = () => {\n      clearTimeout(timeout);\n      func(...args);\n    };\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n  };\n}\n\nexport default {\n  name: 'RecipeBrowser',\n  props: {\n    recipes: {\n      type: Array,\n      default: () => []\n    },\n    loading: {\n      type: Boolean,\n      default: false\n    }\n  },\n  emits: ['recipe-selected', 'refresh-recipes', 'recipe-saved', 'recipe-removed'],\n  data() {\n    return {\n      searchQuery: '',\n      selectedCuisine: '',\n      selectedMealType: '',\n      filteredRecipes: []\n    }\n  },\n  computed: {\n    cuisines() {\n      return [...new Set(this.recipes.map(r => r.cuisine).filter(Boolean))]\n    }\n  },\n  watch: {\n    recipes: {\n      immediate: true,\n      handler(newRecipes) {\n        if (process.env.NODE_ENV === 'development') {\n          console.log(' RecipeBrowser: Recipes updated')\n          console.log(` Count: ${newRecipes?.length || 0} recipes`)\n          if (newRecipes?.length > 0) {\n            console.log(` Sample: \"${newRecipes[0]?.title}\" (${newRecipes[0]?.id})`)\n          }\n        }\n        this.filteredRecipes = this.recipes\n      }\n    }\n  },\n  created() {\n    this.debouncedSearch = debounce(this.applyFilters, 300)\n  },\n  methods: {\n    applyFilters() {\n      let filtered = this.recipes\n\n      // Search filter\n      if (this.searchQuery) {\n        const query = this.searchQuery.toLowerCase()\n        filtered = filtered.filter(recipe =>\n          (recipe.title && recipe.title.toLowerCase().includes(query)) ||\n          (recipe.summary && recipe.summary.toLowerCase().includes(query))\n        )\n      }\n\n      // Cuisine filter\n      if (this.selectedCuisine) {\n        filtered = filtered.filter(recipe => recipe.cuisine === this.selectedCuisine)\n      }\n\n      // Meal type filter\n      if (this.selectedMealType) {\n        filtered = filtered.filter(recipe => recipe.meal_type === this.selectedMealType)\n      }\n\n      if (process.env.NODE_ENV === 'development' && \n          (this.searchQuery || this.selectedCuisine || this.selectedMealType)) {\n        console.log(` Filters applied: ${this.recipes?.length || 0}  ${filtered.length} recipes`)\n      }\n\n      this.filteredRecipes = filtered\n    },\n\n    formatCuisine(cuisine) {\n      return cuisine.charAt(0).toUpperCase() + cuisine.slice(1)\n    },\n\n    formatTag(tag) {\n      return tag.replace(/_/g, ' ').replace(/\\b\\w/g, l => l.toUpperCase())\n    },\n\n    truncateSummary(summary) {\n      if (!summary) return ''\n      const clean = summary.replace(/<[^>]*>/g, '')\n      return clean.length > 120 ? clean.substring(0, 120) + '...' : clean\n    },\n\n    handleImageError(event) {\n      event.target.src = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZjBmMGYwIi8+CiAgPHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIxOCIgZmlsbD0iIzk5OTk5OSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkZvb2QgUmVjaXBlPC90ZXh0Pgo8L3N2Zz4K'\n    },\n\n    async toggleSaveRecipe(recipe) {\n      try {\n        // Import the API service\n        const { mealPlanningApi } = await import('@/services/mealPlanningApi')\n        \n        let response\n        \n        if (recipe.is_saved_by_user) {\n          // Remove from saved recipes\n          if (!recipe.id) {\n            throw new Error('Cannot remove recipe: No recipe ID found')\n          }\n          \n          response = await mealPlanningApi.removeRecipeFromMyCollection(recipe.id)\n          \n          // Update local state\n          recipe.is_saved_by_user = false\n          \n          this.$emit('recipe-removed', recipe)\n          \n          // Show success message\n          const message = response.data?.message || 'Recipe removed from your collection!'\n          this.$toast?.success?.(message) || alert(message)\n        } else {\n          // Save recipe - handle both spoonacular and existing recipes\n          if (recipe.spoonacular_id && !recipe.created_by) {\n            // Save from meal plan data\n            response = await mealPlanningApi.saveRecipeFromMealPlan(recipe)\n          } else if (recipe.id) {\n            // Save existing recipe to user's collection\n            response = await mealPlanningApi.saveRecipeToMyCollection(recipe.id)\n          } else {\n            // This is recipe data that needs to be saved\n            response = await mealPlanningApi.saveRecipeFromMealPlan(recipe)\n          }\n          \n          // Update local state\n          recipe.is_saved_by_user = true\n          \n          this.$emit('recipe-saved', response.data.recipe || recipe)\n          \n          // Show success message\n          const message = response.data?.message || 'Recipe saved to your collection!'\n          this.$toast?.success?.(message) || alert(message)\n        }\n      } catch (error) {\n        console.error('Error toggling recipe save status:', error)\n        \n        let errorMessage = 'An error occurred'\n        \n        if (error.response?.status === 404) {\n          errorMessage = 'Recipe not found. It may have been removed.'\n        } else if (error.response?.status === 403) {\n          errorMessage = 'You don\\'t have permission to perform this action.'\n        } else if (error.response?.status === 500) {\n          errorMessage = 'Server error. Please try again later.'\n        } else if (error.response?.data?.error) {\n          errorMessage = error.response.data.error\n        } else if (error.response?.data?.message) {\n          errorMessage = error.response.data.message\n        } else if (error.message) {\n          errorMessage = error.message\n        }\n        \n        this.$toast?.error?.(errorMessage) || alert(`Error: ${errorMessage}`)\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import '@/assets/styles/_variables.scss';\n@import '@/assets/styles/_utilities.scss';\n\n.recipe-browser {\n  width: 100%;\n}\n\n.search-section {\n  margin-bottom: $spacing-6;\n}\n\n.search-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: $spacing-4;\n\n  h3 {\n    margin: 0;\n    color: $primary-dark;\n    font-size: 1.5rem;\n    font-weight: 600;\n  }\n}\n\n.refresh-btn {\n  display: flex;\n  align-items: center;\n  gap: $spacing-2;\n  padding: 8px 16px;\n  background: $primary;\n  color: $white;\n  border: none;\n  border-radius: $border-radius;\n  font-size: 0.9rem;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover:not(:disabled) {\n    background: $primary-dark;\n    transform: translateY(-1px);\n  }\n\n  &:disabled {\n    opacity: 0.6;\n    cursor: not-allowed;\n  }\n\n  i {\n    font-size: 0.85rem;\n  }\n}\n\n.search-bar {\n  position: relative;\n  margin-bottom: $spacing-4;\n}\n\n.search-icon {\n  position: absolute;\n  left: 16px;\n  top: 50%;\n  transform: translateY(-50%);\n  color: $gray;\n  font-size: 1.1rem;\n}\n\n.search-input {\n  width: 100%;\n  padding: 12px 16px 12px 48px;\n  border: 2px solid $gray-lighter;\n  border-radius: 12px;\n  font-size: 1rem;\n  transition: border-color 0.2s ease;\n  background: $white;\n\n  &:focus {\n    outline: none;\n    border-color: $primary;\n    box-shadow: 0 0 0 3px rgba($primary, 0.1);\n  }\n}\n\n.filters {\n  display: flex;\n  gap: $spacing-4;\n  flex-wrap: wrap;\n}\n\n.filter-select {\n  padding: 10px 16px;\n  border: 2px solid $gray-lighter;\n  border-radius: 8px;\n  background: $white;\n  font-size: 0.95rem;\n  cursor: pointer;\n  transition: border-color 0.2s ease;\n\n  &:focus {\n    outline: none;\n    border-color: $primary;\n  }\n\n  @include responsive('sm') {\n    flex: 1;\n    min-width: 0;\n  }\n}\n\n.loading-state, .empty-state {\n  text-align: center;\n  padding: 60px 20px;\n  color: $gray;\n  background: $white;\n  border-radius: $border-radius-lg;\n  box-shadow: $shadow;\n}\n\n.loading-spinner {\n  width: 40px;\n  height: 40px;\n  border: 4px solid $gray-lighter;\n  border-left: 4px solid $primary;\n  border-radius: 50%;\n  animation: spin 1s linear infinite;\n  margin: 0 auto 20px;\n}\n\n@keyframes spin {\n  to { transform: rotate(360deg); }\n}\n\n.empty-state i {\n  font-size: 3rem;\n  margin-bottom: 16px;\n  display: block;\n}\n\n.recipe-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));\n  gap: $spacing-6;\n\n  @include responsive('sm') {\n    grid-template-columns: 1fr;\n  }\n}\n\n.recipe-card {\n  background: $white;\n  border-radius: $border-radius-lg;\n  box-shadow: $shadow;\n  overflow: hidden;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  border: 1px solid $gray-lighter;\n\n  &:hover {\n    transform: translateY(-4px);\n    box-shadow: $shadow-lg;\n  }\n}\n\n.recipe-image {\n  position: relative;\n  height: 200px;\n  overflow: hidden;\n\n  img {\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n  }\n}\n\n.recipe-badges {\n  position: absolute;\n  top: 12px;\n  left: 12px;\n  display: flex;\n  flex-direction: column;\n  gap: 6px;\n}\n\n.save-btn {\n  position: absolute;\n  top: 12px;\n  right: 12px;\n  background: rgba($white, 0.9);\n  color: $error;\n  border: none;\n  border-radius: 50%;\n  width: 32px;\n  height: 32px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  opacity: 0;\n  transform: scale(0.8);\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n\n  &:hover {\n    background: $white;\n    transform: scale(1.1);\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n  }\n\n  i {\n    font-size: 1rem;\n    \n    &.fas.fa-heart {\n      color: #e74c3c; // Filled heart - red\n    }\n    \n    &.far.fa-heart {\n      color: #7f8c8d; // Unfilled heart - gray\n    }\n  }\n}\n\n.recipe-card:hover .save-btn {\n  opacity: 1;\n  transform: scale(1);\n}\n\n.badge {\n  background: rgba($white, 0.95);\n  color: $primary-dark;\n  padding: 4px 8px;\n  border-radius: 12px;\n  font-size: 0.75rem;\n  font-weight: 600;\n}\n\n.recipe-content {\n  padding: $spacing-4;\n}\n\n.recipe-title {\n  font-size: 1.2rem;\n  font-weight: 600;\n  color: $primary-dark;\n  margin: 0 0 $spacing-2 0;\n  line-height: 1.3;\n}\n\n.recipe-summary {\n  color: $gray;\n  font-size: 0.9rem;\n  line-height: 1.4;\n  margin: 0 0 $spacing-4 0;\n}\n\n.recipe-stats {\n  display: flex;\n  justify-content: space-between;\n  margin-bottom: $spacing-4;\n  padding: $spacing-3 0;\n  border-top: 1px solid $gray-lighter;\n  border-bottom: 1px solid $gray-lighter;\n}\n\n.stat {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  color: $gray;\n  font-size: 0.85rem;\n\n  i {\n    font-size: 0.9rem;\n    color: $primary;\n  }\n}\n\n.nutrition-preview {\n  display: flex;\n  justify-content: space-between;\n}\n\n.macro {\n  text-align: center;\n}\n\n.macro-label {\n  display: block;\n  font-size: 0.75rem;\n  color: $gray;\n  margin-bottom: 2px;\n}\n\n.macro-value {\n  display: block;\n  font-size: 0.9rem;\n  font-weight: 600;\n  color: $primary-dark;\n}\n</style>","import { render } from \"./RecipeBrowser.vue?vue&type=template&id=6ad281fd&scoped=true\"\nimport script from \"./RecipeBrowser.vue?vue&type=script&lang=js\"\nexport * from \"./RecipeBrowser.vue?vue&type=script&lang=js\"\n\nimport \"./RecipeBrowser.vue?vue&type=style&index=0&id=6ad281fd&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-6ad281fd\"]])\n\nexport default __exports__","<!-- src/components/meal-planning/MealPlanManager.vue -->\n<template>\n  <div class=\"meal-plan-manager\">\n    <!-- AI Generation Status -->\n    <div v-if=\"generationStatus\" class=\"generation-status\" :class=\"generationStatus.type\">\n      <div class=\"status-content\">\n        <i :class=\"generationStatus.icon\"></i>\n        <div class=\"status-text\">\n          <h4>{{ generationStatus.title }}</h4>\n          <p>{{ generationStatus.message }}</p>\n          <div v-if=\"generationStatus.steps\" class=\"generation-steps\">\n            <div\n              v-for=\"(step, index) in generationStatus.steps\"\n              :key=\"index\"\n              class=\"step\"\n              :class=\"{ 'completed': step.completed, 'active': step.active }\"\n            >\n              <i :class=\"step.completed ? 'fas fa-check' : step.active ? 'fas fa-spinner fa-spin' : 'fas fa-clock'\"></i>\n              <span>{{ step.name }}</span>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- Generate New Meal Plan Section -->\n    <div class=\"generate-section\">\n      <div class=\"section-header\">\n        <h2>AI-Powered Meal Planning</h2>\n        <p>Let our advanced AI create a personalized meal plan based on your health profile, dietary preferences, and nutrition goals</p>\n      </div>\n\n      <form @submit.prevent=\"generateMealPlan\" class=\"generate-form\">\n        <div class=\"form-row\">\n          <div class=\"form-group\">\n            <label for=\"plan_type\">Plan Type</label>\n            <select\n              id=\"plan_type\"\n              v-model=\"generateForm.plan_type\"\n              class=\"form-select\"\n            >\n              <option value=\"daily\">Daily Plan (1 day)</option>\n              <option value=\"weekly\">Weekly Plan (7 days)</option>\n            </select>\n          </div>\n\n          <div class=\"form-group\">\n            <label for=\"start_date\">Start Date</label>\n            <input\n              id=\"start_date\"\n              v-model=\"generateForm.start_date\"\n              type=\"date\"\n              class=\"form-input\"\n              :min=\"today\"\n            />\n          </div>\n\n          <div class=\"form-group\">\n            <label for=\"target_calories\">Target Calories (optional)</label>\n            <input\n              id=\"target_calories\"\n              v-model.number=\"generateForm.target_calories\"\n              type=\"number\"\n              min=\"1000\"\n              max=\"5000\"\n              placeholder=\"Uses your health profile default\"\n              class=\"form-input\"\n            />\n            <small class=\"form-hint\">Leave empty to use your calculated target from health profile</small>\n          </div>\n        </div>\n\n        <div class=\"advanced-options\" v-if=\"showAdvancedOptions\">\n          <h4>Advanced Options</h4>\n          <div class=\"form-row\">\n            <div class=\"form-group\">\n              <label>Preferred Cuisines (override profile)</label>\n              <div class=\"checkbox-group\">\n                <label v-for=\"cuisine in availableCuisines\" :key=\"cuisine\" class=\"checkbox-label\">\n                  <input\n                    type=\"checkbox\"\n                    :value=\"cuisine\"\n                    v-model=\"generateForm.cuisine_preferences\"\n                  />\n                  <span>{{ cuisine }}</span>\n                </label>\n              </div>\n            </div>\n\n            <div class=\"form-group\">\n              <label for=\"max_cook_time\">Max Cooking Time (minutes)</label>\n              <input\n                id=\"max_cook_time\"\n                v-model.number=\"generateForm.max_cook_time\"\n                type=\"number\"\n                min=\"10\"\n                max=\"120\"\n                placeholder=\"No limit\"\n                class=\"form-input\"\n              />\n            </div>\n          </div>\n        </div>\n\n        <div class=\"form-actions\">\n          <button\n            type=\"button\"\n            @click=\"showAdvancedOptions = !showAdvancedOptions\"\n            class=\"btn btn-outline\"\n          >\n            <i :class=\"showAdvancedOptions ? 'fas fa-chevron-up' : 'fas fa-chevron-down'\"></i>\n            {{ showAdvancedOptions ? 'Hide' : 'Show' }} Advanced Options\n          </button>\n\n          <button\n            type=\"submit\"\n            class=\"btn btn-primary generate-btn\"\n            :disabled=\"generating\"\n          >\n            <i class=\"fas fa-brain\" v-if=\"!generating\"></i>\n            <i class=\"fas fa-spinner fa-spin\" v-else></i>\n            {{ generating ? 'AI is Creating Your Plan...' : 'Generate AI Meal Plan' }}\n          </button>\n        </div>\n      </form>\n    </div>\n\n    <!-- Existing Meal Plans Section -->\n    <div class=\"existing-plans-section\">\n      <div class=\"section-header\">\n        <h2>Your AI-Generated Meal Plans</h2>\n        <p>Previously generated personalized meal plans</p>\n      </div>\n\n      <div v-if=\"loading\" class=\"loading-state\">\n        <div class=\"loading-spinner\"></div>\n        <p>Loading your meal plans...</p>\n      </div>\n\n      <div v-else-if=\"mealPlans.length === 0\" class=\"empty-state\">\n        <i class=\"fas fa-brain\"></i>\n        <h3>No AI meal plans yet</h3>\n        <p>Generate your first AI-powered, personalized meal plan above!</p>\n      </div>\n\n      <div v-else class=\"meal-plans-grid\">\n        <div\n          v-for=\"plan in mealPlans\"\n          :key=\"plan.id\"\n          class=\"meal-plan-card\"\n          @click=\"viewMealPlan(plan)\"\n        >\n\n          <div class=\"plan-header\">\n            <h3>{{ plan ? formatPlanType(plan.plan_type) : 'Loading...' }} Plan</h3>\n            <span class=\"plan-date\">{{ plan ? formatDateRange(plan.start_date, plan.end_date) : 'Date unknown' }}</span>\n            <div class=\"ai-badge\">\n              <i class=\"fas fa-brain\"></i>\n              <span>AI v{{ plan.generation_version || '1.0' }}</span>\n            </div>\n          </div>\n\n          <div class=\"plan-stats\">\n            <div class=\"stat\">\n              <span class=\"stat-value\">{{ plan?.avg_daily_calories ? Math.round(plan.avg_daily_calories) : 'N/A' }}</span>\n              <span class=\"stat-label\">Avg Calories</span>\n            </div>\n            <div class=\"stat\">\n              <span class=\"stat-value\">{{ getMealCount(plan) }}</span>\n              <span class=\"stat-label\">Meals</span>\n            </div>\n            <div class=\"stat\">\n              <span class=\"stat-value\">{{ plan.nutritional_balance_score?.toFixed(1) || 'N/A' }}</span>\n              <span class=\"stat-label\">Balance Score</span>\n            </div>\n          </div>\n\n          <div class=\"plan-nutrition\" v-if=\"plan.daily_averages\">\n            <h4>Daily Nutrition Averages</h4>\n            <div class=\"nutrition-grid\">\n              <div class=\"nutrition-item\">\n                <span class=\"nutrition-label\">Protein:</span>\n                <span class=\"nutrition-value\">{{ Math.round(plan.daily_averages.protein || 0) }}g</span>\n              </div>\n              <div class=\"nutrition-item\">\n                <span class=\"nutrition-label\">Carbs:</span>\n                <span class=\"nutrition-value\">{{ Math.round(plan.daily_averages.carbs || 0) }}g</span>\n              </div>\n              <div class=\"nutrition-item\">\n                <span class=\"nutrition-label\">Fat:</span>\n                <span class=\"nutrition-value\">{{ Math.round(plan.daily_averages.fat || 0) }}g</span>\n              </div>\n            </div>\n          </div>\n\n          <div class=\"quality-scores\" v-if=\"plan.variety_score || plan.preference_match_score\">\n            <div class=\"score-item\">\n              <span class=\"score-label\">Variety:</span>\n              <div class=\"score-bar\">\n                <div class=\"score-fill\" :style=\"{ width: (plan.variety_score * 10) + '%' }\"></div>\n              </div>\n              <span class=\"score-value\">{{ plan.variety_score?.toFixed(1) || 'N/A' }}</span>\n            </div>\n            <div class=\"score-item\">\n              <span class=\"score-label\">Preference:</span>\n              <div class=\"score-bar\">\n                <div class=\"score-fill\" :style=\"{ width: (plan.preference_match_score * 10) + '%' }\"></div>\n              </div>\n              <span class=\"score-value\">{{ plan.preference_match_score?.toFixed(1) || 'N/A' }}</span>\n            </div>\n          </div>\n\n          <div class=\"plan-actions\">\n            <button @click.stop=\"viewMealPlan(plan)\" class=\"btn btn-outline\">\n              <i class=\"fas fa-eye\"></i>\n              View Details\n            </button>\n            <button @click.stop=\"analyzeMealPlan(plan)\" class=\"btn btn-info\">\n              <i class=\"fas fa-chart-line\"></i>\n              AI Analysis\n            </button>\n            <button @click.stop=\"regeneratePlan(plan)\" class=\"btn btn-secondary\">\n              <i class=\"fas fa-redo\"></i>\n              Regenerate\n            </button>\n            <button @click.stop=\"deleteMealPlan(plan)\" class=\"btn btn-danger\">\n              <i class=\"fas fa-trash\"></i>\n              Delete\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- Meal Plan Detail Modal -->\n    <meal-plan-detail-modal\n      v-if=\"selectedPlan\"\n      :meal-plan=\"selectedPlan\"\n      @close=\"selectedPlan = null\"\n      @regenerate-meal=\"(mealData) => regenerateMeal(selectedPlan.id, mealData)\"\n      @get-alternatives=\"(mealData) => getMealAlternatives(selectedPlan.id, mealData)\"\n      @analyze-plan=\"analyzeMealPlanFromModal\"\n      @delete-plan=\"deleteMealPlan\"\n    />\n\n    <!-- Nutritional Analysis Modal -->\n    <nutritional-analysis-modal\n      v-if=\"showAnalysisModal && currentAnalysis\"\n      :analysis=\"currentAnalysis\"\n      :meal-plan=\"selectedPlanForAnalysis\"\n      @close=\"closeAnalysisModal\"\n    />\n\n    <!-- Alternatives Modal -->\n    <alternatives-modal\n      v-if=\"showAlternativesModal && alternativesModalData\"\n      :plan-id=\"alternativesModalData.planId\"\n      :day=\"alternativesModalData.day\"\n      :meal-type=\"alternativesModalData.mealType\"\n      @close=\"closeAlternativesModal\"\n      @alternative-selected=\"handleAlternativeSelected\"\n    />\n  </div>\n</template>\n\n<script>\nimport { mealPlanningApi } from '@/services/mealPlanningApi'\nimport MealPlanDetailModal from './MealPlanDetailModal.vue'\nimport NutritionalAnalysisModal from './NutritionalAnalysisModal.vue'\nimport AlternativesModal from './AlternativesModal.vue'\n\nexport default {\n  name: 'MealPlanManager',\n  components: {\n    MealPlanDetailModal,\n    NutritionalAnalysisModal,\n    AlternativesModal\n  },\n  props: {\n    loading: {\n      type: Boolean,\n      default: false\n    },\n    nutritionProfile: {\n      type: Object,\n      default: null\n    }\n  },\n  emits: ['meal-plan-generated'],\n  data() {\n    return {\n      mealPlans: [],\n      selectedPlan: null,\n      selectedPlanForAnalysis: null,\n      currentAnalysis: null,\n      showAnalysisModal: false,\n      showAlternativesModal: false,\n      alternativesModalData: null,\n      generating: false,\n      showAdvancedOptions: false,\n      generationStatus: null,\n      generateForm: {\n        plan_type: 'daily',\n        start_date: '',\n        target_calories: null,\n        cuisine_preferences: [],\n        max_cook_time: null\n      },\n      availableCuisines: [\n        'Mediterranean', 'Asian', 'Italian', 'Mexican', 'American',\n        'Indian', 'Middle Eastern', 'French', 'Japanese', 'Thai'\n      ]\n    }\n  },\n  computed: {\n    today() {\n      return new Date().toISOString().split('T')[0]\n    }\n  },\n  async mounted() {\n    // Set default start date to today\n    this.generateForm.start_date = this.today\n    await this.loadMealPlans()\n  },\n  methods: {\n    async loadMealPlans() {\n      try {\n        if (process.env.NODE_ENV === 'development') {\n          console.log(' Loading meal plans...')\n        }\n        const response = await mealPlanningApi.getMealPlans()\n        \n        // Handle different response structures safely\n        const mealPlansData = response?.data?.results || response?.data || []\n        \n        if (process.env.NODE_ENV === 'development') {\n          console.log(` Loaded ${mealPlansData.length} meal plans`)\n        }\n        \n        this.mealPlans = mealPlansData\n      } catch (error) {\n        console.error(' Failed to load meal plans:', error.message)\n        console.error('Response:', error.response?.data)\n        console.error('================================')\n        this.mealPlans = [] // Set empty array to prevent null errors\n        this.showError('Failed to load meal plans')\n      }\n    },\n\n    // Helper method to count meals in a plan based on the new structure\n    getMealCount(plan) {\n      if (!plan?.meal_plan_data?.meals) {\n        return 'N/A'\n      }\n      \n      // Cache the meal count to prevent repeated calculations\n      if (plan._cachedMealCount !== undefined) {\n        return plan._cachedMealCount\n      }\n      \n      let totalMeals = 0\n      Object.values(plan.meal_plan_data.meals).forEach(dayMeals => {\n        if (Array.isArray(dayMeals)) {\n          totalMeals += dayMeals.length\n        }\n      })\n      \n      const result = totalMeals || 'N/A'\n      plan._cachedMealCount = result\n      return result\n    },\n\n    async generateMealPlan() {\n      this.generating = true\n      this.showGenerationStatus()\n\n      try {\n        const planData = { ...this.generateForm }\n\n        // Clean up form data\n        if (!planData.target_calories) {\n          // Use nutrition profile's calorie target if no override specified\n          if (this.nutritionProfile?.calorie_target) {\n            planData.target_calories = this.nutritionProfile.calorie_target\n          } else {\n            delete planData.target_calories\n          }\n        }\n        if (!planData.max_cook_time) {\n          delete planData.max_cook_time\n        }\n        if (planData.cuisine_preferences.length === 0) {\n          delete planData.cuisine_preferences\n        }\n\n        // Update generation status\n        this.updateGenerationStep('strategy', true)\n\n        const response = await mealPlanningApi.generateMealPlan(planData)\n        \n        // Update status to show recipe saving\n        this.updateGenerationStep('recipes', true)\n\n        // Mark all steps as completed\n        this.generationStatus.steps.forEach(step => {\n          step.completed = true\n          step.active = false\n        })\n\n        // Show success status\n        this.generationStatus = {\n          type: 'success',\n          icon: 'fas fa-check-circle',\n          title: 'Meal Plan Generated Successfully!',\n          message: 'Your personalized AI meal plan is ready to view.'\n        }\n\n        // Add to meal plans list\n        this.mealPlans.unshift(response.data)\n\n        this.showSuccess('AI meal plan generated successfully!')\n        this.$emit('meal-plan-generated', response.data)\n\n        // Clear the status after a delay\n        setTimeout(() => {\n          this.generationStatus = null\n          this.viewMealPlan(response.data)\n        }, 2000)\n\n      } catch (error) {\n        console.error('Failed to generate meal plan:', error)\n        this.generationStatus = {\n          type: 'error',\n          icon: 'fas fa-exclamation-circle',\n          title: 'Generation Failed',\n          message: 'Failed to generate meal plan. Please try again.'\n        }\n        this.showError('Failed to generate meal plan. Please try again.')\n\n        setTimeout(() => {\n          this.generationStatus = null\n        }, 3000)\n      } finally {\n        this.generating = false\n      }\n    },\n\n    showGenerationStatus() {\n      this.generationStatus = {\n        type: 'generating',\n        icon: 'fas fa-brain',\n        title: 'AI is Creating Your Meal Plan',\n        message: 'Our AI is analyzing your profile and generating personalized meals...',\n        steps: [\n          { name: 'Analyzing your health profile', completed: false, active: true },\n          { name: 'Creating meal strategy', completed: false, active: false },\n          { name: 'Generating meal structure', completed: false, active: false },\n          { name: 'Creating detailed recipes', completed: false, active: false },\n          { name: 'Optimizing nutrition balance', completed: false, active: false }\n        ]\n      }\n\n      // Simulate step progression\n      setTimeout(() => this.updateGenerationStep('strategy'), 1000)\n      setTimeout(() => this.updateGenerationStep('structure'), 3000)\n      setTimeout(() => this.updateGenerationStep('recipes'), 5000)\n      setTimeout(() => this.updateGenerationStep('optimization'), 7000)\n    },\n\n    updateGenerationStep(stepType, forceComplete = false) {\n      if (!this.generationStatus || !this.generationStatus.steps) return\n\n      const stepIndex = {\n        'profile': 0,\n        'strategy': 1,\n        'structure': 2,\n        'recipes': 3,\n        'optimization': 4\n      }[stepType]\n\n      if (stepIndex !== undefined) {\n        // Complete previous steps\n        for (let i = 0; i < stepIndex; i++) {\n          this.generationStatus.steps[i].completed = true\n          this.generationStatus.steps[i].active = false\n        }\n\n        // Update current step\n        if (forceComplete) {\n          this.generationStatus.steps[stepIndex].completed = true\n          this.generationStatus.steps[stepIndex].active = false\n        } else {\n          this.generationStatus.steps[stepIndex].active = true\n        }\n      }\n    },\n\n    async regeneratePlan(plan) {\n      try {\n        const confirmed = confirm('Generate a new AI meal plan with the same settings? This will create a completely new plan.')\n        if (!confirmed) return\n\n        this.generating = true\n        this.showGenerationStatus()\n\n        const planData = {\n          plan_type: plan.plan_type,\n          start_date: plan.start_date\n        }\n\n        const response = await mealPlanningApi.generateMealPlan(planData)\n\n        // Add new plan to the beginning of the list\n        this.mealPlans.unshift(response.data)\n\n        this.generationStatus = {\n          type: 'success',\n          icon: 'fas fa-check-circle',\n          title: 'New Meal Plan Generated!',\n          message: 'Your fresh AI meal plan is ready.'\n        }\n\n        this.showSuccess('New AI meal plan generated!')\n        this.$emit('meal-plan-generated', response.data)\n\n        setTimeout(() => {\n          this.generationStatus = null\n        }, 2000)\n\n      } catch (error) {\n        console.error('Failed to regenerate meal plan:', error)\n        this.generationStatus = {\n          type: 'error',\n          icon: 'fas fa-exclamation-circle',\n          title: 'Regeneration Failed',\n          message: 'Failed to regenerate meal plan.'\n        }\n        this.showError('Failed to regenerate meal plan')\n\n        setTimeout(() => {\n          this.generationStatus = null\n        }, 3000)\n      } finally {\n        this.generating = false\n      }\n    },\n\n    async deleteMealPlan(plan) {\n      try {\n        const confirmed = confirm(`Are you sure you want to delete this ${plan.plan_type} meal plan? This action cannot be undone.`)\n        if (!confirmed) return\n\n        await mealPlanningApi.deleteMealPlan(plan.id)\n\n        // Remove the plan from the local list\n        this.mealPlans = this.mealPlans.filter(p => p.id !== plan.id)\n\n        this.showSuccess('Meal plan deleted successfully')\n        \n        // Close modal if the deleted plan was being viewed\n        if (this.selectedPlan && this.selectedPlan.id === plan.id) {\n          this.selectedPlan = null\n        }\n\n      } catch (error) {\n        console.error('Error deleting meal plan:', error)\n        this.showError('Failed to delete meal plan')\n      }\n    },\n\n    viewMealPlan(plan) {\n      console.log('=== Meal Plan Details ===')\n      console.log('Plan ID:', plan?.id)\n      console.log('Plan Type:', plan?.plan_type)\n      console.log('Has meal_plan_data:', !!plan?.meal_plan_data)\n      console.log('Has meals:', !!plan?.meal_plan_data?.meals)\n      console.log('Meals structure:', plan?.meal_plan_data?.meals)\n      if (plan?.meal_plan_data?.meals) {\n        console.log('Available meal dates:', Object.keys(plan.meal_plan_data.meals))\n        console.log('Sample meal data for first date:', Object.values(plan.meal_plan_data.meals)[0])\n      }\n      console.log('=========================')\n      this.selectedPlan = plan\n    },\n\n    async regenerateMeal(planId, mealData) {\n      try {\n        console.log('=== Regenerating Meal ===')\n        console.log('Plan ID:', planId)\n        console.log('Meal Data:', mealData)\n        \n        if (!mealData) {\n          console.error('regenerateMeal: mealData is null/undefined')\n          throw new Error('Meal data is required')\n        }\n        \n        const { day, mealType } = mealData\n        console.log('Day:', day)\n        console.log('Meal Type:', mealType)\n        \n        if (!day || !mealType) {\n          console.error('regenerateMeal: day or mealType missing', { day, mealType })\n          throw new Error('Day and meal type are required')\n        }\n        \n        console.log('Making API call to regenerate meal...')\n        const response = await mealPlanningApi.regenerateMeal(planId, day, mealType)\n        console.log('Regeneration successful, updating UI...')\n\n        // Update the meal plan in our list\n        const planIndex = this.mealPlans.findIndex(p => p.id === planId)\n        if (planIndex !== -1) {\n          this.mealPlans[planIndex] = response.data\n          this.selectedPlan = response.data\n          console.log('Meal plan updated in list')\n        }\n\n        this.showSuccess(`${mealType} meal regenerated successfully!`)\n        console.log('========================')\n      } catch (error) {\n        console.error('=== Failed to regenerate meal ===')\n        console.error('Error message:', error.message)\n        console.error('Error response:', error.response?.data)\n        console.error('Full error:', error)\n        console.error('================================')\n        this.showError(`Failed to regenerate meal: ${error.message}`)\n      }\n    },\n\n    async getMealAlternatives(planId, mealData) {\n      try {\n        console.log('=== Opening Meal Alternatives Modal ===')\n        console.log('Plan ID:', planId)\n        console.log('Meal Data:', mealData)\n        \n        if (!mealData) {\n          console.error('getMealAlternatives: mealData is null/undefined')\n          this.showError('Meal data is required')\n          return\n        }\n        \n        const { day, mealType } = mealData\n        console.log('Day:', day)\n        console.log('Meal Type:', mealType)\n        \n        if (!day || !mealType) {\n          console.error('getMealAlternatives: day or mealType missing', { day, mealType })\n          this.showError('Day and meal type are required')\n          return\n        }\n        \n        // Set up modal data and show the modal\n        this.alternativesModalData = {\n          planId: planId,\n          day: day,\n          mealType: mealType\n        }\n        this.showAlternativesModal = true\n        \n        console.log('Alternatives modal opened')\n        console.log('===============================')\n      } catch (error) {\n        console.error('=== Failed to open alternatives modal ===')\n        console.error('Error message:', error.message)\n        console.error('Full error:', error)\n        console.error('=====================================')\n        this.showError(`Failed to open alternatives: ${error.message}`)\n      }\n    },\n\n    closeAlternativesModal() {\n      this.showAlternativesModal = false\n      this.alternativesModalData = null\n    },\n\n    async handleAlternativeSelected(selectionData) {\n      try {\n        console.log('=== Handling Alternative Selection ===')\n        console.log('Selection data:', selectionData)\n        \n        const { day, mealType, recipe } = selectionData\n        \n        // Use swapMeal API to replace the current meal with the selected alternative\n        const response = await mealPlanningApi.swapMeal(\n          this.alternativesModalData.planId,\n          day,\n          mealType,\n          recipe\n        )\n        \n        console.log('Meal swapped successfully:', response.data)\n        \n        // Refresh the meal plan to show the updated meal\n        await this.loadMealPlans()\n        \n        // Update the selected plan if it's the one that was modified\n        if (this.selectedPlan && this.selectedPlan.id === this.alternativesModalData.planId) {\n          const updatedPlan = this.mealPlans.find(plan => plan.id === this.selectedPlan.id)\n          if (updatedPlan) {\n            this.selectedPlan = updatedPlan\n          }\n        }\n        \n        this.showSuccess(`${mealType} meal replaced successfully with \"${recipe.title}\"!`)\n        console.log('========================')\n        \n      } catch (error) {\n        console.error('=== Failed to swap meal ===')\n        console.error('Error message:', error.message)\n        console.error('Error response:', error.response?.data)\n        console.error('Full error:', error)\n        console.error('================================')\n        this.showError(`Failed to replace meal: ${error.message}`)\n      }\n    },\n\n    async analyzeMealPlan(plan) {\n      try {\n        this.selectedPlanForAnalysis = plan\n\n        // Show loading state\n        this.currentAnalysis = {\n          loading: true,\n          message: 'AI is analyzing your meal plan nutrition...'\n        }\n        this.showAnalysisModal = true\n\n        const response = await mealPlanningApi.analyzeMealPlan(plan.id)\n        this.currentAnalysis = response.data\n\n      } catch (error) {\n        console.error('Failed to analyze meal plan:', error)\n        this.currentAnalysis = {\n          error: true,\n          message: 'Failed to analyze meal plan. Please try again.'\n        }\n        this.showError('Failed to analyze meal plan')\n      }\n    },\n\n    async analyzeMealPlanFromModal(plan) {\n      // Close the detail modal first\n      this.selectedPlan = null\n      // Then trigger the analysis\n      await this.analyzeMealPlan(plan)\n    },\n\n    closeAnalysisModal() {\n      this.showAnalysisModal = false\n      this.currentAnalysis = null\n      this.selectedPlanForAnalysis = null\n    },\n\n    formatPlanType(planType) {\n      if (!planType || typeof planType !== 'string') {\n        return 'Unknown'\n      }\n      return planType.charAt(0).toUpperCase() + planType.slice(1)\n    },\n\n    formatDateRange(startDate, endDate) {\n      if (!startDate || !endDate) {\n        console.log('formatDateRange: Missing dates - start:', startDate, 'end:', endDate)\n        return 'Date unknown'\n      }\n\n      try {\n        const startDateObj = new Date(startDate)\n        const endDateObj = new Date(endDate)\n        \n        if (isNaN(startDateObj.getTime()) || isNaN(endDateObj.getTime())) {\n          console.log('formatDateRange: Invalid dates - start:', startDate, 'end:', endDate)\n          return 'Invalid date range'\n        }\n        \n        const start = startDateObj.toLocaleDateString()\n        const end = endDateObj.toLocaleDateString()\n\n        if (startDate === endDate) {\n          return start\n        }\n        return `${start} - ${end}`\n      } catch (error) {\n        console.error('formatDateRange error:', error, 'for dates:', startDate, endDate)\n        return 'Date error'\n      }\n    },\n\n    showSuccess(message) {\n      this.$toast?.success?.(message) || alert(message)\n    },\n\n    showError(message) {\n      this.$toast?.error?.(message) || alert(message)\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import '@/assets/styles/_variables.scss';\n@import '@/assets/styles/_utilities.scss';\n\n.meal-plan-manager {\n  max-width: 1200px;\n  margin: 0 auto;\n}\n\n// Generation Status Styles\n.generation-status {\n  margin-bottom: $spacing-6;\n  padding: $spacing-5;\n  border-radius: $border-radius-lg;\n  border-left: 4px solid;\n\n  &.generating {\n    background: linear-gradient(135deg, rgba(#007bff, 0.1), rgba(#007bff, 0.05));\n    border-left-color: #007bff;\n  }\n\n  &.success {\n    background: linear-gradient(135deg, rgba(#28a745, 0.1), rgba(#28a745, 0.05));\n    border-left-color: #28a745;\n  }\n\n  &.error {\n    background: linear-gradient(135deg, rgba(#dc3545, 0.1), rgba(#dc3545, 0.05));\n    border-left-color: #dc3545;\n  }\n}\n\n.status-content {\n  display: flex;\n  align-items: flex-start;\n  gap: $spacing-4;\n\n  i {\n    font-size: 1.5rem;\n    margin-top: 2px;\n\n    .generating & { color: #007bff; }\n    .success & { color: #28a745; }\n    .error & { color: #dc3545; }\n  }\n}\n\n.status-text {\n  flex: 1;\n\n  h4 {\n    margin: 0 0 $spacing-2 0;\n    font-size: 1.2rem;\n    font-weight: 600;\n  }\n\n  p {\n    margin: 0;\n    color: $gray;\n  }\n}\n\n.generation-steps {\n  margin-top: $spacing-4;\n  display: flex;\n  flex-direction: column;\n  gap: $spacing-2;\n}\n\n.step {\n  display: flex;\n  align-items: center;\n  gap: $spacing-3;\n  padding: $spacing-2;\n  border-radius: $border-radius;\n  transition: all 0.3s ease;\n\n  &.completed {\n    background: rgba(#28a745, 0.1);\n\n    i { color: #28a745; }\n    span { color: #28a745; font-weight: 500; }\n  }\n\n  &.active {\n    background: rgba(#007bff, 0.1);\n\n    i { color: #007bff; }\n    span { color: #007bff; font-weight: 500; }\n  }\n\n  i {\n    font-size: 0.9rem;\n    width: 16px;\n    color: $gray-light;\n  }\n\n  span {\n    font-size: 0.9rem;\n    color: $gray;\n  }\n}\n\n// Enhanced form styles\n.generate-section, .existing-plans-section {\n  margin-bottom: $spacing-8;\n}\n\n.section-header {\n  text-align: center;\n  margin-bottom: $spacing-6;\n\n  h2 {\n    margin: 0 0 $spacing-2 0;\n    color: $primary-dark;\n    font-size: 1.8rem;\n    font-weight: 600;\n  }\n\n  p {\n    margin: 0;\n    color: $gray;\n    font-size: 1.1rem;\n    max-width: 600px;\n    margin: 0 auto;\n  }\n}\n\n.generate-form {\n  background: $white;\n  padding: $spacing-6;\n  border-radius: $border-radius-lg;\n  box-shadow: $shadow;\n  border: 1px solid $gray-lighter;\n}\n\n.form-row {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n  gap: $spacing-4;\n  margin-bottom: $spacing-5;\n}\n\n.form-group {\n  label {\n    display: block;\n    margin-bottom: $spacing-2;\n    font-weight: 500;\n    color: $primary-dark;\n  }\n}\n\n.form-hint {\n  display: block;\n  margin-top: $spacing-1;\n  font-size: 0.85rem;\n  color: $gray;\n}\n\n.form-input, .form-select {\n  width: 100%;\n  padding: 12px 16px;\n  border: 2px solid $gray-lighter;\n  border-radius: $border-radius;\n  font-size: 1rem;\n  transition: border-color 0.2s ease;\n\n  &:focus {\n    outline: none;\n    border-color: $primary;\n    box-shadow: 0 0 0 3px rgba($primary, 0.1);\n  }\n}\n\n.advanced-options {\n  margin-top: $spacing-5;\n  padding-top: $spacing-5;\n  border-top: 1px solid $gray-lighter;\n\n  h4 {\n    margin: 0 0 $spacing-4 0;\n    color: $primary-dark;\n    font-size: 1.1rem;\n  }\n}\n\n.checkbox-group {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));\n  gap: $spacing-2;\n}\n\n.checkbox-label {\n  display: flex;\n  align-items: center;\n  gap: $spacing-2;\n  padding: $spacing-2;\n  border-radius: $border-radius;\n  cursor: pointer;\n  transition: background-color 0.2s ease;\n\n  &:hover {\n    background: rgba($primary, 0.05);\n  }\n\n  input[type=\"checkbox\"] {\n    margin: 0;\n  }\n}\n\n.form-actions {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  gap: $spacing-4;\n  margin-top: $spacing-6;\n}\n\n.generate-btn {\n  flex: 1;\n  max-width: 300px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: $spacing-2;\n  padding: $spacing-4;\n  font-size: 1.1rem;\n  font-weight: 600;\n  background: linear-gradient(135deg, $primary, lighten($primary, 10%));\n  border: none;\n  color: $white;\n  border-radius: $border-radius;\n  transition: all 0.3s ease;\n\n  &:hover:not(:disabled) {\n    transform: translateY(-2px);\n    box-shadow: $shadow-lg;\n  }\n\n  &:disabled {\n    opacity: 0.8;\n    cursor: not-allowed;\n  }\n\n  i {\n    font-size: 1rem;\n  }\n}\n\n// Enhanced meal plan cards\n.meal-plans-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(380px, 1fr));\n  gap: $spacing-6;\n}\n\n.meal-plan-card {\n  background: $white;\n  border-radius: $border-radius-lg;\n  box-shadow: $shadow;\n  padding: $spacing-5;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  border: 1px solid $gray-lighter;\n  position: relative;\n  overflow: hidden;\n\n  &:hover {\n    transform: translateY(-4px);\n    box-shadow: $shadow-lg;\n  }\n\n  &::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    height: 3px;\n    background: linear-gradient(135deg, $primary, lighten($primary, 20%));\n  }\n}\n\n.plan-header {\n  margin-bottom: $spacing-4;\n  position: relative;\n\n  h3 {\n    margin: 0 0 $spacing-1 0;\n    color: $primary-dark;\n    font-size: 1.3rem;\n    font-weight: 600;\n  }\n\n  .plan-date {\n    color: $gray;\n    font-size: 0.9rem;\n  }\n\n  .ai-badge {\n    position: absolute;\n    top: 0;\n    right: 0;\n    background: linear-gradient(135deg, #6f42c1, #8b5cf6);\n    color: white;\n    padding: 4px 8px;\n    border-radius: $border-radius;\n    font-size: 0.75rem;\n    display: flex;\n    align-items: center;\n    gap: 4px;\n\n    i {\n      font-size: 0.7rem;\n    }\n  }\n}\n\n.plan-stats {\n  display: flex;\n  justify-content: space-between;\n  margin-bottom: $spacing-4;\n  padding: $spacing-3;\n  background: rgba($primary, 0.05);\n  border-radius: $border-radius;\n}\n\n.stat {\n  text-align: center;\n\n  .stat-value {\n    display: block;\n    font-size: 1.3rem;\n    font-weight: 600;\n    color: $primary-dark;\n    margin-bottom: 2px;\n  }\n\n  .stat-label {\n    display: block;\n    font-size: 0.75rem;\n    color: $gray;\n    text-transform: uppercase;\n    letter-spacing: 0.5px;\n  }\n}\n\n// New nutrition display section\n.plan-nutrition {\n  margin-bottom: $spacing-4;\n  padding: $spacing-3;\n  background: rgba(#28a745, 0.05);\n  border-radius: $border-radius;\n\n  h4 {\n    margin: 0 0 $spacing-2 0;\n    font-size: 0.9rem;\n    color: $primary-dark;\n    font-weight: 600;\n  }\n\n  .nutrition-grid {\n    display: grid;\n    grid-template-columns: repeat(3, 1fr);\n    gap: $spacing-2;\n  }\n\n  .nutrition-item {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    font-size: 0.85rem;\n\n    .nutrition-label {\n      color: $gray;\n      font-weight: 500;\n    }\n\n    .nutrition-value {\n      color: $primary-dark;\n      font-weight: 600;\n    }\n  }\n}\n\n.quality-scores {\n  margin-bottom: $spacing-4;\n}\n\n.score-item {\n  display: flex;\n  align-items: center;\n  gap: $spacing-2;\n  margin-bottom: $spacing-2;\n\n  .score-label {\n    font-size: 0.85rem;\n    color: $gray;\n    min-width: 80px;\n  }\n\n  .score-bar {\n    flex: 1;\n    height: 6px;\n    background: $gray-lighter;\n    border-radius: 3px;\n    overflow: hidden;\n\n    .score-fill {\n      height: 100%;\n      background: linear-gradient(90deg, #28a745, #20c997);\n      transition: width 0.3s ease;\n    }\n  }\n\n  .score-value {\n    font-size: 0.85rem;\n    font-weight: 500;\n    color: $primary-dark;\n    min-width: 30px;\n    text-align: right;\n  }\n}\n\n.plan-actions {\n  display: flex;\n  gap: $spacing-2;\n\n  .btn {\n    flex: 1;\n    padding: $spacing-2;\n    font-size: 0.85rem;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    gap: 6px;\n\n    i {\n      font-size: 0.8rem;\n    }\n\n    &.btn-info {\n      background: #17a2b8;\n      color: white;\n      border: none;\n\n      &:hover {\n        background: #138496;\n      }\n    }\n\n    &.btn-danger {\n      background: #dc3545;\n      color: white;\n      border: none;\n\n      &:hover {\n        background: #c82333;\n      }\n    }\n  }\n}\n\n// Loading and empty states\n.loading-state, .empty-state {\n  text-align: center;\n  padding: $spacing-8;\n  color: $gray;\n  background: $white;\n  border-radius: $border-radius-lg;\n  box-shadow: $shadow;\n}\n\n.loading-spinner {\n  width: 40px;\n  height: 40px;\n  border: 4px solid $gray-lighter;\n  border-left: 4px solid $primary;\n  border-radius: 50%;\n  animation: spin 1s linear infinite;\n  margin: 0 auto $spacing-4;\n}\n\n@keyframes spin {\n  to { transform: rotate(360deg); }\n}\n\n.empty-state i {\n  font-size: 3rem;\n  margin-bottom: $spacing-4;\n  display: block;\n  color: $gray-light;\n}\n\n// Responsive design\n@media (max-width: 768px) {\n  .form-row {\n    grid-template-columns: 1fr;\n  }\n\n  .form-actions {\n    flex-direction: column;\n    align-items: stretch;\n  }\n\n  .generate-btn {\n    max-width: none;\n  }\n\n  .meal-plans-grid {\n    grid-template-columns: 1fr;\n  }\n\n  .plan-actions {\n    flex-direction: column;\n  }\n\n  .nutrition-grid {\n    grid-template-columns: 1fr;\n  }\n}\n</style>","<!-- src/components/meal-planning/MealPlanDetailModal.vue -->\n<template>\n  <div class=\"modal-overlay\" @click=\"$emit('close')\">\n    <div class=\"modal-content\" @click.stop>\n      <div class=\"modal-header\">\n        <h2>{{ formatPlanType(mealPlan.plan_type) }} Meal Plan</h2>\n        <div class=\"ai-generation-info\">\n          <span class=\"ai-badge\">\n            <i class=\"fas fa-brain\"></i>\n            AI v{{ mealPlan.generation_version || '1.0' }}\n          </span>\n          <span class=\"model-badge\">{{ mealPlan.ai_model_used || 'AI Model' }}</span>\n        </div>\n        <button @click=\"$emit('close')\" class=\"close-btn\">\n          <i class=\"fas fa-times\"></i>\n        </button>\n      </div>\n\n      <div class=\"modal-body\">\n        <div class=\"plan-overview\">\n          <div class=\"overview-stats\">\n            <div class=\"stat-item\">\n              <span class=\"stat-label\">Date Range:</span>\n              <span class=\"stat-value\">{{ formatDateRange(mealPlan.start_date, mealPlan.end_date) }}</span>\n            </div>\n            <div class=\"stat-item\">\n              <span class=\"stat-label\">Total Calories:</span>\n              <span class=\"stat-value\">{{ Math.round(mealPlan.total_calories || 0) }}</span>\n            </div>\n            <div class=\"stat-item\">\n              <span class=\"stat-label\">Avg Daily Calories:</span>\n              <span class=\"stat-value\">{{ Math.round(mealPlan.avg_daily_calories || 0) }}</span>\n            </div>\n            <div class=\"stat-item\">\n              <span class=\"stat-label\">Total Meals:</span>\n              <span class=\"stat-value\">{{ getTotalMeals() }}</span>\n            </div>\n            <div class=\"stat-item\" v-if=\"mealPlan.nutritional_balance_score\">\n              <span class=\"stat-label\">Balance Score:</span>\n              <span class=\"stat-value\">{{ mealPlan.nutritional_balance_score.toFixed(1) }}/10</span>\n            </div>\n            <div class=\"stat-item\" v-if=\"mealPlan.days_count\">\n              <span class=\"stat-label\">Days:</span>\n              <span class=\"stat-value\">{{ mealPlan.days_count }}</span>\n            </div>\n          </div>\n\n          <!-- Daily Nutritional Averages -->\n          <div class=\"nutrition-overview\" v-if=\"mealPlan.daily_averages\">\n            <h4>Daily Nutritional Averages</h4>\n            <div class=\"nutrition-grid\">\n              <div class=\"nutrition-item\">\n                <span class=\"nutrition-label\">Protein:</span>\n                <span class=\"nutrition-value\">{{ Math.round(mealPlan.daily_averages.protein || 0) }}g</span>\n              </div>\n              <div class=\"nutrition-item\">\n                <span class=\"nutrition-label\">Carbohydrates:</span>\n                <span class=\"nutrition-value\">{{ Math.round(mealPlan.daily_averages.carbs || 0) }}g</span>\n              </div>\n              <div class=\"nutrition-item\">\n                <span class=\"nutrition-label\">Fat:</span>\n                <span class=\"nutrition-value\">{{ Math.round(mealPlan.daily_averages.fat || 0) }}g</span>\n              </div>\n              <div class=\"nutrition-item\">\n                <span class=\"nutrition-label\">Calories:</span>\n                <span class=\"nutrition-value\">{{ Math.round(mealPlan.daily_averages.calories || 0) }}</span>\n              </div>\n            </div>\n          </div>\n\n          <!-- Quality Scores -->\n          <div class=\"quality-scores\" v-if=\"mealPlan.variety_score || mealPlan.preference_match_score\">\n            <h4>Plan Quality Metrics</h4>\n            <div class=\"scores-grid\">\n              <div class=\"score-item\" v-if=\"mealPlan.nutritional_balance_score\">\n                <span class=\"score-label\">Nutritional Balance:</span>\n                <div class=\"score-bar\">\n                  <div class=\"score-fill\" :style=\"{ width: (mealPlan.nutritional_balance_score * 10) + '%' }\"></div>\n                </div>\n                <span class=\"score-value\">{{ mealPlan.nutritional_balance_score.toFixed(1) }}/10</span>\n              </div>\n              <div class=\"score-item\" v-if=\"mealPlan.variety_score\">\n                <span class=\"score-label\">Variety Score:</span>\n                <div class=\"score-bar\">\n                  <div class=\"score-fill\" :style=\"{ width: (mealPlan.variety_score * 10) + '%' }\"></div>\n                </div>\n                <span class=\"score-value\">{{ mealPlan.variety_score.toFixed(1) }}/10</span>\n              </div>\n              <div class=\"score-item\" v-if=\"mealPlan.preference_match_score\">\n                <span class=\"score-label\">Preference Match:</span>\n                <div class=\"score-bar\">\n                  <div class=\"score-fill\" :style=\"{ width: (mealPlan.preference_match_score * 10) + '%' }\"></div>\n                </div>\n                <span class=\"score-value\">{{ mealPlan.preference_match_score.toFixed(1) }}/10</span>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"meals-section\" v-if=\"mealPlan.meal_plan_data && mealPlan.meal_plan_data.meals\">\n          <h3>Detailed Meal Plan</h3>\n          <div class=\"meals-grid\">\n            <div\n              v-for=\"(dayMeals, date) in mealPlan.meal_plan_data.meals\"\n              :key=\"date\"\n              class=\"day-meals\"\n            >\n              <h4 class=\"day-header\">{{ formatDate(date) }}</h4>\n              <div class=\"meals-list\">\n                <div\n                  v-for=\"(meal, index) in dayMeals\"\n                  :key=\"index\"\n                  class=\"meal-card\"\n                >\n                  <div class=\"meal-header\">\n                    <div class=\"meal-title-section\">\n                      <h5 class=\"meal-title\">\n                        {{ getMealTitle(meal) }}\n                      </h5>\n                      <span class=\"meal-type-badge\" :class=\"getMealTypeClass(meal.meal_type || 'meal')\">\n                        {{ formatMealType(meal.meal_type || 'Meal') }}\n                      </span>\n                    </div>\n                    <div class=\"meal-meta\">\n                      <span class=\"meal-time\">\n                        <i class=\"fas fa-clock\"></i>\n                        {{ getMealTime(meal) }}\n                      </span>\n                      <span class=\"meal-cuisine\" v-if=\"meal.recipe?.cuisine || meal.cuisine\">\n                        <i class=\"fas fa-globe\"></i>\n                        {{ meal.recipe?.cuisine || meal.cuisine }}\n                      </span>\n                    </div>\n                  </div>\n\n                  <!-- Recipe Details -->\n                  <div class=\"recipe-details\" v-if=\"meal.recipe || getMealRecipe(meal)\">\n                    <!-- Cooking Information -->\n                    <div class=\"cooking-info\" v-if=\"getMealRecipe(meal).readyInMinutes || getMealRecipe(meal).prep_time || getMealRecipe(meal).cook_time || getMealRecipe(meal).total_time\">\n                      <div class=\"time-info\">\n                        <span v-if=\"getMealRecipe(meal).readyInMinutes\" class=\"time-item\">\n                          <i class=\"fas fa-hourglass-half\"></i>\n                          Ready: {{ getMealRecipe(meal).readyInMinutes }}min\n                        </span>\n                        <span v-if=\"getMealRecipe(meal).prep_time\" class=\"time-item\">\n                          <i class=\"fas fa-cut\"></i>\n                          Prep: {{ getMealRecipe(meal).prep_time }}min\n                        </span>\n                        <span v-if=\"getMealRecipe(meal).cook_time\" class=\"time-item\">\n                          <i class=\"fas fa-fire\"></i>\n                          Cook: {{ getMealRecipe(meal).cook_time }}min\n                        </span>\n                        <span v-if=\"getMealRecipe(meal).total_time\" class=\"time-item\">\n                          <i class=\"fas fa-hourglass-half\"></i>\n                          Total: {{ getMealRecipe(meal).total_time }}min\n                        </span>\n                        <span v-if=\"getMealRecipe(meal).servings\" class=\"time-item\">\n                          <i class=\"fas fa-users\"></i>\n                          Serves: {{ getMealRecipe(meal).servings }}\n                        </span>\n                      </div>\n                    </div>\n\n                    <!-- Nutritional Information -->\n                    <div class=\"meal-nutrition\">\n                      <h6>Nutritional Information</h6>\n                      <div class=\"nutrition-details\">\n                        <div class=\"nutrition-item\">\n                          <span class=\"nutrition-label\">Calories:</span>\n                          <span class=\"nutrition-value\">{{ getNutritionValue(getMealRecipe(meal), 'calories') }}</span>\n                        </div>\n                        <div class=\"nutrition-item\">\n                          <span class=\"nutrition-label\">Protein:</span>\n                          <span class=\"nutrition-value\">{{ getNutritionValue(getMealRecipe(meal), 'protein') }}g</span>\n                        </div>\n                        <div class=\"nutrition-item\">\n                          <span class=\"nutrition-label\">Carbs:</span>\n                          <span class=\"nutrition-value\">{{ getNutritionValue(getMealRecipe(meal), 'carbs') }}g</span>\n                        </div>\n                        <div class=\"nutrition-item\">\n                          <span class=\"nutrition-label\">Fat:</span>\n                          <span class=\"nutrition-value\">{{ getNutritionValue(getMealRecipe(meal), 'fat') }}g</span>\n                        </div>\n                      </div>\n                    </div>\n\n                    <!-- Ingredients -->\n                    <div class=\"ingredients-section\" v-if=\"getMealIngredients(meal).length\">\n                      <h6>Ingredients</h6>\n                      <div class=\"ingredients-list\">\n                        <div \n                          v-for=\"(ingredient, idx) in getMealIngredients(meal)\" \n                          :key=\"idx\"\n                          class=\"ingredient-item\"\n                        >\n                          <span class=\"ingredient-quantity\">{{ ingredient.quantity || ingredient.amount || '' }}</span>\n                          <span class=\"ingredient-unit\">{{ ingredient.unit || '' }}</span>\n                          <span class=\"ingredient-name\">{{ ingredient.name || ingredient.original || ingredient.text }}</span>\n                        </div>\n                      </div>\n                    </div>\n\n                    <!-- Instructions -->\n                    <div class=\"instructions-section\" v-if=\"normalizedInstructions(meal).length\">\n                      <h6>Instructions</h6>\n                      <div class=\"instructions-list\">\n                        <div \n                          v-for=\"(instruction, idx) in normalizedInstructions(meal)\" \n                          :key=\"idx\"\n                          class=\"instruction-item\"\n                        >\n                          <span class=\"instruction-number\">{{ instruction.number }}</span>\n                          <span class=\"instruction-text\">{{ instruction.step }}</span>\n                        </div>\n                      </div>\n                    </div>\n\n                    <!-- Target Information -->\n                    <div class=\"target-info\" v-if=\"meal.target_calories || meal.target_protein || meal.target_carbs || meal.target_fat\">\n                      <h6>Meal Targets</h6>\n                      <div class=\"targets-grid\">\n                        <div class=\"target-item\" v-if=\"meal.target_calories\">\n                          <span class=\"target-label\">Target Calories:</span>\n                          <span class=\"target-value\">{{ Math.round(meal.target_calories) }}</span>\n                        </div>\n                        <div class=\"target-item\" v-if=\"meal.target_protein\">\n                          <span class=\"target-label\">Target Protein:</span>\n                          <span class=\"target-value\">{{ Math.round(meal.target_protein) }}g</span>\n                        </div>\n                        <div class=\"target-item\" v-if=\"meal.target_carbs\">\n                          <span class=\"target-label\">Target Carbs:</span>\n                          <span class=\"target-value\">{{ Math.round(meal.target_carbs) }}g</span>\n                        </div>\n                        <div class=\"target-item\" v-if=\"meal.target_fat\">\n                          <span class=\"target-label\">Target Fat:</span>\n                          <span class=\"target-value\">{{ Math.round(meal.target_fat) }}g</span>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div class=\"meal-actions\">\n                    <button\n                                                @click=\"toggleRecipeSave(meal.recipe || meal)\"\n                      class=\"btn btn-sm\"\n                      :class=\"(meal.recipe || meal)?.is_saved_by_user ? 'btn-outline-danger' : 'btn-primary'\"\n                      :disabled=\"savingRecipe === (meal.recipe || meal)?.id\"\n                    >\n                      <i v-if=\"savingRecipe === (meal.recipe || meal)?.id\" class=\"fas fa-spinner fa-spin\"></i>\n                      <i v-else :class=\"(meal.recipe || meal)?.is_saved_by_user ? 'fas fa-heart' : 'far fa-heart'\"></i>\n                      {{ savingRecipe === (meal.recipe || meal)?.id ? ((meal.recipe || meal)?.is_saved_by_user ? 'Removing...' : 'Saving...') : ((meal.recipe || meal)?.is_saved_by_user ? 'Remove' : 'Save') }}\n                    </button>\n                    <button\n                      @click=\"regenerateMeal(date, meal.meal_type || inferMealTypeFromTime(new Date()))\"\n                      class=\"btn btn-sm btn-outline\"\n                    >\n                      <i class=\"fas fa-redo\"></i>\n                      Regenerate\n                    </button>\n                    <button\n                      @click=\"getAlternatives(date, meal.meal_type || inferMealTypeFromTime(new Date()))\"\n                      class=\"btn btn-sm btn-secondary\"\n                    >\n                      <i class=\"fas fa-exchange-alt\"></i>\n                      Alternatives\n                    </button>\n                    <button\n                      @click=\"viewRecipeDetails(meal)\"\n                      class=\"btn btn-sm btn-info\"\n                    >\n                      <i class=\"fas fa-info-circle\"></i>\n                      Recipe Details\n                    </button>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div v-else class=\"no-meals\">\n          <i class=\"fas fa-utensils\"></i>\n          <p>No meal details available</p>\n        </div>\n      </div>\n\n      <div class=\"modal-footer\">\n        <button @click=\"$emit('close')\" class=\"btn btn-secondary\">Close</button>\n        <button @click=\"generateShoppingList\" class=\"btn btn-success\">\n          <i class=\"fas fa-shopping-cart\"></i>\n          Generate Shopping List\n        </button>\n        <button @click=\"analyzePlan\" class=\"btn btn-info\">\n          <i class=\"fas fa-chart-line\"></i>\n          AI Analysis\n        </button>\n        <button @click=\"deletePlan\" class=\"btn btn-danger\">\n          <i class=\"fas fa-trash\"></i>\n          Delete Plan\n        </button>\n      </div>\n    </div>\n\n    <!-- Recipe Detail Modal -->\n    <recipe-detail-modal\n      v-if=\"showRecipeModal && selectedRecipe\"\n      :recipe=\"selectedRecipe\"\n      @close=\"closeRecipeModal\"\n      @recipe-saved=\"onRecipeSaved\"\n    />\n\n    <!-- Shopping List Modal -->\n    <shopping-list-modal\n      v-if=\"showShoppingListModal\"\n      :shopping-list=\"shoppingListData\"\n      :loading=\"shoppingListLoading\"\n      :error=\"shoppingListError\"\n      @close=\"closeShoppingListModal\"\n      @retry=\"generateShoppingList\"\n    />\n  </div>\n</template>\n\n<script>\nimport RecipeDetailModal from './RecipeDetailModal.vue'\nimport ShoppingListModal from './ShoppingListModal.vue'\nimport { makeShoppingListRequest } from '@/utils/fetchUtils'\n\nexport default {\n  name: 'MealPlanDetailModal',\n  components: {\n    RecipeDetailModal,\n    ShoppingListModal\n  },\n  props: {\n    mealPlan: {\n      type: Object,\n      required: true\n    }\n  },\n  emits: ['close', 'regenerate-meal', 'get-alternatives', 'analyze-plan', 'delete-plan'],\n  data() {\n    return {\n      savingRecipe: null, // Track which recipe is being saved\n      showRecipeModal: false,\n      selectedRecipe: null,\n      showShoppingListModal: false,\n      shoppingListData: null,\n      shoppingListLoading: false,\n      shoppingListError: null\n    }\n  },\n  computed: {\n    // Add computed property to normalize instructions\n    normalizedInstructions() {\n      return (meal) => {\n        const instr = meal?.recipe?.instructions || meal?.instructions || []\n        \n        // Handle empty instructions\n        if (!instr || instr.length === 0) {\n          return []\n        }\n        \n        // If it's already an array of objects with step property, extract the step text\n        if (instr.length && typeof instr[0] === 'object' && instr[0].step) {\n          return instr.map((stepObj, i) => ({\n            number: stepObj.number || i + 1,\n            step: stepObj.step,\n            description: stepObj.step\n          }))\n        }\n        \n        // If it's an array of strings, convert to objects\n        if (instr.length && typeof instr[0] === 'string') {\n          return instr.map((stepText, i) => ({\n            number: i + 1,\n            step: stepText,\n            description: stepText\n          }))\n        }\n        \n        // If it's an array of objects without step property, try to extract the step text\n        if (instr.length && typeof instr[0] === 'object') {\n          return instr.map((stepObj, i) => ({\n            number: stepObj.number || i + 1,\n            step: stepObj.step || stepObj.description || stepObj.instruction || `Step ${i + 1}`,\n            description: stepObj.step || stepObj.description || stepObj.instruction || `Step ${i + 1}`\n          }))\n        }\n        \n        return []\n      }\n    }\n  },\n  mounted() {\n    console.log('=== MealPlanDetailModal Mounted ===')\n    console.log('Meal Plan ID:', this.mealPlan?.id)\n    console.log('Plan Type:', this.mealPlan?.plan_type)\n    console.log('Has meal_plan_data:', !!this.mealPlan?.meal_plan_data)\n    console.log('Has meals:', !!this.mealPlan?.meal_plan_data?.meals)\n    \n    if (this.mealPlan?.meal_plan_data?.meals) {\n      const mealDates = Object.keys(this.mealPlan.meal_plan_data.meals)\n      console.log('Available meal dates:', mealDates)\n      console.log('Total meal days:', mealDates.length)\n      \n      // Log first day's meals as sample\n      if (mealDates.length > 0) {\n        const firstDate = mealDates[0]\n        const firstDayMeals = this.mealPlan.meal_plan_data.meals[firstDate]\n        console.log(`Sample meals for ${firstDate}:`, firstDayMeals)\n      }\n    } else {\n      console.log('No meal data available - checking structure:')\n      console.log('mealPlan keys:', Object.keys(this.mealPlan || {}))\n      if (this.mealPlan?.meal_plan_data) {\n        console.log('meal_plan_data keys:', Object.keys(this.mealPlan.meal_plan_data))\n      }\n    }\n    console.log('=====================================')\n    \n    // Add escape key listener\n    document.addEventListener('keydown', this.handleEscapeKey)\n  },\n\n  beforeUnmount() {\n    // Remove escape key listener\n    document.removeEventListener('keydown', this.handleEscapeKey)\n  },\n  methods: {\n    formatPlanType(type) {\n      if (!type) return 'Unknown'\n      return type.charAt(0).toUpperCase() + type.slice(1)\n    },\n\n    formatDateRange(startDate, endDate) {\n      if (!startDate || !endDate) {\n        console.log('formatDateRange: Missing dates - start:', startDate, 'end:', endDate)\n        return 'Date unknown'\n      }\n      \n      try {\n        const startDateObj = new Date(startDate)\n        const endDateObj = new Date(endDate)\n        \n        if (isNaN(startDateObj.getTime()) || isNaN(endDateObj.getTime())) {\n          console.log('formatDateRange: Invalid dates - start:', startDate, 'end:', endDate)\n          return 'Invalid date range'\n        }\n        \n        const start = startDateObj.toLocaleDateString()\n        const end = endDateObj.toLocaleDateString()\n\n        if (startDate === endDate) {\n          return start\n        }\n        return `${start} - ${end}`\n      } catch (error) {\n        console.error('formatDateRange error:', error, 'for dates:', startDate, endDate)\n        return 'Date error'\n      }\n    },\n\n    formatDate(dateStr) {\n      try {\n        if (!dateStr) {\n          console.log('formatDate: dateStr is null/undefined')\n          return 'Unknown Date'\n        }\n        \n        // Handle meal type strings for legacy daily plans (backwards compatibility)\n        const mealTypeLabels = {\n          'breakfast': 'Breakfast Meals',\n          'lunch': 'Lunch Meals', \n          'dinner': 'Dinner Meals',\n          'snack': 'Snack Meals'\n        }\n        \n        if (mealTypeLabels[dateStr.toLowerCase()]) {\n          console.log('formatDate: Detected legacy meal type structure:', dateStr)\n          return mealTypeLabels[dateStr.toLowerCase()]\n        }\n        \n        // Try to parse as date for date-based plans\n        const date = new Date(dateStr)\n        if (isNaN(date.getTime())) {\n          console.log('formatDate: Invalid date for input:', dateStr)\n          return dateStr // Return original string if can't parse\n        }\n        \n        return date.toLocaleDateString('en-US', {\n          weekday: 'long',\n          month: 'short',\n          day: 'numeric'\n        })\n      } catch (error) {\n        console.error('formatDate error:', error, 'for input:', dateStr)\n        return dateStr || 'Unknown Date'\n      }\n    },\n\n    formatMealType(type) {\n      if (!type) return 'Meal'\n      // Handle different possible meal type formats\n      const cleanType = String(type).toLowerCase().trim()\n      const typeMap = {\n        'breakfast': 'Breakfast',\n        'lunch': 'Lunch', \n        'dinner': 'Dinner',\n        'snack': 'Snack',\n        'dessert': 'Dessert'\n      }\n      return typeMap[cleanType] || type.charAt(0).toUpperCase() + type.slice(1)\n    },\n\n    getMealTitle(meal) {\n      console.log('getMealTitle called for meal:', meal)\n      \n      // Handle direct recipe objects (after regeneration)\n      if (meal?.title) {\n        return meal.title\n      }\n      \n      if (meal?.name) {\n        return meal.name\n      }\n      \n      // If we have a recipe with a title, use that\n      if (meal?.recipe?.title) {\n        return meal.recipe.title\n      }\n      \n      // If we have a recipe with a name, use that\n      if (meal?.recipe?.name) {\n        return meal.recipe.name\n      }\n      \n      // Fallback to meal type\n      const mealType = this.formatMealType(meal?.meal_type)\n      console.log('getMealTitle fallback to meal type:', mealType)\n      return mealType || 'Meal'\n    },\n\n    inferMealTypeFromTime(date) {\n      const hour = date.getHours()\n      if (hour >= 5 && hour < 11) return 'breakfast'\n      if (hour >= 11 && hour < 16) return 'lunch'\n      if (hour >= 16 && hour < 22) return 'dinner'\n      return 'snack'\n    },\n\n    getMealTime(meal) {\n      console.log('getMealTime called for meal:', meal)\n      \n      // Check various possible time fields\n      if (meal?.time) {\n        return meal.time\n      }\n      if (meal?.scheduled_time) {\n        return meal.scheduled_time\n      }\n      \n      // Handle nested recipe time fields (for backwards compatibility)\n      if (meal?.recipe?.time) {\n        return meal.recipe.time\n      }\n      if (meal?.recipe?.scheduled_time) {\n        return meal.recipe.scheduled_time\n      }\n      \n      // Default times based on meal type\n      const mealType = meal?.meal_type?.toLowerCase()\n      const defaultTimes = {\n        'breakfast': '08:00',\n        'lunch': '12:30',\n        'dinner': '19:00',\n        'snack': '15:00'\n      }\n      \n      const defaultTime = defaultTimes[mealType] || '12:00'\n      console.log('getMealTime using default time:', defaultTime, 'for meal type:', mealType)\n      return defaultTime\n    },\n\n    getMealRecipe(meal) {\n      // Return the recipe object, handling both wrapped and direct structures\n      return meal?.recipe || meal || {}\n    },\n\n    getMealIngredients(meal) {\n      const recipe = this.getMealRecipe(meal)\n      \n      // Handle different ingredient structures\n      if (recipe.ingredients && Array.isArray(recipe.ingredients)) {\n        return recipe.ingredients\n      }\n      \n      if (recipe.extendedIngredients && Array.isArray(recipe.extendedIngredients)) {\n        return recipe.extendedIngredients\n      }\n      \n      return []\n    },\n\n    getMealTypeClass(type) {\n      if (!type) return 'meal'\n      return String(type).toLowerCase()\n    },\n\n    getTotalMeals() {\n      if (!this.mealPlan.meal_plan_data?.meals) return 0\n\n      let total = 0\n      Object.values(this.mealPlan.meal_plan_data.meals).forEach(dayMeals => {\n        if (Array.isArray(dayMeals)) {\n          total += dayMeals.length\n        }\n      })\n      return total\n    },\n\n    // Helper method to get nutrition values from different possible structures\n    getNutritionValue(recipe, nutrient) {\n      if (!recipe) return 0\n      \n      // Try estimated_nutrition first (from your API response)\n      if (recipe.estimated_nutrition && recipe.estimated_nutrition[nutrient] !== undefined) {\n        return Math.round(recipe.estimated_nutrition[nutrient])\n      }\n      \n      // Fallback to nutrition object\n      if (recipe.nutrition && recipe.nutrition[nutrient] !== undefined) {\n        return Math.round(recipe.nutrition[nutrient])\n      }\n\n      // Try other common naming patterns\n      const nutrientMappings = {\n        'calories': ['calories_per_serving', 'kcal'],\n        'protein': ['protein_per_serving'],\n        'carbs': ['carbs_per_serving', 'carbohydrates'],\n        'fat': ['fat_per_serving', 'fats']\n      }\n\n      if (nutrientMappings[nutrient]) {\n        for (const mapping of nutrientMappings[nutrient]) {\n          if (recipe[mapping] !== undefined) {\n            return Math.round(recipe[mapping])\n          }\n        }\n      }\n      \n      return 0\n    },\n\n    regenerateMeal(date, mealType) {\n      console.log('=== regenerateMeal called ===')\n      console.log('Date:', date)\n      console.log('MealType (raw):', mealType)\n      console.log('MealType type:', typeof mealType)\n      \n      // Ensure mealType is properly defined\n      if (!mealType || mealType === 'undefined' || mealType === 'null') {\n        console.error('Invalid mealType provided:', mealType)\n        // Try to infer from time or provide a fallback\n        const inferredMealType = this.inferMealTypeFromTime(new Date())\n        console.log('Using inferred meal type:', inferredMealType)\n        mealType = inferredMealType\n      }\n      \n      // Clean up the mealType string\n      const cleanMealType = String(mealType).toLowerCase().trim()\n      \n      console.log('Final cleaned mealType:', cleanMealType)\n      console.log('=============================')\n      \n      this.$emit('regenerate-meal', {\n        day: date,\n        mealType: cleanMealType\n      })\n    },\n\n    getAlternatives(date, mealType) {\n      console.log('=== getAlternatives called ===')\n      console.log('Date:', date)\n      console.log('MealType (raw):', mealType)\n      \n      // Ensure mealType is properly defined\n      if (!mealType || mealType === 'undefined' || mealType === 'null') {\n        console.error('Invalid mealType provided for alternatives:', mealType)\n        const inferredMealType = this.inferMealTypeFromTime(new Date())\n        console.log('Using inferred meal type for alternatives:', inferredMealType)\n        mealType = inferredMealType\n      }\n      \n      // Clean up the mealType string\n      const cleanMealType = String(mealType).toLowerCase().trim()\n      \n      console.log('Final cleaned mealType for alternatives:', cleanMealType)\n      console.log('==================================')\n      \n      this.$emit('get-alternatives', {\n        day: date,\n        mealType: cleanMealType\n      })\n    },\n\n    async toggleRecipeSave(recipe) {\n      // Check if we're already processing this recipe\n      if (this.savingRecipe === (recipe.id || recipe.spoonacular_id)) {\n        return\n      }\n\n      this.savingRecipe = recipe.id || recipe.spoonacular_id\n\n      try {\n        console.log('Toggling save status for recipe:', recipe)\n        \n        // Check if this is a fallback recipe that cannot be saved\n        const recipeId = recipe.spoonacular_id || recipe.id\n        if (recipeId && String(recipeId).startsWith('fallback_')) {\n          this.$toast?.error?.('This is a temporary recipe that cannot be saved to your collection.') ||\n          alert('This is a temporary recipe that cannot be saved to your collection.')\n          return\n        }\n        \n        // Import the API service\n        const { mealPlanningApi } = await import('@/services/mealPlanningApi')\n        \n        let response\n        \n        if (recipe.is_saved_by_user) {\n          // Remove from saved recipes\n          if (!recipe.id) {\n            throw new Error('Cannot remove recipe: No recipe ID found')\n          }\n          \n          // Check if this is a fallback recipe ID\n          const isFallbackRecipe = recipe.id.toString().startsWith('fallback_')\n          if (isFallbackRecipe) {\n            throw new Error('Cannot remove fallback recipe: Not saved in database')\n          }\n          \n          response = await mealPlanningApi.removeRecipeFromMyCollection(recipe.id)\n          \n          // Update local state\n          recipe.is_saved_by_user = false\n          \n          const message = response.data?.message || 'Recipe removed from your collection!'\n          this.$toast?.success?.(message) || alert(message)\n          \n        } else {\n          // Save recipe - validate we have essential data\n          if (!recipe.title && !recipe.name) {\n            throw new Error('Recipe must have a title to be saved')\n          }\n          \n          // Prepare recipe data for saving with better validation\n          const recipeData = {\n            title: recipe.title || recipe.name || 'Untitled Recipe',\n            summary: recipe.summary || '',\n            cuisine: recipe.cuisine || '',\n            meal_type: recipe.meal_type || 'dinner',\n            servings: recipe.servings || 4,\n            prep_time_minutes: recipe.prep_time || recipe.prep_time_minutes || 30,\n            cook_time_minutes: recipe.cook_time || recipe.cook_time_minutes || 0,\n            total_time_minutes: recipe.total_time || recipe.total_time_minutes || 30,\n            difficulty_level: recipe.difficulty_level || 'medium',\n            spoonacular_id: recipe.spoonacular_id || recipe.id,\n            ingredients_data: recipe.ingredients || recipe.ingredients_data || [],\n            instructions: recipe.instructions || [],\n            calories_per_serving: this.getNutritionValue(recipe, 'calories') || 300,\n            protein_per_serving: this.getNutritionValue(recipe, 'protein') || 15,\n            carbs_per_serving: this.getNutritionValue(recipe, 'carbs') || 30,\n            fat_per_serving: this.getNutritionValue(recipe, 'fat') || 10,\n            fiber_per_serving: this.getNutritionValue(recipe, 'fiber') || 0,\n            dietary_tags: recipe.dietary_tags || [],\n            allergens: recipe.allergens || [],\n            image_url: recipe.image_url || recipe.image || '',\n            source_url: recipe.source_url || '',\n            source_type: 'spoonacular'\n          }\n          \n          response = await mealPlanningApi.saveRecipeFromMealPlan(recipeData)\n          \n          // Update local state\n          recipe.is_saved_by_user = true\n          \n          // Show success message\n          const message = response.data?.message || 'Recipe saved to your collection!'\n          this.$toast?.success?.(message) || alert(message)\n        }\n        \n      } catch (error) {\n        console.error('Error toggling recipe save status:', error)\n        \n        let errorMessage = 'An error occurred while saving the recipe'\n        \n        if (!navigator.onLine) {\n          errorMessage = 'No internet connection. Please check your network and try again.'\n        } else if (error.response?.status === 400) {\n          // Handle specific backend errors\n          const backendError = error.response.data\n          if (backendError.error === 'Cannot save fallback recipe') {\n            errorMessage = backendError.message || 'This is a temporary recipe that cannot be saved.'\n          } else {\n            errorMessage = backendError.message || 'Invalid recipe data. Please try again.'\n          }\n        } else if (error.response?.status === 404) {\n          errorMessage = 'Recipe not found. This may be a temporary recipe that cannot be saved.'\n        } else if (error.response?.status === 403) {\n          errorMessage = 'You don\\'t have permission to perform this action. Please log in again.'\n        } else if (error.response?.status === 500) {\n          const backendError = error.response.data\n          errorMessage = backendError.details ? \n            `Server error: ${backendError.details}` : \n            'A server error occurred. Please try again later.'\n        } else if (error.message) {\n          errorMessage = error.message\n        }\n        \n        this.$toast?.error?.(errorMessage) || alert(errorMessage)\n        \n      } finally {\n        this.savingRecipe = null\n      }\n    },\n\n    viewRecipeDetails(meal) {\n      if (meal) {\n        // If meal has a recipe property, use that; otherwise use the meal itself as the recipe\n        const recipe = meal.recipe || meal\n        \n        // Ensure the recipe has the required fields for the modal\n        if (!recipe.is_saved_by_user) {\n          recipe.is_saved_by_user = false\n        }\n        \n        this.selectedRecipe = recipe\n        this.showRecipeModal = true\n      }\n    },\n\n    async generateShoppingList() {\n      try {\n        this.shoppingListLoading = true\n        this.shoppingListError = null\n        this.showShoppingListModal = true\n\n        const data = await makeShoppingListRequest(\n          `/api/meal-planning/meal-plans/${this.mealPlan.id}/generate_shopping_list/`,\n          {\n            exclude_items: [],\n            group_by_category: true\n          },\n          this.$store.state.auth.token\n        )\n        this.shoppingListData = data.shopping_list\n        this.shoppingListLoading = false\n\n        // Show success message\n        this.$toast?.success?.('Shopping list generated successfully!') ||\n        console.log('Shopping list generated successfully!')\n\n      } catch (error) {\n        console.error('Error generating shopping list:', error)\n        \n        // Try to provide a fallback shopping list if the API fails\n        if (error.message.includes('JSON') || error.message.includes('Empty response')) {\n          console.log('Attempting fallback shopping list generation...')\n          try {\n            // Generate basic shopping list from meal plan recipes\n            const ingredients = []\n            const recipeNames = []\n            \n            console.log('MealPlan structure:', this.mealPlan)\n            console.log('MealPlan meal_plan_data:', this.mealPlan?.meal_plan_data)\n            \n            if (this.mealPlan?.meal_plan_data?.meals) {\n              // Handle the new meal plan structure\n              Object.entries(this.mealPlan.meal_plan_data.meals).forEach(([date, meals]) => {\n                console.log(`Processing meals for ${date}:`, meals)\n                meals.forEach(meal => {\n                  if (meal.title) {\n                    recipeNames.push(meal.title)\n                  }\n                  \n                  // Check different possible ingredient structures\n                  let mealIngredients = []\n                  \n                  if (meal.extendedIngredients && Array.isArray(meal.extendedIngredients)) {\n                    // Spoonacular format\n                    mealIngredients = meal.extendedIngredients\n                  } else if (meal.ingredients && Array.isArray(meal.ingredients)) {\n                    // Fallback format - simple string array\n                    mealIngredients = meal.ingredients.map(ing => ({\n                      name: ing,\n                      amount: 1,\n                      unit: ''\n                    }))\n                  } else if (meal.recipe?.extendedIngredients) {\n                    // Recipe nested format\n                    mealIngredients = meal.recipe.extendedIngredients\n                  } else if (meal.recipe?.ingredients) {\n                    // Recipe nested format with simple ingredients\n                    mealIngredients = meal.recipe.ingredients.map(ing => ({\n                      name: typeof ing === 'string' ? ing : (ing.name || ing.original || 'Unknown'),\n                      amount: ing.amount || 1,\n                      unit: ing.unit || ''\n                    }))\n                  }\n                  \n                  console.log(`Found ${mealIngredients.length} ingredients for meal:`, meal.title)\n                  \n                  mealIngredients.forEach(ingredient => {\n                    ingredients.push({\n                      name: ingredient.name || ingredient.original || 'Unknown ingredient',\n                      quantity: `${ingredient.amount || 1} ${ingredient.unit || ''}`.trim(),\n                      checked: false,\n                      notes: []\n                    })\n                  })\n                })\n              })\n            }\n            \n            console.log(`Total ingredients found: ${ingredients.length}`)\n            console.log('Recipe names:', recipeNames)\n            \n            const startDate = this.mealPlan?.meal_plan_data?.start_date || new Date().toISOString()\n            const endDate = this.mealPlan?.meal_plan_data?.end_date || new Date().toISOString()\n            \n            this.shoppingListData = {\n              metadata: {\n                total_items: ingredients.length,\n                generated_from: 'meal_plan',\n                start_date: startDate,\n                end_date: endDate,\n                recipe_names: recipeNames\n              },\n              categories: {\n                'other': {\n                  name: 'Other Items',\n                  icon: '',\n                  order: 1,\n                  item_count: ingredients.length,\n                  items: ingredients\n                }\n              }\n            }\n            this.shoppingListLoading = false\n            this.$toast?.warning?.('Shopping list generated with basic ingredients (API unavailable)') ||\n            console.log('Fallback shopping list generated')\n            return\n          } catch (fallbackError) {\n            console.error('Fallback generation also failed:', fallbackError)\n          }\n        }\n        \n        this.shoppingListError = error.message || 'Failed to generate shopping list'\n        this.shoppingListLoading = false\n        \n        // Show error message\n        this.$toast?.error?.(`Error: ${this.shoppingListError}`) ||\n        alert(`Error generating shopping list: ${this.shoppingListError}`)\n      }\n    },\n\n    analyzePlan() {\n      this.$emit('analyze-plan', this.mealPlan)\n    },\n\n    deletePlan() {\n      this.$emit('delete-plan', this.mealPlan)\n    },\n\n    closeRecipeModal() {\n      this.showRecipeModal = false\n      this.selectedRecipe = null\n    },\n\n    closeShoppingListModal() {\n      this.showShoppingListModal = false\n      this.shoppingListData = null\n      this.shoppingListError = null\n      this.shoppingListLoading = false  // Reset loading state\n    },\n\n    async onRecipeSaved(savedRecipe) {\n      console.log('Recipe saved from meal plan detail:', savedRecipe)\n      // Show success message\n      this.$toast?.success?.('Recipe saved to your collection!') ||\n      alert('Recipe saved to your collection!')\n    },\n\n    handleEscapeKey(event) {\n      if (event.key === 'Escape') {\n        this.$emit('close')\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n\n@import '@/assets/styles/_variables';\n\n$primary: #007bff;\n$secondary: #6c757d;\n$success: #28a745;\n$danger: #dc3545;\n$warning: #ffc107;\n$info: #17a2b8;\n$light: #f8f9fa;\n$dark: #343a40;\n$white: #ffffff;\n$gray: #6c757d;\n$gray-light: #adb5bd;\n$gray-lighter: #e9ecef;\n\n\n.modal-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.5);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 1000;\n  padding: 20px;\n}\n\n.modal-content {\n  background: $white;\n  border-radius: 16px;\n  max-width: 1000px;\n  width: 100%;\n  max-height: 90vh;\n  overflow-y: auto;\n  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);\n}\n\n.modal-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 24px 32px;\n  border-bottom: 1px solid $gray-lighter;\n  background: linear-gradient(135deg, rgba($primary, 0.05), rgba($primary, 0.02));\n  position: relative;\n\n  h2 {\n    margin: 0;\n    font-size: 1.6rem;\n    color: #333;\n  }\n\n  .ai-generation-info {\n    display: flex;\n    gap: 8px;\n    align-items: center;\n\n    .ai-badge {\n      background: linear-gradient(135deg, #6f42c1, #8b5cf6);\n      color: white;\n      padding: 4px 8px;\n      border-radius: 6px;\n      font-size: 0.75rem;\n      display: flex;\n      align-items: center;\n      gap: 4px;\n      font-weight: 500;\n\n      i {\n        font-size: 0.7rem;\n      }\n    }\n\n    .model-badge {\n      background: linear-gradient(135deg, #17a2b8, #20c997);\n      color: white;\n      padding: 4px 8px;\n      border-radius: 6px;\n      font-size: 0.75rem;\n      font-weight: 500;\n    }\n  }\n\n  .close-btn {\n    background: none;\n    border: none;\n    font-size: 1.5rem;\n    cursor: pointer;\n    padding: 8px;\n    border-radius: 8px;\n    color: $gray;\n    transition: all 0.2s ease;\n\n    &:hover {\n      background: rgba($gray, 0.1);\n      color: #333;\n    }\n  }\n}\n\n.modal-body {\n  padding: 32px;\n}\n\n.plan-overview {\n  margin-bottom: 32px;\n  padding: 24px;\n  background: $light;\n  border-radius: 12px;\n}\n\n.overview-stats {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));\n  gap: 16px;\n  margin-bottom: 24px;\n}\n\n.stat-item {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 12px 16px;\n  background: $white;\n  border-radius: 8px;\n  border: 1px solid $gray-lighter;\n\n  .stat-label {\n    font-weight: 500;\n    color: $gray;\n    font-size: 0.9rem;\n  }\n\n  .stat-value {\n    font-weight: 600;\n    color: $dark;\n    font-size: 1rem;\n  }\n}\n\n.nutrition-overview {\n  margin-bottom: 24px;\n\n  h4 {\n    margin: 0 0 16px 0;\n    font-size: 1.1rem;\n    color: $dark;\n    font-weight: 600;\n  }\n\n  .nutrition-grid {\n    display: grid;\n    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));\n    gap: 12px;\n  }\n\n  .nutrition-item {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: 8px 12px;\n    background: rgba($success, 0.1);\n    border-radius: 6px;\n    font-size: 0.9rem;\n\n    .nutrition-label {\n      color: $gray;\n      font-weight: 500;\n    }\n\n    .nutrition-value {\n      color: $dark;\n      font-weight: 600;\n    }\n  }\n}\n\n.quality-scores {\n  h4 {\n    margin: 0 0 16px 0;\n    font-size: 1.1rem;\n    color: $dark;\n    font-weight: 600;\n  }\n\n  .scores-grid {\n    display: flex;\n    flex-direction: column;\n    gap: 12px;\n  }\n\n  .score-item {\n    display: flex;\n    align-items: center;\n    gap: 12px;\n\n    .score-label {\n      font-size: 0.9rem;\n      color: $gray;\n      min-width: 140px;\n      font-weight: 500;\n    }\n\n    .score-bar {\n      flex: 1;\n      height: 8px;\n      background: $gray-lighter;\n      border-radius: 4px;\n      overflow: hidden;\n\n      .score-fill {\n        height: 100%;\n        background: linear-gradient(90deg, #28a745, #20c997);\n        transition: width 0.3s ease;\n      }\n    }\n\n    .score-value {\n      font-size: 0.9rem;\n      font-weight: 600;\n      color: $dark;\n      min-width: 40px;\n      text-align: right;\n    }\n  }\n}\n\n.meals-section {\n  h3 {\n    margin: 0 0 24px 0;\n    font-size: 1.3rem;\n    color: $dark;\n    display: flex;\n    align-items: center;\n    gap: 12px;\n\n    &::before {\n      content: '';\n      width: 4px;\n      height: 24px;\n      background: $primary;\n      border-radius: 2px;\n    }\n  }\n}\n\n.meals-grid {\n  display: flex;\n  flex-direction: column;\n  gap: 24px;\n}\n\n.day-meals {\n  border: 1px solid $gray-lighter;\n  border-radius: 12px;\n  overflow: hidden;\n}\n\n.day-header {\n  margin: 0;\n  padding: 16px 20px;\n  background: $primary;\n  color: $white;\n  font-size: 1.1rem;\n  font-weight: 600;\n}\n\n.meals-list {\n  padding: 16px;\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n}\n\n.meal-card {\n  background: $white;\n  border: 1px solid $gray-lighter;\n  border-radius: 12px;\n  padding: 20px;\n  transition: all 0.2s ease;\n\n  &:hover {\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n    transform: translateY(-1px);\n  }\n}\n\n.meal-header {\n  margin-bottom: 16px;\n\n  .meal-title-section {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 8px;\n\n    .meal-title {\n      margin: 0;\n      font-size: 1.2rem;\n      color: $dark;\n      font-weight: 600;\n    }\n\n    .meal-type-badge {\n      padding: 4px 8px;\n      border-radius: 12px;\n      font-size: 0.75rem;\n      font-weight: 500;\n      text-transform: uppercase;\n      \n      &.breakfast {\n        background: rgba(#ffc107, 0.2);\n        color: #d39e00;\n      }\n      \n      &.lunch {\n        background: rgba(#28a745, 0.2);\n        color: #1e7e34;\n      }\n      \n      &.dinner {\n        background: rgba(#dc3545, 0.2);\n        color: #bd2130;\n      }\n      \n      &.snack {\n        background: rgba(#6f42c1, 0.2);\n        color: #59359a;\n      }\n    }\n  }\n\n  .meal-meta {\n    display: flex;\n    gap: 16px;\n    align-items: center;\n\n    .meal-time, .meal-cuisine {\n      display: flex;\n      align-items: center;\n      gap: 4px;\n      font-size: 0.85rem;\n      color: $gray;\n\n      i {\n        font-size: 0.8rem;\n      }\n    }\n  }\n}\n\n.recipe-details {\n  .cooking-info {\n    margin-bottom: 16px;\n    padding: 12px;\n    background: rgba($info, 0.05);\n    border-radius: 8px;\n\n    .time-info {\n      display: flex;\n      flex-wrap: wrap;\n      gap: 16px;\n\n      .time-item {\n        display: flex;\n        align-items: center;\n        gap: 4px;\n        font-size: 0.85rem;\n        color: $gray;\n\n        i {\n          font-size: 0.8rem;\n          color: $info;\n        }\n      }\n    }\n  }\n\n  h6 {\n    margin: 0 0 8px 0;\n    font-size: 1rem;\n    color: $dark;\n    font-weight: 600;\n  }\n}\n\n.meal-nutrition {\n  margin-bottom: 16px;\n  padding: 12px;\n  background: rgba($success, 0.05);\n  border-radius: 8px;\n\n  .nutrition-details {\n    display: grid;\n    grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));\n    gap: 8px;\n\n    .nutrition-item {\n      display: flex;\n      justify-content: space-between;\n      font-size: 0.85rem;\n\n      .nutrition-label {\n        color: $gray;\n        font-weight: 500;\n      }\n\n      .nutrition-value {\n        color: $dark;\n        font-weight: 600;\n      }\n    }\n  }\n}\n\n.ingredients-section, .instructions-section {\n  margin-bottom: 16px;\n  padding: 12px;\n  background: rgba($warning, 0.05);\n  border-radius: 8px;\n\n  .ingredients-list {\n    display: grid;\n    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n    gap: 8px;\n\n    .ingredient-item {\n      display: flex;\n      gap: 4px;\n      font-size: 0.85rem;\n      color: $dark;\n\n      .ingredient-quantity {\n        font-weight: 600;\n        color: $primary;\n      }\n\n      .ingredient-unit {\n        color: $gray;\n      }\n\n      .ingredient-name {\n        flex: 1;\n      }\n    }\n  }\n\n  .instructions-list {\n    .instruction-item {\n      display: flex;\n      gap: 12px;\n      margin-bottom: 8px;\n      font-size: 0.9rem;\n      color: $dark;\n\n      .instruction-number {\n        background: $primary;\n        color: white;\n        width: 24px;\n        height: 24px;\n        border-radius: 50%;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        font-weight: 600;\n        font-size: 0.8rem;\n        flex-shrink: 0;\n      }\n\n      .instruction-text {\n        line-height: 1.5;\n      }\n    }\n  }\n}\n\n.target-info {\n  margin-bottom: 16px;\n  padding: 12px;\n  background: rgba($secondary, 0.05);\n  border-radius: 8px;\n\n  .targets-grid {\n    display: grid;\n    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));\n    gap: 8px;\n\n    .target-item {\n      display: flex;\n      justify-content: space-between;\n      font-size: 0.85rem;\n\n      .target-label {\n        color: $gray;\n        font-weight: 500;\n      }\n\n      .target-value {\n        color: $dark;\n        font-weight: 600;\n      }\n    }\n  }\n}\n\n.meal-actions {\n  display: flex;\n  gap: 8px;\n  flex-wrap: wrap;\n}\n\n.btn {\n  padding: 8px 16px;\n  border: none;\n  border-radius: 6px;\n  cursor: pointer;\n  font-size: 0.85rem;\n  font-weight: 500;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  gap: 6px;\n\n  i {\n    font-size: 0.8rem;\n  }\n\n  &.btn-sm {\n    padding: 6px 12px;\n    font-size: 0.8rem;\n  }\n\n  &.btn-outline {\n    background: transparent;\n    border: 1px solid $gray-lighter;\n    color: $gray;\n\n    &:hover {\n      background: $light;\n      color: $dark;\n    }\n  }\n\n  &.btn-secondary {\n    background: $secondary;\n    color: $white;\n\n    &:hover {\n      background: darken($secondary, 10%);\n    }\n  }\n\n  &.btn-primary {\n    background: $primary;\n    color: $white;\n\n    &:hover {\n      background: darken($primary, 10%);\n    }\n  }\n\n  &.btn-info {\n    background: $info;\n    color: $white;\n\n    &:hover {\n      background: darken($info, 10%);\n    }\n  }\n\n  &.btn-success {\n    background: $success;\n    color: $white;\n\n    &:hover {\n      background: darken($success, 10%);\n    }\n  }\n\n  &.btn-danger {\n    background: $error;\n    color: $white;\n\n    &:hover {\n      background: darken($error, 10%);\n    }\n  }\n\n  &.btn-outline-danger {\n    background: transparent;\n    color: $error;\n    border-color: $error;\n\n    &:hover {\n      background: $error;\n      color: $white;\n      border-color: $error;\n    }\n\n    i.fas.fa-heart {\n      color: $error;\n    }\n  }\n}\n\n.no-meals {\n  text-align: center;\n  padding: 60px 20px;\n  color: $gray;\n\n  i {\n    font-size: 3rem;\n    margin-bottom: 16px;\n    display: block;\n    color: $gray-light;\n  }\n\n  p {\n    margin: 0;\n    font-size: 1.1rem;\n  }\n}\n\n.modal-footer {\n  display: flex;\n  justify-content: space-between;\n  gap: 16px;\n  padding: 24px 32px;\n  border-top: 1px solid $gray-lighter;\n  background: rgba($gray, 0.02);\n}\n\n// Responsive design\n@media (max-width: 768px) {\n  .modal-overlay {\n    padding: 10px;\n  }\n\n  .modal-content {\n    max-height: 95vh;\n  }\n\n  .modal-header {\n    padding: 20px 24px;\n    flex-direction: column;\n    align-items: flex-start;\n    gap: 12px;\n\n    h2 {\n      font-size: 1.4rem;\n    }\n\n    .ai-generation-info {\n      order: -1;\n    }\n\n    .close-btn {\n      position: absolute;\n      top: 16px;\n      right: 16px;\n    }\n  }\n\n  .modal-body {\n    padding: 24px 20px;\n  }\n\n  .overview-stats {\n    grid-template-columns: 1fr;\n  }\n\n  .stat-item {\n    flex-direction: column;\n    align-items: flex-start;\n    gap: 4px;\n  }\n\n  .meal-header {\n    .meal-title-section {\n      flex-direction: column;\n      align-items: flex-start;\n      gap: 8px;\n    }\n\n    .meal-meta {\n      flex-direction: column;\n      align-items: flex-start;\n      gap: 8px;\n    }\n  }\n\n  .nutrition-details {\n    grid-template-columns: 1fr 1fr;\n  }\n\n  .ingredients-list {\n    grid-template-columns: 1fr;\n  }\n\n  .meal-actions {\n    flex-direction: column;\n  }\n\n  .modal-footer {\n    padding: 20px 24px;\n    flex-direction: column;\n\n    .btn {\n      width: 100%;\n      justify-content: center;\n    }\n  }\n}\n\n// Add improved readability styles\n.modal-content {\n  max-width: 90vw;\n  width: 1200px;\n  max-height: 90vh;\n  padding: 0;\n  border-radius: 16px;\n  box-shadow: 0 25px 50px rgba(0, 0, 0, 0.2);\n  overflow: hidden;\n  background: linear-gradient(135deg, #fff 0%, #f8f9fa 100%);\n}\n\n.modal-header {\n  padding: 24px 32px;\n  background: linear-gradient(135deg, $primary 0%, $primary-dark 100%);\n  color: white;\n  border-bottom: none;\n  \n  h2 {\n    margin: 0;\n    font-size: 1.75rem;\n    font-weight: 600;\n    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n  }\n  \n  .ai-generation-info {\n    margin-top: 8px;\n    display: flex;\n    gap: 12px;\n    \n    .ai-badge, .model-badge {\n      padding: 4px 12px;\n      background: rgba(255, 255, 255, 0.2);\n      border-radius: 20px;\n      font-size: 0.85rem;\n      font-weight: 500;\n      backdrop-filter: blur(10px);\n    }\n  }\n  \n  .close-btn {\n    color: white;\n    background: rgba(255, 255, 255, 0.2);\n    border: none;\n    border-radius: 50%;\n    width: 40px;\n    height: 40px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    transition: all 0.2s ease;\n    backdrop-filter: blur(10px);\n    \n    &:hover {\n      background: rgba(255, 255, 255, 0.3);\n      transform: scale(1.05);\n    }\n  }\n}\n\n.modal-body {\n  padding: 32px;\n  max-height: 70vh;\n  overflow-y: auto;\n  scroll-behavior: smooth;\n  \n  // Custom scrollbar\n  &::-webkit-scrollbar {\n    width: 8px;\n  }\n  \n  &::-webkit-scrollbar-track {\n    background: $gray-lightest;\n    border-radius: 4px;\n  }\n  \n  &::-webkit-scrollbar-thumb {\n    background: $gray-light;\n    border-radius: 4px;\n    \n    &:hover {\n      background: $gray;\n    }\n  }\n}\n\n.plan-overview {\n  background: white;\n  border-radius: 12px;\n  padding: 24px;\n  margin-bottom: 32px;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);\n  border: 1px solid rgba($primary, 0.1);\n}\n\n.overview-stats {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n  gap: 20px;\n  margin-bottom: 24px;\n  \n  .stat-item {\n    padding: 16px;\n    background: linear-gradient(135deg, $gray-lightest 0%, white 100%);\n    border-radius: 8px;\n    border-left: 4px solid $primary;\n    transition: transform 0.2s ease, box-shadow 0.2s ease;\n    \n    &:hover {\n      transform: translateY(-2px);\n      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);\n    }\n    \n    .stat-label {\n      font-size: 0.9rem;\n      color: $gray;\n      font-weight: 500;\n      margin-bottom: 4px;\n      display: block;\n    }\n    \n    .stat-value {\n      font-size: 1.1rem;\n      font-weight: 700;\n      color: $secondary;\n    }\n  }\n}\n\n.nutrition-overview {\n  background: white;\n  border-radius: 12px;\n  padding: 20px;\n  margin-bottom: 24px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);\n  \n  h4 {\n    margin: 0 0 16px 0;\n    font-size: 1.2rem;\n    color: $secondary;\n    font-weight: 600;\n    display: flex;\n    align-items: center;\n    gap: 8px;\n    \n    &::before {\n      content: \"\";\n      font-size: 1.1rem;\n    }\n  }\n  \n  .nutrition-grid {\n    display: grid;\n    grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));\n    gap: 12px;\n  }\n  \n  .nutrition-item {\n    padding: 12px 16px;\n    background: linear-gradient(135deg, rgba($success, 0.1) 0%, rgba($success, 0.05) 100%);\n    border-radius: 8px;\n    border: 1px solid rgba($success, 0.2);\n    text-align: center;\n    transition: transform 0.2s ease;\n    \n    &:hover {\n      transform: scale(1.02);\n    }\n    \n    .nutrition-label {\n      font-size: 0.85rem;\n      color: $gray;\n      font-weight: 500;\n      margin-bottom: 4px;\n      display: block;\n    }\n    \n    .nutrition-value {\n      font-size: 1.1rem;\n      font-weight: 700;\n      color: $success-dark;\n    }\n  }\n}\n\n.quality-scores {\n  background: white;\n  border-radius: 12px;\n  padding: 20px;\n  margin-bottom: 24px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);\n  \n  h4 {\n    margin: 0 0 20px 0;\n    font-size: 1.2rem;\n    color: $secondary;\n    font-weight: 600;\n    display: flex;\n    align-items: center;\n    gap: 8px;\n    \n    &::before {\n      content: \"\";\n      font-size: 1.1rem;\n    }\n  }\n  \n  .score-item {\n    margin-bottom: 16px;\n    padding: 12px;\n    background: $gray-lightest;\n    border-radius: 8px;\n    \n    .score-label {\n      font-size: 0.95rem;\n      color: $gray-dark;\n      font-weight: 500;\n      margin-bottom: 8px;\n      display: block;\n    }\n    \n    .score-bar {\n      height: 10px;\n      background: rgba($gray-light, 0.3);\n      border-radius: 6px;\n      overflow: hidden;\n      margin-bottom: 4px;\n      \n      .score-fill {\n        height: 100%;\n        background: linear-gradient(90deg, $primary 0%, $primary-light 100%);\n        border-radius: 6px;\n        transition: width 0.5s ease;\n        box-shadow: 0 2px 4px rgba($primary, 0.3);\n      }\n    }\n    \n    .score-value {\n      font-size: 0.9rem;\n      font-weight: 600;\n      color: $primary-dark;\n      text-align: right;\n      display: block;\n    }\n  }\n}\n\n.meals-section {\n  h3 {\n    font-size: 1.4rem;\n    color: $secondary;\n    font-weight: 600;\n    margin-bottom: 24px;\n    display: flex;\n    align-items: center;\n    gap: 12px;\n    \n    &::before {\n      content: \"\";\n      font-size: 1.2rem;\n    }\n  }\n}\n\n.day-section {\n  background: white;\n  border-radius: 12px;\n  padding: 24px;\n  margin-bottom: 24px;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);\n  border: 1px solid rgba($primary, 0.1);\n  \n  h4 {\n    font-size: 1.2rem;\n    color: $primary-dark;\n    font-weight: 600;\n    margin-bottom: 20px;\n    padding-bottom: 8px;\n    border-bottom: 2px solid rgba($primary, 0.2);\n  }\n}\n\n.meals-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));\n  gap: 20px;\n}\n\n.meal-card {\n  background: linear-gradient(135deg, white 0%, $gray-lightest 100%);\n  border-radius: 12px;\n  padding: 20px;\n  border: 1px solid rgba($gray-light, 0.5);\n  transition: all 0.3s ease;\n  position: relative;\n  overflow: hidden;\n  \n  &::before {\n    content: \"\";\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 4px;\n    background: linear-gradient(90deg, $primary 0%, $primary-light 100%);\n  }\n  \n  &:hover {\n    transform: translateY(-4px);\n    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);\n    border-color: rgba($primary, 0.3);\n  }\n  \n  .meal-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: flex-start;\n    margin-bottom: 16px;\n    \n    .meal-info {\n      flex: 1;\n      \n      .meal-title {\n        font-size: 1.1rem;\n        font-weight: 600;\n        color: $secondary;\n        margin-bottom: 4px;\n        line-height: 1.3;\n      }\n      \n      .meal-time {\n        font-size: 0.9rem;\n        color: $gray;\n        font-weight: 500;\n        \n        &::before {\n          content: \"\";\n          margin-right: 4px;\n        }\n      }\n    }\n  }\n  \n  .meal-actions {\n    display: flex;\n    gap: 8px;\n    flex-shrink: 0;\n    \n    .btn {\n      padding: 8px 12px;\n      border-radius: 6px;\n      border: none;\n      font-size: 0.85rem;\n      font-weight: 500;\n      transition: all 0.2s ease;\n      cursor: pointer;\n      \n      &.btn-outline {\n        background: transparent;\n        border: 1px solid $gray-light;\n        color: $gray-dark;\n        \n        &:hover {\n          background: $gray-light;\n          color: white;\n        }\n      }\n      \n      &.btn-primary {\n        background: linear-gradient(135deg, $primary 0%, $primary-dark 100%);\n        color: white;\n        \n        &:hover {\n          transform: scale(1.05);\n          box-shadow: 0 4px 12px rgba($primary, 0.3);\n        }\n        \n        &:disabled {\n          opacity: 0.6;\n          cursor: not-allowed;\n          transform: none;\n        }\n      }\n    }\n  }\n}\n\n// Enhanced responsive design\n@media (max-width: 768px) {\n  .modal-content {\n    width: 95vw;\n    margin: 2.5vh auto;\n  }\n  \n  .modal-header {\n    padding: 20px 24px;\n    \n    h2 {\n      font-size: 1.4rem;\n    }\n  }\n  \n  .modal-body {\n    padding: 20px;\n  }\n  \n  .overview-stats {\n    grid-template-columns: 1fr;\n    gap: 12px;\n  }\n  \n  .nutrition-grid {\n    grid-template-columns: repeat(2, 1fr);\n  }\n  \n  .meals-grid {\n    grid-template-columns: 1fr;\n  }\n}\n\n// Improved loading states\n.loading-placeholder {\n  background: linear-gradient(90deg, $gray-lighter 25%, rgba($gray-lighter, 0.5) 50%, $gray-lighter 75%);\n  background-size: 200% 100%;\n  animation: loading 1.5s infinite;\n  border-radius: 8px;\n  height: 20px;\n  \n  &.loading-title {\n    height: 24px;\n    width: 60%;\n    margin-bottom: 12px;\n  }\n  \n  &.loading-text {\n    height: 16px;\n    width: 80%;\n  }\n}\n\n@keyframes loading {\n  0% {\n    background-position: 200% 0;\n  }\n  100% {\n    background-position: -200% 0;\n  }\n}\n</style>","<!-- src/components/meal-planning/RecipeDetailModal.vue -->\n<template>\n  <div class=\"recipe-modal-overlay\" @click.self=\"$emit('close')\">\n    <div class=\"recipe-modal\" @click.stop>\n      <div class=\"modal-header\">\n        <div class=\"header-content\">\n          <h2>{{ recipe.title }}</h2>\n          <div class=\"recipe-meta\">\n            <span class=\"badge cuisine\">{{ formatCuisine(recipe.cuisine) }}</span>\n            <span class=\"badge meal-type\">{{ formatMealType(recipe.meal_type) }}</span>\n            <span class=\"badge difficulty\" :class=\"getDifficultyClass(recipe.difficulty_level)\">\n              {{ formatDifficulty(recipe.difficulty_level) }}\n            </span>\n          </div>\n        </div>\n        <button class=\"close-btn\" @click=\"$emit('close')\">\n          <i class=\"fas fa-times\"></i>\n        </button>\n      </div>\n      \n      <div class=\"modal-body\">\n        <!-- Recipe Image and Quick Stats -->\n        <div class=\"recipe-hero\">\n          <div class=\"image-wrapper\" v-if=\"recipe.image_url\">\n            <img :src=\"recipe.image_url\" :alt=\"recipe.title\" @error=\"imageError\" />\n            <div class=\"image-overlay\">\n              <div class=\"recipe-stats\">\n                <div class=\"stat\">\n                  <i class=\"fas fa-clock\"></i>\n                  <span>{{ formatTime(recipe.total_time_minutes) }}</span>\n                </div>\n                <div class=\"stat\">\n                  <i class=\"fas fa-users\"></i>\n                  <span>{{ recipe.servings }} {{ recipe.servings === 1 ? 'serving' : 'servings' }}</span>\n                </div>\n                <div class=\"stat\">\n                  <i class=\"fas fa-fire\"></i>\n                  <span>{{ Math.round(recipe.calories_per_serving) || 'N/A' }} cal</span>\n                </div>\n              </div>\n            </div>\n          </div>\n          \n          <!-- Nutrition Information -->\n          <div class=\"nutrition-panel\">\n            <h3>Nutrition Information</h3>\n            <div class=\"nutrition-toggle\">\n              <label class=\"toggle-label\">\n                <input \n                  type=\"checkbox\" \n                  v-model=\"showTotalNutrition\"\n                  class=\"nutrition-toggle-input\"\n                />\n                <span class=\"toggle-text\">\n                  {{ showTotalNutrition ? 'Total for ' + adjustedServings + ' servings' : 'Per serving' }}\n                </span>\n              </label>\n            </div>\n            <div class=\"nutrition-grid\">\n              <div class=\"nutrition-item calories\">\n                <div class=\"nutrition-value\">{{ calculatedNutrition.calories || 'N/A' }}</div>\n                <div class=\"nutrition-label\">Calories</div>\n              </div>\n              <div class=\"nutrition-item protein\">\n                <div class=\"nutrition-value\">{{ calculatedNutrition.protein }}g</div>\n                <div class=\"nutrition-label\">Protein</div>\n              </div>\n              <div class=\"nutrition-item carbs\">\n                <div class=\"nutrition-value\">{{ calculatedNutrition.carbs }}g</div>\n                <div class=\"nutrition-label\">Carbs</div>\n              </div>\n              <div class=\"nutrition-item fat\">\n                <div class=\"nutrition-value\">{{ calculatedNutrition.fat }}g</div>\n                <div class=\"nutrition-label\">Fat</div>\n              </div>\n            </div>\n            \n            <!-- Dietary Tags -->\n            <div v-if=\"recipe.dietary_tags && recipe.dietary_tags.length\" class=\"dietary-tags\">\n              <span v-for=\"tag in recipe.dietary_tags\" :key=\"tag\" class=\"dietary-tag\">\n                {{ formatTag(tag) }}\n              </span>\n            </div>\n          </div>\n        </div>\n\n        <!-- Serving Size Adjustment -->\n        <div class=\"serving-adjustment-section\">\n          <h3>\n            <i class=\"fas fa-utensils\"></i>\n            Adjust Serving Size\n          </h3>\n          <div class=\"serving-controls\">\n            <div class=\"serving-input-group\">\n              <label for=\"serving-input\">Number of Servings:</label>\n              <div class=\"serving-input-wrapper\">\n                <button \n                  class=\"serving-btn decrease\" \n                  @click=\"decreaseServings\"\n                  :disabled=\"adjustedServings <= 1\"\n                >\n                  <i class=\"fas fa-minus\"></i>\n                </button>\n                <input \n                  id=\"serving-input\"\n                  type=\"number\" \n                  v-model.number=\"adjustedServings\" \n                  min=\"1\" \n                  max=\"20\"\n                  class=\"serving-input no-arrows\"\n                  @input=\"validateServings\"\n                />\n                <button \n                  class=\"serving-btn increase\" \n                  @click=\"increaseServings\"\n                  :disabled=\"adjustedServings >= 20\"\n                >\n                  <i class=\"fas fa-plus\"></i>\n                </button>\n              </div>\n              <div class=\"serving-info\">\n                <span class=\"original-info\">Original: {{ recipe.servings }} {{ recipe.servings === 1 ? 'serving' : 'servings' }}</span>\n                <span v-if=\"servingMultiplier !== 1\" class=\"multiplier-info\">\n                  ({{ servingMultiplier.toFixed(2) }}x {{ servingMultiplier > 1 ? 'larger' : 'smaller' }})\n                </span>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <!-- Recipe Summary -->\n        <div v-if=\"recipe.summary\" class=\"summary-section\">\n          <h3>About This Recipe</h3>\n          <p class=\"summary\" v-html=\"cleanSummary(recipe.summary)\"></p>\n        </div>\n\n        <!-- Ingredients Section -->\n        <div class=\"ingredients-section\" v-if=\"recipe.ingredients_data && recipe.ingredients_data.length\">\n          <h3>\n            <i class=\"fas fa-list-ul\"></i>\n            Ingredients\n            <span v-if=\"servingMultiplier !== 1\" class=\"ingredients-multiplier\">\n              (adjusted for {{ adjustedServings }} {{ adjustedServings === 1 ? 'serving' : 'servings' }})\n            </span>\n          </h3>\n          <div class=\"ingredients-grid\">\n            <div \n              v-for=\"(ing, idx) in adjustedIngredients\" \n              :key=\"idx\"\n              class=\"ingredient-item\"\n            >\n              <span class=\"ingredient-text\">{{ ing.formatted }}</span>\n              <span v-if=\"servingMultiplier !== 1 && ing.original !== ing.formatted\" class=\"ingredient-original\">\n                Original: {{ ing.original }}\n              </span>\n            </div>\n          </div>\n        </div>\n\n        <!-- Instructions Section -->\n        <div class=\"instructions-section\" v-if=\"normalizedInstructions.length\">\n          <h3>\n            <i class=\"fas fa-clipboard-list\"></i>\n            Instructions\n          </h3>\n          <div class=\"instructions-list\">\n            <div \n              v-for=\"(step, idx) in normalizedInstructions\" \n              :key=\"idx\"\n              class=\"instruction-step\"\n            >\n              <div class=\"step-number\">{{ idx + 1 }}</div>\n              <div class=\"step-content\">{{ step.step || step.description || step }}</div>\n            </div>\n          </div>\n        </div>\n\n        <!-- Source Information -->\n        <div v-if=\"recipe.source_url || recipe.source\" class=\"source-section\">\n          <div class=\"source-info\">\n            <span class=\"source-label\">Source:</span>\n            <a v-if=\"recipe.source_url\" :href=\"recipe.source_url\" target=\"_blank\" class=\"source-link\">\n              View Original Recipe <i class=\"fas fa-external-link-alt\"></i>\n            </a>\n            <span v-else class=\"source-text\">{{ recipe.source || 'Recipe Database' }}</span>\n          </div>\n        </div>\n      </div>\n      \n      <div class=\"modal-footer\">\n        <button class=\"btn btn-outline\" @click=\"$emit('close')\">\n          <i class=\"fas fa-times\"></i>\n          Close\n        </button>\n        <button \n          v-if=\"localRecipe\"\n          :class=\"['btn', localRecipe.is_saved_by_user ? 'btn-success' : 'btn-primary']\" \n          @click=\"toggleSaveRecipe\" \n          :disabled=\"saving\"\n        >\n          <i v-if=\"saving\" class=\"fas fa-spinner fa-spin\"></i>\n          <i v-else-if=\"localRecipe.is_saved_by_user\" class=\"fas fa-heart\"></i>\n          <i v-else class=\"far fa-heart\"></i>\n          {{ saving ? (localRecipe.is_saved_by_user ? 'Removing...' : 'Saving...') : (localRecipe.is_saved_by_user ? 'Saved' : 'Save Recipe') }}\n        </button>\n        <button class=\"btn btn-info\" @click=\"generateShoppingList\">\n          <i class=\"fas fa-shopping-cart\"></i>\n          Shopping List\n        </button>\n      </div>\n    </div>\n\n    <!-- Shopping List Modal -->\n    <shopping-list-modal\n      v-if=\"showShoppingListModal\"\n      :shopping-list=\"shoppingListData\"\n      :loading=\"shoppingListLoading\"\n      :error=\"shoppingListError\"\n      @close=\"closeShoppingListModal\"\n      @retry=\"generateShoppingList\"\n    />\n  </div>\n</template>\n\n<script>\nimport ShoppingListModal from './ShoppingListModal.vue'\nimport { makeShoppingListRequest } from '@/utils/fetchUtils'\n\nexport default {\n  name: 'RecipeDetailModal',\n  components: {\n    ShoppingListModal\n  },\n  props: {\n    recipe: {\n      type: Object,\n      required: true\n    }\n  },\n  data() {\n    return {\n      saving: false,\n      showShoppingListModal: false,\n      shoppingListData: null,\n      shoppingListLoading: false,\n      shoppingListError: null,\n      localRecipe: null,  // Local copy to avoid mutating props\n      adjustedServings: 4,  // Default serving size\n      showTotalNutrition: false  // Toggle between per serving and total nutrition\n    }\n  },\n  mounted() {\n    // Create a local copy of the recipe to avoid mutating props\n    this.localRecipe = { ...this.recipe }\n    // Initialize serving size to recipe's original serving size\n    this.adjustedServings = this.recipe.servings || 4\n\n  },\n  watch: {\n    recipe: {\n      handler(newRecipe) {\n        // Update local copy when prop changes\n        this.localRecipe = { ...newRecipe }\n        // Reset serving size to recipe's original serving size\n        this.adjustedServings = newRecipe.servings || 4\n\n      },\n      immediate: true\n    }\n  },\n  computed: {\n    servingMultiplier() {\n      const originalServings = this.recipe.servings || 4\n      return this.adjustedServings / originalServings\n    },\n\n    calculatedNutrition() {\n      const multiplier = this.showTotalNutrition ? this.adjustedServings : 1\n      const baseMultiplier = this.servingMultiplier * multiplier\n      \n      return {\n        calories: Math.round((this.recipe.calories_per_serving || 0) * baseMultiplier),\n        protein: Math.round((this.recipe.protein_per_serving || 0) * baseMultiplier),\n        carbs: Math.round((this.recipe.carbs_per_serving || 0) * baseMultiplier),\n        fat: Math.round((this.recipe.fat_per_serving || 0) * baseMultiplier),\n        fiber: Math.round((this.recipe.fiber_per_serving || 0) * baseMultiplier)\n      }\n    },\n\n    adjustedIngredients() {\n      if (!this.recipe.ingredients_data || !Array.isArray(this.recipe.ingredients_data)) {\n        return []\n      }\n\n      return this.recipe.ingredients_data.map(ingredient => {\n        const original = this.formatIngredient(ingredient)\n        const adjusted = this.adjustIngredientQuantity(ingredient)\n        \n        return {\n          original: original,\n          formatted: adjusted,\n          raw: ingredient\n        }\n      })\n    },\n\n    normalizedInstructions() {\n      const instr = this.recipe.instructions || []\n      \n      // Handle empty instructions\n      if (!instr || instr.length === 0) {\n        return []\n      }\n      \n      // If it's already an array of objects with step property, use it as is\n      if (instr.length && typeof instr[0] === 'object' && instr[0].step) {\n        return instr\n      }\n      \n      // If it's an array of strings, convert to objects\n      if (instr.length && typeof instr[0] === 'string') {\n        return instr.map((stepText, i) => ({\n          number: i + 1,\n          step: stepText,\n          description: stepText\n        }))\n      }\n      \n      // If it's an array of objects without step property, try to extract the step text\n      if (instr.length && typeof instr[0] === 'object') {\n        return instr.map((stepObj, i) => ({\n          number: stepObj.number || i + 1,\n          step: stepObj.step || stepObj.description || stepObj.instruction || `Step ${i + 1}`,\n          description: stepObj.step || stepObj.description || stepObj.instruction || `Step ${i + 1}`\n        }))\n      }\n      \n      return []\n    }\n  },\n  methods: {\n    formatIngredient(ing) {\n      if (typeof ing === 'string') return ing\n      \n      // Handle different ingredient formats\n      if (ing.original) return ing.original\n      \n      const amount = ing.amount || ing.quantity || ''\n      const unit = ing.unit || ''\n      const name = ing.name || ing.ingredient || ''\n      \n      if (amount && unit) {\n        return `${amount} ${unit} ${name}`.trim()\n      } else if (amount) {\n        return `${amount} ${name}`.trim()\n      }\n      \n      return name || 'Ingredient'\n    },\n\n    adjustIngredientQuantity(ingredient) {\n      if (typeof ingredient === 'string') {\n        return this.adjustStringIngredient(ingredient)\n      }\n\n      // Handle different ingredient formats\n      if (ingredient.original) {\n        return this.adjustStringIngredient(ingredient.original)\n      }\n\n      const amount = ingredient.amount || ingredient.quantity || ''\n      const unit = ingredient.unit || ''\n      const name = ingredient.name || ingredient.ingredient || ''\n\n      if (amount && !isNaN(parseFloat(amount))) {\n        const adjustedAmount = this.adjustQuantity(parseFloat(amount))\n        if (unit) {\n          return `${adjustedAmount} ${unit} ${name}`.trim()\n        } else {\n          return `${adjustedAmount} ${name}`.trim()\n        }\n      }\n\n      return name || 'Ingredient'\n    },\n\n    adjustStringIngredient(ingredientStr) {\n      if (!ingredientStr || this.servingMultiplier === 1) {\n        return ingredientStr\n      }\n\n      // Regular expressions to match different quantity patterns\n      const patterns = [\n        // Fractions: 1/2, 3/4, etc.\n        /^(\\d+\\/\\d+|\\d+\\s+\\d+\\/\\d+)/,\n        // Decimals: 1.5, 2.25, etc.\n        /^(\\d+\\.?\\d*)/,\n        // Ranges: 2-3, 1-2, etc.\n        /^(\\d+)-(\\d+)/\n      ]\n\n      for (const pattern of patterns) {\n        const match = ingredientStr.match(pattern)\n        if (match) {\n          const originalQuantity = match[0]\n          let adjustedQuantity\n\n          if (originalQuantity.includes('/')) {\n            // Handle fractions\n            adjustedQuantity = this.adjustFraction(originalQuantity)\n          } else if (originalQuantity.includes('-')) {\n            // Handle ranges\n            const [min, max] = originalQuantity.split('-').map(num => parseFloat(num))\n            const adjustedMin = this.adjustQuantity(min)\n            const adjustedMax = this.adjustQuantity(max)\n            adjustedQuantity = `${adjustedMin}-${adjustedMax}`\n          } else {\n            // Handle regular numbers\n            adjustedQuantity = this.adjustQuantity(parseFloat(originalQuantity))\n          }\n\n          return ingredientStr.replace(originalQuantity, adjustedQuantity)\n        }\n      }\n\n      return ingredientStr\n    },\n\n    adjustQuantity(quantity) {\n      const adjusted = quantity * this.servingMultiplier\n      \n      // Round to appropriate precision\n      if (adjusted < 0.1) {\n        return adjusted.toFixed(2)\n      } else if (adjusted < 1) {\n        return adjusted.toFixed(1)\n      } else if (adjusted < 10) {\n        return Math.round(adjusted * 4) / 4  // Round to nearest quarter\n      } else {\n        return Math.round(adjusted)\n      }\n    },\n\n    adjustFraction(fractionStr) {\n      // Convert fraction to decimal, adjust, then convert back to fraction if reasonable\n      const parts = fractionStr.trim().split(/\\s+/)\n      let decimal = 0\n\n      for (const part of parts) {\n        if (part.includes('/')) {\n          const [num, den] = part.split('/').map(n => parseInt(n))\n          decimal += num / den\n        } else {\n          decimal += parseInt(part)\n        }\n      }\n\n      const adjusted = decimal * this.servingMultiplier\n      return this.decimalToFraction(adjusted)\n    },\n\n    decimalToFraction(decimal) {\n      // Convert decimal back to a readable fraction or mixed number\n      const tolerance = 1.0E-6\n      let num = decimal\n      let den = 1\n\n      // Find the fraction representation\n      while (Math.abs(num - Math.round(num)) > tolerance) {\n        num *= 10\n        den *= 10\n      }\n\n      num = Math.round(num)\n\n      // Simplify the fraction\n      const gcd = this.findGCD(num, den)\n      num /= gcd\n      den /= gcd\n\n      // Convert to mixed number if appropriate\n      if (num >= den) {\n        const whole = Math.floor(num / den)\n        const remainder = num % den\n        if (remainder === 0) {\n          return whole.toString()\n        } else {\n          return `${whole} ${remainder}/${den}`\n        }\n      } else if (den === 1) {\n        return num.toString()\n      } else {\n        return `${num}/${den}`\n      }\n    },\n\n    findGCD(a, b) {\n      // Greatest Common Divisor using Euclidean algorithm\n      return b === 0 ? a : this.findGCD(b, a % b)\n    },\n\n    increaseServings() {\n      if (this.adjustedServings < 20) {\n        this.adjustedServings++\n      }\n    },\n\n    decreaseServings() {\n      if (this.adjustedServings > 1) {\n        this.adjustedServings--\n      }\n    },\n\n    validateServings() {\n      if (this.adjustedServings < 1) {\n        this.adjustedServings = 1\n      } else if (this.adjustedServings > 20) {\n        this.adjustedServings = 20\n      }\n    },\n\n    formatTime(minutes) {\n      if (!minutes) return 'N/A'\n      if (minutes < 60) return `${minutes}min`\n      const hours = Math.floor(minutes / 60)\n      const remainingMins = minutes % 60\n      return remainingMins > 0 ? `${hours}h ${remainingMins}min` : `${hours}h`\n    },\n\n    formatCuisine(cuisine) {\n      if (!cuisine) return ''\n      return cuisine.charAt(0).toUpperCase() + cuisine.slice(1)\n    },\n\n    formatMealType(mealType) {\n      const formats = {\n        'breakfast': 'Breakfast',\n        'lunch': 'Lunch',\n        'dinner': 'Dinner',\n        'snack': 'Snack',\n        'dessert': 'Dessert'\n      }\n      return formats[mealType] || mealType\n    },\n\n    formatDifficulty(difficulty) {\n      const formats = {\n        'easy': 'Easy',\n        'medium': 'Medium',\n        'hard': 'Hard'\n      }\n      return formats[difficulty] || 'Medium'\n    },\n\n    getDifficultyClass(difficulty) {\n      return `difficulty-${difficulty || 'medium'}`\n    },\n\n    formatTag(tag) {\n      return tag.replace(/_/g, ' ').replace(/\\b\\w/g, l => l.toUpperCase())\n    },\n\n    cleanSummary(summary) {\n      if (!summary) return ''\n      // Remove HTML tags but keep line breaks\n      return summary.replace(/<[^>]*>/g, '').replace(/\\n/g, '<br>')\n    },\n\n    imageError(event) {\n      // Instead of hiding the image, show a placeholder\n      event.target.src = this.getPlaceholderImage()\n      event.target.style.background = '#f8f9fa'\n      event.target.style.border = '2px dashed #dee2e6'\n      event.target.style.color = '#6c757d'\n      event.target.style.display = 'flex'\n      event.target.style.alignItems = 'center'\n      event.target.style.justifyContent = 'center'\n      event.target.style.fontSize = '14px'\n      event.target.onerror = null // Prevent infinite loop\n    },\n\n    getPlaceholderImage() {\n      // Return a data URL for a simple placeholder image\n      return 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDMwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIzMDAiIGhlaWdodD0iMjAwIiBmaWxsPSIjRjhGOUZBIiBzdHJva2U9IiNERUUyRTYiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWRhc2hhcnJheT0iNSA1Ii8+Cjx0ZXh0IHg9IjE1MCIgeT0iMTAwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmaWxsPSIjNkM3NTdEIiBmb250LWZhbWlseT0iLWFwcGxlLXN5c3RlbSwgQmxpbmtNYWNTeXN0ZW1Gb250LCBTZWdvZSBVSSwgUm9ib3RvLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0cHgiPk5vIEltYWdlPC90ZXh0Pgo8cGF0aCBkPSJNMTIwIDgwSDEzMFY5MEgxMjBWODBaTTE0MCA4MEgxNTBWOTBIMTQwVjgwWk0xNjAgODBIMTcwVjkwSDE2MFY4MFoiIGZpbGw9IiM2Qzc1N0QiLz4KPC9zdmc+'\n    },\n\n    async toggleSaveRecipe() {\n      if (!this.localRecipe) {\n        console.warn('No recipe provided to toggle')\n        return\n      }\n      \n      this.saving = true\n      try {\n        console.log('Toggling save status for recipe:', this.localRecipe)\n        \n        // Import the API service\n        const { mealPlanningApi } = await import('@/services/mealPlanningApi')\n        \n        let response\n        \n        if (this.localRecipe.is_saved_by_user) {\n          // Remove from saved recipes\n          if (!this.localRecipe.id) {\n            throw new Error('Cannot remove recipe: No recipe ID found')\n          }\n          \n          // Check if this is a fallback recipe ID\n          const isFallbackRecipe = this.localRecipe.id.toString().startsWith('fallback_')\n          if (isFallbackRecipe) {\n            throw new Error('Cannot remove fallback recipe: Not saved in database')\n          }\n          \n          response = await mealPlanningApi.removeRecipeFromMyCollection(this.localRecipe.id)\n          \n          // Update local state\n          this.localRecipe.is_saved_by_user = false\n          \n          const message = response.data?.message || 'Recipe removed from your collection!'\n          this.$toast?.success?.(message) || alert(message)\n        } else {\n          // Save recipe - handle different recipe types\n          const isFallbackRecipe = this.localRecipe.id && this.localRecipe.id.toString().startsWith('fallback_')\n          \n          if (this.localRecipe.spoonacular_id && !this.localRecipe.created_by) {\n            // This is a spoonacular recipe from meal plan\n            response = await mealPlanningApi.saveRecipeFromMealPlan(this.localRecipe)\n          } else if (this.localRecipe.id && !isFallbackRecipe && this.localRecipe.created_by) {\n            // This is an existing recipe in the database created by a user\n            response = await mealPlanningApi.saveRecipeToMyCollection(this.localRecipe.id)\n          } else {\n            // This is recipe data that needs to be saved (fallback recipes, new recipes, etc.)\n            response = await mealPlanningApi.saveRecipeFromMealPlan(this.localRecipe)\n          }\n          \n          // Update local state\n          this.localRecipe.is_saved_by_user = true\n          \n          const message = response.data?.message || 'Recipe saved to your collection!'\n          this.$toast?.success?.(message) || alert(message)\n          \n          // Emit the saved recipe\n\n          this.$emit('recipe-saved', response.data.recipe || this.localRecipe)\n        }\n        \n      } catch (error) {\n        console.error('Error toggling recipe save status:', error)\n        \n        let errorMessage = 'An error occurred while saving the recipe'\n        \n        if (!navigator.onLine) {\n          errorMessage = 'No internet connection. Please check your network and try again.'\n        } else if (error.response?.status === 404) {\n          errorMessage = 'Recipe not found. This may be a temporary recipe that cannot be saved.'\n        } else if (error.response?.status === 403) {\n          errorMessage = 'You don\\'t have permission to perform this action. Please log in again.'\n        } else if (error.response?.status === 500) {\n          errorMessage = 'Server error. Please try again in a moment.'\n        } else if (error.response?.status === 400) {\n          errorMessage = error.response?.data?.message || 'Invalid recipe data. Please try again.'\n        } else if (error.response?.data?.error) {\n          errorMessage = error.response.data.error\n        } else if (error.response?.data?.message) {\n          errorMessage = error.response.data.message\n        } else if (error.message?.includes('Network Error')) {\n          errorMessage = 'Network error. Please check your connection and try again.'\n        } else if (error.message) {\n          errorMessage = error.message\n        }\n        \n        this.$toast?.error?.(errorMessage) || alert(`Error: ${errorMessage}`)\n        \n        // Reset the save state if it was changed optimistically\n        if (this.localRecipe.is_saved_by_user) {\n          this.localRecipe.is_saved_by_user = false\n        }\n      } finally {\n        this.saving = false\n      }\n    },\n\n    async generateShoppingList() {\n      try {\n        this.shoppingListLoading = true\n        this.shoppingListError = null\n        this.showShoppingListModal = true\n\n        // Check if this is a fallback recipe\n        const recipeId = this.localRecipe?.id || this.recipe?.id\n        const isFallbackRecipe = recipeId && recipeId.toString().startsWith('fallback_')\n        \n        if (isFallbackRecipe) {\n          // Generate shopping list from recipe data directly for fallback recipes\n          const ingredients = this.adjustedIngredients || []\n          this.shoppingListData = {\n            metadata: {\n              total_items: ingredients.length,\n              generated_from: 'recipe',\n              recipe_names: [this.localRecipe.title || 'Recipe']\n            },\n            categories: {\n              'other': {\n                name: 'Other Items',\n                icon: '',\n                order: 1,\n                item_count: ingredients.length,\n                items: ingredients.map(ingredient => ({\n                  name: ingredient.formatted || ingredient.original || ingredient.name || 'Unknown ingredient',\n                  quantity: `${ingredient.amount || 1} ${ingredient.unit || ''}`.trim(),\n                  checked: false,\n                  notes: []\n                }))\n              }\n            }\n          }\n          this.shoppingListLoading = false\n          this.$toast?.success?.('Shopping list generated successfully!') ||\n          console.log('Shopping list generated successfully!')\n          return\n        }\n\n        const data = await makeShoppingListRequest(\n          `/api/meal-planning/recipes/${recipeId}/generate_shopping_list/`,\n          {\n            servings_multiplier: this.servingMultiplier,\n            adjusted_servings: this.adjustedServings\n          },\n          this.$store.state.auth.token\n        )\n        this.shoppingListData = data.shopping_list\n        this.shoppingListLoading = false\n\n        // Show success message\n        this.$toast?.success?.('Shopping list generated successfully!') ||\n        console.log('Shopping list generated successfully!')\n\n      } catch (error) {\n        console.error('Error generating shopping list:', error)\n        \n        // Try to provide a fallback shopping list if the API fails\n        if (error.message.includes('JSON') || error.message.includes('Empty response')) {\n          console.log('Attempting fallback shopping list generation...')\n          try {\n            // Generate shopping list from recipe data directly as fallback\n            const ingredients = this.adjustedIngredients || []\n            this.shoppingListData = {\n              metadata: {\n                total_items: ingredients.length,\n                generated_from: 'recipe',\n                recipe_names: [this.localRecipe?.title || this.recipe?.title || 'Recipe']\n              },\n              categories: {\n                'other': {\n                  name: 'Other Items',\n                  icon: '',\n                  order: 1,\n                  item_count: ingredients.length,\n                  items: ingredients.map(ingredient => ({\n                    name: ingredient.formatted || ingredient.original || ingredient.name || 'Unknown ingredient',\n                    quantity: `${ingredient.amount || 1} ${ingredient.unit || ''}`.trim(),\n                    checked: false,\n                    notes: []\n                  }))\n                }\n              }\n            }\n            this.shoppingListLoading = false\n            this.$toast?.warning?.('Shopping list generated with basic ingredients (API unavailable)') ||\n            console.log('Fallback shopping list generated')\n            return\n          } catch (fallbackError) {\n            console.error('Fallback generation also failed:', fallbackError)\n          }\n        }\n        \n        this.shoppingListError = error.message || 'Failed to generate shopping list'\n        this.shoppingListLoading = false\n        \n        // Show error message\n        this.$toast?.error?.(`Error: ${this.shoppingListError}`) ||\n        alert(`Error generating shopping list: ${this.shoppingListError}`)\n      }\n    },\n\n    closeShoppingListModal() {\n      this.showShoppingListModal = false\n      this.shoppingListData = null\n      this.shoppingListError = null\n      this.shoppingListLoading = false  // Reset loading state\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import '@/assets/styles/_variables.scss';\n@import '@/assets/styles/_utilities.scss';\n\n.recipe-modal-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.7);\n  display: flex;\n  justify-content: center;\n  align-items: flex-start;\n  z-index: 1000;\n  padding: 20px;\n  overflow-y: auto;\n  backdrop-filter: blur(5px);\n}\n\n.recipe-modal {\n  background: $white;\n  border-radius: 20px;\n  max-width: 900px;\n  width: 100%;\n  max-height: 95vh;\n  overflow-y: auto;\n  box-shadow: $shadow-lg;\n  margin: 20px 0;\n  animation: modalSlideIn 0.3s ease-out;\n}\n\n@keyframes modalSlideIn {\n  from {\n    opacity: 0;\n    transform: translateY(-20px) scale(0.95);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0) scale(1);\n  }\n}\n\n.modal-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  padding: 32px 32px 24px;\n  border-bottom: 1px solid $gray-lighter;\n  background: linear-gradient(135deg, $primary-light 0%, $primary 100%);\n  color: $white;\n  border-radius: 20px 20px 0 0;\n\n  .header-content {\n    flex: 1;\n\n    h2 {\n      margin: 0 0 12px 0;\n      font-size: 2rem;\n      font-weight: 700;\n      line-height: 1.2;\n    }\n  }\n\n  .recipe-meta {\n    display: flex;\n    flex-wrap: wrap;\n    gap: 8px;\n  }\n\n  .badge {\n    padding: 4px 12px;\n    border-radius: 16px;\n    font-size: 0.8rem;\n    font-weight: 600;\n    background: rgba($white, 0.2);\n    color: $white;\n\n    &.difficulty-easy { background: rgba($success, 0.8); }\n    &.difficulty-medium { background: rgba($warning, 0.8); }\n    &.difficulty-hard { background: rgba($error, 0.8); }\n  }\n\n  .close-btn {\n    background: rgba($white, 0.2);\n    border: none;\n    font-size: 1.5rem;\n    cursor: pointer;\n    padding: 12px;\n    border-radius: 50%;\n    color: $white;\n    transition: all 0.2s ease;\n    margin-left: 16px;\n\n    &:hover {\n      background: rgba($white, 0.3);\n      transform: scale(1.1);\n    }\n  }\n}\n\n.modal-body {\n  padding: 0;\n}\n\n.recipe-hero {\n  display: grid;\n  grid-template-columns: 1fr 300px;\n  gap: 0;\n  background: $white;\n\n  @include responsive('md') {\n    grid-template-columns: 1fr;\n  }\n}\n\n.image-wrapper {\n  position: relative;\n  height: 300px;\n  overflow: hidden;\n\n  img {\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n  }\n\n  .image-overlay {\n    position: absolute;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    background: linear-gradient(transparent, rgba(0,0,0,0.8));\n    padding: 20px;\n    color: $white;\n  }\n\n  .recipe-stats {\n    display: flex;\n    justify-content: space-around;\n    gap: 16px;\n  }\n\n  .stat {\n    display: flex;\n    align-items: center;\n    gap: 6px;\n    font-size: 0.9rem;\n    font-weight: 600;\n\n    i {\n      font-size: 1rem;\n      color: $primary-light;\n    }\n  }\n}\n\n.nutrition-panel {\n  padding: 24px;\n  background: $gray-lighter;\n  border-left: 1px solid $gray-lighter;\n\n  @include responsive('md') {\n    border-left: none;\n    border-top: 1px solid $gray-lighter;\n  }\n\n  h3 {\n    margin: 0 0 16px 0;\n    font-size: 1.2rem;\n    color: $primary-dark;\n  }\n\n  .nutrition-toggle {\n    margin-bottom: 16px;\n\n    .toggle-label {\n      display: flex;\n      align-items: center;\n      gap: 8px;\n      cursor: pointer;\n      font-size: 0.9rem;\n      color: $gray-dark;\n\n      .nutrition-toggle-input {\n        width: 16px;\n        height: 16px;\n        cursor: pointer;\n      }\n\n      .toggle-text {\n        font-weight: 500;\n      }\n    }\n  }\n}\n\n.nutrition-grid {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 16px;\n  margin-bottom: 20px;\n}\n\n.nutrition-item {\n  text-align: center;\n  padding: 12px;\n  background: $white;\n  border-radius: 12px;\n  box-shadow: $shadow-sm;\n\n  .nutrition-value {\n    font-size: 1.4rem;\n    font-weight: 700;\n    margin-bottom: 4px;\n  }\n\n  .nutrition-label {\n    font-size: 0.8rem;\n    color: $gray;\n    text-transform: uppercase;\n    font-weight: 600;\n  }\n\n  &.calories .nutrition-value { color: #e74c3c; }\n  &.protein .nutrition-value { color: #3498db; }\n  &.carbs .nutrition-value { color: #f39c12; }\n  &.fat .nutrition-value { color: #9b59b6; }\n}\n\n.dietary-tags {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 6px;\n\n  .dietary-tag {\n    padding: 4px 8px;\n    background: $primary;\n    color: $white;\n    border-radius: 12px;\n    font-size: 0.75rem;\n    font-weight: 600;\n  }\n}\n\n.serving-adjustment-section {\n  padding: 24px 32px;\n  border-bottom: 1px solid $gray-lighter;\n\n  h3 {\n    margin: 0 0 16px 0;\n    font-size: 1.3rem;\n    color: $primary-dark;\n    display: flex;\n    align-items: center;\n    gap: 8px;\n\n    i {\n      color: $primary;\n    }\n  }\n}\n\n.serving-controls {\n  display: flex;\n  align-items: center;\n  gap: 15px;\n  margin-top: 10px;\n\n  .serving-input-group {\n    display: flex;\n    align-items: center;\n    gap: 10px;\n\n    label {\n      font-size: 0.9rem;\n      color: $gray-dark;\n      font-weight: 600;\n    }\n\n    .serving-input-wrapper {\n      display: flex;\n      align-items: center;\n      border: 1px solid $gray-light;\n      border-radius: 8px;\n      overflow: hidden;\n      width: 120px;\n\n      .serving-btn {\n        background: $gray-light;\n        border: none;\n        padding: 8px 12px;\n        cursor: pointer;\n        color: $gray-dark;\n        font-size: 1rem;\n        transition: all 0.2s ease;\n        flex: 1;\n\n        &:hover:not(:disabled) {\n          background: $gray;\n          color: $white;\n        }\n\n        &:disabled {\n          opacity: 0.5;\n          cursor: not-allowed;\n        }\n\n        i {\n          font-size: 0.8rem;\n        }\n      }\n\n      .serving-input {\n        flex: 1;\n        border: none;\n        padding: 8px 10px;\n        text-align: center;\n        font-size: 1rem;\n        font-weight: 600;\n        color: $gray-dark;\n        background: transparent;\n        outline: none;\n\n        &.no-arrows {\n          /* Hide number input arrows in Chrome, Safari, Edge */\n          &::-webkit-outer-spin-button,\n          &::-webkit-inner-spin-button {\n            -webkit-appearance: none;\n            margin: 0;\n          }\n\n          /* Hide number input arrows in Firefox */\n          -moz-appearance: textfield;\n        }\n      }\n    }\n\n    .serving-info {\n      font-size: 0.8rem;\n      color: $gray;\n      margin-top: 5px;\n\n      .original-info {\n        margin-right: 5px;\n      }\n\n      .multiplier-info {\n        font-style: italic;\n      }\n    }\n  }\n}\n\n.summary-section,\n.ingredients-section,\n.instructions-section,\n.source-section {\n  padding: 24px 32px;\n  border-bottom: 1px solid $gray-lighter;\n\n  h3 {\n    margin: 0 0 16px 0;\n    font-size: 1.3rem;\n    color: $primary-dark;\n    display: flex;\n    align-items: center;\n    gap: 8px;\n\n    i {\n      color: $primary;\n    }\n\n    .ingredients-multiplier {\n      font-size: 0.9rem;\n      font-weight: 400;\n      color: $primary;\n      font-style: italic;\n      margin-left: 8px;\n    }\n  }\n}\n\n.summary {\n  font-size: 1rem;\n  line-height: 1.6;\n  color: $gray-dark;\n  margin: 0;\n}\n\n.ingredients-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n  gap: 12px;\n}\n\n.ingredient-item {\n  padding: 12px 16px;\n  background: $gray-lighter;\n  border-radius: 8px;\n  border-left: 3px solid $primary;\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n\n  .ingredient-text {\n    font-weight: 500;\n    color: $gray-dark;\n  }\n\n  .ingredient-original {\n    font-size: 0.8rem;\n    color: $gray;\n    font-style: italic;\n  }\n}\n\n.instructions-list {\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n}\n\n.instruction-step {\n  display: flex;\n  gap: 16px;\n  align-items: flex-start;\n\n  .step-number {\n    min-width: 32px;\n    height: 32px;\n    background: $primary;\n    color: $white;\n    border-radius: 50%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-weight: 700;\n    font-size: 0.9rem;\n  }\n\n  .step-content {\n    flex: 1;\n    font-size: 1rem;\n    line-height: 1.6;\n    color: $gray-dark;\n    padding-top: 4px;\n  }\n}\n\n.source-section {\n  border-bottom: none;\n\n  .source-info {\n    display: flex;\n    align-items: center;\n    gap: 12px;\n    font-size: 0.9rem;\n\n    .source-label {\n      font-weight: 600;\n      color: $gray;\n    }\n\n    .source-link {\n      color: $primary;\n      text-decoration: none;\n      font-weight: 500;\n\n      &:hover {\n        text-decoration: underline;\n      }\n\n      i {\n        margin-left: 4px;\n        font-size: 0.8rem;\n      }\n    }\n  }\n}\n\n.modal-footer {\n  padding: 24px 32px;\n  background: $gray-lighter;\n  border-radius: 0 0 20px 20px;\n}\n\n.footer-actions {\n  display: flex;\n  justify-content: flex-end;\n  gap: 12px;\n  flex-wrap: wrap;\n\n  @include responsive('sm') {\n    justify-content: center;\n  }\n}\n\n.btn {\n  padding: 12px 24px;\n  border-radius: 8px;\n  font-weight: 600;\n  text-decoration: none;\n  display: inline-flex;\n  align-items: center;\n  gap: 8px;\n  transition: all 0.2s ease;\n  cursor: pointer;\n  border: 2px solid;\n  font-size: 0.9rem;\n\n  &:disabled {\n    opacity: 0.6;\n    cursor: not-allowed;\n  }\n\n  &.btn-outline {\n    background: transparent;\n    color: $gray-dark;\n    border-color: $gray-lighter;\n\n    &:hover:not(:disabled) {\n      background: $gray-lighter;\n      border-color: $gray;\n    }\n  }\n\n  &.btn-primary {\n    background: $primary;\n    color: $white;\n    border-color: $primary;\n\n    &:hover:not(:disabled) {\n      background: $primary-dark;\n      border-color: $primary-dark;\n      transform: translateY(-1px);\n    }\n  }\n\n  &.btn-success {\n    background: $success;\n    color: $white;\n    border-color: $success;\n\n    &:hover:not(:disabled) {\n      background: darken($success, 10%);\n      border-color: darken($success, 10%);\n      transform: translateY(-1px);\n    }\n  }\n\n  &.btn-outline-danger {\n    background: transparent;\n    color: $error;\n    border-color: $error;\n\n    &:hover:not(:disabled) {\n      background: $error;\n      color: $white;\n      border-color: $error;\n      transform: translateY(-1px);\n    }\n\n    i.fas.fa-heart {\n      color: $error;\n    }\n  }\n}\n\n// Mobile responsive adjustments\n@include responsive('sm') {\n  .recipe-modal {\n    margin: 10px;\n    max-height: 98vh;\n  }\n\n  .modal-header {\n    padding: 20px;\n\n    .header-content h2 {\n      font-size: 1.5rem;\n    }\n  }\n\n  .modal-body {\n    .summary-section,\n    .ingredients-section,\n    .instructions-section,\n    .source-section {\n      padding: 20px;\n    }\n  }\n\n  .nutrition-panel {\n    padding: 20px;\n  }\n\n  .modal-footer {\n    padding: 20px;\n  }\n}\n</style>\n","<template>\n  <div class=\"shopping-list-modal\">\n    <div class=\"modal-overlay\" @click=\"$emit('close')\"></div>\n    <div class=\"modal-content\">\n      <div class=\"modal-header\">\n        <h2 class=\"modal-title\">\n          <i class=\"fas fa-shopping-cart\"></i>\n          Shopping List\n        </h2>\n        <div class=\"modal-actions\">\n          <button \n            @click=\"printShoppingList\" \n            class=\"btn btn-secondary\"\n            title=\"Print Shopping List\"\n          >\n            <i class=\"fas fa-print\"></i>\n          </button>\n          <button @click=\"$emit('close')\" class=\"btn btn-ghost\">\n            <i class=\"fas fa-times\"></i>\n          </button>\n        </div>\n      </div>\n\n      <div class=\"modal-body\">\n        <!-- Loading State -->\n        <div v-if=\"loading\" class=\"loading-state\">\n          <div class=\"spinner\"></div>\n          <p>Generating your shopping list...</p>\n        </div>\n\n        <!-- Error State -->\n        <div v-else-if=\"error\" class=\"error-state\">\n          <div class=\"error-icon\">\n            <i class=\"fas fa-exclamation-triangle\"></i>\n          </div>\n          <h3>Unable to Generate Shopping List</h3>\n          <p>{{ error }}</p>\n          <button @click=\"retry\" class=\"btn btn-primary\">\n            <i class=\"fas fa-redo\"></i>\n            Try Again\n          </button>\n        </div>\n\n        <!-- Shopping List Content -->\n        <div v-else-if=\"shoppingList\" class=\"shopping-list-content\">\n          <!-- Metadata -->\n          <div class=\"shopping-list-meta\">\n            <div class=\"meta-item\">\n              <i class=\"fas fa-info-circle\"></i>\n              <span>{{ shoppingList.metadata.total_items }} items</span>\n            </div>\n            <div class=\"meta-item\" v-if=\"shoppingList.metadata.recipe_names\">\n              <i class=\"fas fa-utensils\"></i>\n              <span>{{ shoppingList.metadata.recipe_names.length }} recipes</span>\n            </div>\n            <div class=\"meta-item\" v-if=\"shoppingList.metadata.generated_from === 'meal_plan'\">\n              <i class=\"fas fa-calendar\"></i>\n              <span>{{ formatDateRange() }}</span>\n            </div>\n          </div>\n\n          <!-- Shopping Categories -->\n          <div class=\"shopping-categories\">\n            <div \n              v-for=\"(category, categoryKey) in sortedCategories\" \n              :key=\"categoryKey\"\n              class=\"shopping-category\"\n              :class=\"{ 'category-completed': isCategoryCompleted(category) }\"\n            >\n              <div class=\"category-header\" @click=\"toggleCategory(categoryKey)\">\n                <div class=\"category-info\">\n                  <span class=\"category-icon\">{{ category.icon }}</span>\n                  <h3 class=\"category-name\">{{ category.name }}</h3>\n                  <span class=\"item-count\">({{ getCompletedCount(category) }}/{{ category.item_count }})</span>\n                </div>\n                <div class=\"category-toggle\">\n                  <i class=\"fas\" :class=\"collapsedCategories[categoryKey] ? 'fa-chevron-down' : 'fa-chevron-up'\"></i>\n                </div>\n              </div>\n\n              <div \n                v-show=\"!collapsedCategories[categoryKey]\"\n                class=\"category-items\"\n              >\n                <div \n                  v-for=\"(item, itemIndex) in category.items\" \n                  :key=\"itemIndex\"\n                  class=\"shopping-item\"\n                  :class=\"{ 'item-checked': item.checked }\"\n                >\n                  <label class=\"item-checkbox\">\n                    <input \n                      type=\"checkbox\" \n                      v-model=\"item.checked\"\n                      @change=\"updateProgress\"\n                    >\n                    <span class=\"checkmark\"></span>\n                  </label>\n                  <div class=\"item-details\">\n                    <span class=\"item-name\" :class=\"{ 'strikethrough': item.checked }\">\n                      {{ item.name }}\n                    </span>\n                    <span class=\"item-quantity\">{{ item.quantity }}</span>\n                    <div v-if=\"item.notes && item.notes.length > 0\" class=\"item-notes\">\n                      <small>Additional: {{ item.notes.join(', ') }}</small>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <!-- Progress Bar -->\n          <div class=\"progress-section\">\n            <div class=\"progress-info\">\n              <span>Progress: {{ completedItems }}/{{ totalItems }} items</span>\n              <span class=\"progress-percentage\">{{ progressPercentage }}%</span>\n            </div>\n            <div class=\"progress-bar\">\n              <div \n                class=\"progress-fill\" \n                :style=\"{ width: progressPercentage + '%' }\"\n              ></div>\n            </div>\n          </div>\n\n          <!-- Recipe Names (if from recipes) -->\n          <div v-if=\"shoppingList.metadata.recipe_names\" class=\"recipe-list\">\n            <h4>Recipes included:</h4>\n            <div class=\"recipe-chips\">\n              <span \n                v-for=\"recipeName in shoppingList.metadata.recipe_names\" \n                :key=\"recipeName\"\n                class=\"recipe-chip\"\n              >\n                {{ recipeName }}\n              </span>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'ShoppingListModal',\n  props: {\n    shoppingList: {\n      type: Object,\n      default: null\n    },\n    loading: {\n      type: Boolean,\n      default: false\n    },\n    error: {\n      type: String,\n      default: null\n    }\n  },\n  data() {\n    return {\n      collapsedCategories: {},\n      completedItems: 0,\n      totalItems: 0\n    }\n  },\n  computed: {\n    sortedCategories() {\n      if (!this.shoppingList?.categories) return {}\n      \n      // Sort categories by their order property\n      const categories = this.shoppingList.categories\n      return Object.keys(categories)\n        .sort((a, b) => categories[a].order - categories[b].order)\n        .reduce((sorted, key) => {\n          sorted[key] = categories[key]\n          return sorted\n        }, {})\n    },\n    progressPercentage() {\n      if (this.totalItems === 0) return 0\n      return Math.round((this.completedItems / this.totalItems) * 100)\n    }\n  },\n  watch: {\n    shoppingList: {\n      handler() {\n        this.updateProgress()\n        this.initializeCategories()\n      },\n      immediate: true\n    }\n  },\n  methods: {\n    initializeCategories() {\n      if (!this.shoppingList?.categories) return\n      \n      // Initialize collapsed state for categories\n      Object.keys(this.shoppingList.categories).forEach(categoryKey => {\n        if (!(categoryKey in this.collapsedCategories)) {\n          this.collapsedCategories[categoryKey] = false\n        }\n      })\n    },\n    \n    toggleCategory(categoryKey) {\n      this.collapsedCategories[categoryKey] = !this.collapsedCategories[categoryKey]\n    },\n    \n    updateProgress() {\n      if (!this.shoppingList?.categories) return\n      \n      let completed = 0\n      let total = 0\n      \n      Object.values(this.shoppingList.categories).forEach(category => {\n        category.items.forEach(item => {\n          total++\n          if (item.checked) completed++\n        })\n      })\n      \n      this.completedItems = completed\n      this.totalItems = total\n    },\n    \n    isCategoryCompleted(category) {\n      return category.items.every(item => item.checked)\n    },\n    \n    getCompletedCount(category) {\n      return category.items.filter(item => item.checked).length\n    },\n    \n    formatDateRange() {\n      if (!this.shoppingList?.metadata) return ''\n      \n      const start = new Date(this.shoppingList.metadata.start_date).toLocaleDateString()\n      const end = new Date(this.shoppingList.metadata.end_date).toLocaleDateString()\n      \n      if (start === end) {\n        return start\n      }\n      return `${start} - ${end}`\n    },\n    \n    printShoppingList() {\n      const printContent = this.generatePrintContent()\n      const printWindow = window.open('', '_blank')\n      \n      printWindow.document.write(`\n        <html>\n          <head>\n            <title>Shopping List</title>\n            <style>\n              body { font-family: Arial, sans-serif; margin: 20px; }\n              h1 { color: #2563eb; border-bottom: 2px solid #2563eb; padding-bottom: 10px; }\n              h2 { color: #374151; margin-top: 25px; margin-bottom: 10px; }\n              .category-section { margin-bottom: 20px; }\n              .item { margin: 5px 0; padding: 5px; }\n              .item-name { font-weight: 500; }\n              .item-quantity { color: #6b7280; margin-left: 10px; }\n              .meta-info { background: #f3f4f6; padding: 10px; border-radius: 5px; margin-bottom: 20px; }\n              ul { list-style-type: none; padding-left: 0; }\n              li { margin: 8px 0; }\n              .checkbox { width: 15px; height: 15px; border: 1px solid #ccc; display: inline-block; margin-right: 10px; }\n              @media print {\n                .no-print { display: none; }\n              }\n            </style>\n          </head>\n          <body>\n            ${printContent}\n          </body>\n        </html>\n      `)\n      \n      printWindow.document.close()\n      printWindow.print()\n      printWindow.close()\n    },\n    \n    generatePrintContent() {\n      if (!this.shoppingList) return ''\n      \n      let html = '<h1> Shopping List</h1>'\n      \n      // Metadata\n      if (this.shoppingList.metadata) {\n        html += '<div class=\"meta-info\">'\n        html += `<p><strong>Total Items:</strong> ${this.shoppingList.metadata.total_items}</p>`\n        \n        if (this.shoppingList.metadata.recipe_names) {\n          html += `<p><strong>Recipes:</strong> ${this.shoppingList.metadata.recipe_names.join(', ')}</p>`\n        }\n        \n        if (this.shoppingList.metadata.generated_from === 'meal_plan') {\n          html += `<p><strong>Meal Plan Period:</strong> ${this.formatDateRange()}</p>`\n        }\n        \n        html += '</div>'\n      }\n      \n      // Categories\n      Object.entries(this.sortedCategories).forEach(([, category]) => {\n        html += `<div class=\"category-section\">`\n        html += `<h2>${category.icon} ${category.name}</h2>`\n        html += '<ul>'\n        \n        category.items.forEach(item => {\n          html += '<li>'\n          html += '<span class=\"checkbox\"></span>'\n          html += `<span class=\"item-name\">${item.name}</span>`\n          html += `<span class=\"item-quantity\">${item.quantity}</span>`\n          if (item.notes && item.notes.length > 0) {\n            html += `<br><small>Additional: ${item.notes.join(', ')}</small>`\n          }\n          html += '</li>'\n        })\n        \n        html += '</ul></div>'\n      })\n      \n      return html\n    },\n    \n    retry() {\n      this.$emit('retry')\n    }\n  }\n}\n</script>\n\n<style scoped>\n.shopping-list-modal {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 1000;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.modal-overlay {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.5);\n  backdrop-filter: blur(5px);\n}\n\n.modal-content {\n  position: relative;\n  background: white;\n  border-radius: 12px;\n  box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);\n  width: 90%;\n  max-width: 800px;\n  max-height: 90vh;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n}\n\n.modal-header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 24px;\n  border-bottom: 1px solid #e5e7eb;\n  background: linear-gradient(135deg, #2563eb 0%, #3b82f6 100%);\n  color: white;\n}\n\n.modal-title {\n  margin: 0;\n  font-size: 1.5rem;\n  font-weight: 600;\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n\n.modal-actions {\n  display: flex;\n  gap: 8px;\n}\n\n.modal-body {\n  flex: 1;\n  overflow: auto;\n  padding: 24px;\n}\n\n/* Loading State */\n.loading-state {\n  text-align: center;\n  padding: 60px 20px;\n}\n\n.spinner {\n  width: 40px;\n  height: 40px;\n  border: 4px solid #e5e7eb;\n  border-top: 4px solid #2563eb;\n  border-radius: 50%;\n  animation: spin 1s linear infinite;\n  margin: 0 auto 20px;\n}\n\n@keyframes spin {\n  0% { transform: rotate(0deg); }\n  100% { transform: rotate(360deg); }\n}\n\n/* Error State */\n.error-state {\n  text-align: center;\n  padding: 60px 20px;\n}\n\n.error-icon {\n  font-size: 3rem;\n  color: #ef4444;\n  margin-bottom: 20px;\n}\n\n.error-state h3 {\n  color: #374151;\n  margin-bottom: 12px;\n}\n\n.error-state p {\n  color: #6b7280;\n  margin-bottom: 24px;\n}\n\n/* Shopping List Content */\n.shopping-list-meta {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 16px;\n  margin-bottom: 24px;\n  padding: 16px;\n  background: #f8fafc;\n  border-radius: 8px;\n  border: 1px solid #e2e8f0;\n}\n\n.meta-item {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  color: #475569;\n  font-size: 0.875rem;\n}\n\n.meta-item i {\n  color: #2563eb;\n}\n\n/* Shopping Categories */\n.shopping-categories {\n  margin-bottom: 24px;\n}\n\n.shopping-category {\n  border: 1px solid #e5e7eb;\n  border-radius: 8px;\n  margin-bottom: 16px;\n  overflow: hidden;\n  transition: all 0.2s ease;\n}\n\n.category-completed {\n  background: #f0fdf4;\n  border-color: #16a34a;\n}\n\n.category-header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 16px;\n  background: #f9fafb;\n  cursor: pointer;\n  transition: background-color 0.2s ease;\n}\n\n.category-header:hover {\n  background: #f3f4f6;\n}\n\n.category-completed .category-header {\n  background: #dcfce7;\n}\n\n.category-info {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n\n.category-icon {\n  font-size: 1.25rem;\n}\n\n.category-name {\n  margin: 0;\n  font-size: 1.125rem;\n  font-weight: 600;\n  color: #374151;\n}\n\n.item-count {\n  color: #6b7280;\n  font-size: 0.875rem;\n}\n\n.category-toggle i {\n  color: #6b7280;\n  transition: transform 0.2s ease;\n}\n\n.category-items {\n  padding: 0 16px 16px;\n}\n\n/* Shopping Items */\n.shopping-item {\n  display: flex;\n  align-items: flex-start;\n  gap: 12px;\n  padding: 12px;\n  border-radius: 6px;\n  transition: background-color 0.2s ease;\n  margin-bottom: 8px;\n}\n\n.shopping-item:hover {\n  background: #f8fafc;\n}\n\n.item-checked {\n  background: #f0fdf4;\n}\n\n.item-checkbox {\n  position: relative;\n  cursor: pointer;\n  margin-top: 2px;\n}\n\n.item-checkbox input[type=\"checkbox\"] {\n  opacity: 0;\n  position: absolute;\n}\n\n.checkmark {\n  display: inline-block;\n  width: 20px;\n  height: 20px;\n  border: 2px solid #d1d5db;\n  border-radius: 4px;\n  position: relative;\n  transition: all 0.2s ease;\n}\n\n.item-checkbox input[type=\"checkbox\"]:checked + .checkmark {\n  background: #16a34a;\n  border-color: #16a34a;\n}\n\n.item-checkbox input[type=\"checkbox\"]:checked + .checkmark::after {\n  content: \"\";\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  color: white;\n  font-size: 12px;\n  font-weight: bold;\n}\n\n.item-details {\n  flex: 1;\n}\n\n.item-name {\n  display: block;\n  font-weight: 500;\n  color: #374151;\n  margin-bottom: 4px;\n  transition: all 0.2s ease;\n}\n\n.strikethrough {\n  text-decoration: line-through;\n  color: #9ca3af;\n}\n\n.item-quantity {\n  color: #6b7280;\n  font-size: 0.875rem;\n}\n\n.item-notes {\n  margin-top: 4px;\n  color: #6b7280;\n  font-size: 0.75rem;\n}\n\n/* Progress Section */\n.progress-section {\n  margin-bottom: 24px;\n  padding: 16px;\n  background: #f8fafc;\n  border-radius: 8px;\n  border: 1px solid #e2e8f0;\n}\n\n.progress-info {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 8px;\n  font-size: 0.875rem;\n  color: #374151;\n}\n\n.progress-percentage {\n  font-weight: 600;\n  color: #2563eb;\n}\n\n.progress-bar {\n  width: 100%;\n  height: 8px;\n  background: #e5e7eb;\n  border-radius: 4px;\n  overflow: hidden;\n}\n\n.progress-fill {\n  height: 100%;\n  background: linear-gradient(90deg, #2563eb 0%, #16a34a 100%);\n  transition: width 0.3s ease;\n}\n\n/* Recipe List */\n.recipe-list {\n  padding: 16px;\n  background: #fef3c7;\n  border-radius: 8px;\n  border: 1px solid #f59e0b;\n}\n\n.recipe-list h4 {\n  margin: 0 0 12px 0;\n  color: #92400e;\n  font-size: 0.875rem;\n  font-weight: 600;\n}\n\n.recipe-chips {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 8px;\n}\n\n.recipe-chip {\n  background: #fbbf24;\n  color: #92400e;\n  padding: 4px 12px;\n  border-radius: 16px;\n  font-size: 0.75rem;\n  font-weight: 500;\n}\n\n/* Buttons */\n.btn {\n  padding: 8px 16px;\n  border: none;\n  border-radius: 6px;\n  font-size: 0.875rem;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  display: inline-flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.btn:hover {\n  transform: translateY(-1px);\n}\n\n.btn-primary {\n  background: #2563eb;\n  color: white;\n}\n\n.btn-primary:hover {\n  background: #1d4ed8;\n}\n\n.btn-secondary {\n  background: #6b7280;\n  color: white;\n}\n\n.btn-secondary:hover {\n  background: #4b5563;\n}\n\n.btn-ghost {\n  background: transparent;\n  color: white;\n}\n\n.btn-ghost:hover {\n  background: rgba(255, 255, 255, 0.1);\n}\n\n/* Responsive Design */\n@media (max-width: 768px) {\n  .modal-content {\n    width: 95%;\n    max-height: 95vh;\n  }\n  \n  .modal-header {\n    padding: 16px;\n  }\n  \n  .modal-title {\n    font-size: 1.25rem;\n  }\n  \n  .modal-body {\n    padding: 16px;\n  }\n  \n  .shopping-list-meta {\n    flex-direction: column;\n    gap: 8px;\n  }\n  \n  .category-header {\n    padding: 12px;\n  }\n  \n  .category-name {\n    font-size: 1rem;\n  }\n  \n  .shopping-item {\n    padding: 8px;\n  }\n}\n</style>","import { render } from \"./ShoppingListModal.vue?vue&type=template&id=37d6b95d&scoped=true\"\nimport script from \"./ShoppingListModal.vue?vue&type=script&lang=js\"\nexport * from \"./ShoppingListModal.vue?vue&type=script&lang=js\"\n\nimport \"./ShoppingListModal.vue?vue&type=style&index=0&id=37d6b95d&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-37d6b95d\"]])\n\nexport default __exports__","/**\n * Utility functions for making robust fetch requests with proper error handling\n */\n\n/**\n * Makes a fetch request with robust JSON parsing and error handling\n * @param {string} url - The URL to fetch\n * @param {object} options - Fetch options\n * @returns {Promise<object>} Parsed JSON response\n * @throws {Error} Detailed error information\n */\nexport async function robustFetch(url, options = {}) {\n  try {\n    const response = await fetch(url, options)\n    \n    // Handle non-OK status codes\n    if (!response.ok) {\n      let errorText = ''\n      try {\n        errorText = await response.text()\n      } catch (textError) {\n        console.warn('Could not read error response text:', textError)\n      }\n      \n      console.error('API Error Response:', errorText)\n      throw new Error(`HTTP error! status: ${response.status}, message: ${errorText || 'Unknown error'}`)\n    }\n\n    // Get response text\n    const responseText = await response.text()\n    console.log('API Response Text Length:', responseText.length)\n    \n    // Check if response has content\n    if (!responseText || responseText.trim() === '') {\n      throw new Error('Empty response from server')\n    }\n\n    // Check content type\n    const contentType = response.headers.get('content-type')\n    if (!contentType || !contentType.includes('application/json')) {\n      console.error('Invalid content type:', contentType)\n      console.error('Response text:', responseText)\n      throw new Error(`Expected JSON response, got: ${contentType || 'unknown'}`)\n    }\n\n    // Parse JSON with detailed error handling\n    let data\n    try {\n      data = JSON.parse(responseText)\n    } catch (parseError) {\n      console.error('JSON Parse Error:', parseError)\n      console.error('Response text that failed to parse:', responseText.substring(0, 1000) + (responseText.length > 1000 ? '...' : ''))\n      throw new Error(`Invalid JSON response: ${parseError.message}`)\n    }\n\n    return data\n  } catch (error) {\n    // Re-throw with additional context\n    if (error.name === 'TypeError' && error.message.includes('fetch')) {\n      throw new Error(`Network error: ${error.message}`)\n    }\n    throw error\n  }\n}\n\n/**\n * Creates a shopping list API request with authentication\n * @param {string} url - The API endpoint URL\n * @param {object} requestData - Data to send in the request body\n * @param {string} token - Authentication token\n * @returns {Promise<object>} API response data\n */\nexport async function makeShoppingListRequest(url, requestData, token) {\n  return robustFetch(url, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${token}`\n    },\n    body: JSON.stringify(requestData)\n  })\n}","import { render } from \"./RecipeDetailModal.vue?vue&type=template&id=4136110e&scoped=true\"\nimport script from \"./RecipeDetailModal.vue?vue&type=script&lang=js\"\nexport * from \"./RecipeDetailModal.vue?vue&type=script&lang=js\"\n\nimport \"./RecipeDetailModal.vue?vue&type=style&index=0&id=4136110e&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-4136110e\"]])\n\nexport default __exports__","import { render } from \"./MealPlanDetailModal.vue?vue&type=template&id=33e8f134&scoped=true\"\nimport script from \"./MealPlanDetailModal.vue?vue&type=script&lang=js\"\nexport * from \"./MealPlanDetailModal.vue?vue&type=script&lang=js\"\n\nimport \"./MealPlanDetailModal.vue?vue&type=style&index=0&id=33e8f134&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-33e8f134\"]])\n\nexport default __exports__","<!-- src/components/meal-planning/NutritionalAnalysisModal.vue -->\n<template>\n  <div class=\"modal-overlay\" @click=\"$emit('close')\">\n    <div class=\"modal-content analysis-modal\" @click.stop>\n      <div class=\"modal-header\">\n        <div class=\"header-content\">\n          <h2>\n            <i class=\"fas fa-chart-line\"></i>\n            AI Nutritional Analysis\n          </h2>\n          <p>{{ formatPlanType(mealPlan.plan_type) }} Plan - {{ formatDateRange(mealPlan.start_date, mealPlan.end_date) }}</p>\n        </div>\n        <button @click=\"$emit('close')\" class=\"close-btn\">\n          <i class=\"fas fa-times\"></i>\n        </button>\n      </div>\n\n      <div class=\"modal-body\">\n        <!-- Loading State -->\n        <div v-if=\"analysis.loading\" class=\"loading-state\">\n          <div class=\"loading-spinner\"></div>\n          <h3>AI is Analyzing Your Meal Plan</h3>\n          <p>{{ analysis.message }}</p>\n        </div>\n\n        <!-- Error State -->\n        <div v-else-if=\"analysis.error\" class=\"error-state\">\n          <i class=\"fas fa-exclamation-triangle\"></i>\n          <h3>Analysis Unavailable</h3>\n          <p>{{ analysis.message }}</p>\n        </div>\n\n        <!-- Analysis Results -->\n        <div v-else class=\"analysis-results\">\n          <!-- Overall Score -->\n          <div class=\"overall-score-section\">\n            <div class=\"score-circle\">\n              <svg viewBox=\"0 0 100 100\" class=\"circular-progress\">\n                <circle\n                  cx=\"50\"\n                  cy=\"50\"\n                  r=\"45\"\n                  class=\"circle-bg\"\n                />\n                <circle\n                  cx=\"50\"\n                  cy=\"50\"\n                  r=\"45\"\n                  class=\"circle-progress\"\n                  :style=\"`stroke-dasharray: ${analysis.overall_score * 2.827}, 282.7`\"\n                />\n              </svg>\n              <div class=\"score-content\">\n                <span class=\"score-number\">{{ analysis.overall_score || 0 }}</span>\n                <span class=\"score-label\">Overall Score</span>\n              </div>\n            </div>\n            <div class=\"score-description\">\n              <h3>Nutritional Quality Assessment</h3>\n              <p>{{ getScoreDescription(analysis.overall_score) }}</p>\n            </div>\n          </div>\n\n          <!-- Nutritional Adequacy -->\n          <div class=\"analysis-section\">\n            <h3>\n              <i class=\"fas fa-balance-scale\"></i>\n              Nutritional Adequacy\n            </h3>\n            <div class=\"adequacy-grid\" v-if=\"analysis.nutritional_adequacy\">\n              <div\n                v-for=\"(nutrient, key) in analysis.nutritional_adequacy\"\n                :key=\"key\"\n                class=\"nutrient-card\"\n                :class=\"getAdequacyClass(nutrient.status)\"\n              >\n                <div class=\"nutrient-header\">\n                  <span class=\"nutrient-name\">{{ formatNutrientName(key) }}</span>\n                  <span class=\"nutrient-status\">{{ formatStatus(nutrient.status) }}</span>\n                </div>\n                <div class=\"nutrient-progress\">\n                  <div class=\"progress-bar\">\n                    <div\n                      class=\"progress-fill\"\n                      :style=\"`width: ${Math.min(nutrient.percentage_of_target || 0, 150)}%`\"\n                    ></div>\n                  </div>\n                  <span class=\"percentage\">{{ nutrient.percentage_of_target || 0 }}% of target</span>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <!-- Meal Distribution -->\n          <div class=\"analysis-section\" v-if=\"analysis.meal_distribution\">\n            <h3>\n              <i class=\"fas fa-clock\"></i>\n              Meal Distribution\n            </h3>\n            <div class=\"distribution-chart\">\n              <div class=\"distribution-bars\">\n                <div class=\"meal-bar\">\n                  <span class=\"meal-label\">Breakfast</span>\n                  <div class=\"bar\">\n                    <div\n                      class=\"bar-fill breakfast\"\n                      :style=\"`width: ${analysis.meal_distribution.breakfast_percentage || 0}%`\"\n                    ></div>\n                  </div>\n                  <span class=\"percentage\">{{ analysis.meal_distribution.breakfast_percentage || 0 }}%</span>\n                </div>\n                <div class=\"meal-bar\">\n                  <span class=\"meal-label\">Lunch</span>\n                  <div class=\"bar\">\n                    <div\n                      class=\"bar-fill lunch\"\n                      :style=\"`width: ${analysis.meal_distribution.lunch_percentage || 0}%`\"\n                    ></div>\n                  </div>\n                  <span class=\"percentage\">{{ analysis.meal_distribution.lunch_percentage || 0 }}%</span>\n                </div>\n                <div class=\"meal-bar\">\n                  <span class=\"meal-label\">Dinner</span>\n                  <div class=\"bar\">\n                    <div\n                      class=\"bar-fill dinner\"\n                      :style=\"`width: ${analysis.meal_distribution.dinner_percentage || 0}%`\"\n                    ></div>\n                  </div>\n                  <span class=\"percentage\">{{ analysis.meal_distribution.dinner_percentage || 0 }}%</span>\n                </div>\n              </div>\n              <div class=\"distribution-rating\">\n                <span class=\"rating-label\">Balance Rating:</span>\n                <span class=\"rating-value\" :class=\"getRatingClass(analysis.meal_distribution.balance_rating)\">\n                  {{ formatRating(analysis.meal_distribution.balance_rating) }}\n                </span>\n              </div>\n            </div>\n          </div>\n\n          <!-- Variety Analysis -->\n          <div class=\"analysis-section\" v-if=\"analysis.variety_analysis\">\n            <h3>\n              <i class=\"fas fa-seedling\"></i>\n              Variety & Diversity\n            </h3>\n            <div class=\"variety-metrics\">\n              <div class=\"variety-item\">\n                <span class=\"metric-label\">Cuisine Diversity:</span>\n                <span class=\"metric-badge\" :class=\"getVarietyClass(analysis.variety_analysis.cuisine_diversity)\">\n                  {{ formatRating(analysis.variety_analysis.cuisine_diversity) }}\n                </span>\n              </div>\n              <div class=\"variety-item\">\n                <span class=\"metric-label\">Ingredient Variety:</span>\n                <span class=\"metric-badge\" :class=\"getVarietyClass(analysis.variety_analysis.ingredient_variety)\">\n                  {{ formatRating(analysis.variety_analysis.ingredient_variety) }}\n                </span>\n              </div>\n              <div class=\"variety-item\">\n                <span class=\"metric-label\">Cooking Methods:</span>\n                <span class=\"metric-badge\" :class=\"getVarietyClass(analysis.variety_analysis.cooking_method_diversity)\">\n                  {{ formatRating(analysis.variety_analysis.cooking_method_diversity) }}\n                </span>\n              </div>\n            </div>\n          </div>\n\n          <!-- Health Highlights -->\n          <div class=\"analysis-section\" v-if=\"analysis.health_highlights && analysis.health_highlights.length\">\n            <h3>\n              <i class=\"fas fa-star\"></i>\n              Health Highlights\n            </h3>\n            <div class=\"highlights-list\">\n              <div\n                v-for=\"(highlight, index) in analysis.health_highlights\"\n                :key=\"index\"\n                class=\"highlight-item\"\n              >\n                <i class=\"fas fa-check-circle\"></i>\n                <span>{{ highlight }}</span>\n              </div>\n            </div>\n          </div>\n\n          <!-- Recommendations -->\n          <div class=\"analysis-section\" v-if=\"analysis.recommendations && analysis.recommendations.length\">\n            <h3>\n              <i class=\"fas fa-lightbulb\"></i>\n              AI Recommendations\n            </h3>\n            <div class=\"recommendations-list\">\n              <div\n                v-for=\"(recommendation, index) in analysis.recommendations\"\n                :key=\"index\"\n                class=\"recommendation-item\"\n              >\n                <i class=\"fas fa-arrow-right\"></i>\n                <span>{{ recommendation }}</span>\n              </div>\n            </div>\n          </div>\n\n          <!-- Areas for Improvement -->\n          <div class=\"analysis-section\" v-if=\"analysis.areas_for_improvement && analysis.areas_for_improvement.length\">\n            <h3>\n              <i class=\"fas fa-target\"></i>\n              Areas for Improvement\n            </h3>\n            <div class=\"improvements-list\">\n              <div\n                v-for=\"(improvement, index) in analysis.areas_for_improvement\"\n                :key=\"index\"\n                class=\"improvement-item\"\n              >\n                <i class=\"fas fa-exclamation-circle\"></i>\n                <span>{{ improvement }}</span>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"modal-footer\">\n        <button @click=\"$emit('close')\" class=\"btn btn-secondary\">Close Analysis</button>\n        <button @click=\"downloadReport\" class=\"btn btn-primary\" :disabled=\"analysis.loading || analysis.error\">\n          <i class=\"fas fa-download\"></i>\n          Download Report\n        </button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'NutritionalAnalysisModal',\n  props: {\n    analysis: {\n      type: Object,\n      required: true\n    },\n    mealPlan: {\n      type: Object,\n      required: true\n    }\n  },\n  emits: ['close'],\n  methods: {\n    formatPlanType(type) {\n      return type.charAt(0).toUpperCase() + type.slice(1)\n    },\n\n    formatDateRange(startDate, endDate) {\n      const start = new Date(startDate).toLocaleDateString()\n      const end = new Date(endDate).toLocaleDateString()\n\n      if (startDate === endDate) {\n        return start\n      }\n      return `${start} - ${end}`\n    },\n\n    getScoreDescription(score) {\n      if (score >= 90) return \"Excellent nutritional balance! Your meal plan meets all dietary guidelines.\"\n      if (score >= 80) return \"Very good nutritional quality with minor areas for optimization.\"\n      if (score >= 70) return \"Good nutritional foundation with some room for improvement.\"\n      if (score >= 60) return \"Adequate nutrition but several areas could be enhanced.\"\n      return \"Significant nutritional improvements recommended.\"\n    },\n\n    formatNutrientName(key) {\n      const names = {\n        'calories': 'Calories',\n        'protein': 'Protein',\n        'carbs': 'Carbohydrates',\n        'fat': 'Fat',\n        'fiber': 'Fiber',\n        'sodium': 'Sodium'\n      }\n      return names[key] || key.charAt(0).toUpperCase() + key.slice(1)\n    },\n\n    formatStatus(status) {\n      const statuses = {\n        'adequate': 'Adequate',\n        'insufficient': 'Low',\n        'excessive': 'High',\n        'too_high': 'Too High',\n        'too_low': 'Too Low',\n        'within_range': 'Good',\n        'balanced': 'Balanced'\n      }\n      return statuses[status] || status.replace('_', ' ').toUpperCase()\n    },\n\n    formatRating(rating) {\n      if (!rating) return 'N/A'\n      return rating.charAt(0).toUpperCase() + rating.slice(1)\n    },\n\n    getAdequacyClass(status) {\n      const classes = {\n        'adequate': 'adequate',\n        'within_range': 'adequate',\n        'balanced': 'adequate',\n        'insufficient': 'insufficient',\n        'too_low': 'insufficient',\n        'excessive': 'excessive',\n        'too_high': 'excessive'\n      }\n      return classes[status] || 'neutral'\n    },\n\n    getRatingClass(rating) {\n      const classes = {\n        'excellent': 'excellent',\n        'very_good': 'very-good',\n        'good': 'good',\n        'fair': 'fair',\n        'poor': 'poor'\n      }\n      return classes[rating] || 'neutral'\n    },\n\n    getVarietyClass(variety) {\n      const classes = {\n        'excellent': 'excellent',\n        'very_good': 'very-good',\n        'good': 'good',\n        'fair': 'fair',\n        'poor': 'poor'\n      }\n      return classes[variety] || 'neutral'\n    },\n\n    downloadReport() {\n      // Generate a simple text report\n      let report = `AI Nutritional Analysis Report\\n`\n      report += `================================\\n\\n`\n      report += `Meal Plan: ${this.formatPlanType(this.mealPlan.plan_type)} Plan\\n`\n      report += `Date Range: ${this.formatDateRange(this.mealPlan.start_date, this.mealPlan.end_date)}\\n`\n      report += `Generated: ${new Date().toLocaleDateString()}\\n\\n`\n\n      report += `Overall Score: ${this.analysis.overall_score || 'N/A'}/100\\n\\n`\n\n      if (this.analysis.health_highlights && this.analysis.health_highlights.length) {\n        report += `Health Highlights:\\n`\n        this.analysis.health_highlights.forEach(highlight => {\n          report += ` ${highlight}\\n`\n        })\n        report += `\\n`\n      }\n\n      if (this.analysis.recommendations && this.analysis.recommendations.length) {\n        report += `AI Recommendations:\\n`\n        this.analysis.recommendations.forEach(rec => {\n          report += ` ${rec}\\n`\n        })\n        report += `\\n`\n      }\n\n      if (this.analysis.areas_for_improvement && this.analysis.areas_for_improvement.length) {\n        report += `Areas for Improvement:\\n`\n        this.analysis.areas_for_improvement.forEach(improvement => {\n          report += ` ${improvement}\\n`\n        })\n      }\n\n      // Create and download the file\n      const blob = new Blob([report], { type: 'text/plain' })\n      const url = window.URL.createObjectURL(blob)\n      const link = document.createElement('a')\n      link.href = url\n      link.download = `nutrition-analysis-${this.mealPlan.start_date}.txt`\n      document.body.appendChild(link)\n      link.click()\n      document.body.removeChild(link)\n      window.URL.revokeObjectURL(url)\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n$primary: #007bff;\n$success: #28a745;\n$warning: #ffc107;\n$danger: #dc3545;\n$info: #17a2b8;\n$gray: #6c757d;\n$gray-light: #adb5bd;\n$gray-lighter: #e9ecef;\n$white: #ffffff;\n\n.modal-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.5);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 1000;\n  padding: 20px;\n}\n\n.analysis-modal {\n  background: $white;\n  border-radius: 16px;\n  max-width: 800px;\n  width: 100%;\n  max-height: 90vh;\n  overflow-y: auto;\n  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);\n}\n\n.modal-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  padding: 24px 32px;\n  border-bottom: 1px solid $gray-lighter;\n  background: linear-gradient(135deg, rgba($primary, 0.05), rgba($primary, 0.02));\n\n  .header-content {\n    h2 {\n      margin: 0 0 8px 0;\n      font-size: 1.6rem;\n      color: #333;\n      display: flex;\n      align-items: center;\n      gap: 12px;\n\n      i {\n        color: $primary;\n      }\n    }\n\n    p {\n      margin: 0;\n      color: $gray;\n      font-size: 1rem;\n    }\n  }\n\n  .close-btn {\n    background: none;\n    border: none;\n    font-size: 1.5rem;\n    cursor: pointer;\n    padding: 8px;\n    border-radius: 8px;\n    color: $gray;\n    transition: all 0.2s ease;\n\n    &:hover {\n      background: rgba($gray, 0.1);\n      color: #333;\n    }\n  }\n}\n\n.modal-body {\n  padding: 32px;\n}\n\n// Loading State\n.loading-state {\n  text-align: center;\n  padding: 60px 20px;\n\n  .loading-spinner {\n    width: 50px;\n    height: 50px;\n    border: 4px solid $gray-lighter;\n    border-left: 4px solid $primary;\n    border-radius: 50%;\n    animation: spin 1s linear infinite;\n    margin: 0 auto 24px;\n  }\n\n  h3 {\n    margin: 0 0 12px 0;\n    color: #333;\n    font-size: 1.3rem;\n  }\n\n  p {\n    margin: 0;\n    color: $gray;\n    font-size: 1rem;\n  }\n}\n\n@keyframes spin {\n  to { transform: rotate(360deg); }\n}\n\n// Error State\n.error-state {\n  text-align: center;\n  padding: 60px 20px;\n\n  i {\n    font-size: 3rem;\n    color: $warning;\n    margin-bottom: 24px;\n    display: block;\n  }\n\n  h3 {\n    margin: 0 0 12px 0;\n    color: #333;\n    font-size: 1.3rem;\n  }\n\n  p {\n    margin: 0;\n    color: $gray;\n    font-size: 1rem;\n  }\n}\n\n// Analysis Results\n.analysis-results {\n  .analysis-section {\n    margin-bottom: 40px;\n\n    &:last-child {\n      margin-bottom: 0;\n    }\n\n    h3 {\n      margin: 0 0 20px 0;\n      font-size: 1.2rem;\n      color: #333;\n      display: flex;\n      align-items: center;\n      gap: 12px;\n      padding-bottom: 12px;\n      border-bottom: 2px solid $gray-lighter;\n\n      i {\n        color: $primary;\n        font-size: 1.1rem;\n      }\n    }\n  }\n}\n\n// Overall Score Section\n.overall-score-section {\n  display: flex;\n  align-items: center;\n  gap: 32px;\n  margin-bottom: 40px;\n  padding: 24px;\n  background: linear-gradient(135deg, rgba($success, 0.05), rgba($primary, 0.05));\n  border-radius: 12px;\n  border: 1px solid rgba($primary, 0.1);\n}\n\n.score-circle {\n  position: relative;\n  width: 120px;\n  height: 120px;\n  flex-shrink: 0;\n\n  .circular-progress {\n    width: 100%;\n    height: 100%;\n    transform: rotate(-90deg);\n\n    .circle-bg {\n      fill: none;\n      stroke: $gray-lighter;\n      stroke-width: 8;\n    }\n\n    .circle-progress {\n      fill: none;\n      stroke: $success;\n      stroke-width: 8;\n      stroke-linecap: round;\n      transition: stroke-dasharray 0.6s ease;\n    }\n  }\n\n  .score-content {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    text-align: center;\n\n    .score-number {\n      display: block;\n      font-size: 2rem;\n      font-weight: 700;\n      color: $success;\n      line-height: 1;\n    }\n\n    .score-label {\n      display: block;\n      font-size: 0.8rem;\n      color: $gray;\n      text-transform: uppercase;\n      letter-spacing: 0.5px;\n      margin-top: 4px;\n    }\n  }\n}\n\n.score-description {\n  flex: 1;\n\n  h3 {\n    margin: 0 0 12px 0;\n    font-size: 1.3rem;\n    color: #333;\n  }\n\n  p {\n    margin: 0;\n    color: $gray;\n    font-size: 1rem;\n    line-height: 1.5;\n  }\n}\n\n// Nutritional Adequacy\n.adequacy-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));\n  gap: 20px;\n}\n\n.nutrient-card {\n  padding: 20px;\n  border-radius: 12px;\n  border: 2px solid;\n  transition: all 0.3s ease;\n\n  &.adequate {\n    border-color: rgba($success, 0.3);\n    background: rgba($success, 0.05);\n  }\n\n  &.insufficient {\n    border-color: rgba($warning, 0.3);\n    background: rgba($warning, 0.05);\n  }\n\n  &.excessive {\n    border-color: rgba($danger, 0.3);\n    background: rgba($danger, 0.05);\n  }\n\n  &.neutral {\n    border-color: $gray-lighter;\n    background: rgba($gray, 0.03);\n  }\n\n  .nutrient-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 16px;\n\n    .nutrient-name {\n      font-weight: 600;\n      color: #333;\n      font-size: 1rem;\n    }\n\n    .nutrient-status {\n      padding: 4px 8px;\n      border-radius: 6px;\n      font-size: 0.8rem;\n      font-weight: 500;\n      text-transform: uppercase;\n      letter-spacing: 0.5px;\n\n      .adequate & {\n        background: $success;\n        color: white;\n      }\n\n      .insufficient & {\n        background: $warning;\n        color: white;\n      }\n\n      .excessive & {\n        background: $danger;\n        color: white;\n      }\n\n      .neutral & {\n        background: $gray;\n        color: white;\n      }\n    }\n  }\n\n  .nutrient-progress {\n    .progress-bar {\n      height: 8px;\n      background: rgba(0, 0, 0, 0.1);\n      border-radius: 4px;\n      overflow: hidden;\n      margin-bottom: 8px;\n\n      .progress-fill {\n        height: 100%;\n        border-radius: 4px;\n        transition: width 0.6s ease;\n\n        .adequate & { background: $success; }\n        .insufficient & { background: $warning; }\n        .excessive & { background: $danger; }\n        .neutral & { background: $gray; }\n      }\n    }\n\n    .percentage {\n      font-size: 0.9rem;\n      color: $gray;\n      font-weight: 500;\n    }\n  }\n}\n\n// Meal Distribution\n.distribution-chart {\n  .distribution-bars {\n    margin-bottom: 20px;\n  }\n\n  .meal-bar {\n    display: flex;\n    align-items: center;\n    gap: 16px;\n    margin-bottom: 12px;\n\n    .meal-label {\n      min-width: 80px;\n      font-weight: 500;\n      color: #333;\n      font-size: 0.9rem;\n    }\n\n    .bar {\n      flex: 1;\n      height: 24px;\n      background: $gray-lighter;\n      border-radius: 12px;\n      overflow: hidden;\n      position: relative;\n\n      .bar-fill {\n        height: 100%;\n        border-radius: 12px;\n        transition: width 0.6s ease;\n\n        &.breakfast { background: linear-gradient(90deg, #FF6B6B, #FF8E53); }\n        &.lunch { background: linear-gradient(90deg, #4ECDC4, #44A08D); }\n        &.dinner { background: linear-gradient(90deg, #A8EDEA, #FED6E3); }\n      }\n    }\n\n    .percentage {\n      min-width: 50px;\n      text-align: right;\n      font-weight: 500;\n      color: #333;\n      font-size: 0.9rem;\n    }\n  }\n\n  .distribution-rating {\n    display: flex;\n    align-items: center;\n    gap: 12px;\n    padding: 16px;\n    background: rgba($primary, 0.05);\n    border-radius: 8px;\n\n    .rating-label {\n      font-weight: 500;\n      color: #333;\n    }\n\n    .rating-value {\n      padding: 4px 12px;\n      border-radius: 6px;\n      font-weight: 600;\n      font-size: 0.9rem;\n      text-transform: uppercase;\n      letter-spacing: 0.5px;\n\n      &.excellent { background: $success; color: white; }\n      &.very-good { background: #20c997; color: white; }\n      &.good { background: $info; color: white; }\n      &.fair { background: $warning; color: white; }\n      &.poor { background: $danger; color: white; }\n      &.neutral { background: $gray; color: white; }\n    }\n  }\n}\n\n// Variety Analysis\n.variety-metrics {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 16px;\n}\n\n.variety-item {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  padding: 16px;\n  background: rgba($primary, 0.03);\n  border-radius: 8px;\n  border: 1px solid rgba($primary, 0.1);\n  flex: 1;\n  min-width: 200px;\n\n  .metric-label {\n    font-weight: 500;\n    color: #333;\n  }\n\n  .metric-badge {\n    padding: 4px 12px;\n    border-radius: 6px;\n    font-weight: 600;\n    font-size: 0.8rem;\n    text-transform: uppercase;\n    letter-spacing: 0.5px;\n\n    &.excellent { background: $success; color: white; }\n    &.very-good { background: #20c997; color: white; }\n    &.good { background: $info; color: white; }\n    &.fair { background: $warning; color: white; }\n    &.poor { background: $danger; color: white; }\n    &.neutral { background: $gray; color: white; }\n  }\n}\n\n// Lists\n.highlights-list, .recommendations-list, .improvements-list {\n  .highlight-item, .recommendation-item, .improvement-item {\n    display: flex;\n    align-items: flex-start;\n    gap: 12px;\n    padding: 12px 16px;\n    margin-bottom: 8px;\n    border-radius: 8px;\n    transition: background-color 0.2s ease;\n\n    &:hover {\n      background: rgba($primary, 0.03);\n    }\n\n    i {\n      margin-top: 2px;\n      flex-shrink: 0;\n    }\n\n    span {\n      color: #333;\n      line-height: 1.5;\n    }\n  }\n}\n\n.highlights-list .highlight-item i {\n  color: $success;\n}\n\n.recommendations-list .recommendation-item i {\n  color: $primary;\n}\n\n.improvements-list .improvement-item i {\n  color: $warning;\n}\n\n// Modal Footer\n.modal-footer {\n  display: flex;\n  justify-content: space-between;\n  gap: 16px;\n  padding: 24px 32px;\n  border-top: 1px solid $gray-lighter;\n  background: rgba($gray, 0.02);\n\n  .btn {\n    padding: 12px 24px;\n    border: none;\n    border-radius: 8px;\n    cursor: pointer;\n    font-weight: 500;\n    font-size: 0.95rem;\n    transition: all 0.2s ease;\n    display: flex;\n    align-items: center;\n    gap: 8px;\n\n    &.btn-secondary {\n      background: $gray-lighter;\n      color: #333;\n\n      &:hover {\n        background: darken($gray-lighter, 10%);\n      }\n    }\n\n    &.btn-primary {\n      background: $primary;\n      color: white;\n\n      &:hover:not(:disabled) {\n        background: darken($primary, 10%);\n        transform: translateY(-1px);\n      }\n\n      &:disabled {\n        opacity: 0.6;\n        cursor: not-allowed;\n      }\n    }\n\n    i {\n      font-size: 0.9rem;\n    }\n  }\n}\n\n// Responsive Design\n@media (max-width: 768px) {\n  .modal-overlay {\n    padding: 10px;\n  }\n\n  .analysis-modal {\n    max-height: 95vh;\n  }\n\n  .modal-header {\n    padding: 20px 24px;\n\n    .header-content h2 {\n      font-size: 1.4rem;\n    }\n  }\n\n  .modal-body {\n    padding: 24px 20px;\n  }\n\n  .overall-score-section {\n    flex-direction: column;\n    text-align: center;\n    gap: 20px;\n  }\n\n  .adequacy-grid {\n    grid-template-columns: 1fr;\n  }\n\n  .variety-metrics {\n    flex-direction: column;\n  }\n\n  .variety-item {\n    min-width: auto;\n  }\n\n  .modal-footer {\n    padding: 20px 24px;\n    flex-direction: column;\n\n    .btn {\n      width: 100%;\n      justify-content: center;\n    }\n  }\n}\n</style>","import { render } from \"./NutritionalAnalysisModal.vue?vue&type=template&id=213abc86&scoped=true\"\nimport script from \"./NutritionalAnalysisModal.vue?vue&type=script&lang=js\"\nexport * from \"./NutritionalAnalysisModal.vue?vue&type=script&lang=js\"\n\nimport \"./NutritionalAnalysisModal.vue?vue&type=style&index=0&id=213abc86&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-213abc86\"]])\n\nexport default __exports__","<template>\n  <div class=\"modal fade show\" style=\"display: block\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"alternativesModalLabel\" aria-modal=\"true\">\n    <div class=\"modal-dialog modal-xl\" role=\"document\">\n      <div class=\"modal-content\">\n        <div class=\"modal-header\">\n          <h5 class=\"modal-title\" id=\"alternativesModalLabel\">\n            <i class=\"fas fa-exchange-alt\"></i>\n            Recipe Alternatives for {{ formatMealType(mealType) }}\n            <span v-if=\"day\" class=\"text-muted\">- {{ formatDate(day) }}</span>\n          </h5>\n          <button type=\"button\" class=\"btn-close\" @click=\"$emit('close')\" aria-label=\"Close\"></button>\n        </div>\n        \n        <div class=\"modal-body\">\n          <!-- Options Toggle -->\n          <div class=\"alternatives-options mb-4\">\n            <div class=\"row\">\n              <div class=\"col-md-6\">\n                <div class=\"form-check form-switch\">\n                  <input \n                    class=\"form-check-input\" \n                    type=\"checkbox\" \n                    id=\"includeUserRecipes\" \n                    v-model=\"includeUserRecipes\"\n                    @change=\"loadAlternatives\"\n                  >\n                  <label class=\"form-check-label\" for=\"includeUserRecipes\">\n                    <i class=\"fas fa-heart text-danger\"></i>\n                    Include My Saved Recipes\n                  </label>\n                </div>\n              </div>\n              <div class=\"col-md-6\">\n                <div class=\"form-group\">\n                  <label for=\"alternativeCount\" class=\"form-label\">Number of alternatives:</label>\n                  <select \n                    class=\"form-select form-select-sm\" \n                    id=\"alternativeCount\" \n                    v-model=\"alternativeCount\"\n                    @change=\"loadAlternatives\"\n                    style=\"width: auto; display: inline-block;\"\n                  >\n                    <option value=\"3\">3</option>\n                    <option value=\"5\">5</option>\n                    <option value=\"8\">8</option>\n                    <option value=\"10\">10</option>\n                  </select>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <!-- Loading State -->\n          <div v-if=\"loading\" class=\"text-center py-5\">\n            <div class=\"spinner-border text-primary\" role=\"status\">\n              <span class=\"visually-hidden\">Loading alternatives...</span>\n            </div>\n            <p class=\"mt-3 text-muted\">Finding the perfect alternatives for you...</p>\n          </div>\n\n          <!-- Error State -->\n          <div v-else-if=\"error\" class=\"alert alert-danger\" role=\"alert\">\n            <i class=\"fas fa-exclamation-triangle\"></i>\n            {{ error }}\n            <button class=\"btn btn-sm btn-outline-danger ms-2\" @click=\"loadAlternatives\">\n              <i class=\"fas fa-redo\"></i> Retry\n            </button>\n          </div>\n\n          <!-- Alternatives Grid -->\n          <div v-else-if=\"alternatives.length > 0\" class=\"alternatives-grid\">\n            <!-- Summary -->\n            <div class=\"alternatives-summary mb-3\">\n              <div class=\"row\">\n                <div class=\"col-md-8\">\n                  <p class=\"mb-1\">\n                    <strong>{{ alternatives.length }}</strong> alternatives found\n                    <span v-if=\"userRecipeCount > 0\" class=\"badge bg-danger ms-2\">\n                      <i class=\"fas fa-heart\"></i> {{ userRecipeCount }} from your recipes\n                    </span>\n                    <span v-if=\"externalRecipeCount > 0\" class=\"badge bg-primary ms-1\">\n                      <i class=\"fas fa-globe\"></i> {{ externalRecipeCount }} suggestions\n                    </span>\n                  </p>\n                </div>\n                <div class=\"col-md-4 text-end\">\n                  <small class=\"text-muted\">\n                    <i class=\"fas fa-info-circle\"></i>\n                    Click any recipe to replace your current meal\n                  </small>\n                </div>\n              </div>\n            </div>\n\n            <!-- Recipe Cards -->\n            <div class=\"row\">\n              <div v-for=\"recipe in alternatives\" :key=\"recipe.id\" class=\"col-md-6 col-lg-4 mb-4\">\n                <div \n                  class=\"recipe-alternative-card card h-100\"\n                  :class=\"{ 'user-recipe': recipe.is_user_recipe }\"\n                  @click=\"selectAlternative(recipe)\"\n                  style=\"cursor: pointer;\"\n                >\n                  <!-- Recipe Source Badge -->\n                  <div class=\"recipe-source-badge\">\n                    <span v-if=\"recipe.is_user_recipe\" class=\"badge bg-danger\">\n                      <i class=\"fas fa-heart\"></i> My Recipe\n                    </span>\n                    <span v-else class=\"badge bg-primary\">\n                      <i class=\"fas fa-globe\"></i> Suggestion\n                    </span>\n                  </div>\n\n                  <!-- Recipe Image -->\n                  <div class=\"recipe-image-container\">\n                    <img \n                      :src=\"recipe.image || '/api/placeholder/300/200'\" \n                      class=\"card-img-top recipe-image\"\n                      :alt=\"recipe.title\"\n                      @error=\"handleImageError\"\n                    >\n                    <div class=\"recipe-overlay\">\n                      <button class=\"btn btn-primary btn-sm\">\n                        <i class=\"fas fa-exchange-alt\"></i> Use This Recipe\n                      </button>\n                    </div>\n                  </div>\n\n                  <div class=\"card-body\">\n                    <h6 class=\"card-title\">{{ recipe.title }}</h6>\n                    \n                    <!-- Recipe Info -->\n                    <div class=\"recipe-info mb-2\">\n                      <small class=\"text-muted d-flex justify-content-between\">\n                        <span>\n                          <i class=\"fas fa-clock\"></i> {{ recipe.readyInMinutes || 30 }}min\n                        </span>\n                        <span>\n                          <i class=\"fas fa-users\"></i> {{ recipe.servings || 1 }}\n                        </span>\n                        <span v-if=\"recipe.rating\">\n                          <i class=\"fas fa-star text-warning\"></i> {{ recipe.rating.toFixed(1) }}\n                        </span>\n                      </small>\n                    </div>\n\n                    <!-- Recipe Summary -->\n                    <p class=\"card-text small\">\n                      {{ truncateSummary(recipe.summary) }}\n                    </p>\n\n                    <!-- Nutrition Preview (if available) -->\n                    <div v-if=\"recipe.nutrition && Object.keys(recipe.nutrition).length > 0\" class=\"nutrition-preview\">\n                      <small class=\"text-muted\">\n                        <i class=\"fas fa-chart-bar\"></i> Nutrition per serving\n                      </small>\n                      <div class=\"nutrition-mini d-flex justify-content-between mt-1\">\n                        <span v-if=\"recipe.nutrition.calories\">\n                          {{ Math.round(recipe.nutrition.calories) }}cal\n                        </span>\n                        <span v-if=\"recipe.nutrition.protein\">\n                          {{ Math.round(recipe.nutrition.protein) }}g protein\n                        </span>\n                        <span v-if=\"recipe.nutrition.carbs\">\n                          {{ Math.round(recipe.nutrition.carbs) }}g carbs\n                        </span>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <!-- No Alternatives Found -->\n          <div v-else class=\"text-center py-5\">\n            <i class=\"fas fa-search fa-3x text-muted mb-3\"></i>\n            <h5 class=\"text-muted\">No alternatives found</h5>\n            <p class=\"text-muted\">\n              <span v-if=\"!includeUserRecipes\">\n                Try enabling \"Include My Saved Recipes\" or save some recipes first.\n              </span>\n              <span v-else>\n                No matching recipes found for {{ formatMealType(mealType) }}.\n              </span>\n            </p>\n            <button class=\"btn btn-outline-primary\" @click=\"loadAlternatives\">\n              <i class=\"fas fa-redo\"></i> Try Again\n            </button>\n          </div>\n        </div>\n\n        <div class=\"modal-footer\">\n          <button type=\"button\" class=\"btn btn-secondary\" @click=\"$emit('close')\">\n            <i class=\"fas fa-times\"></i> Cancel\n          </button>\n          <button \n            type=\"button\" \n            class=\"btn btn-outline-primary\" \n            @click=\"loadAlternatives\"\n            :disabled=\"loading\"\n          >\n            <i class=\"fas fa-redo\"></i> Refresh Alternatives\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mealPlanningApi } from '../../services/mealPlanningApi'\n\nexport default {\n  name: 'AlternativesModal',\n  \n  props: {\n    planId: {\n      type: [String, Number],\n      required: true\n    },\n    day: {\n      type: String,\n      required: true\n    },\n    mealType: {\n      type: String,\n      required: true\n    }\n  },\n\n  emits: ['close', 'alternative-selected'],\n\n  data() {\n    return {\n      loading: false,\n      error: null,\n      alternatives: [],\n      includeUserRecipes: true,\n      alternativeCount: 5,\n      selectedRecipe: null\n    }\n  },\n\n  computed: {\n    userRecipeCount() {\n      return this.alternatives.filter(alt => alt.is_user_recipe).length\n    },\n    \n    externalRecipeCount() {\n      return this.alternatives.filter(alt => !alt.is_user_recipe).length\n    }\n  },\n\n  mounted() {\n    this.loadAlternatives()\n    // Add escape key listener\n    document.addEventListener('keydown', this.handleEscapeKey)\n  },\n\n  beforeUnmount() {\n    // Remove escape key listener\n    document.removeEventListener('keydown', this.handleEscapeKey)\n  },\n\n  methods: {\n    async loadAlternatives() {\n      this.loading = true\n      this.error = null\n      \n      try {\n        console.log('Loading alternatives:', {\n          planId: this.planId,\n          day: this.day,\n          mealType: this.mealType,\n          count: this.alternativeCount,\n          includeUserRecipes: this.includeUserRecipes\n        })\n        \n        const response = await mealPlanningApi.getMealAlternatives(\n          this.planId,\n          this.day,\n          this.mealType,\n          this.alternativeCount,\n          this.includeUserRecipes\n        )\n        \n        console.log('Alternatives response:', response.data)\n        \n        // Handle both old and new API response formats\n        if (response.data && response.data.alternatives) {\n          this.alternatives = response.data.alternatives\n        } else if (Array.isArray(response.data)) {\n          this.alternatives = response.data\n        } else {\n          this.alternatives = []\n        }\n        \n        console.log(`Loaded ${this.alternatives.length} alternatives`)\n        \n      } catch (error) {\n        console.error('Error loading alternatives:', error)\n        this.error = error.response?.data?.error || error.message || 'Failed to load alternatives'\n        this.alternatives = []\n      } finally {\n        this.loading = false\n      }\n    },\n\n    async selectAlternative(recipe) {\n      try {\n        console.log('Selecting alternative:', recipe)\n        \n        // Emit the selection event with recipe data\n        this.$emit('alternative-selected', {\n          day: this.day,\n          mealType: this.mealType,\n          recipe: recipe\n        })\n        \n        // Close the modal\n        this.$emit('close')\n        \n      } catch (error) {\n        console.error('Error selecting alternative:', error)\n        this.error = 'Failed to select alternative recipe'\n      }\n    },\n\n    handleEscapeKey(event) {\n      if (event.key === 'Escape') {\n        this.$emit('close')\n      }\n    },\n\n    formatMealType(mealType) {\n      if (!mealType) return ''\n      return mealType.charAt(0).toUpperCase() + mealType.slice(1).toLowerCase()\n    },\n\n    formatDate(dateStr) {\n      if (!dateStr) return ''\n      try {\n        const date = new Date(dateStr)\n        return date.toLocaleDateString('en-US', { \n          weekday: 'long', \n          month: 'short', \n          day: 'numeric' \n        })\n      } catch (e) {\n        return dateStr\n      }\n    },\n\n    truncateSummary(summary) {\n      if (!summary) return 'No description available.'\n      \n      // Remove HTML tags\n      const cleanSummary = summary.replace(/<[^>]*>/g, '')\n      \n      if (cleanSummary.length <= 120) {\n        return cleanSummary\n      }\n      \n      return cleanSummary.substring(0, 120) + '...'\n    },\n\n    handleImageError(event) {\n      event.target.src = '/api/placeholder/300/200'\n    }\n  }\n}\n</script>\n\n<style scoped>\n.alternatives-modal {\n  z-index: 1055;\n}\n\n.alternatives-grid {\n  max-height: 70vh;\n  overflow-y: auto;\n}\n\n.recipe-alternative-card {\n  transition: all 0.3s ease;\n  border: 2px solid transparent;\n  position: relative;\n}\n\n.recipe-alternative-card:hover {\n  transform: translateY(-5px);\n  box-shadow: 0 8px 25px rgba(0,0,0,0.15);\n  border-color: #007bff;\n}\n\n.recipe-alternative-card.user-recipe {\n  border-left: 4px solid #dc3545;\n}\n\n.recipe-alternative-card.user-recipe:hover {\n  border-color: #dc3545;\n}\n\n.recipe-source-badge {\n  position: absolute;\n  top: 10px;\n  right: 10px;\n  z-index: 1;\n}\n\n.recipe-image-container {\n  position: relative;\n  overflow: hidden;\n}\n\n.recipe-image {\n  height: 200px;\n  object-fit: cover;\n  transition: transform 0.3s ease;\n}\n\n.recipe-alternative-card:hover .recipe-image {\n  transform: scale(1.05);\n}\n\n.recipe-overlay {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 123, 255, 0.9);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  opacity: 0;\n  transition: opacity 0.3s ease;\n}\n\n.recipe-alternative-card:hover .recipe-overlay {\n  opacity: 1;\n}\n\n.recipe-info {\n  font-size: 0.85rem;\n}\n\n.nutrition-preview {\n  background: #f8f9fa;\n  padding: 0.5rem;\n  border-radius: 0.25rem;\n  margin-top: 0.5rem;\n}\n\n.nutrition-mini {\n  font-size: 0.75rem;\n  font-weight: 500;\n}\n\n.alternatives-summary {\n  background: #f8f9fa;\n  padding: 1rem;\n  border-radius: 0.5rem;\n  border-left: 4px solid #007bff;\n}\n\n.alternatives-options {\n  background: #fff;\n  padding: 1rem;\n  border-radius: 0.5rem;\n  border: 1px solid #dee2e6;\n}\n\n.form-check-label {\n  font-weight: 500;\n}\n\n.form-check-label i {\n  margin-right: 0.5rem;\n}\n\n/* Modal backdrop */\n.modal {\n  background: rgba(0, 0, 0, 0.5);\n}\n\n/* Responsive adjustments */\n@media (max-width: 768px) {\n  .modal-dialog {\n    margin: 0.5rem;\n  }\n  \n  .col-md-6 {\n    margin-bottom: 1rem;\n  }\n  \n  .alternatives-grid {\n    max-height: 60vh;\n  }\n  \n  .recipe-image {\n    height: 150px;\n  }\n}\n\n/* Loading animation */\n.spinner-border {\n  width: 3rem;\n  height: 3rem;\n}\n\n/* Badge styles */\n.badge {\n  font-size: 0.75rem;\n  font-weight: 500;\n}\n\n.badge i {\n  margin-right: 0.25rem;\n}\n</style>","import { render } from \"./AlternativesModal.vue?vue&type=template&id=7a0126ee&scoped=true\"\nimport script from \"./AlternativesModal.vue?vue&type=script&lang=js\"\nexport * from \"./AlternativesModal.vue?vue&type=script&lang=js\"\n\nimport \"./AlternativesModal.vue?vue&type=style&index=0&id=7a0126ee&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-7a0126ee\"]])\n\nexport default __exports__","import { render } from \"./MealPlanManager.vue?vue&type=template&id=0338268e&scoped=true\"\nimport script from \"./MealPlanManager.vue?vue&type=script&lang=js\"\nexport * from \"./MealPlanManager.vue?vue&type=script&lang=js\"\n\nimport \"./MealPlanManager.vue?vue&type=style&index=0&id=0338268e&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-0338268e\"]])\n\nexport default __exports__","<!-- src/components/meal-planning/ComingSoonCard.vue -->\n<template>\n  <div class=\"coming-soon-card\">\n    <div class=\"card-content\">\n      <div class=\"icon-container\">\n        <i :class=\"icon\"></i>\n      </div>\n\n      <h2>{{ title }}</h2>\n      <p>{{ description }}</p>\n\n      <div class=\"features-preview\">\n        <h3>Coming Features:</h3>\n        <ul>\n          <li v-for=\"feature in features\" :key=\"feature\">\n            <i class=\"fas fa-check-circle\"></i>\n            {{ feature }}\n          </li>\n        </ul>\n      </div>\n\n      <div class=\"progress-indicator\">\n        <div class=\"progress-bar\">\n          <div class=\"progress-fill\" :style=\"{ width: progress + '%' }\"></div>\n        </div>\n        <span class=\"progress-text\">{{ progress }}% Complete</span>\n      </div>\n\n      <div class=\"cta-section\">\n        <p class=\"cta-text\">Want to be notified when this feature launches?</p>\n        <button class=\"btn btn-primary\" @click=\"subscribeToUpdates\">\n          <i class=\"fas fa-bell\"></i>\n          Notify Me\n        </button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'ComingSoonCard',\n  props: {\n    title: {\n      type: String,\n      required: true\n    },\n    description: {\n      type: String,\n      required: true\n    },\n    icon: {\n      type: String,\n      default: 'fas fa-rocket'\n    },\n    progress: {\n      type: Number,\n      default: 75\n    }\n  },\n  computed: {\n    features() {\n      // Different features based on the title\n      const featureMap = {\n        'Meal Plans': [\n          'AI-generated daily meal plans',\n          'Weekly meal planning',\n          'Personalized recipe suggestions',\n          'Automatic shopping lists',\n          'Nutritional balance optimization'\n        ],\n        'Nutrition Analytics': [\n          'Daily nutrition tracking',\n          'Macro breakdown charts',\n          'Progress towards goals',\n          'Trend analysis',\n          'AI-powered insights'\n        ]\n      }\n\n      return featureMap[this.title] || [\n        'Personalized recommendations',\n        'Smart AI integration',\n        'Beautiful visualizations',\n        'Easy-to-use interface'\n      ]\n    }\n  },\n  methods: {\n    subscribeToUpdates() {\n      // In a real app, this would open a modal or send an API request\n      alert('Thanks for your interest! We\\'ll notify you when this feature is ready.')\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import '@/assets/styles/_variables.scss';\n@import '@/assets/styles/_utilities.scss';\n\n.coming-soon-card {\n  background: $white;\n  border-radius: $border-radius-lg;\n  box-shadow: $shadow;\n  overflow: hidden;\n  max-width: 600px;\n  margin: 0 auto;\n}\n\n.card-content {\n  padding: $spacing-8;\n  text-align: center;\n}\n\n.icon-container {\n  width: 80px;\n  height: 80px;\n  background: linear-gradient(135deg, $primary, lighten($primary, 20%));\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin: 0 auto $spacing-6;\n  box-shadow: $shadow-lg;\n\n  i {\n    font-size: 2rem;\n    color: $white;\n  }\n}\n\nh2 {\n  margin: 0 0 $spacing-3 0;\n  color: $primary-dark;\n  font-size: 2rem;\n  font-weight: 600;\n}\n\np {\n  color: $gray;\n  font-size: 1.1rem;\n  line-height: 1.6;\n  margin: 0 0 $spacing-6 0;\n}\n\n.features-preview {\n  text-align: left;\n  margin-bottom: $spacing-6;\n  padding: $spacing-4;\n  background: rgba($primary, 0.05);\n  border-radius: $border-radius;\n  border-left: 4px solid $primary;\n\n  h3 {\n    margin: 0 0 $spacing-3 0;\n    color: $primary-dark;\n    font-size: 1.1rem;\n    font-weight: 600;\n  }\n\n  ul {\n    list-style: none;\n    padding: 0;\n    margin: 0;\n  }\n\n  li {\n    display: flex;\n    align-items: center;\n    gap: $spacing-2;\n    padding: $spacing-1 0;\n    color: $primary-dark;\n\n    i {\n      color: $success;\n      font-size: 0.9rem;\n    }\n  }\n}\n\n.progress-indicator {\n  margin-bottom: $spacing-6;\n\n  .progress-bar {\n    width: 100%;\n    height: 8px;\n    background: $gray-lighter;\n    border-radius: 4px;\n    overflow: hidden;\n    margin-bottom: $spacing-2;\n  }\n\n  .progress-fill {\n    height: 100%;\n    background: linear-gradient(90deg, $primary, lighten($primary, 15%));\n    border-radius: 4px;\n    transition: width 0.5s ease;\n  }\n\n  .progress-text {\n    font-size: 0.9rem;\n    color: $gray;\n    font-weight: 500;\n  }\n}\n\n.cta-section {\n  padding-top: $spacing-4;\n  border-top: 1px solid $gray-lighter;\n\n  .cta-text {\n    margin: 0 0 $spacing-4 0;\n    color: $primary-dark;\n    font-weight: 500;\n  }\n\n  .btn {\n    display: inline-flex;\n    align-items: center;\n    gap: $spacing-2;\n\n    i {\n      font-size: 0.9rem;\n    }\n  }\n}\n\n// Animation for the card\n.coming-soon-card {\n  animation: fadeInUp 0.6s ease-out;\n}\n\n@keyframes fadeInUp {\n  from {\n    opacity: 0;\n    transform: translateY(30px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n</style>","import { render } from \"./ComingSoonCard.vue?vue&type=template&id=2b85b24d&scoped=true\"\nimport script from \"./ComingSoonCard.vue?vue&type=script&lang=js\"\nexport * from \"./ComingSoonCard.vue?vue&type=script&lang=js\"\n\nimport \"./ComingSoonCard.vue?vue&type=style&index=0&id=2b85b24d&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-2b85b24d\"]])\n\nexport default __exports__","import { render } from \"./MealPlanningDashboard.vue?vue&type=template&id=0064e48d&scoped=true\"\nimport script from \"./MealPlanningDashboard.vue?vue&type=script&lang=js\"\nexport * from \"./MealPlanningDashboard.vue?vue&type=script&lang=js\"\n\nimport \"./MealPlanningDashboard.vue?vue&type=style&index=0&id=0064e48d&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-0064e48d\"]])\n\nexport default __exports__"],"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_Fragment","_renderList","$data","tabs","tab","key","id","onClick","$event","activeTab","_normalizeClass","icon","_toDisplayString","name","_hoisted_5","_hoisted_6","_createVNode","_component_recipe_browser","recipes","loading","recipesLoading","onRecipeSelected","$options","selectRecipe","onRefreshRecipes","loadRecipes","onRecipeSaved","onRecipeRemoved","_hoisted_7","_component_meal_plan_manager","mealPlansLoading","nutritionProfile","onMealPlanGenerated","_hoisted_8","_component_coming_soon_card","title","description","showRecipeModal","_createBlock","_component_recipe_detail_modal","recipe","selectedRecipe","onClose","closeRecipeModal","_cache","_ctx","$emit","disabled","$props","searchQuery","type","placeholder","onInput","args","debouncedSearch","selectedCuisine","onChange","applyFilters","value","cuisines","cuisine","formatCuisine","selectedMealType","filteredRecipes","length","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","src","image_url","alt","onError","handleImageError","_hoisted_15","dietary_tags","slice","tag","formatTag","_withModifiers","toggleSaveRecipe","is_saved_by_user","_hoisted_18","innerHTML","truncateSummary","summary","_hoisted_20","_hoisted_21","total_time_minutes","_hoisted_22","calories_per_serving","Math","round","_hoisted_23","servings","_hoisted_24","_hoisted_25","_hoisted_26","protein_per_serving","_hoisted_27","_hoisted_28","carbs_per_serving","_hoisted_29","_hoisted_30","fat_per_serving","debounce","func","wait","timeout","later","clearTimeout","setTimeout","props","Array","default","Boolean","emits","data","computed","Set","this","map","r","filter","watch","immediate","handler","newRecipes","created","methods","filtered","query","toLowerCase","includes","meal_type","charAt","toUpperCase","replace","l","clean","substring","event","target","mealPlanningApi","response","Error","removeRecipeFromMyCollection","message","$toast","success","alert","spoonacular_id","created_by","saveRecipeFromMealPlan","saveRecipeToMyCollection","error","console","errorMessage","status","__exports__","generationStatus","steps","_hoisted_4","step","index","completed","active","onSubmit","generateMealPlan","for","generateForm","plan_type","start_date","min","today","target_calories","max","number","showAdvancedOptions","_hoisted_13","_hoisted_14","availableCuisines","cuisine_preferences","_hoisted_16","max_cook_time","_hoisted_17","generating","_hoisted_19","mealPlans","plan","viewMealPlan","formatPlanType","formatDateRange","end_date","generation_version","_hoisted_31","avg_daily_calories","_hoisted_32","_hoisted_33","getMealCount","_hoisted_34","_hoisted_35","nutritional_balance_score","toFixed","daily_averages","_hoisted_36","_hoisted_37","_hoisted_38","_hoisted_39","protein","_hoisted_40","_hoisted_41","carbs","_hoisted_42","_hoisted_43","fat","variety_score","preference_match_score","_hoisted_44","_hoisted_45","_hoisted_46","style","_normalizeStyle","width","_hoisted_47","_hoisted_48","_hoisted_49","_hoisted_50","_hoisted_51","analyzeMealPlan","regeneratePlan","deleteMealPlan","selectedPlan","_component_meal_plan_detail_modal","onRegenerateMeal","mealData","regenerateMeal","onGetAlternatives","getMealAlternatives","onAnalyzePlan","analyzeMealPlanFromModal","onDeletePlan","showAnalysisModal","currentAnalysis","_component_nutritional_analysis_modal","analysis","selectedPlanForAnalysis","closeAnalysisModal","showAlternativesModal","alternativesModalData","_component_alternatives_modal","planId","day","mealType","closeAlternativesModal","onAlternativeSelected","handleAlternativeSelected","mealPlan","ai_model_used","total_calories","getTotalMeals","days_count","calories","meal_plan_data","meals","dayMeals","date","formatDate","meal","getMealTitle","getMealTypeClass","formatMealType","getMealTime","getMealRecipe","readyInMinutes","prep_time","cook_time","total_time","_hoisted_52","_hoisted_53","_hoisted_54","_hoisted_55","_hoisted_56","_hoisted_57","_hoisted_58","_hoisted_59","_hoisted_60","_hoisted_61","_hoisted_62","getNutritionValue","_hoisted_63","_hoisted_64","_hoisted_65","_hoisted_66","_hoisted_67","_hoisted_68","getMealIngredients","_hoisted_69","_hoisted_70","ingredient","idx","_hoisted_71","quantity","amount","_hoisted_72","unit","_hoisted_73","original","text","normalizedInstructions","_hoisted_74","_hoisted_75","instruction","_hoisted_76","_hoisted_77","target_protein","target_carbs","target_fat","_hoisted_78","_hoisted_79","_hoisted_80","_hoisted_81","_hoisted_82","_hoisted_83","_hoisted_84","_hoisted_85","_hoisted_86","_hoisted_87","_hoisted_88","toggleRecipeSave","savingRecipe","_hoisted_90","inferMealTypeFromTime","Date","getAlternatives","viewRecipeDetails","_hoisted_94","_hoisted_95","generateShoppingList","analyzePlan","deletePlan","showShoppingListModal","_component_shopping_list_modal","shoppingListData","shoppingListLoading","shoppingListError","closeShoppingListModal","onRetry","getDifficultyClass","difficulty_level","formatDifficulty","imageError","formatTime","showTotalNutrition","adjustedServings","calculatedNutrition","decreaseServings","validateServings","increaseServings","servingMultiplier","cleanSummary","ingredients_data","adjustedIngredients","ing","formatted","source_url","source","href","localRecipe","saving","printShoppingList","retry","shoppingList","metadata","total_items","recipe_names","generated_from","sortedCategories","category","categoryKey","isCategoryCompleted","toggleCategory","getCompletedCount","item_count","collapsedCategories","items","item","itemIndex","checked","updateProgress","notes","join","completedItems","totalItems","progressPercentage","recipeName","Object","String","categories","keys","sort","a","b","order","reduce","sorted","initializeCategories","forEach","total","values","every","start","toLocaleDateString","end","printContent","generatePrintContent","printWindow","window","open","document","write","close","print","html","entries","async","robustFetch","url","options","fetch","ok","errorText","textError","warn","responseText","log","trim","contentType","headers","get","JSON","parse","parseError","makeShoppingListRequest","requestData","token","method","body","stringify","components","ShoppingListModal","required","mounted","newRecipe","originalServings","multiplier","baseMultiplier","fiber","fiber_per_serving","isArray","formatIngredient","adjusted","adjustIngredientQuantity","raw","instr","instructions","stepText","i","stepObj","adjustStringIngredient","isNaN","parseFloat","adjustedAmount","adjustQuantity","ingredientStr","patterns","pattern","match","originalQuantity","adjustedQuantity","adjustFraction","split","num","adjustedMin","adjustedMax","fractionStr","parts","decimal","part","den","n","parseInt","decimalToFraction","tolerance","abs","gcd","findGCD","whole","floor","remainder","toString","minutes","hours","remainingMins","formats","difficulty","getPlaceholderImage","background","border","color","display","alignItems","justifyContent","fontSize","onerror","isFallbackRecipe","startsWith","navigator","onLine","recipeId","ingredients","servings_multiplier","adjusted_servings","$store","state","auth","shopping_list","warning","fallbackError","RecipeDetailModal","mealDates","firstDate","firstDayMeals","addEventListener","handleEscapeKey","beforeUnmount","removeEventListener","startDate","endDate","startDateObj","endDateObj","getTime","dateStr","mealTypeLabels","weekday","month","cleanType","typeMap","hour","getHours","time","scheduled_time","defaultTimes","defaultTime","extendedIngredients","nutrient","estimated_nutrition","undefined","nutrition","nutrientMappings","mapping","inferredMealType","cleanMealType","recipeData","prep_time_minutes","cook_time_minutes","allergens","image","source_type","backendError","details","exclude_items","group_by_category","recipeNames","push","mealIngredients","toISOString","savedRecipe","viewBox","cx","cy","overall_score","getScoreDescription","nutritional_adequacy","getAdequacyClass","formatNutrientName","formatStatus","percentage_of_target","meal_distribution","breakfast_percentage","lunch_percentage","dinner_percentage","getRatingClass","balance_rating","formatRating","variety_analysis","getVarietyClass","cuisine_diversity","ingredient_variety","cooking_method_diversity","health_highlights","highlight","recommendations","recommendation","areas_for_improvement","improvement","downloadReport","score","names","statuses","rating","classes","variety","report","rec","blob","Blob","URL","createObjectURL","link","createElement","download","appendChild","click","removeChild","revokeObjectURL","tabindex","role","includeUserRecipes","loadAlternatives","alternativeCount","alternatives","userRecipeCount","externalRecipeCount","is_user_recipe","selectAlternative","Number","count","e","MealPlanDetailModal","NutritionalAnalysisModal","AlternativesModal","loadMealPlans","process","getMealPlans","mealPlansData","results","showError","_cachedMealCount","totalMeals","result","showGenerationStatus","planData","calorie_target","updateGenerationStep","unshift","showSuccess","stepType","forceComplete","stepIndex","confirmed","confirm","p","planIndex","findIndex","selectionData","swapMeal","updatedPlan","find","planType","features","feature","progress","subscribeToUpdates","featureMap","RecipeBrowser","MealPlanManager","ComingSoonCard","currentUser","getters","loadInitialData","$router","Promise","all","loadNutritionProfile","params","_t","now","page_size","getMyRecipes","getNutritionProfile","protein_target","carb_target","fat_target","dietary_preferences","allergies_intolerances","disliked_ingredients","meals_per_day","timezone","removedRecipe","$nextTick","render"],"sourceRoot":""}