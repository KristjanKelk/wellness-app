"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[147],{147:function(e,a,t){t.r(a),t.d(a,{default:function(){return ho}});var s=t(6768),i=t(4232);const l={class:"meal-planning-dashboard"},n={class:"dashboard-tabs"},r={class:"tabs-nav"},o=["onClick"],c={class:"tab-content"},d={key:0,class:"tab-panel"},p={key:1,class:"tab-panel"},u={key:2,class:"tab-panel"},g={key:3,class:"tab-panel"};function m(e,a,t,m,h,v){const f=(0,s.g2)("recipe-browser"),y=(0,s.g2)("nutrition-profile-setup"),k=(0,s.g2)("meal-plan-manager"),_=(0,s.g2)("coming-soon-card"),L=(0,s.g2)("recipe-detail-modal");return(0,s.uX)(),(0,s.CE)("div",l,[a[0]||(a[0]=(0,s.Lk)("div",{class:"dashboard-header"},[(0,s.Lk)("h1",null,"Meal Planning Dashboard"),(0,s.Lk)("p",null,"AI-powered nutrition and meal planning")],-1)),(0,s.Lk)("div",n,[(0,s.Lk)("nav",r,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(h.tabs,e=>((0,s.uX)(),(0,s.CE)("button",{key:e.id,onClick:a=>h.activeTab=e.id,class:(0,i.C4)(["tab-button",{active:h.activeTab===e.id}])},[(0,s.Lk)("i",{class:(0,i.C4)(e.icon)},null,2),(0,s.eW)(" "+(0,i.v_)(e.name),1)],10,o))),128))]),(0,s.Lk)("div",c,["recipes"===h.activeTab?((0,s.uX)(),(0,s.CE)("div",d,[(0,s.bF)(f,{recipes:h.recipes,loading:h.recipesLoading,onRecipeSelected:v.selectRecipe,onRefreshRecipes:v.loadRecipes,onRecipeSaved:v.onRecipeSaved,onRecipeRemoved:v.onRecipeRemoved},null,8,["recipes","loading","onRecipeSelected","onRefreshRecipes","onRecipeSaved","onRecipeRemoved"])])):(0,s.Q3)("",!0),"profile"===h.activeTab?((0,s.uX)(),(0,s.CE)("div",p,[(0,s.bF)(y,{profile:h.nutritionProfile,loading:h.profileLoading,onProfileUpdated:v.onProfileUpdated},null,8,["profile","loading","onProfileUpdated"])])):(0,s.Q3)("",!0),"meal-plans"===h.activeTab?((0,s.uX)(),(0,s.CE)("div",u,[(0,s.bF)(k,{loading:h.mealPlansLoading,"nutrition-profile":h.nutritionProfile,onMealPlanGenerated:v.onMealPlanGenerated},null,8,["loading","nutrition-profile","onMealPlanGenerated"])])):(0,s.Q3)("",!0),"analytics"===h.activeTab?((0,s.uX)(),(0,s.CE)("div",g,[(0,s.bF)(_,{title:"Nutrition Analytics",description:"Detailed nutrition analytics coming soon!",icon:"fas fa-chart-line"})])):(0,s.Q3)("",!0)])]),h.showRecipeModal?((0,s.uX)(),(0,s.Wv)(L,{key:0,recipe:h.selectedRecipe,onClose:v.closeRecipeModal,onRecipeSaved:v.onRecipeSaved},null,8,["recipe","onClose","onRecipeSaved"])):(0,s.Q3)("",!0)])}t(4114),t(8111),t(2489);var h=t(5130);const v={class:"recipe-browser"},f={class:"search-section"},y={class:"search-header"},k=["disabled"],_={class:"search-bar"},L={class:"filters"},b=["value"],C={key:0,class:"loading-state"},w={key:1,class:"empty-state"},P={key:0},M={key:1},E={key:2,class:"recipe-grid"},A=["onClick"],I=["src","alt"],D={class:"recipe-badges"},S=["onClick","title"],R=["onClick"],T={class:"recipe-title"},X=["innerHTML"],x={class:"recipe-stats"},F={class:"stat"},$={class:"stat"},N={class:"stat"},W={class:"nutrition-preview"},z={class:"macro"},Q={class:"macro-value"},U={class:"macro"},j={class:"macro-value"},G={class:"macro"},V={class:"macro-value"};function B(e,a,t,l,n,r){return(0,s.uX)(),(0,s.CE)("div",v,[(0,s.Lk)("div",f,[(0,s.Lk)("div",y,[a[9]||(a[9]=(0,s.Lk)("h3",null,"My Recipe Collection",-1)),(0,s.Lk)("button",{onClick:a[0]||(a[0]=a=>e.$emit("refresh-recipes")),class:"refresh-btn",disabled:t.loading},[(0,s.Lk)("i",{class:(0,i.C4)(t.loading?"fas fa-spinner fa-spin":"fas fa-sync-alt")},null,2),a[8]||(a[8]=(0,s.eW)(" Refresh "))],8,k)]),(0,s.Lk)("div",_,[a[10]||(a[10]=(0,s.Lk)("i",{class:"fas fa-search search-icon"},null,-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>n.searchQuery=e),type:"text",placeholder:"Search recipes...",class:"search-input",onInput:a[2]||(a[2]=(...a)=>e.debouncedSearch&&e.debouncedSearch(...a))},null,544),[[h.Jo,n.searchQuery]])]),(0,s.Lk)("div",L,[(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":a[3]||(a[3]=e=>n.selectedCuisine=e),onChange:a[4]||(a[4]=(...e)=>r.applyFilters&&r.applyFilters(...e)),class:"filter-select"},[a[11]||(a[11]=(0,s.Lk)("option",{value:""},"All Cuisines",-1)),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.cuisines,e=>((0,s.uX)(),(0,s.CE)("option",{key:e,value:e},(0,i.v_)(r.formatCuisine(e)),9,b))),128))],544),[[h.u1,n.selectedCuisine]]),(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":a[5]||(a[5]=e=>n.selectedMealType=e),onChange:a[6]||(a[6]=(...e)=>r.applyFilters&&r.applyFilters(...e)),class:"filter-select"},a[12]||(a[12]=[(0,s.Fv)('<option value="" data-v-6ad281fd>All Meal Types</option><option value="breakfast" data-v-6ad281fd>Breakfast</option><option value="lunch" data-v-6ad281fd>Lunch</option><option value="dinner" data-v-6ad281fd>Dinner</option><option value="snack" data-v-6ad281fd>Snack</option>',5)]),544),[[h.u1,n.selectedMealType]])])]),t.loading?((0,s.uX)(),(0,s.CE)("div",C,a[13]||(a[13]=[(0,s.Lk)("div",{class:"loading-spinner"},null,-1),(0,s.Lk)("p",null,"Loading delicious recipes...",-1)]))):0===n.filteredRecipes.length?((0,s.uX)(),(0,s.CE)("div",w,[a[15]||(a[15]=(0,s.Lk)("i",{class:"fas fa-utensils"},null,-1)),a[16]||(a[16]=(0,s.Lk)("h3",null,"No recipes found",-1)),0===t.recipes.length?((0,s.uX)(),(0,s.CE)("p",P,a[14]||(a[14]=[(0,s.eW)(" You haven't saved any recipes yet! Save recipes from your meal plans to build your personal collection. "),(0,s.Lk)("br",null,null,-1),(0,s.Lk)("br",null,null,-1),(0,s.Lk)("strong",null,"ðŸ’¡ Tip:",-1),(0,s.eW)(' Go to the "Meal Plans" tab to create meal plans, then save your favorite recipes. ')]))):((0,s.uX)(),(0,s.CE)("p",M,"Try adjusting your search or filters"))])):((0,s.uX)(),(0,s.CE)("div",E,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.filteredRecipes,t=>((0,s.uX)(),(0,s.CE)("div",{key:t.id,class:"recipe-card"},[(0,s.Lk)("div",{class:"recipe-image",onClick:a=>e.$emit("recipe-selected",t)},[(0,s.Lk)("img",{src:t.image_url||"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZjBmMGYwIi8+CiAgPHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIxOCIgZmlsbD0iIzk5OTk5OSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkZvb2QgUmVjaXBlPC90ZXh0Pgo8L3N2Zz4K",alt:t.title,onError:a[7]||(a[7]=(...e)=>r.handleImageError&&r.handleImageError(...e))},null,40,I),(0,s.Lk)("div",D,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((t.dietary_tags||[]).slice(0,2),e=>((0,s.uX)(),(0,s.CE)("span",{key:e,class:"badge"},(0,i.v_)(r.formatTag(e)),1))),128))]),(0,s.Lk)("button",{class:"save-btn",onClick:(0,h.D$)(e=>r.toggleSaveRecipe(t),["stop"]),title:t.is_saved_by_user?"Remove from my recipes":"Save to my recipes"},[(0,s.Lk)("i",{class:(0,i.C4)(t.is_saved_by_user?"fas fa-heart":"far fa-heart")},null,2)],8,S)],8,A),(0,s.Lk)("div",{class:"recipe-content",onClick:a=>e.$emit("recipe-selected",t)},[(0,s.Lk)("h3",T,(0,i.v_)(t.title),1),(0,s.Lk)("p",{class:"recipe-summary",innerHTML:r.truncateSummary(t.summary)},null,8,X),(0,s.Lk)("div",x,[(0,s.Lk)("div",F,[a[17]||(a[17]=(0,s.Lk)("i",{class:"fas fa-clock"},null,-1)),(0,s.Lk)("span",null,(0,i.v_)(t.total_time_minutes||"N/A")+(0,i.v_)(t.total_time_minutes?"min":""),1)]),(0,s.Lk)("div",$,[a[18]||(a[18]=(0,s.Lk)("i",{class:"fas fa-fire"},null,-1)),(0,s.Lk)("span",null,(0,i.v_)(t.calories_per_serving?Math.round(t.calories_per_serving):"N/A")+(0,i.v_)(t.calories_per_serving?" cal":""),1)]),(0,s.Lk)("div",N,[a[19]||(a[19]=(0,s.Lk)("i",{class:"fas fa-users"},null,-1)),(0,s.Lk)("span",null,(0,i.v_)(t.servings||"N/A")+(0,i.v_)(t.servings?" servings":""),1)])]),(0,s.Lk)("div",W,[(0,s.Lk)("div",z,[a[20]||(a[20]=(0,s.Lk)("span",{class:"macro-label"},"Protein",-1)),(0,s.Lk)("span",Q,(0,i.v_)(t.protein_per_serving?Math.round(t.protein_per_serving):"N/A")+(0,i.v_)(t.protein_per_serving?"g":""),1)]),(0,s.Lk)("div",U,[a[21]||(a[21]=(0,s.Lk)("span",{class:"macro-label"},"Carbs",-1)),(0,s.Lk)("span",j,(0,i.v_)(t.carbs_per_serving?Math.round(t.carbs_per_serving):"N/A")+(0,i.v_)(t.carbs_per_serving?"g":""),1)]),(0,s.Lk)("div",G,[a[22]||(a[22]=(0,s.Lk)("span",{class:"macro-label"},"Fat",-1)),(0,s.Lk)("span",V,(0,i.v_)(t.fat_per_serving?Math.round(t.fat_per_serving):"N/A")+(0,i.v_)(t.fat_per_serving?"g":""),1)])])],8,R)]))),128))]))])}t(1701),t(7642),t(8004),t(3853),t(5876),t(2475),t(5024),t(1698);function O(e,a){let t;return function(...s){const i=()=>{clearTimeout(t),e(...s)};clearTimeout(t),t=setTimeout(i,a)}}var H={name:"RecipeBrowser",props:{recipes:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}},emits:["recipe-selected","refresh-recipes","recipe-saved","recipe-removed"],data(){return{searchQuery:"",selectedCuisine:"",selectedMealType:"",filteredRecipes:[]}},computed:{cuisines(){return[...new Set(this.recipes.map(e=>e.cuisine).filter(Boolean))]}},watch:{recipes:{immediate:!0,handler(e){this.filteredRecipes=this.recipes}}},created(){this.debouncedSearch=O(this.applyFilters,300)},methods:{applyFilters(){let e=this.recipes;if(this.searchQuery){const a=this.searchQuery.toLowerCase();e=e.filter(e=>e.title&&e.title.toLowerCase().includes(a)||e.summary&&e.summary.toLowerCase().includes(a))}this.selectedCuisine&&(e=e.filter(e=>e.cuisine===this.selectedCuisine)),this.selectedMealType&&(e=e.filter(e=>e.meal_type===this.selectedMealType)),this.filteredRecipes=e},formatCuisine(e){return e.charAt(0).toUpperCase()+e.slice(1)},formatTag(e){return e.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase())},truncateSummary(e){if(!e)return"";const a=e.replace(/<[^>]*>/g,"");return a.length>120?a.substring(0,120)+"...":a},handleImageError(e){e.target.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZjBmMGYwIi8+CiAgPHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIxOCIgZmlsbD0iIzk5OTk5OSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkZvb2QgUmVjaXBlPC90ZXh0Pgo8L3N2Zz4K"},async toggleSaveRecipe(e){try{const{mealPlanningApi:a}=await Promise.resolve().then(t.bind(t,5090));let s;if(e.is_saved_by_user){if(!e.id)throw new Error("Cannot remove recipe: No recipe ID found");s=await a.removeRecipeFromMyCollection(e.id),e.is_saved_by_user=!1,this.$emit("recipe-removed",e);const t=s.data?.message||"Recipe removed from your collection!";this.$toast?.success?.(t)||alert(t)}else{s=e.spoonacular_id&&!e.created_by?await a.saveRecipeFromMealPlan(e):e.id?await a.saveRecipeToMyCollection(e.id):await a.saveRecipeFromMealPlan(e),e.is_saved_by_user=!0,this.$emit("recipe-saved",s.data.recipe||e);const t=s.data?.message||"Recipe saved to your collection!";this.$toast?.success?.(t)||alert(t)}}catch(a){console.error("Error toggling recipe save status:",a);let e="An error occurred";404===a.response?.status?e="Recipe not found. It may have been removed.":403===a.response?.status?e="You don't have permission to perform this action.":500===a.response?.status?e="Server error. Please try again later.":a.response?.data?.error?e=a.response.data.error:a.response?.data?.message?e=a.response.data.message:a.message&&(e=a.message),this.$toast?.error?.(e)||alert(`Error: ${e}`)}}}},Z=t(1241);const q=(0,Z.A)(H,[["render",B],["__scopeId","data-v-6ad281fd"]]);var K=q;const J={class:"nutrition-profile-setup"},Y={class:"profile-card"},ee={class:"card-header"},ae={class:"ai-wizard-header"},te={class:"ai-wizard-content"},se={key:0,class:"ai-step"},ie={class:"form-grid"},le={class:"form-group"},ne={class:"form-group"},re={class:"form-group"},oe={class:"form-group"},ce={key:1,class:"ai-step"},de={class:"goal-options"},pe=["onClick"],ue={class:"goal-icon"},ge={class:"goal-text"},me={key:2,class:"ai-step"},he={class:"activity-options"},ve=["onClick"],fe={class:"activity-icon"},ye={class:"activity-text"},ke={key:3,class:"ai-step"},_e={class:"dietary-preferences"},Le=["onClick"],be={class:"diet-emoji"},Ce={key:4,class:"ai-step"},we={key:0,class:"generating-profile"},Pe={key:1,class:"profile-preview"},Me={class:"profile-summary"},Ee={class:"macro-preview"},Ae={class:"macro-item"},Ie={class:"macro-value"},De={class:"macro-item"},Se={class:"macro-value"},Re={class:"macro-item"},Te={class:"macro-value"},Xe={class:"macro-item"},xe={class:"macro-value"},Fe={class:"meal-plan-preview"},$e={class:"ai-wizard-footer"},Ne=["disabled"],We={key:1,class:"error-messages"},ze={class:"error-card"},Qe={key:2,class:"loading-state"},Ue={class:"form-section"},je={class:"targets-grid"},Ge={class:"form-group enhanced-input"},Ve={class:"input-wrapper"},Be={class:"input-hint"},Oe={class:"form-group enhanced-input"},He={class:"input-wrapper"},Ze={class:"input-hint"},qe={class:"form-group enhanced-input"},Ke={class:"input-wrapper"},Je={class:"input-hint"},Ye={class:"form-group enhanced-input"},ea={class:"input-wrapper"},aa={class:"input-hint"},ta={class:"macro-distribution"},sa={class:"macro-chart"},ia={class:"macro-bar"},la={class:"macro-legend"},na={class:"legend-item"},ra={class:"legend-item"},oa={class:"legend-item"},ca={class:"form-section"},da={key:0,class:"conflict-warning"},pa={class:"preferences-grid"},ua=["value","disabled"],ga={key:0,class:"disabled-reason"},ma={class:"form-section"},ha={class:"preferences-grid"},va=["value"],fa={class:"form-section"},ya={class:"preferences-grid"},ka=["value"],_a={class:"form-section"},La={class:"form-group"},ba={key:0,class:"ingredient-tags"},Ca=["onClick"],wa={class:"form-section"},Pa={class:"meal-prefs-grid"},Ma={class:"form-group"},Ea={class:"form-group"},Aa={class:"form-actions"},Ia=["disabled"],Da={key:0},Sa={key:1};function Ra(e,a,t,l,n,r){const o=(0,s.g2)("FormSelect");return(0,s.uX)(),(0,s.CE)("div",J,[(0,s.Lk)("div",Y,[(0,s.Lk)("div",ee,[a[26]||(a[26]=(0,s.Lk)("h2",null,"ðŸŽ¯ Your Personalized Nutrition Profile",-1)),a[27]||(a[27]=(0,s.Lk)("p",null,"Let AI help you create the perfect nutrition plan tailored to your goals",-1)),n.hasExistingProfile?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("button",{key:0,onClick:a[0]||(a[0]=e=>n.showAIWizard=!0),class:"ai-wizard-btn",type:"button"},a[25]||(a[25]=[(0,s.Lk)("i",{class:"fas fa-magic"},null,-1),(0,s.eW)(" Generate with AI ")])))]),n.showAIWizard?((0,s.uX)(),(0,s.CE)("div",{key:0,class:"ai-wizard-overlay",onClick:a[10]||(a[10]=e=>n.showAIWizard=!1)},[(0,s.Lk)("div",{class:"ai-wizard-modal",onClick:a[9]||(a[9]=(0,h.D$)(()=>{},["stop"]))},[(0,s.Lk)("div",ae,[a[28]||(a[28]=(0,s.Lk)("h3",null,"ðŸ¤– AI Nutrition Profile Generator",-1)),(0,s.Lk)("button",{onClick:a[1]||(a[1]=e=>n.showAIWizard=!1),class:"close-btn"},"Ã—")]),(0,s.Lk)("div",te,[1===n.aiStep?((0,s.uX)(),(0,s.CE)("div",se,[a[32]||(a[32]=(0,s.Lk)("h4",null,"Tell me about yourself",-1)),(0,s.Lk)("div",ie,[(0,s.Lk)("div",le,[a[29]||(a[29]=(0,s.Lk)("label",null,"Age",-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":a[2]||(a[2]=e=>n.aiProfile.age=e),type:"number",min:"13",max:"100",class:"form-input"},null,512),[[h.Jo,n.aiProfile.age,void 0,{number:!0}]])]),(0,s.Lk)("div",ne,[(0,s.bF)(o,{id:"gender-select",modelValue:n.aiProfile.gender,"onUpdate:modelValue":a[3]||(a[3]=e=>n.aiProfile.gender=e),label:"Gender",placeholder:"Select...",options:[{value:"male",label:"Male"},{value:"female",label:"Female"},{value:"other",label:"Other"}]},null,8,["modelValue"])]),(0,s.Lk)("div",re,[a[30]||(a[30]=(0,s.Lk)("label",null,"Height (cm)",-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":a[4]||(a[4]=e=>n.aiProfile.height=e),type:"number",min:"100",max:"250",class:"form-input"},null,512),[[h.Jo,n.aiProfile.height,void 0,{number:!0}]])]),(0,s.Lk)("div",oe,[a[31]||(a[31]=(0,s.Lk)("label",null,"Weight (kg)",-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":a[5]||(a[5]=e=>n.aiProfile.weight=e),type:"number",min:"30",max:"300",class:"form-input"},null,512),[[h.Jo,n.aiProfile.weight,void 0,{number:!0}]])])])])):(0,s.Q3)("",!0),2===n.aiStep?((0,s.uX)(),(0,s.CE)("div",ce,[a[33]||(a[33]=(0,s.Lk)("h4",null,"What's your primary goal?",-1)),(0,s.Lk)("div",de,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.goalOptions,e=>((0,s.uX)(),(0,s.CE)("button",{key:e.value,onClick:a=>n.aiProfile.goal=e.value,class:(0,i.C4)(["goal-option",{active:n.aiProfile.goal===e.value}])},[(0,s.Lk)("div",ue,(0,i.v_)(e.icon),1),(0,s.Lk)("div",ge,[(0,s.Lk)("h5",null,(0,i.v_)(e.label),1),(0,s.Lk)("p",null,(0,i.v_)(e.description),1)])],10,pe))),128))])])):(0,s.Q3)("",!0),3===n.aiStep?((0,s.uX)(),(0,s.CE)("div",me,[a[34]||(a[34]=(0,s.Lk)("h4",null,"Activity Level",-1)),(0,s.Lk)("div",he,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.activityOptions,e=>((0,s.uX)(),(0,s.CE)("button",{key:e.value,onClick:a=>n.aiProfile.activity=e.value,class:(0,i.C4)(["activity-option",{active:n.aiProfile.activity===e.value}])},[(0,s.Lk)("div",fe,(0,i.v_)(e.icon),1),(0,s.Lk)("div",ye,[(0,s.Lk)("h5",null,(0,i.v_)(e.label),1),(0,s.Lk)("p",null,(0,i.v_)(e.description),1)])],10,ve))),128))])])):(0,s.Q3)("",!0),4===n.aiStep?((0,s.uX)(),(0,s.CE)("div",ke,[a[35]||(a[35]=(0,s.Lk)("h4",null,"Dietary Preferences",-1)),(0,s.Lk)("div",_e,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.popularDiets,e=>((0,s.uX)(),(0,s.CE)("button",{key:e.value,onClick:a=>r.toggleDiet(e.value),class:(0,i.C4)(["diet-option",{active:n.aiProfile.diets.includes(e.value)}])},[(0,s.Lk)("span",be,(0,i.v_)(e.emoji),1),(0,s.Lk)("span",null,(0,i.v_)(e.label),1)],10,Le))),128))])])):(0,s.Q3)("",!0),5===n.aiStep?((0,s.uX)(),(0,s.CE)("div",Ce,[n.generatingProfile?((0,s.uX)(),(0,s.CE)("div",we,a[36]||(a[36]=[(0,s.Lk)("div",{class:"spinner"},null,-1),(0,s.Lk)("h4",null,"ðŸ§  AI is analyzing your preferences...",-1),(0,s.Lk)("p",null,"Creating your personalized nutrition profile",-1)]))):((0,s.uX)(),(0,s.CE)("div",Pe,[a[42]||(a[42]=(0,s.Lk)("h4",null,"âœ¨ Your AI-Generated Profile",-1)),(0,s.Lk)("div",Me,[(0,s.Lk)("div",Ee,[(0,s.Lk)("div",Ae,[a[37]||(a[37]=(0,s.Lk)("span",{class:"macro-label"},"Daily Calories",-1)),(0,s.Lk)("span",Ie,(0,i.v_)(n.aiGeneratedProfile.calorie_target),1)]),(0,s.Lk)("div",De,[a[38]||(a[38]=(0,s.Lk)("span",{class:"macro-label"},"Protein",-1)),(0,s.Lk)("span",Se,(0,i.v_)(n.aiGeneratedProfile.protein_target)+"g",1)]),(0,s.Lk)("div",Re,[a[39]||(a[39]=(0,s.Lk)("span",{class:"macro-label"},"Carbs",-1)),(0,s.Lk)("span",Te,(0,i.v_)(n.aiGeneratedProfile.carb_target)+"g",1)]),(0,s.Lk)("div",Xe,[a[40]||(a[40]=(0,s.Lk)("span",{class:"macro-label"},"Fat",-1)),(0,s.Lk)("span",xe,(0,i.v_)(n.aiGeneratedProfile.fat_target)+"g",1)])]),(0,s.Lk)("div",Fe,[a[41]||(a[41]=(0,s.Lk)("h5",null,"Recommended Meal Structure",-1)),(0,s.Lk)("p",null,(0,i.v_)(n.aiGeneratedProfile.meals_per_day)+" meals per day",1),(0,s.Lk)("p",null,(0,i.v_)(n.aiGeneratedProfile.snacks_per_day||0)+" snacks per day",1)])])]))])):(0,s.Q3)("",!0)]),(0,s.Lk)("div",$e,[n.aiStep>1?((0,s.uX)(),(0,s.CE)("button",{key:0,onClick:a[6]||(a[6]=e=>n.aiStep--),class:"btn-secondary"}," Back ")):(0,s.Q3)("",!0),n.aiStep<5?((0,s.uX)(),(0,s.CE)("button",{key:1,onClick:a[7]||(a[7]=(...e)=>r.nextAIStep&&r.nextAIStep(...e)),class:"btn-primary",disabled:!r.canProceedToNextStep}," Next ",8,Ne)):(0,s.Q3)("",!0),5!==n.aiStep||n.generatingProfile?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("button",{key:2,onClick:a[8]||(a[8]=(...e)=>r.applyAIProfile&&r.applyAIProfile(...e)),class:"btn-success"}," Apply This Profile "))])])])):(0,s.Q3)("",!0),n.validationErrors.length>0?((0,s.uX)(),(0,s.CE)("div",We,[(0,s.Lk)("div",ze,[a[43]||(a[43]=(0,s.Lk)("h4",null,"Please fix the following issues:",-1)),(0,s.Lk)("ul",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.validationErrors,e=>((0,s.uX)(),(0,s.CE)("li",{key:e},(0,i.v_)(e),1))),128))])])])):(0,s.Q3)("",!0),t.loading?((0,s.uX)(),(0,s.CE)("div",Qe,a[44]||(a[44]=[(0,s.Lk)("div",{class:"loading-spinner"},null,-1),(0,s.Lk)("p",null,"Loading your profile...",-1)]))):((0,s.uX)(),(0,s.CE)("form",{key:3,onSubmit:a[24]||(a[24]=(0,h.D$)((...e)=>r.saveProfile&&r.saveProfile(...e),["prevent"])),class:"profile-form"},[(0,s.Lk)("div",Ue,[a[57]||(a[57]=(0,s.Lk)("h3",null,"ðŸŽ¯ Daily Nutrition Targets",-1)),(0,s.Lk)("div",je,[(0,s.Lk)("div",Ge,[a[46]||(a[46]=(0,s.Lk)("label",{for:"calorie_target"},"Daily Calories",-1)),(0,s.Lk)("div",Ve,[(0,s.bo)((0,s.Lk)("input",{id:"calorie_target","onUpdate:modelValue":a[11]||(a[11]=e=>n.formData.calorie_target=e),type:"number",min:"1000",max:"5000",class:"form-input",required:""},null,512),[[h.Jo,n.formData.calorie_target,void 0,{number:!0}]]),(0,s.Lk)("div",Be,[a[45]||(a[45]=(0,s.Lk)("i",{class:"fas fa-fire"},null,-1)),(0,s.Lk)("span",null,(0,i.v_)(r.getCalorieRecommendation()),1)])])]),(0,s.Lk)("div",Oe,[a[48]||(a[48]=(0,s.Lk)("label",{for:"protein_target"},"Protein (g)",-1)),(0,s.Lk)("div",He,[(0,s.bo)((0,s.Lk)("input",{id:"protein_target","onUpdate:modelValue":a[12]||(a[12]=e=>n.formData.protein_target=e),type:"number",min:"0",max:"500",class:"form-input",required:""},null,512),[[h.Jo,n.formData.protein_target,void 0,{number:!0}]]),(0,s.Lk)("div",Ze,[a[47]||(a[47]=(0,s.Lk)("i",{class:"fas fa-dumbbell"},null,-1)),(0,s.Lk)("span",null,(0,i.v_)((n.formData.protein_target/n.formData.calorie_target*100*4).toFixed(0))+"% of calories",1)])])]),(0,s.Lk)("div",qe,[a[50]||(a[50]=(0,s.Lk)("label",{for:"carb_target"},"Carbs (g)",-1)),(0,s.Lk)("div",Ke,[(0,s.bo)((0,s.Lk)("input",{id:"carb_target","onUpdate:modelValue":a[13]||(a[13]=e=>n.formData.carb_target=e),type:"number",min:"0",max:"1000",class:"form-input",required:""},null,512),[[h.Jo,n.formData.carb_target,void 0,{number:!0}]]),(0,s.Lk)("div",Je,[a[49]||(a[49]=(0,s.Lk)("i",{class:"fas fa-bread-slice"},null,-1)),(0,s.Lk)("span",null,(0,i.v_)((n.formData.carb_target/n.formData.calorie_target*100*4).toFixed(0))+"% of calories",1)])])]),(0,s.Lk)("div",Ye,[a[52]||(a[52]=(0,s.Lk)("label",{for:"fat_target"},"Fat (g)",-1)),(0,s.Lk)("div",ea,[(0,s.bo)((0,s.Lk)("input",{id:"fat_target","onUpdate:modelValue":a[14]||(a[14]=e=>n.formData.fat_target=e),type:"number",min:"0",max:"300",class:"form-input",required:""},null,512),[[h.Jo,n.formData.fat_target,void 0,{number:!0}]]),(0,s.Lk)("div",aa,[a[51]||(a[51]=(0,s.Lk)("i",{class:"fas fa-oil-can"},null,-1)),(0,s.Lk)("span",null,(0,i.v_)((n.formData.fat_target/n.formData.calorie_target*100*9).toFixed(0))+"% of calories",1)])])])]),(0,s.Lk)("div",ta,[a[56]||(a[56]=(0,s.Lk)("h4",null,"Macronutrient Distribution",-1)),(0,s.Lk)("div",sa,[(0,s.Lk)("div",ia,[(0,s.Lk)("div",{class:"macro-segment protein",style:(0,i.Tr)({width:r.proteinPercentage+"%"})},null,4),(0,s.Lk)("div",{class:"macro-segment carbs",style:(0,i.Tr)({width:r.carbPercentage+"%"})},null,4),(0,s.Lk)("div",{class:"macro-segment fat",style:(0,i.Tr)({width:r.fatPercentage+"%"})},null,4)]),(0,s.Lk)("div",la,[(0,s.Lk)("div",na,[a[53]||(a[53]=(0,s.Lk)("span",{class:"legend-color protein"},null,-1)),(0,s.Lk)("span",null,"Protein "+(0,i.v_)(r.proteinPercentage)+"%",1)]),(0,s.Lk)("div",ra,[a[54]||(a[54]=(0,s.Lk)("span",{class:"legend-color carbs"},null,-1)),(0,s.Lk)("span",null,"Carbs "+(0,i.v_)(r.carbPercentage)+"%",1)]),(0,s.Lk)("div",oa,[a[55]||(a[55]=(0,s.Lk)("span",{class:"legend-color fat"},null,-1)),(0,s.Lk)("span",null,"Fat "+(0,i.v_)(r.fatPercentage)+"%",1)])])])])]),(0,s.Lk)("div",ca,[a[61]||(a[61]=(0,s.Lk)("h3",null,"Dietary Preferences",-1)),n.dietaryConflicts.length>0?((0,s.uX)(),(0,s.CE)("div",da,[a[58]||(a[58]=(0,s.Lk)("i",{class:"fas fa-exclamation-triangle"},null,-1)),a[59]||(a[59]=(0,s.Lk)("span",null,"Warning: Some selected preferences may conflict with each other",-1)),(0,s.Lk)("ul",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.dietaryConflicts,e=>((0,s.uX)(),(0,s.CE)("li",{key:e},(0,i.v_)(e),1))),128))])])):(0,s.Q3)("",!0),(0,s.Lk)("div",pa,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.availableDietaryPreferences,e=>((0,s.uX)(),(0,s.CE)("label",{key:e.value,class:(0,i.C4)(["checkbox-label",{disabled:r.isPreferenceDisabled(e.value)}])},[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":a[15]||(a[15]=e=>n.formData.dietary_preferences=e),type:"checkbox",value:e.value,disabled:r.isPreferenceDisabled(e.value),class:"checkbox-input",onChange:a[16]||(a[16]=(...e)=>r.checkDietaryConflicts&&r.checkDietaryConflicts(...e))},null,40,ua),[[h.lH,n.formData.dietary_preferences]]),a[60]||(a[60]=(0,s.Lk)("span",{class:"checkbox-custom"},null,-1)),(0,s.eW)(" "+(0,i.v_)(e.label)+" ",1),r.isPreferenceDisabled(e.value)?((0,s.uX)(),(0,s.CE)("span",ga," (Conflicts with current selection) ")):(0,s.Q3)("",!0)],2))),128))])]),(0,s.Lk)("div",ma,[a[63]||(a[63]=(0,s.Lk)("h3",null,"Allergies & Intolerances",-1)),(0,s.Lk)("div",ha,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.availableAllergies,e=>((0,s.uX)(),(0,s.CE)("label",{key:e.value,class:"checkbox-label"},[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":a[17]||(a[17]=e=>n.formData.allergies_intolerances=e),type:"checkbox",value:e.value,class:"checkbox-input"},null,8,va),[[h.lH,n.formData.allergies_intolerances]]),a[62]||(a[62]=(0,s.Lk)("span",{class:"checkbox-custom"},null,-1)),(0,s.eW)(" "+(0,i.v_)(e.label),1)]))),128))])]),(0,s.Lk)("div",fa,[a[65]||(a[65]=(0,s.Lk)("h3",null,"Favorite Cuisines",-1)),(0,s.Lk)("div",ya,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.availableCuisines,e=>((0,s.uX)(),(0,s.CE)("label",{key:e.value,class:"checkbox-label"},[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":a[18]||(a[18]=e=>n.formData.cuisine_preferences=e),type:"checkbox",value:e.value,class:"checkbox-input"},null,8,ka),[[h.lH,n.formData.cuisine_preferences]]),a[64]||(a[64]=(0,s.Lk)("span",{class:"checkbox-custom"},null,-1)),(0,s.eW)(" "+(0,i.v_)(e.label),1)]))),128))])]),(0,s.Lk)("div",_a,[a[68]||(a[68]=(0,s.Lk)("h3",null,"Disliked Ingredients",-1)),(0,s.Lk)("div",La,[a[66]||(a[66]=(0,s.Lk)("label",{for:"disliked_ingredients"},"Ingredients you want to avoid",-1)),(0,s.bo)((0,s.Lk)("input",{id:"disliked_ingredients","onUpdate:modelValue":a[19]||(a[19]=e=>n.dislikedIngredientsInput=e),type:"text",class:"form-input",placeholder:"Enter ingredients separated by commas (e.g., mushrooms, tofu, cilantro)",onBlur:a[20]||(a[20]=(...e)=>r.updateDislikedIngredients&&r.updateDislikedIngredients(...e))},null,544),[[h.Jo,n.dislikedIngredientsInput]]),a[67]||(a[67]=(0,s.Lk)("span",{class:"form-help"},"Separate multiple ingredients with commas",-1)),n.formData.disliked_ingredients.length>0?((0,s.uX)(),(0,s.CE)("div",ba,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.formData.disliked_ingredients,e=>((0,s.uX)(),(0,s.CE)("span",{key:e,class:"ingredient-tag"},[(0,s.eW)((0,i.v_)(e)+" ",1),(0,s.Lk)("button",{type:"button",onClick:a=>r.removeDislikedIngredient(e),class:"remove-tag"},"Ã—",8,Ca)]))),128))])):(0,s.Q3)("",!0)])]),(0,s.Lk)("div",wa,[a[71]||(a[71]=(0,s.Lk)("h3",null,"Meal Preferences",-1)),(0,s.Lk)("div",Pa,[(0,s.Lk)("div",Ma,[(0,s.bF)(o,{id:"meals_per_day",modelValue:n.formData.meals_per_day,"onUpdate:modelValue":a[21]||(a[21]=e=>n.formData.meals_per_day=e),label:"Meals per Day",options:[{value:2,label:"2 meals"},{value:3,label:"3 meals"},{value:4,label:"4 meals"},{value:5,label:"5 meals"},{value:6,label:"6 meals"}],"help-text":"Choose the number of meals you prefer per day"},null,8,["modelValue"])]),(0,s.Lk)("div",Ea,[a[70]||(a[70]=(0,s.Lk)("label",{for:"timezone"},"Timezone",-1)),(0,s.bo)((0,s.Lk)("select",{id:"timezone","onUpdate:modelValue":a[22]||(a[22]=e=>n.formData.timezone=e),class:"form-select"},a[69]||(a[69]=[(0,s.Fv)('<option value="UTC" data-v-7ef3f1e1>UTC</option><option value="Europe/London" data-v-7ef3f1e1>London</option><option value="Europe/Berlin" data-v-7ef3f1e1>Berlin</option><option value="Europe/Tallinn" data-v-7ef3f1e1>Tallinn (Estonia)</option><option value="America/New_York" data-v-7ef3f1e1>New York</option><option value="America/Los_Angeles" data-v-7ef3f1e1>Los Angeles</option><option value="Asia/Tokyo" data-v-7ef3f1e1>Tokyo</option>',7)]),512),[[h.u1,n.formData.timezone]])])])]),(0,s.Lk)("div",Aa,[(0,s.Lk)("button",{type:"submit",class:"btn btn-primary",disabled:n.saving||r.hasValidationErrors},[n.saving?((0,s.uX)(),(0,s.CE)("span",Da,a[72]||(a[72]=[(0,s.Lk)("i",{class:"fas fa-spinner fa-spin"},null,-1),(0,s.eW)(" Saving... ")]))):((0,s.uX)(),(0,s.CE)("span",Sa,a[73]||(a[73]=[(0,s.Lk)("i",{class:"fas fa-save"},null,-1),(0,s.eW)(" Save Profile ")])))],8,Ia),(0,s.Lk)("button",{type:"button",onClick:a[23]||(a[23]=(...e)=>r.calculateTargets&&r.calculateTargets(...e)),class:"btn btn-secondary"},a[74]||(a[74]=[(0,s.Lk)("i",{class:"fas fa-calculator"},null,-1),(0,s.eW)(" Auto-Calculate Targets ")]))])],32))])])}t(116),t(3579);var Ta=t(5090),Xa=t(2216),xa={name:"NutritionProfileSetup",components:{FormSelect:Xa.A},props:{profile:{type:Object,default:null},loading:{type:Boolean,default:!1}},emits:["profile-updated"],data(){return{saving:!1,validationErrors:[],dietaryConflicts:[],dislikedIngredientsInput:"",formData:{calorie_target:2e3,protein_target:100,carb_target:250,fat_target:67,dietary_preferences:[],allergies_intolerances:[],cuisine_preferences:[],disliked_ingredients:[],meals_per_day:3,timezone:"Europe/Tallinn"},availableDietaryPreferences:[{value:"vegetarian",label:"Vegetarian",conflicts:["paleo"]},{value:"vegan",label:"Vegan",conflicts:["paleo","pescatarian","keto"]},{value:"pescatarian",label:"Pescatarian",conflicts:["vegan","vegetarian","paleo"]},{value:"keto",label:"Ketogenic",conflicts:["vegan","high_carb","mediterranean"]},{value:"paleo",label:"Paleo",conflicts:["vegetarian","vegan","pescatarian","mediterranean"]},{value:"mediterranean",label:"Mediterranean",conflicts:["keto","paleo","low_carb"]},{value:"low_carb",label:"Low Carb",conflicts:["mediterranean","high_carb"]},{value:"high_carb",label:"High Carb",conflicts:["keto","low_carb"]},{value:"high_protein",label:"High Protein",conflicts:[]},{value:"gluten_free",label:"Gluten Free",conflicts:[]},{value:"dairy_free",label:"Dairy Free",conflicts:[]},{value:"low_sodium",label:"Low Sodium",conflicts:[]},{value:"diabetic",label:"Diabetic Friendly",conflicts:["high_carb"]},{value:"heart_healthy",label:"Heart Healthy",conflicts:[]},{value:"whole30",label:"Whole30",conflicts:["vegetarian","vegan"]}],availableAllergies:[{value:"nuts",label:"Tree Nuts"},{value:"peanuts",label:"Peanuts"},{value:"dairy",label:"Dairy/Lactose"},{value:"gluten",label:"Gluten"},{value:"eggs",label:"Eggs"},{value:"fish",label:"Fish"},{value:"shellfish",label:"Shellfish"},{value:"soy",label:"Soy"},{value:"sesame",label:"Sesame"},{value:"sulfites",label:"Sulfites"}],availableCuisines:[{value:"italian",label:"Italian"},{value:"mexican",label:"Mexican"},{value:"asian",label:"Asian"},{value:"indian",label:"Indian"},{value:"mediterranean",label:"Mediterranean"},{value:"american",label:"American"},{value:"french",label:"French"},{value:"thai",label:"Thai"},{value:"japanese",label:"Japanese"},{value:"chinese",label:"Chinese"},{value:"middle_eastern",label:"Middle Eastern"},{value:"korean",label:"Korean"},{value:"greek",label:"Greek"},{value:"spanish",label:"Spanish"}],aiStep:1,showAIWizard:!1,aiProfile:{age:null,gender:"",height:null,weight:null,goal:"",activity:"",diets:[]},goalOptions:[{value:"weight_loss",label:"Weight Loss",icon:"ðŸ”¥",description:"Lose weight by burning more calories than you consume"},{value:"muscle_gain",label:"Muscle Gain",icon:"ðŸ’ª",description:"Gain muscle mass while maintaining a healthy weight"},{value:"maintenance",label:"Maintenance",icon:"âš–ï¸",description:"Maintain your current weight and body composition"},{value:"performance",label:"Performance",icon:"âš½ï¸",description:"Optimize for athletic performance"}],activityOptions:[{value:"sedentary",label:"Sedentary (little or no exercise)",icon:"ðŸ’º"},{value:"light",label:"Lightly Active (exercise 1-3 days/week)",icon:"ðŸƒ"},{value:"moderate",label:"Moderately Active (exercise 3-5 days/week)",icon:"ðŸƒâ€â™‚ï¸"},{value:"very_active",label:"Very Active (exercise 6-7 days/week)",icon:"ðŸƒâ€â™‚ï¸"},{value:"extra_active",label:"Extra Active (very intense exercise, physical job, or 2x training)",icon:"ðŸ’ª"}],popularDiets:[{value:"keto",label:"Ketogenic",emoji:"ðŸ§˜â€â™‚ï¸"},{value:"paleo",label:"Paleo",emoji:"ðŸ¥‘"},{value:"mediterranean",label:"Mediterranean",emoji:"ðŸŒŠ"},{value:"low_carb",label:"Low Carb",emoji:"ðŸŽ"},{value:"high_protein",label:"High Protein",emoji:"ðŸ’ª"},{value:"vegan",label:"Vegan",emoji:"ðŸŒ±"},{value:"vegetarian",label:"Vegetarian",emoji:"ðŸ¥¦"},{value:"gluten_free",label:"Gluten Free",emoji:"ðŸŒ¾"},{value:"dairy_free",label:"Dairy Free",emoji:"ðŸ¥›"},{value:"low_sodium",label:"Low Sodium",emoji:"ðŸ§‚"}],aiGeneratedProfile:null,generatingProfile:!1,hasExistingProfile:!1}},computed:{hasValidationErrors(){return this.validationErrors.length>0||this.dietaryConflicts.length>0},proteinPercentage(){return 0===this.formData.calorie_target?0:Math.round(4*this.formData.protein_target/this.formData.calorie_target*100)},carbPercentage(){return 0===this.formData.calorie_target?0:Math.round(4*this.formData.carb_target/this.formData.calorie_target*100)},fatPercentage(){return 0===this.formData.calorie_target?0:Math.round(9*this.formData.fat_target/this.formData.calorie_target*100)},canProceedToNextStep(){switch(this.aiStep){case 1:return this.aiProfile.age&&this.aiProfile.gender&&this.aiProfile.height&&this.aiProfile.weight;case 2:return this.aiProfile.goal;case 3:return this.aiProfile.activity;case 4:return!0;default:return!0}}},watch:{profile:{immediate:!0,handler(e){e?(this.formData={...this.formData,...e},e.disliked_ingredients&&(this.dislikedIngredientsInput=e.disliked_ingredients.join(", ")),this.checkDietaryConflicts(),this.hasExistingProfile=!0):this.hasExistingProfile=!1}}},methods:{async saveProfile(){if(this.validateForm(),!this.hasValidationErrors){this.saving=!0;try{const e=await Ta.mealPlanningApi.updateNutritionProfile(this.formData);this.$emit("profile-updated",e.data),this.$toast?.success?.("Nutrition profile saved successfully!")||alert("Nutrition profile saved successfully!")}catch(e){console.error("Error saving profile:",e);const a=e.response?.data?.detail||e.response?.data?.message||e.message||"Failed to save nutrition profile";this.$toast?.error?.(a)||alert(a)}finally{this.saving=!1}}},validateForm(){this.validationErrors=[],(!this.formData.calorie_target||this.formData.calorie_target<1e3||this.formData.calorie_target>5e3)&&this.validationErrors.push("Daily calories must be between 1000 and 5000"),(!this.formData.protein_target||this.formData.protein_target<0||this.formData.protein_target>500)&&this.validationErrors.push("Protein target must be between 0 and 500g"),(!this.formData.carb_target||this.formData.carb_target<0||this.formData.carb_target>1e3)&&this.validationErrors.push("Carbohydrate target must be between 0 and 1000g"),(!this.formData.fat_target||this.formData.fat_target<0||this.formData.fat_target>300)&&this.validationErrors.push("Fat target must be between 0 and 300g");const e=4*this.formData.protein_target+4*this.formData.carb_target+9*this.formData.fat_target,a=Math.abs(e-this.formData.calorie_target);a>100&&this.validationErrors.push(`Macro calories (${Math.round(e)}) don't match calorie target (${this.formData.calorie_target}). Difference: ${Math.round(a)} calories`)},checkDietaryConflicts(){this.dietaryConflicts=[];const e=this.formData.dietary_preferences;for(let a=0;a<e.length;a++)for(let t=a+1;t<e.length;t++){const s=this.availableDietaryPreferences.find(t=>t.value===e[a]),i=this.availableDietaryPreferences.find(a=>a.value===e[t]);s?.conflicts?.includes(e[t])&&this.dietaryConflicts.push(`${s.label} conflicts with ${i.label}`)}},isPreferenceDisabled(e){const a=this.formData.dietary_preferences;if(a.includes(e))return!1;const t=this.availableDietaryPreferences.find(a=>a.value===e);return!!t?.conflicts&&a.some(e=>t.conflicts.includes(e))},updateDislikedIngredients(){this.dislikedIngredientsInput.trim()?this.formData.disliked_ingredients=this.dislikedIngredientsInput.split(",").map(e=>e.trim()).filter(e=>e.length>0):this.formData.disliked_ingredients=[]},removeDislikedIngredient(e){this.formData.disliked_ingredients=this.formData.disliked_ingredients.filter(a=>a!==e),this.dislikedIngredientsInput=this.formData.disliked_ingredients.join(", ")},calculateTargets(){const e=2e3,a=this.formData.dietary_preferences.includes("keto"),t=this.formData.dietary_preferences.includes("low_carb"),s=this.formData.dietary_preferences.includes("high_protein");let i,l,n;a?(i=.25,l=.05,n=.7):t?(i=.3,l=.2,n=.5):s?(i=.35,l=.35,n=.3):(i=.25,l=.45,n=.3),this.formData.calorie_target=e,this.formData.protein_target=Math.round(e*i/4),this.formData.carb_target=Math.round(e*l/4),this.formData.fat_target=Math.round(e*n/9),this.validateForm()},async applyAIProfile(){try{this.formData={...this.formData,...this.aiGeneratedProfile},this.hasExistingProfile=!0,this.showAIWizard=!1,await this.saveProfile(),this.$toast?.success?.("ðŸŽ‰ AI-generated nutrition profile applied successfully!")}catch(e){console.error("Error applying AI profile:",e),this.$toast?.error?.("Failed to apply AI profile. Please try manually adjusting your settings.")}},async nextAIStep(){if(4===this.aiStep){this.generatingProfile=!0,this.aiStep++;try{const e=await Ta.mealPlanningApi.generateNutritionProfile({user_data:{age:this.aiProfile.age,gender:this.aiProfile.gender,height:this.aiProfile.height,weight:this.aiProfile.weight},goals:{primary_goal:this.aiProfile.goal,activity_level:this.aiProfile.activity},preferences:{dietary_preferences:this.aiProfile.diets}});this.aiGeneratedProfile=e.data,setTimeout(()=>{this.generatingProfile=!1},2e3)}catch(e){console.error("Error generating AI profile:",e),this.aiGeneratedProfile=this.calculateAIProfile(),this.generatingProfile=!1}}else this.aiStep<5&&this.aiStep++},calculateAIProfile(){const{age:e,gender:a,height:t,weight:s,goal:i,activity:l}=this.aiProfile;let n;n="male"===a?10*s+6.25*t-5*e+5:10*s+6.25*t-5*e-161;const r={sedentary:1.2,light:1.375,moderate:1.55,very_active:1.725,extra_active:1.9};let o=n*(r[l]||1.2);"weight_loss"===i?o-=500:"muscle_gain"===i&&(o+=300);let c=.25,d=.45,p=.3;return this.aiProfile.diets.includes("keto")?(c=.25,d=.05,p=.7):this.aiProfile.diets.includes("high_protein")?(c=.35,d=.4,p=.25):this.aiProfile.diets.includes("low_carb")&&(c=.3,d=.2,p=.5),{calorie_target:Math.round(o),protein_target:Math.round(o*c/4),carb_target:Math.round(o*d/4),fat_target:Math.round(o*p/9),meals_per_day:"muscle_gain"===i?4:3,snacks_per_day:"muscle_gain"===i?2:1,dietary_preferences:this.aiProfile.diets}},getCalorieRecommendation(){const e=this.formData.calorie_target;return e<1200?"Very Low (may be too restrictive)":e<1800?"Low (weight loss focused)":e<2500?"Moderate (maintenance/slow change)":e<3e3?"High (muscle gain/active lifestyle)":"Very High (intensive training)"},toggleDiet(e){const a=this.aiProfile.diets.indexOf(e);a>-1?this.aiProfile.diets.splice(a,1):this.aiProfile.diets.push(e)}}};const Fa=(0,Z.A)(xa,[["render",Ra],["__scopeId","data-v-7ef3f1e1"]]);var $a=Fa;const Na={class:"meal-plan-manager"},Wa={class:"status-content"},za={class:"status-text"},Qa={key:0,class:"generation-steps"},Ua={class:"generate-section"},ja={class:"form-row"},Ga={class:"form-group"},Va={class:"form-group"},Ba=["min"],Oa={class:"form-group"},Ha={key:0,class:"advanced-options"},Za={class:"form-row"},qa={class:"form-group"},Ka={class:"checkbox-group"},Ja=["value"],Ya={class:"form-group"},et={class:"form-actions"},at=["disabled"],tt={key:0,class:"fas fa-brain"},st={key:1,class:"fas fa-spinner fa-spin"},it={class:"existing-plans-section"},lt={key:0,class:"loading-state"},nt={key:1,class:"empty-state"},rt={key:2,class:"meal-plans-grid"},ot=["onClick"],ct={class:"plan-header"},dt={class:"plan-date"},pt={class:"ai-badge"},ut={class:"plan-stats"},gt={class:"stat"},mt={class:"stat-value"},ht={class:"stat"},vt={class:"stat-value"},ft={class:"stat"},yt={class:"stat-value"},kt={key:0,class:"plan-nutrition"},_t={class:"nutrition-grid"},Lt={class:"nutrition-item"},bt={class:"nutrition-value"},Ct={class:"nutrition-item"},wt={class:"nutrition-value"},Pt={class:"nutrition-item"},Mt={class:"nutrition-value"},Et={key:1,class:"quality-scores"},At={class:"score-item"},It={class:"score-bar"},Dt={class:"score-value"},St={class:"score-item"},Rt={class:"score-bar"},Tt={class:"score-value"},Xt={class:"plan-actions"},xt=["onClick"],Ft=["onClick"],$t=["onClick"],Nt=["onClick"];function Wt(e,a,t,l,n,r){const o=(0,s.g2)("meal-plan-detail-modal"),c=(0,s.g2)("nutritional-analysis-modal"),d=(0,s.g2)("alternatives-modal");return(0,s.uX)(),(0,s.CE)("div",Na,[n.generationStatus?((0,s.uX)(),(0,s.CE)("div",{key:0,class:(0,i.C4)(["generation-status",n.generationStatus.type])},[(0,s.Lk)("div",Wa,[(0,s.Lk)("i",{class:(0,i.C4)(n.generationStatus.icon)},null,2),(0,s.Lk)("div",za,[(0,s.Lk)("h4",null,(0,i.v_)(n.generationStatus.title),1),(0,s.Lk)("p",null,(0,i.v_)(n.generationStatus.message),1),n.generationStatus.steps?((0,s.uX)(),(0,s.CE)("div",Qa,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.generationStatus.steps,(e,a)=>((0,s.uX)(),(0,s.CE)("div",{key:a,class:(0,i.C4)(["step",{completed:e.completed,active:e.active}])},[(0,s.Lk)("i",{class:(0,i.C4)(e.completed?"fas fa-check":e.active?"fas fa-spinner fa-spin":"fas fa-clock")},null,2),(0,s.Lk)("span",null,(0,i.v_)(e.name),1)],2))),128))])):(0,s.Q3)("",!0)])])],2)):(0,s.Q3)("",!0),(0,s.Lk)("div",Ua,[a[18]||(a[18]=(0,s.Lk)("div",{class:"section-header"},[(0,s.Lk)("h2",null,"AI-Powered Meal Planning"),(0,s.Lk)("p",null,"Let our advanced AI create a personalized meal plan based on your health profile, dietary preferences, and nutrition goals")],-1)),(0,s.Lk)("form",{onSubmit:a[6]||(a[6]=(0,h.D$)((...e)=>r.generateMealPlan&&r.generateMealPlan(...e),["prevent"])),class:"generate-form"},[(0,s.Lk)("div",ja,[(0,s.Lk)("div",Ga,[a[11]||(a[11]=(0,s.Lk)("label",{for:"plan_type"},"Plan Type",-1)),(0,s.bo)((0,s.Lk)("select",{id:"plan_type","onUpdate:modelValue":a[0]||(a[0]=e=>n.generateForm.plan_type=e),class:"form-select"},a[10]||(a[10]=[(0,s.Lk)("option",{value:"daily"},"Daily Plan (1 day)",-1),(0,s.Lk)("option",{value:"weekly"},"Weekly Plan (7 days)",-1)]),512),[[h.u1,n.generateForm.plan_type]])]),(0,s.Lk)("div",Va,[a[12]||(a[12]=(0,s.Lk)("label",{for:"start_date"},"Start Date",-1)),(0,s.bo)((0,s.Lk)("input",{id:"start_date","onUpdate:modelValue":a[1]||(a[1]=e=>n.generateForm.start_date=e),type:"date",class:"form-input",min:r.today},null,8,Ba),[[h.Jo,n.generateForm.start_date]])]),(0,s.Lk)("div",Oa,[a[13]||(a[13]=(0,s.Lk)("label",{for:"target_calories"},"Target Calories (optional)",-1)),(0,s.bo)((0,s.Lk)("input",{id:"target_calories","onUpdate:modelValue":a[2]||(a[2]=e=>n.generateForm.target_calories=e),type:"number",min:"1000",max:"5000",placeholder:"Uses your health profile default",class:"form-input"},null,512),[[h.Jo,n.generateForm.target_calories,void 0,{number:!0}]]),a[14]||(a[14]=(0,s.Lk)("small",{class:"form-hint"},"Leave empty to use your calculated target from health profile",-1))])]),n.showAdvancedOptions?((0,s.uX)(),(0,s.CE)("div",Ha,[a[17]||(a[17]=(0,s.Lk)("h4",null,"Advanced Options",-1)),(0,s.Lk)("div",Za,[(0,s.Lk)("div",qa,[a[15]||(a[15]=(0,s.Lk)("label",null,"Preferred Cuisines (override profile)",-1)),(0,s.Lk)("div",Ka,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.availableCuisines,e=>((0,s.uX)(),(0,s.CE)("label",{key:e,class:"checkbox-label"},[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",value:e,"onUpdate:modelValue":a[3]||(a[3]=e=>n.generateForm.cuisine_preferences=e)},null,8,Ja),[[h.lH,n.generateForm.cuisine_preferences]]),(0,s.Lk)("span",null,(0,i.v_)(e),1)]))),128))])]),(0,s.Lk)("div",Ya,[a[16]||(a[16]=(0,s.Lk)("label",{for:"max_cook_time"},"Max Cooking Time (minutes)",-1)),(0,s.bo)((0,s.Lk)("input",{id:"max_cook_time","onUpdate:modelValue":a[4]||(a[4]=e=>n.generateForm.max_cook_time=e),type:"number",min:"10",max:"120",placeholder:"No limit",class:"form-input"},null,512),[[h.Jo,n.generateForm.max_cook_time,void 0,{number:!0}]])])])])):(0,s.Q3)("",!0),(0,s.Lk)("div",et,[(0,s.Lk)("button",{type:"button",onClick:a[5]||(a[5]=e=>n.showAdvancedOptions=!n.showAdvancedOptions),class:"btn btn-outline"},[(0,s.Lk)("i",{class:(0,i.C4)(n.showAdvancedOptions?"fas fa-chevron-up":"fas fa-chevron-down")},null,2),(0,s.eW)(" "+(0,i.v_)(n.showAdvancedOptions?"Hide":"Show")+" Advanced Options ",1)]),(0,s.Lk)("button",{type:"submit",class:"btn btn-primary generate-btn",disabled:n.generating},[n.generating?((0,s.uX)(),(0,s.CE)("i",st)):((0,s.uX)(),(0,s.CE)("i",tt)),(0,s.eW)(" "+(0,i.v_)(n.generating?"AI is Creating Your Plan...":"Generate AI Meal Plan"),1)],8,at)])],32)]),(0,s.Lk)("div",it,[a[35]||(a[35]=(0,s.Lk)("div",{class:"section-header"},[(0,s.Lk)("h2",null,"Your AI-Generated Meal Plans"),(0,s.Lk)("p",null,"Previously generated personalized meal plans")],-1)),t.loading?((0,s.uX)(),(0,s.CE)("div",lt,a[19]||(a[19]=[(0,s.Lk)("div",{class:"loading-spinner"},null,-1),(0,s.Lk)("p",null,"Loading your meal plans...",-1)]))):0===n.mealPlans.length?((0,s.uX)(),(0,s.CE)("div",nt,a[20]||(a[20]=[(0,s.Lk)("i",{class:"fas fa-brain"},null,-1),(0,s.Lk)("h3",null,"No AI meal plans yet",-1),(0,s.Lk)("p",null,"Generate your first AI-powered, personalized meal plan above!",-1)]))):((0,s.uX)(),(0,s.CE)("div",rt,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.mealPlans,e=>((0,s.uX)(),(0,s.CE)("div",{key:e.id,class:"meal-plan-card",onClick:a=>r.viewMealPlan(e)},[(0,s.Lk)("div",ct,[(0,s.Lk)("h3",null,(0,i.v_)(e?r.formatPlanType(e.plan_type):"Loading...")+" Plan",1),(0,s.Lk)("span",dt,(0,i.v_)(e?r.formatDateRange(e.start_date,e.end_date):"Date unknown"),1),(0,s.Lk)("div",pt,[a[21]||(a[21]=(0,s.Lk)("i",{class:"fas fa-brain"},null,-1)),(0,s.Lk)("span",null,"AI v"+(0,i.v_)(e.generation_version||"1.0"),1)])]),(0,s.Lk)("div",ut,[(0,s.Lk)("div",gt,[(0,s.Lk)("span",mt,(0,i.v_)(e?.avg_daily_calories?Math.round(e.avg_daily_calories):"N/A"),1),a[22]||(a[22]=(0,s.Lk)("span",{class:"stat-label"},"Avg Calories",-1))]),(0,s.Lk)("div",ht,[(0,s.Lk)("span",vt,(0,i.v_)(r.getMealCount(e)),1),a[23]||(a[23]=(0,s.Lk)("span",{class:"stat-label"},"Meals",-1))]),(0,s.Lk)("div",ft,[(0,s.Lk)("span",yt,(0,i.v_)(e.nutritional_balance_score?.toFixed(1)||"N/A"),1),a[24]||(a[24]=(0,s.Lk)("span",{class:"stat-label"},"Balance Score",-1))])]),e.daily_averages?((0,s.uX)(),(0,s.CE)("div",kt,[a[28]||(a[28]=(0,s.Lk)("h4",null,"Daily Nutrition Averages",-1)),(0,s.Lk)("div",_t,[(0,s.Lk)("div",Lt,[a[25]||(a[25]=(0,s.Lk)("span",{class:"nutrition-label"},"Protein:",-1)),(0,s.Lk)("span",bt,(0,i.v_)(Math.round(e.daily_averages.protein||0))+"g",1)]),(0,s.Lk)("div",Ct,[a[26]||(a[26]=(0,s.Lk)("span",{class:"nutrition-label"},"Carbs:",-1)),(0,s.Lk)("span",wt,(0,i.v_)(Math.round(e.daily_averages.carbs||0))+"g",1)]),(0,s.Lk)("div",Pt,[a[27]||(a[27]=(0,s.Lk)("span",{class:"nutrition-label"},"Fat:",-1)),(0,s.Lk)("span",Mt,(0,i.v_)(Math.round(e.daily_averages.fat||0))+"g",1)])])])):(0,s.Q3)("",!0),e.variety_score||e.preference_match_score?((0,s.uX)(),(0,s.CE)("div",Et,[(0,s.Lk)("div",At,[a[29]||(a[29]=(0,s.Lk)("span",{class:"score-label"},"Variety:",-1)),(0,s.Lk)("div",It,[(0,s.Lk)("div",{class:"score-fill",style:(0,i.Tr)({width:10*e.variety_score+"%"})},null,4)]),(0,s.Lk)("span",Dt,(0,i.v_)(e.variety_score?.toFixed(1)||"N/A"),1)]),(0,s.Lk)("div",St,[a[30]||(a[30]=(0,s.Lk)("span",{class:"score-label"},"Preference:",-1)),(0,s.Lk)("div",Rt,[(0,s.Lk)("div",{class:"score-fill",style:(0,i.Tr)({width:10*e.preference_match_score+"%"})},null,4)]),(0,s.Lk)("span",Tt,(0,i.v_)(e.preference_match_score?.toFixed(1)||"N/A"),1)])])):(0,s.Q3)("",!0),(0,s.Lk)("div",Xt,[(0,s.Lk)("button",{onClick:(0,h.D$)(a=>r.viewMealPlan(e),["stop"]),class:"btn btn-outline"},a[31]||(a[31]=[(0,s.Lk)("i",{class:"fas fa-eye"},null,-1),(0,s.eW)(" View Details ")]),8,xt),(0,s.Lk)("button",{onClick:(0,h.D$)(a=>r.analyzeMealPlan(e),["stop"]),class:"btn btn-info"},a[32]||(a[32]=[(0,s.Lk)("i",{class:"fas fa-chart-line"},null,-1),(0,s.eW)(" AI Analysis ")]),8,Ft),(0,s.Lk)("button",{onClick:(0,h.D$)(a=>r.regeneratePlan(e),["stop"]),class:"btn btn-secondary"},a[33]||(a[33]=[(0,s.Lk)("i",{class:"fas fa-redo"},null,-1),(0,s.eW)(" Regenerate ")]),8,$t),(0,s.Lk)("button",{onClick:(0,h.D$)(a=>r.deleteMealPlan(e),["stop"]),class:"btn btn-danger"},a[34]||(a[34]=[(0,s.Lk)("i",{class:"fas fa-trash"},null,-1),(0,s.eW)(" Delete ")]),8,Nt)])],8,ot))),128))]))]),n.selectedPlan?((0,s.uX)(),(0,s.Wv)(o,{key:1,"meal-plan":n.selectedPlan,onClose:a[7]||(a[7]=e=>n.selectedPlan=null),onRegenerateMeal:a[8]||(a[8]=e=>r.regenerateMeal(n.selectedPlan.id,e)),onGetAlternatives:a[9]||(a[9]=e=>r.getMealAlternatives(n.selectedPlan.id,e)),onAnalyzePlan:r.analyzeMealPlanFromModal,onDeletePlan:r.deleteMealPlan},null,8,["meal-plan","onAnalyzePlan","onDeletePlan"])):(0,s.Q3)("",!0),n.showAnalysisModal&&n.currentAnalysis?((0,s.uX)(),(0,s.Wv)(c,{key:2,analysis:n.currentAnalysis,"meal-plan":n.selectedPlanForAnalysis,onClose:r.closeAnalysisModal},null,8,["analysis","meal-plan","onClose"])):(0,s.Q3)("",!0),n.showAlternativesModal&&n.alternativesModalData?((0,s.uX)(),(0,s.Wv)(d,{key:3,"plan-id":n.alternativesModalData.planId,day:n.alternativesModalData.day,"meal-type":n.alternativesModalData.mealType,onClose:r.closeAlternativesModal,onAlternativeSelected:r.handleAlternativeSelected},null,8,["plan-id","day","meal-type","onClose","onAlternativeSelected"])):(0,s.Q3)("",!0)])}t(7588);const zt={class:"modal-header"},Qt={class:"ai-generation-info"},Ut={class:"ai-badge"},jt={class:"model-badge"},Gt={class:"modal-body"},Vt={class:"plan-overview"},Bt={class:"overview-stats"},Ot={class:"stat-item"},Ht={class:"stat-value"},Zt={class:"stat-item"},qt={class:"stat-value"},Kt={class:"stat-item"},Jt={class:"stat-value"},Yt={class:"stat-item"},es={class:"stat-value"},as={key:0,class:"stat-item"},ts={class:"stat-value"},ss={key:1,class:"stat-item"},is={class:"stat-value"},ls={key:0,class:"nutrition-overview"},ns={class:"nutrition-grid"},rs={class:"nutrition-item"},os={class:"nutrition-value"},cs={class:"nutrition-item"},ds={class:"nutrition-value"},ps={class:"nutrition-item"},us={class:"nutrition-value"},gs={class:"nutrition-item"},ms={class:"nutrition-value"},hs={key:1,class:"quality-scores"},vs={class:"scores-grid"},fs={key:0,class:"score-item"},ys={class:"score-bar"},ks={class:"score-value"},_s={key:1,class:"score-item"},Ls={class:"score-bar"},bs={class:"score-value"},Cs={key:2,class:"score-item"},ws={class:"score-bar"},Ps={class:"score-value"},Ms={key:0,class:"meals-section"},Es={class:"meals-grid"},As={class:"day-header"},Is={class:"meals-list"},Ds={class:"meal-header"},Ss={class:"meal-title-section"},Rs={class:"meal-title"},Ts={class:"meal-meta"},Xs={class:"meal-time"},xs={key:0,class:"meal-cuisine"},Fs={key:0,class:"recipe-details"},$s={key:0,class:"cooking-info"},Ns={class:"time-info"},Ws={key:0,class:"time-item"},zs={key:1,class:"time-item"},Qs={key:2,class:"time-item"},Us={key:3,class:"time-item"},js={key:4,class:"time-item"},Gs={class:"meal-nutrition"},Vs={class:"nutrition-details"},Bs={class:"nutrition-item"},Os={class:"nutrition-value"},Hs={class:"nutrition-item"},Zs={class:"nutrition-value"},qs={class:"nutrition-item"},Ks={class:"nutrition-value"},Js={class:"nutrition-item"},Ys={class:"nutrition-value"},ei={key:1,class:"ingredients-section"},ai={class:"ingredients-list"},ti={class:"ingredient-quantity"},si={class:"ingredient-unit"},ii={class:"ingredient-name"},li={key:2,class:"instructions-section"},ni={class:"instructions-list"},ri={class:"instruction-number"},oi={class:"instruction-text"},ci={key:3,class:"target-info"},di={class:"targets-grid"},pi={key:0,class:"target-item"},ui={class:"target-value"},gi={key:1,class:"target-item"},mi={class:"target-value"},hi={key:2,class:"target-item"},vi={class:"target-value"},fi={key:3,class:"target-item"},yi={class:"target-value"},ki={class:"meal-actions"},_i=["onClick","disabled"],Li={key:0,class:"fas fa-spinner fa-spin"},bi=["onClick"],Ci=["onClick"],wi=["onClick"],Pi={key:1,class:"no-meals"},Mi={class:"modal-footer"};function Ei(e,a,t,l,n,r){const o=(0,s.g2)("recipe-detail-modal"),c=(0,s.g2)("shopping-list-modal");return(0,s.uX)(),(0,s.CE)("div",{class:"modal-overlay",onClick:a[6]||(a[6]=a=>e.$emit("close"))},[(0,s.Lk)("div",{class:"modal-content",onClick:a[5]||(a[5]=(0,h.D$)(()=>{},["stop"]))},[(0,s.Lk)("div",zt,[(0,s.Lk)("h2",null,(0,i.v_)(r.formatPlanType(t.mealPlan.plan_type))+" Meal Plan",1),(0,s.Lk)("div",Qt,[(0,s.Lk)("span",Ut,[a[7]||(a[7]=(0,s.Lk)("i",{class:"fas fa-brain"},null,-1)),(0,s.eW)(" AI v"+(0,i.v_)(t.mealPlan.generation_version||"1.0"),1)]),(0,s.Lk)("span",jt,(0,i.v_)(t.mealPlan.ai_model_used||"AI Model"),1)]),(0,s.Lk)("button",{onClick:a[0]||(a[0]=a=>e.$emit("close")),class:"close-btn"},a[8]||(a[8]=[(0,s.Lk)("i",{class:"fas fa-times"},null,-1)]))]),(0,s.Lk)("div",Gt,[(0,s.Lk)("div",Vt,[(0,s.Lk)("div",Bt,[(0,s.Lk)("div",Ot,[a[9]||(a[9]=(0,s.Lk)("span",{class:"stat-label"},"Date Range:",-1)),(0,s.Lk)("span",Ht,(0,i.v_)(r.formatDateRange(t.mealPlan.start_date,t.mealPlan.end_date)),1)]),(0,s.Lk)("div",Zt,[a[10]||(a[10]=(0,s.Lk)("span",{class:"stat-label"},"Total Calories:",-1)),(0,s.Lk)("span",qt,(0,i.v_)(Math.round(t.mealPlan.total_calories||0)),1)]),(0,s.Lk)("div",Kt,[a[11]||(a[11]=(0,s.Lk)("span",{class:"stat-label"},"Avg Daily Calories:",-1)),(0,s.Lk)("span",Jt,(0,i.v_)(Math.round(t.mealPlan.avg_daily_calories||0)),1)]),(0,s.Lk)("div",Yt,[a[12]||(a[12]=(0,s.Lk)("span",{class:"stat-label"},"Total Meals:",-1)),(0,s.Lk)("span",es,(0,i.v_)(r.getTotalMeals()),1)]),t.mealPlan.nutritional_balance_score?((0,s.uX)(),(0,s.CE)("div",as,[a[13]||(a[13]=(0,s.Lk)("span",{class:"stat-label"},"Balance Score:",-1)),(0,s.Lk)("span",ts,(0,i.v_)(t.mealPlan.nutritional_balance_score.toFixed(1))+"/10",1)])):(0,s.Q3)("",!0),t.mealPlan.days_count?((0,s.uX)(),(0,s.CE)("div",ss,[a[14]||(a[14]=(0,s.Lk)("span",{class:"stat-label"},"Days:",-1)),(0,s.Lk)("span",is,(0,i.v_)(t.mealPlan.days_count),1)])):(0,s.Q3)("",!0)]),t.mealPlan.daily_averages?((0,s.uX)(),(0,s.CE)("div",ls,[a[19]||(a[19]=(0,s.Lk)("h4",null,"Daily Nutritional Averages",-1)),(0,s.Lk)("div",ns,[(0,s.Lk)("div",rs,[a[15]||(a[15]=(0,s.Lk)("span",{class:"nutrition-label"},"Protein:",-1)),(0,s.Lk)("span",os,(0,i.v_)(Math.round(t.mealPlan.daily_averages.protein||0))+"g",1)]),(0,s.Lk)("div",cs,[a[16]||(a[16]=(0,s.Lk)("span",{class:"nutrition-label"},"Carbohydrates:",-1)),(0,s.Lk)("span",ds,(0,i.v_)(Math.round(t.mealPlan.daily_averages.carbs||0))+"g",1)]),(0,s.Lk)("div",ps,[a[17]||(a[17]=(0,s.Lk)("span",{class:"nutrition-label"},"Fat:",-1)),(0,s.Lk)("span",us,(0,i.v_)(Math.round(t.mealPlan.daily_averages.fat||0))+"g",1)]),(0,s.Lk)("div",gs,[a[18]||(a[18]=(0,s.Lk)("span",{class:"nutrition-label"},"Calories:",-1)),(0,s.Lk)("span",ms,(0,i.v_)(Math.round(t.mealPlan.daily_averages.calories||0)),1)])])])):(0,s.Q3)("",!0),t.mealPlan.variety_score||t.mealPlan.preference_match_score?((0,s.uX)(),(0,s.CE)("div",hs,[a[23]||(a[23]=(0,s.Lk)("h4",null,"Plan Quality Metrics",-1)),(0,s.Lk)("div",vs,[t.mealPlan.nutritional_balance_score?((0,s.uX)(),(0,s.CE)("div",fs,[a[20]||(a[20]=(0,s.Lk)("span",{class:"score-label"},"Nutritional Balance:",-1)),(0,s.Lk)("div",ys,[(0,s.Lk)("div",{class:"score-fill",style:(0,i.Tr)({width:10*t.mealPlan.nutritional_balance_score+"%"})},null,4)]),(0,s.Lk)("span",ks,(0,i.v_)(t.mealPlan.nutritional_balance_score.toFixed(1))+"/10",1)])):(0,s.Q3)("",!0),t.mealPlan.variety_score?((0,s.uX)(),(0,s.CE)("div",_s,[a[21]||(a[21]=(0,s.Lk)("span",{class:"score-label"},"Variety Score:",-1)),(0,s.Lk)("div",Ls,[(0,s.Lk)("div",{class:"score-fill",style:(0,i.Tr)({width:10*t.mealPlan.variety_score+"%"})},null,4)]),(0,s.Lk)("span",bs,(0,i.v_)(t.mealPlan.variety_score.toFixed(1))+"/10",1)])):(0,s.Q3)("",!0),t.mealPlan.preference_match_score?((0,s.uX)(),(0,s.CE)("div",Cs,[a[22]||(a[22]=(0,s.Lk)("span",{class:"score-label"},"Preference Match:",-1)),(0,s.Lk)("div",ws,[(0,s.Lk)("div",{class:"score-fill",style:(0,i.Tr)({width:10*t.mealPlan.preference_match_score+"%"})},null,4)]),(0,s.Lk)("span",Ps,(0,i.v_)(t.mealPlan.preference_match_score.toFixed(1))+"/10",1)])):(0,s.Q3)("",!0)])])):(0,s.Q3)("",!0)]),t.mealPlan.meal_plan_data&&t.mealPlan.meal_plan_data.meals?((0,s.uX)(),(0,s.CE)("div",Ms,[a[46]||(a[46]=(0,s.Lk)("h3",null,"Detailed Meal Plan",-1)),(0,s.Lk)("div",Es,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.mealPlan.meal_plan_data.meals,(e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t,class:"day-meals"},[(0,s.Lk)("h4",As,(0,i.v_)(r.formatDate(t)),1),(0,s.Lk)("div",Is,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e,(e,l)=>((0,s.uX)(),(0,s.CE)("div",{key:l,class:"meal-card"},[(0,s.Lk)("div",Ds,[(0,s.Lk)("div",Ss,[(0,s.Lk)("h5",Rs,(0,i.v_)(r.getMealTitle(e)),1),(0,s.Lk)("span",{class:(0,i.C4)(["meal-type-badge",r.getMealTypeClass(e.meal_type||"meal")])},(0,i.v_)(r.formatMealType(e.meal_type||"Meal")),3)]),(0,s.Lk)("div",Ts,[(0,s.Lk)("span",Xs,[a[24]||(a[24]=(0,s.Lk)("i",{class:"fas fa-clock"},null,-1)),(0,s.eW)(" "+(0,i.v_)(r.getMealTime(e)),1)]),e.recipe?.cuisine||e.cuisine?((0,s.uX)(),(0,s.CE)("span",xs,[a[25]||(a[25]=(0,s.Lk)("i",{class:"fas fa-globe"},null,-1)),(0,s.eW)(" "+(0,i.v_)(e.recipe?.cuisine||e.cuisine),1)])):(0,s.Q3)("",!0)])]),e.recipe||r.getMealRecipe(e)?((0,s.uX)(),(0,s.CE)("div",Fs,[r.getMealRecipe(e).readyInMinutes||r.getMealRecipe(e).prep_time||r.getMealRecipe(e).cook_time||r.getMealRecipe(e).total_time?((0,s.uX)(),(0,s.CE)("div",$s,[(0,s.Lk)("div",Ns,[r.getMealRecipe(e).readyInMinutes?((0,s.uX)(),(0,s.CE)("span",Ws,[a[26]||(a[26]=(0,s.Lk)("i",{class:"fas fa-hourglass-half"},null,-1)),(0,s.eW)(" Ready: "+(0,i.v_)(r.getMealRecipe(e).readyInMinutes)+"min ",1)])):(0,s.Q3)("",!0),r.getMealRecipe(e).prep_time?((0,s.uX)(),(0,s.CE)("span",zs,[a[27]||(a[27]=(0,s.Lk)("i",{class:"fas fa-cut"},null,-1)),(0,s.eW)(" Prep: "+(0,i.v_)(r.getMealRecipe(e).prep_time)+"min ",1)])):(0,s.Q3)("",!0),r.getMealRecipe(e).cook_time?((0,s.uX)(),(0,s.CE)("span",Qs,[a[28]||(a[28]=(0,s.Lk)("i",{class:"fas fa-fire"},null,-1)),(0,s.eW)(" Cook: "+(0,i.v_)(r.getMealRecipe(e).cook_time)+"min ",1)])):(0,s.Q3)("",!0),r.getMealRecipe(e).total_time?((0,s.uX)(),(0,s.CE)("span",Us,[a[29]||(a[29]=(0,s.Lk)("i",{class:"fas fa-hourglass-half"},null,-1)),(0,s.eW)(" Total: "+(0,i.v_)(r.getMealRecipe(e).total_time)+"min ",1)])):(0,s.Q3)("",!0),r.getMealRecipe(e).servings?((0,s.uX)(),(0,s.CE)("span",js,[a[30]||(a[30]=(0,s.Lk)("i",{class:"fas fa-users"},null,-1)),(0,s.eW)(" Serves: "+(0,i.v_)(r.getMealRecipe(e).servings),1)])):(0,s.Q3)("",!0)])])):(0,s.Q3)("",!0),(0,s.Lk)("div",Gs,[a[35]||(a[35]=(0,s.Lk)("h6",null,"Nutritional Information",-1)),(0,s.Lk)("div",Vs,[(0,s.Lk)("div",Bs,[a[31]||(a[31]=(0,s.Lk)("span",{class:"nutrition-label"},"Calories:",-1)),(0,s.Lk)("span",Os,(0,i.v_)(r.getNutritionValue(r.getMealRecipe(e),"calories")),1)]),(0,s.Lk)("div",Hs,[a[32]||(a[32]=(0,s.Lk)("span",{class:"nutrition-label"},"Protein:",-1)),(0,s.Lk)("span",Zs,(0,i.v_)(r.getNutritionValue(r.getMealRecipe(e),"protein"))+"g",1)]),(0,s.Lk)("div",qs,[a[33]||(a[33]=(0,s.Lk)("span",{class:"nutrition-label"},"Carbs:",-1)),(0,s.Lk)("span",Ks,(0,i.v_)(r.getNutritionValue(r.getMealRecipe(e),"carbs"))+"g",1)]),(0,s.Lk)("div",Js,[a[34]||(a[34]=(0,s.Lk)("span",{class:"nutrition-label"},"Fat:",-1)),(0,s.Lk)("span",Ys,(0,i.v_)(r.getNutritionValue(r.getMealRecipe(e),"fat"))+"g",1)])])]),r.getMealIngredients(e).length?((0,s.uX)(),(0,s.CE)("div",ei,[a[36]||(a[36]=(0,s.Lk)("h6",null,"Ingredients",-1)),(0,s.Lk)("div",ai,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.getMealIngredients(e),(e,a)=>((0,s.uX)(),(0,s.CE)("div",{key:a,class:"ingredient-item"},[(0,s.Lk)("span",ti,(0,i.v_)(e.quantity||e.amount||""),1),(0,s.Lk)("span",si,(0,i.v_)(e.unit||""),1),(0,s.Lk)("span",ii,(0,i.v_)(e.name||e.original||e.text),1)]))),128))])])):(0,s.Q3)("",!0),r.normalizedInstructions(e).length?((0,s.uX)(),(0,s.CE)("div",li,[a[37]||(a[37]=(0,s.Lk)("h6",null,"Instructions",-1)),(0,s.Lk)("div",ni,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.normalizedInstructions(e),(e,a)=>((0,s.uX)(),(0,s.CE)("div",{key:a,class:"instruction-item"},[(0,s.Lk)("span",ri,(0,i.v_)(e.number),1),(0,s.Lk)("span",oi,(0,i.v_)(e.step),1)]))),128))])])):(0,s.Q3)("",!0),e.target_calories||e.target_protein||e.target_carbs||e.target_fat?((0,s.uX)(),(0,s.CE)("div",ci,[a[42]||(a[42]=(0,s.Lk)("h6",null,"Meal Targets",-1)),(0,s.Lk)("div",di,[e.target_calories?((0,s.uX)(),(0,s.CE)("div",pi,[a[38]||(a[38]=(0,s.Lk)("span",{class:"target-label"},"Target Calories:",-1)),(0,s.Lk)("span",ui,(0,i.v_)(Math.round(e.target_calories)),1)])):(0,s.Q3)("",!0),e.target_protein?((0,s.uX)(),(0,s.CE)("div",gi,[a[39]||(a[39]=(0,s.Lk)("span",{class:"target-label"},"Target Protein:",-1)),(0,s.Lk)("span",mi,(0,i.v_)(Math.round(e.target_protein))+"g",1)])):(0,s.Q3)("",!0),e.target_carbs?((0,s.uX)(),(0,s.CE)("div",hi,[a[40]||(a[40]=(0,s.Lk)("span",{class:"target-label"},"Target Carbs:",-1)),(0,s.Lk)("span",vi,(0,i.v_)(Math.round(e.target_carbs))+"g",1)])):(0,s.Q3)("",!0),e.target_fat?((0,s.uX)(),(0,s.CE)("div",fi,[a[41]||(a[41]=(0,s.Lk)("span",{class:"target-label"},"Target Fat:",-1)),(0,s.Lk)("span",yi,(0,i.v_)(Math.round(e.target_fat))+"g",1)])):(0,s.Q3)("",!0)])])):(0,s.Q3)("",!0)])):(0,s.Q3)("",!0),(0,s.Lk)("div",ki,[(0,s.Lk)("button",{onClick:a=>r.toggleSaveRecipe(e.recipe),class:(0,i.C4)(["btn btn-sm",e.recipe?.is_saved_by_user?"btn-outline-danger":"btn-primary"]),disabled:n.savingRecipe===e.recipe?.id},[n.savingRecipe===e.recipe?.id?((0,s.uX)(),(0,s.CE)("i",Li)):((0,s.uX)(),(0,s.CE)("i",{key:1,class:(0,i.C4)(e.recipe?.is_saved_by_user?"fas fa-heart":"far fa-heart")},null,2)),(0,s.eW)(" "+(0,i.v_)(n.savingRecipe===e.recipe?.id?e.recipe?.is_saved_by_user?"Removing...":"Saving...":e.recipe?.is_saved_by_user?"Remove":"Save"),1)],10,_i),(0,s.Lk)("button",{onClick:a=>r.regenerateMeal(t,e.meal_type||r.inferMealTypeFromTime(new Date)),class:"btn btn-sm btn-outline"},a[43]||(a[43]=[(0,s.Lk)("i",{class:"fas fa-redo"},null,-1),(0,s.eW)(" Regenerate ")]),8,bi),(0,s.Lk)("button",{onClick:a=>r.getAlternatives(t,e.meal_type||r.inferMealTypeFromTime(new Date)),class:"btn btn-sm btn-secondary"},a[44]||(a[44]=[(0,s.Lk)("i",{class:"fas fa-exchange-alt"},null,-1),(0,s.eW)(" Alternatives ")]),8,Ci),(0,s.Lk)("button",{onClick:a=>r.viewRecipeDetails(e.recipe),class:"btn btn-sm btn-info"},a[45]||(a[45]=[(0,s.Lk)("i",{class:"fas fa-info-circle"},null,-1),(0,s.eW)(" Recipe Details ")]),8,wi)])]))),128))])]))),128))])])):((0,s.uX)(),(0,s.CE)("div",Pi,a[47]||(a[47]=[(0,s.Lk)("i",{class:"fas fa-utensils"},null,-1),(0,s.Lk)("p",null,"No meal details available",-1)])))]),(0,s.Lk)("div",Mi,[(0,s.Lk)("button",{onClick:a[1]||(a[1]=a=>e.$emit("close")),class:"btn btn-secondary"},"Close"),(0,s.Lk)("button",{onClick:a[2]||(a[2]=(...e)=>r.generateShoppingList&&r.generateShoppingList(...e)),class:"btn btn-success"},a[48]||(a[48]=[(0,s.Lk)("i",{class:"fas fa-shopping-cart"},null,-1),(0,s.eW)(" Generate Shopping List ")])),(0,s.Lk)("button",{onClick:a[3]||(a[3]=(...e)=>r.analyzePlan&&r.analyzePlan(...e)),class:"btn btn-info"},a[49]||(a[49]=[(0,s.Lk)("i",{class:"fas fa-chart-line"},null,-1),(0,s.eW)(" AI Analysis ")])),(0,s.Lk)("button",{onClick:a[4]||(a[4]=(...e)=>r.deletePlan&&r.deletePlan(...e)),class:"btn btn-danger"},a[50]||(a[50]=[(0,s.Lk)("i",{class:"fas fa-trash"},null,-1),(0,s.eW)(" Delete Plan ")]))])]),n.showRecipeModal&&n.selectedRecipe?((0,s.uX)(),(0,s.Wv)(o,{key:0,recipe:n.selectedRecipe,onClose:r.closeRecipeModal,onRecipeSaved:r.onRecipeSaved},null,8,["recipe","onClose","onRecipeSaved"])):(0,s.Q3)("",!0),n.showShoppingListModal?((0,s.uX)(),(0,s.Wv)(c,{key:1,"shopping-list":n.shoppingListData,loading:n.shoppingListLoading,error:n.shoppingListError,onClose:r.closeShoppingListModal,onRetry:r.generateShoppingList},null,8,["shopping-list","loading","error","onClose","onRetry"])):(0,s.Q3)("",!0)])}const Ai={class:"modal-header"},Ii={class:"header-content"},Di={class:"recipe-meta"},Si={class:"badge cuisine"},Ri={class:"badge meal-type"},Ti={class:"modal-body"},Xi={class:"recipe-hero"},xi={key:0,class:"image-wrapper"},Fi=["src","alt"],$i={class:"image-overlay"},Ni={class:"recipe-stats"},Wi={class:"stat"},zi={class:"stat"},Qi={class:"stat"},Ui={class:"nutrition-panel"},ji={class:"nutrition-grid"},Gi={class:"nutrition-item calories"},Vi={class:"nutrition-value"},Bi={class:"nutrition-item protein"},Oi={class:"nutrition-value"},Hi={class:"nutrition-item carbs"},Zi={class:"nutrition-value"},qi={class:"nutrition-item fat"},Ki={class:"nutrition-value"},Ji={key:0,class:"dietary-tags"},Yi={key:0,class:"summary-section"},el=["innerHTML"],al={key:1,class:"ingredients-section"},tl={class:"ingredients-grid"},sl={class:"ingredient-text"},il={key:2,class:"instructions-section"},ll={class:"instructions-list"},nl={class:"step-number"},rl={class:"step-content"},ol={key:3,class:"source-section"},cl={class:"source-info"},dl=["href"],pl={key:1,class:"source-text"},ul={class:"modal-footer"},gl=["disabled"],ml={key:0,class:"fas fa-spinner fa-spin"},hl={key:1,class:"far fa-heart"};function vl(e,a,t,l,n,r){const o=(0,s.g2)("shopping-list-modal");return(0,s.uX)(),(0,s.CE)("div",{class:"recipe-modal-overlay",onClick:a[6]||(a[6]=(0,h.D$)(a=>e.$emit("close"),["self"]))},[(0,s.Lk)("div",{class:"recipe-modal",onClick:a[5]||(a[5]=(0,h.D$)(()=>{},["stop"]))},[(0,s.Lk)("div",Ai,[(0,s.Lk)("div",Ii,[(0,s.Lk)("h2",null,(0,i.v_)(t.recipe.title),1),(0,s.Lk)("div",Di,[(0,s.Lk)("span",Si,(0,i.v_)(r.formatCuisine(t.recipe.cuisine)),1),(0,s.Lk)("span",Ri,(0,i.v_)(r.formatMealType(t.recipe.meal_type)),1),(0,s.Lk)("span",{class:(0,i.C4)(["badge difficulty",r.getDifficultyClass(t.recipe.difficulty_level)])},(0,i.v_)(r.formatDifficulty(t.recipe.difficulty_level)),3)])]),(0,s.Lk)("button",{class:"close-btn",onClick:a[0]||(a[0]=a=>e.$emit("close"))},a[7]||(a[7]=[(0,s.Lk)("i",{class:"fas fa-times"},null,-1)]))]),(0,s.Lk)("div",Ti,[(0,s.Lk)("div",Xi,[t.recipe.image_url?((0,s.uX)(),(0,s.CE)("div",xi,[(0,s.Lk)("img",{src:t.recipe.image_url,alt:t.recipe.title,onError:a[1]||(a[1]=(...e)=>r.imageError&&r.imageError(...e))},null,40,Fi),(0,s.Lk)("div",$i,[(0,s.Lk)("div",Ni,[(0,s.Lk)("div",Wi,[a[8]||(a[8]=(0,s.Lk)("i",{class:"fas fa-clock"},null,-1)),(0,s.Lk)("span",null,(0,i.v_)(r.formatTime(t.recipe.total_time_minutes)),1)]),(0,s.Lk)("div",zi,[a[9]||(a[9]=(0,s.Lk)("i",{class:"fas fa-users"},null,-1)),(0,s.Lk)("span",null,(0,i.v_)(t.recipe.servings)+" "+(0,i.v_)(1===t.recipe.servings?"serving":"servings"),1)]),(0,s.Lk)("div",Qi,[a[10]||(a[10]=(0,s.Lk)("i",{class:"fas fa-fire"},null,-1)),(0,s.Lk)("span",null,(0,i.v_)(Math.round(t.recipe.calories_per_serving)||"N/A")+" cal",1)])])])])):(0,s.Q3)("",!0),(0,s.Lk)("div",Ui,[a[15]||(a[15]=(0,s.Lk)("h3",null,"Nutrition per Serving",-1)),(0,s.Lk)("div",ji,[(0,s.Lk)("div",Gi,[(0,s.Lk)("div",Vi,(0,i.v_)(Math.round(t.recipe.calories_per_serving)||"N/A"),1),a[11]||(a[11]=(0,s.Lk)("div",{class:"nutrition-label"},"Calories",-1))]),(0,s.Lk)("div",Bi,[(0,s.Lk)("div",Oi,(0,i.v_)(Math.round(t.recipe.protein_per_serving)||0)+"g",1),a[12]||(a[12]=(0,s.Lk)("div",{class:"nutrition-label"},"Protein",-1))]),(0,s.Lk)("div",Hi,[(0,s.Lk)("div",Zi,(0,i.v_)(Math.round(t.recipe.carbs_per_serving)||0)+"g",1),a[13]||(a[13]=(0,s.Lk)("div",{class:"nutrition-label"},"Carbs",-1))]),(0,s.Lk)("div",qi,[(0,s.Lk)("div",Ki,(0,i.v_)(Math.round(t.recipe.fat_per_serving)||0)+"g",1),a[14]||(a[14]=(0,s.Lk)("div",{class:"nutrition-label"},"Fat",-1))])]),t.recipe.dietary_tags&&t.recipe.dietary_tags.length?((0,s.uX)(),(0,s.CE)("div",Ji,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.recipe.dietary_tags,e=>((0,s.uX)(),(0,s.CE)("span",{key:e,class:"dietary-tag"},(0,i.v_)(r.formatTag(e)),1))),128))])):(0,s.Q3)("",!0)])]),t.recipe.summary?((0,s.uX)(),(0,s.CE)("div",Yi,[a[16]||(a[16]=(0,s.Lk)("h3",null,"About This Recipe",-1)),(0,s.Lk)("p",{class:"summary",innerHTML:r.cleanSummary(t.recipe.summary)},null,8,el)])):(0,s.Q3)("",!0),t.recipe.ingredients_data&&t.recipe.ingredients_data.length?((0,s.uX)(),(0,s.CE)("div",al,[a[17]||(a[17]=(0,s.Lk)("h3",null,[(0,s.Lk)("i",{class:"fas fa-list-ul"}),(0,s.eW)(" Ingredients ")],-1)),(0,s.Lk)("div",tl,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.recipe.ingredients_data,(e,a)=>((0,s.uX)(),(0,s.CE)("div",{key:a,class:"ingredient-item"},[(0,s.Lk)("span",sl,(0,i.v_)(r.formatIngredient(e)),1)]))),128))])])):(0,s.Q3)("",!0),r.normalizedInstructions.length?((0,s.uX)(),(0,s.CE)("div",il,[a[18]||(a[18]=(0,s.Lk)("h3",null,[(0,s.Lk)("i",{class:"fas fa-clipboard-list"}),(0,s.eW)(" Instructions ")],-1)),(0,s.Lk)("div",ll,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.normalizedInstructions,(e,a)=>((0,s.uX)(),(0,s.CE)("div",{key:a,class:"instruction-step"},[(0,s.Lk)("div",nl,(0,i.v_)(a+1),1),(0,s.Lk)("div",rl,(0,i.v_)(e.step||e.description||e),1)]))),128))])])):(0,s.Q3)("",!0),t.recipe.source_url||t.recipe.source?((0,s.uX)(),(0,s.CE)("div",ol,[(0,s.Lk)("div",cl,[a[20]||(a[20]=(0,s.Lk)("span",{class:"source-label"},"Source:",-1)),t.recipe.source_url?((0,s.uX)(),(0,s.CE)("a",{key:0,href:t.recipe.source_url,target:"_blank",class:"source-link"},a[19]||(a[19]=[(0,s.eW)(" View Original Recipe "),(0,s.Lk)("i",{class:"fas fa-external-link-alt"},null,-1)]),8,dl)):((0,s.uX)(),(0,s.CE)("span",pl,(0,i.v_)(t.recipe.source||"Recipe Database"),1))])])):(0,s.Q3)("",!0)]),(0,s.Lk)("div",ul,[(0,s.Lk)("button",{class:"btn btn-outline",onClick:a[2]||(a[2]=a=>e.$emit("close"))},a[21]||(a[21]=[(0,s.Lk)("i",{class:"fas fa-times"},null,-1),(0,s.eW)(" Close ")])),n.localRecipe&&!n.localRecipe.is_saved_by_user?((0,s.uX)(),(0,s.CE)("button",{key:0,class:"btn btn-primary",onClick:a[3]||(a[3]=(...e)=>r.toggleSaveRecipe&&r.toggleSaveRecipe(...e)),disabled:n.saving},[n.saving?((0,s.uX)(),(0,s.CE)("i",ml)):((0,s.uX)(),(0,s.CE)("i",hl)),(0,s.eW)(" "+(0,i.v_)(n.saving?"Saving...":"Save Recipe"),1)],8,gl)):(0,s.Q3)("",!0),(0,s.Lk)("button",{class:"btn btn-info",onClick:a[4]||(a[4]=(...e)=>r.generateShoppingList&&r.generateShoppingList(...e))},a[22]||(a[22]=[(0,s.Lk)("i",{class:"fas fa-shopping-cart"},null,-1),(0,s.eW)(" Shopping List ")]))])]),n.showShoppingListModal?((0,s.uX)(),(0,s.Wv)(o,{key:0,"shopping-list":n.shoppingListData,loading:n.shoppingListLoading,error:n.shoppingListError,onClose:r.closeShoppingListModal,onRetry:r.generateShoppingList},null,8,["shopping-list","loading","error","onClose","onRetry"])):(0,s.Q3)("",!0)])}const fl={class:"shopping-list-modal"},yl={class:"modal-content"},kl={class:"modal-header"},_l={class:"modal-actions"},Ll={class:"modal-body"},bl={key:0,class:"loading-state"},Cl={key:1,class:"error-state"},wl={key:2,class:"shopping-list-content"},Pl={class:"shopping-list-meta"},Ml={class:"meta-item"},El={key:0,class:"meta-item"},Al={key:1,class:"meta-item"},Il={class:"shopping-categories"},Dl=["onClick"],Sl={class:"category-info"},Rl={class:"category-icon"},Tl={class:"category-name"},Xl={class:"item-count"},xl={class:"category-toggle"},Fl={class:"category-items"},$l={class:"item-checkbox"},Nl=["onUpdate:modelValue"],Wl={class:"item-details"},zl={class:"item-quantity"},Ql={key:0,class:"item-notes"},Ul={class:"progress-section"},jl={class:"progress-info"},Gl={class:"progress-percentage"},Vl={class:"progress-bar"},Bl={key:0,class:"recipe-list"},Ol={class:"recipe-chips"};function Hl(e,a,t,l,n,r){return(0,s.uX)(),(0,s.CE)("div",fl,[(0,s.Lk)("div",{class:"modal-overlay",onClick:a[0]||(a[0]=a=>e.$emit("close"))}),(0,s.Lk)("div",yl,[(0,s.Lk)("div",kl,[a[7]||(a[7]=(0,s.Lk)("h2",{class:"modal-title"},[(0,s.Lk)("i",{class:"fas fa-shopping-cart"}),(0,s.eW)(" Shopping List ")],-1)),(0,s.Lk)("div",_l,[(0,s.Lk)("button",{onClick:a[1]||(a[1]=(...e)=>r.printShoppingList&&r.printShoppingList(...e)),class:"btn btn-secondary",title:"Print Shopping List"},a[5]||(a[5]=[(0,s.Lk)("i",{class:"fas fa-print"},null,-1)])),(0,s.Lk)("button",{onClick:a[2]||(a[2]=a=>e.$emit("close")),class:"btn btn-ghost"},a[6]||(a[6]=[(0,s.Lk)("i",{class:"fas fa-times"},null,-1)]))])]),(0,s.Lk)("div",Ll,[t.loading?((0,s.uX)(),(0,s.CE)("div",bl,a[8]||(a[8]=[(0,s.Lk)("div",{class:"spinner"},null,-1),(0,s.Lk)("p",null,"Generating your shopping list...",-1)]))):t.error?((0,s.uX)(),(0,s.CE)("div",Cl,[a[10]||(a[10]=(0,s.Lk)("div",{class:"error-icon"},[(0,s.Lk)("i",{class:"fas fa-exclamation-triangle"})],-1)),a[11]||(a[11]=(0,s.Lk)("h3",null,"Unable to Generate Shopping List",-1)),(0,s.Lk)("p",null,(0,i.v_)(t.error),1),(0,s.Lk)("button",{onClick:a[3]||(a[3]=(...e)=>r.retry&&r.retry(...e)),class:"btn btn-primary"},a[9]||(a[9]=[(0,s.Lk)("i",{class:"fas fa-redo"},null,-1),(0,s.eW)(" Try Again ")]))])):t.shoppingList?((0,s.uX)(),(0,s.CE)("div",wl,[(0,s.Lk)("div",Pl,[(0,s.Lk)("div",Ml,[a[12]||(a[12]=(0,s.Lk)("i",{class:"fas fa-info-circle"},null,-1)),(0,s.Lk)("span",null,(0,i.v_)(t.shoppingList.metadata.total_items)+" items",1)]),t.shoppingList.metadata.recipe_names?((0,s.uX)(),(0,s.CE)("div",El,[a[13]||(a[13]=(0,s.Lk)("i",{class:"fas fa-utensils"},null,-1)),(0,s.Lk)("span",null,(0,i.v_)(t.shoppingList.metadata.recipe_names.length)+" recipes",1)])):(0,s.Q3)("",!0),"meal_plan"===t.shoppingList.metadata.generated_from?((0,s.uX)(),(0,s.CE)("div",Al,[a[14]||(a[14]=(0,s.Lk)("i",{class:"fas fa-calendar"},null,-1)),(0,s.Lk)("span",null,(0,i.v_)(r.formatDateRange()),1)])):(0,s.Q3)("",!0)]),(0,s.Lk)("div",Il,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.sortedCategories,(e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t,class:(0,i.C4)(["shopping-category",{"category-completed":r.isCategoryCompleted(e)}])},[(0,s.Lk)("div",{class:"category-header",onClick:e=>r.toggleCategory(t)},[(0,s.Lk)("div",Sl,[(0,s.Lk)("span",Rl,(0,i.v_)(e.icon),1),(0,s.Lk)("h3",Tl,(0,i.v_)(e.name),1),(0,s.Lk)("span",Xl,"("+(0,i.v_)(r.getCompletedCount(e))+"/"+(0,i.v_)(e.item_count)+")",1)]),(0,s.Lk)("div",xl,[(0,s.Lk)("i",{class:(0,i.C4)(["fas",n.collapsedCategories[t]?"fa-chevron-down":"fa-chevron-up"])},null,2)])],8,Dl),(0,s.bo)((0,s.Lk)("div",Fl,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.items,(e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t,class:(0,i.C4)(["shopping-item",{"item-checked":e.checked}])},[(0,s.Lk)("label",$l,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox","onUpdate:modelValue":a=>e.checked=a,onChange:a[4]||(a[4]=(...e)=>r.updateProgress&&r.updateProgress(...e))},null,40,Nl),[[h.lH,e.checked]]),a[15]||(a[15]=(0,s.Lk)("span",{class:"checkmark"},null,-1))]),(0,s.Lk)("div",Wl,[(0,s.Lk)("span",{class:(0,i.C4)(["item-name",{strikethrough:e.checked}])},(0,i.v_)(e.name),3),(0,s.Lk)("span",zl,(0,i.v_)(e.quantity),1),e.notes&&e.notes.length>0?((0,s.uX)(),(0,s.CE)("div",Ql,[(0,s.Lk)("small",null,"Additional: "+(0,i.v_)(e.notes.join(", ")),1)])):(0,s.Q3)("",!0)])],2))),128))],512),[[h.aG,!n.collapsedCategories[t]]])],2))),128))]),(0,s.Lk)("div",Ul,[(0,s.Lk)("div",jl,[(0,s.Lk)("span",null,"Progress: "+(0,i.v_)(n.completedItems)+"/"+(0,i.v_)(n.totalItems)+" items",1),(0,s.Lk)("span",Gl,(0,i.v_)(r.progressPercentage)+"%",1)]),(0,s.Lk)("div",Vl,[(0,s.Lk)("div",{class:"progress-fill",style:(0,i.Tr)({width:r.progressPercentage+"%"})},null,4)])]),t.shoppingList.metadata.recipe_names?((0,s.uX)(),(0,s.CE)("div",Bl,[a[16]||(a[16]=(0,s.Lk)("h4",null,"Recipes included:",-1)),(0,s.Lk)("div",Ol,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.shoppingList.metadata.recipe_names,e=>((0,s.uX)(),(0,s.CE)("span",{key:e,class:"recipe-chip"},(0,i.v_)(e),1))),128))])])):(0,s.Q3)("",!0)])):(0,s.Q3)("",!0)])])])}t(1148),t(8237);var Zl={name:"ShoppingListModal",props:{shoppingList:{type:Object,default:null},loading:{type:Boolean,default:!1},error:{type:String,default:null}},data(){return{collapsedCategories:{},completedItems:0,totalItems:0}},computed:{sortedCategories(){if(!this.shoppingList?.categories)return{};const e=this.shoppingList.categories;return Object.keys(e).sort((a,t)=>e[a].order-e[t].order).reduce((a,t)=>(a[t]=e[t],a),{})},progressPercentage(){return 0===this.totalItems?0:Math.round(this.completedItems/this.totalItems*100)}},watch:{shoppingList:{handler(){this.updateProgress(),this.initializeCategories()},immediate:!0}},methods:{initializeCategories(){this.shoppingList?.categories&&Object.keys(this.shoppingList.categories).forEach(e=>{e in this.collapsedCategories||this.$set(this.collapsedCategories,e,!1)})},toggleCategory(e){this.$set(this.collapsedCategories,e,!this.collapsedCategories[e])},updateProgress(){if(!this.shoppingList?.categories)return;let e=0,a=0;Object.values(this.shoppingList.categories).forEach(t=>{t.items.forEach(t=>{a++,t.checked&&e++})}),this.completedItems=e,this.totalItems=a},isCategoryCompleted(e){return e.items.every(e=>e.checked)},getCompletedCount(e){return e.items.filter(e=>e.checked).length},formatDateRange(){if(!this.shoppingList?.metadata)return"";const e=new Date(this.shoppingList.metadata.start_date).toLocaleDateString(),a=new Date(this.shoppingList.metadata.end_date).toLocaleDateString();return e===a?e:`${e} - ${a}`},printShoppingList(){const e=this.generatePrintContent(),a=window.open("","_blank");a.document.write(`\n        <html>\n          <head>\n            <title>Shopping List</title>\n            <style>\n              body { font-family: Arial, sans-serif; margin: 20px; }\n              h1 { color: #2563eb; border-bottom: 2px solid #2563eb; padding-bottom: 10px; }\n              h2 { color: #374151; margin-top: 25px; margin-bottom: 10px; }\n              .category-section { margin-bottom: 20px; }\n              .item { margin: 5px 0; padding: 5px; }\n              .item-name { font-weight: 500; }\n              .item-quantity { color: #6b7280; margin-left: 10px; }\n              .meta-info { background: #f3f4f6; padding: 10px; border-radius: 5px; margin-bottom: 20px; }\n              ul { list-style-type: none; padding-left: 0; }\n              li { margin: 8px 0; }\n              .checkbox { width: 15px; height: 15px; border: 1px solid #ccc; display: inline-block; margin-right: 10px; }\n              @media print {\n                .no-print { display: none; }\n              }\n            </style>\n          </head>\n          <body>\n            ${e}\n          </body>\n        </html>\n      `),a.document.close(),a.print(),a.close()},generatePrintContent(){if(!this.shoppingList)return"";let e="<h1>ðŸ›’ Shopping List</h1>";return this.shoppingList.metadata&&(e+='<div class="meta-info">',e+=`<p><strong>Total Items:</strong> ${this.shoppingList.metadata.total_items}</p>`,this.shoppingList.metadata.recipe_names&&(e+=`<p><strong>Recipes:</strong> ${this.shoppingList.metadata.recipe_names.join(", ")}</p>`),"meal_plan"===this.shoppingList.metadata.generated_from&&(e+=`<p><strong>Meal Plan Period:</strong> ${this.formatDateRange()}</p>`),e+="</div>"),Object.entries(this.sortedCategories).forEach(([,a])=>{e+='<div class="category-section">',e+=`<h2>${a.icon} ${a.name}</h2>`,e+="<ul>",a.items.forEach(a=>{e+="<li>",e+='<span class="checkbox"></span>',e+=`<span class="item-name">${a.name}</span>`,e+=`<span class="item-quantity">${a.quantity}</span>`,a.notes&&a.notes.length>0&&(e+=`<br><small>Additional: ${a.notes.join(", ")}</small>`),e+="</li>"}),e+="</ul></div>"}),e},retry(){this.$emit("retry")}}};const ql=(0,Z.A)(Zl,[["render",Hl],["__scopeId","data-v-6098bce3"]]);var Kl=ql,Jl={name:"RecipeDetailModal",components:{ShoppingListModal:Kl},props:{recipe:{type:Object,required:!0}},data(){return{saving:!1,showShoppingListModal:!1,shoppingListData:null,shoppingListLoading:!1,shoppingListError:null,localRecipe:null}},mounted(){this.localRecipe={...this.recipe}},watch:{recipe:{handler(e){this.localRecipe={...e}},immediate:!0}},computed:{normalizedInstructions(){const e=this.recipe.instructions||[];return e&&0!==e.length?e.length&&"object"===typeof e[0]&&e[0].step?e:e.length&&"string"===typeof e[0]?e.map((e,a)=>({number:a+1,step:e,description:e})):e.length&&"object"===typeof e[0]?e.map((e,a)=>({number:e.number||a+1,step:e.step||e.description||e.instruction||`Step ${a+1}`,description:e.step||e.description||e.instruction||`Step ${a+1}`})):[]:[]}},methods:{formatIngredient(e){if("string"===typeof e)return e;if(e.original)return e.original;const a=e.amount||e.quantity||"",t=e.unit||"",s=e.name||e.ingredient||"";return a&&t?`${a} ${t} ${s}`.trim():a?`${a} ${s}`.trim():s||"Ingredient"},formatTime(e){if(!e)return"N/A";if(e<60)return`${e}min`;const a=Math.floor(e/60),t=e%60;return t>0?`${a}h ${t}min`:`${a}h`},formatCuisine(e){return e?e.charAt(0).toUpperCase()+e.slice(1):""},formatMealType(e){const a={breakfast:"Breakfast",lunch:"Lunch",dinner:"Dinner",snack:"Snack",dessert:"Dessert"};return a[e]||e},formatDifficulty(e){const a={easy:"Easy",medium:"Medium",hard:"Hard"};return a[e]||"Medium"},getDifficultyClass(e){return`difficulty-${e||"medium"}`},formatTag(e){return e.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase())},cleanSummary(e){return e?e.replace(/<[^>]*>/g,"").replace(/\n/g,"<br>"):""},imageError(e){e.target.src=this.getPlaceholderImage(),e.target.style.background="#f8f9fa",e.target.style.border="2px dashed #dee2e6",e.target.style.color="#6c757d",e.target.style.display="flex",e.target.style.alignItems="center",e.target.style.justifyContent="center",e.target.style.fontSize="14px",e.target.onerror=null},getPlaceholderImage(){return"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDMwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIzMDAiIGhlaWdodD0iMjAwIiBmaWxsPSIjRjhGOUZBIiBzdHJva2U9IiNERUUyRTYiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWRhc2hhcnJheT0iNSA1Ii8+Cjx0ZXh0IHg9IjE1MCIgeT0iMTAwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmaWxsPSIjNkM3NTdEIiBmb250LWZhbWlseT0iLWFwcGxlLXN5c3RlbSwgQmxpbmtNYWNTeXN0ZW1Gb250LCBTZWdvZSBVSSwgUm9ib3RvLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0cHgiPk5vIEltYWdlPC90ZXh0Pgo8cGF0aCBkPSJNMTIwIDgwSDEzMFY5MEgxMjBWODBaTTE0MCA4MEgxNTBWOTBIMTQwVjgwWk0xNjAgODBIMTcwVjkwSDE2MFY4MFoiIGZpbGw9IiM2Qzc1N0QiLz4KPC9zdmc+"},async toggleSaveRecipe(){this.saving=!0;try{console.log("Toggling save status for recipe:",this.localRecipe);const{mealPlanningApi:e}=await Promise.resolve().then(t.bind(t,5090));let a;if(this.localRecipe.is_saved_by_user){if(!this.localRecipe.id)throw new Error("Cannot remove recipe: No recipe ID found");a=await e.removeRecipeFromMyCollection(this.localRecipe.id),this.localRecipe.is_saved_by_user=!1;const t=a.data?.message||"Recipe removed from your collection!";this.$toast?.success?.(t)||alert(t)}else{a=this.localRecipe.spoonacular_id&&!this.localRecipe.created_by?await e.saveRecipeFromMealPlan(this.localRecipe):this.localRecipe.id?await e.saveRecipeToMyCollection(this.localRecipe.id):await e.saveRecipeFromMealPlan(this.localRecipe),this.localRecipe.is_saved_by_user=!0;const t=a.data?.message||"Recipe saved to your collection!";this.$toast?.success?.(t)||alert(t),this.$emit("recipe-saved",a.data.recipe||this.localRecipe)}}catch(e){console.error("Error toggling recipe save status:",e);let a="An error occurred";404===e.response?.status?a="Recipe not found. It may have been removed.":403===e.response?.status?a="You don't have permission to perform this action.":500===e.response?.status?a="Server error. Please try again later.":e.response?.data?.error?a=e.response.data.error:e.response?.data?.message?a=e.response.data.message:e.message&&(a=e.message),this.$toast?.error?.(a)||alert(`Error: ${a}`)}finally{this.saving=!1}},async generateShoppingList(){try{this.shoppingListLoading=!0,this.shoppingListError=null,this.showShoppingListModal=!0;const e=await fetch(`/api/meal-planning/recipes/${this.recipe.id}/generate_shopping_list/`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.$store.state.auth.token}`},body:JSON.stringify({servings_multiplier:1})});if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const a=await e.json();this.shoppingListData=a.shopping_list,this.shoppingListLoading=!1,this.$toast?.success?.("Shopping list generated successfully!")||console.log("Shopping list generated successfully!")}catch(e){console.error("Error generating shopping list:",e),this.shoppingListError=e.message||"Failed to generate shopping list",this.shoppingListLoading=!1,this.$toast?.error?.(`Error: ${this.shoppingListError}`)||alert(`Error generating shopping list: ${this.shoppingListError}`)}},closeShoppingListModal(){this.showShoppingListModal=!1,this.shoppingListData=null,this.shoppingListError=null,this.shoppingListLoading=!1}}};const Yl=(0,Z.A)(Jl,[["render",vl],["__scopeId","data-v-ca1e3a28"]]);var en=Yl,an={name:"MealPlanDetailModal",components:{RecipeDetailModal:en,ShoppingListModal:Kl},props:{mealPlan:{type:Object,required:!0}},emits:["close","regenerate-meal","get-alternatives","analyze-plan","delete-plan"],data(){return{savingRecipe:null,showRecipeModal:!1,selectedRecipe:null,showShoppingListModal:!1,shoppingListData:null,shoppingListLoading:!1,shoppingListError:null}},computed:{normalizedInstructions(){return e=>{const a=e?.recipe?.instructions||e?.instructions||[];return a&&0!==a.length?a.length&&"object"===typeof a[0]&&a[0].step?a.map((e,a)=>({number:e.number||a+1,step:e.step,description:e.step})):a.length&&"string"===typeof a[0]?a.map((e,a)=>({number:a+1,step:e,description:e})):a.length&&"object"===typeof a[0]?a.map((e,a)=>({number:e.number||a+1,step:e.step||e.description||e.instruction||`Step ${a+1}`,description:e.step||e.description||e.instruction||`Step ${a+1}`})):[]:[]}}},mounted(){if(console.log("=== MealPlanDetailModal Mounted ==="),console.log("Meal Plan ID:",this.mealPlan?.id),console.log("Plan Type:",this.mealPlan?.plan_type),console.log("Has meal_plan_data:",!!this.mealPlan?.meal_plan_data),console.log("Has meals:",!!this.mealPlan?.meal_plan_data?.meals),this.mealPlan?.meal_plan_data?.meals){const e=Object.keys(this.mealPlan.meal_plan_data.meals);if(console.log("Available meal dates:",e),console.log("Total meal days:",e.length),e.length>0){const a=e[0],t=this.mealPlan.meal_plan_data.meals[a];console.log(`Sample meals for ${a}:`,t)}}else console.log("No meal data available - checking structure:"),console.log("mealPlan keys:",Object.keys(this.mealPlan||{})),this.mealPlan?.meal_plan_data&&console.log("meal_plan_data keys:",Object.keys(this.mealPlan.meal_plan_data));console.log("====================================="),document.addEventListener("keydown",this.handleEscapeKey)},beforeUnmount(){document.removeEventListener("keydown",this.handleEscapeKey)},methods:{formatPlanType(e){return e?e.charAt(0).toUpperCase()+e.slice(1):"Unknown"},formatDateRange(e,a){if(!e||!a)return console.log("formatDateRange: Missing dates - start:",e,"end:",a),"Date unknown";try{const t=new Date(e),s=new Date(a);if(isNaN(t.getTime())||isNaN(s.getTime()))return console.log("formatDateRange: Invalid dates - start:",e,"end:",a),"Invalid date range";const i=t.toLocaleDateString(),l=s.toLocaleDateString();return e===a?i:`${i} - ${l}`}catch(t){return console.error("formatDateRange error:",t,"for dates:",e,a),"Date error"}},formatDate(e){try{if(!e)return console.log("formatDate: dateStr is null/undefined"),"Unknown Date";const a={breakfast:"Breakfast Meals",lunch:"Lunch Meals",dinner:"Dinner Meals",snack:"Snack Meals"};if(a[e.toLowerCase()])return console.log("formatDate: Detected legacy meal type structure:",e),a[e.toLowerCase()];const t=new Date(e);return isNaN(t.getTime())?(console.log("formatDate: Invalid date for input:",e),e):t.toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"})}catch(a){return console.error("formatDate error:",a,"for input:",e),e||"Unknown Date"}},formatMealType(e){if(!e)return"Meal";const a=String(e).toLowerCase().trim(),t={breakfast:"Breakfast",lunch:"Lunch",dinner:"Dinner",snack:"Snack",dessert:"Dessert"};return t[a]||e.charAt(0).toUpperCase()+e.slice(1)},getMealTitle(e){if(console.log("getMealTitle called for meal:",e),e?.title)return e.title;if(e?.name)return e.name;if(e?.recipe?.title)return e.recipe.title;if(e?.recipe?.name)return e.recipe.name;const a=this.formatMealType(e?.meal_type);return console.log("getMealTitle fallback to meal type:",a),a||"Meal"},inferMealTypeFromTime(e){const a=e.getHours();return a>=5&&a<11?"breakfast":a>=11&&a<16?"lunch":a>=16&&a<22?"dinner":"snack"},getMealTime(e){if(console.log("getMealTime called for meal:",e),e?.time)return e.time;if(e?.scheduled_time)return e.scheduled_time;if(e?.recipe?.time)return e.recipe.time;if(e?.recipe?.scheduled_time)return e.recipe.scheduled_time;const a=e?.meal_type?.toLowerCase(),t={breakfast:"08:00",lunch:"12:30",dinner:"19:00",snack:"15:00"},s=t[a]||"12:00";return console.log("getMealTime using default time:",s,"for meal type:",a),s},getMealRecipe(e){return e?.recipe||e||{}},getMealIngredients(e){const a=this.getMealRecipe(e);return a.ingredients&&Array.isArray(a.ingredients)?a.ingredients:a.extendedIngredients&&Array.isArray(a.extendedIngredients)?a.extendedIngredients:[]},getMealTypeClass(e){return e?String(e).toLowerCase():"meal"},getTotalMeals(){if(!this.mealPlan.meal_plan_data?.meals)return 0;let e=0;return Object.values(this.mealPlan.meal_plan_data.meals).forEach(a=>{Array.isArray(a)&&(e+=a.length)}),e},getNutritionValue(e,a){if(!e)return 0;if(e.estimated_nutrition&&void 0!==e.estimated_nutrition[a])return Math.round(e.estimated_nutrition[a]);if(e.nutrition&&void 0!==e.nutrition[a])return Math.round(e.nutrition[a]);const t={calories:["calories_per_serving","kcal"],protein:["protein_per_serving"],carbs:["carbs_per_serving","carbohydrates"],fat:["fat_per_serving","fats"]};if(t[a])for(const s of t[a])if(void 0!==e[s])return Math.round(e[s]);return 0},regenerateMeal(e,a){if(console.log("=== regenerateMeal called ==="),console.log("Date:",e),console.log("MealType (raw):",a),console.log("MealType type:",typeof a),!a||"undefined"===a||"null"===a){console.error("Invalid mealType provided:",a);const e=this.inferMealTypeFromTime(new Date);console.log("Using inferred meal type:",e),a=e}const t=String(a).toLowerCase().trim();console.log("Final cleaned mealType:",t),console.log("============================="),this.$emit("regenerate-meal",{day:e,mealType:t})},getAlternatives(e,a){if(console.log("=== getAlternatives called ==="),console.log("Date:",e),console.log("MealType (raw):",a),!a||"undefined"===a||"null"===a){console.error("Invalid mealType provided for alternatives:",a);const e=this.inferMealTypeFromTime(new Date);console.log("Using inferred meal type for alternatives:",e),a=e}const t=String(a).toLowerCase().trim();console.log("Final cleaned mealType for alternatives:",t),console.log("=================================="),this.$emit("get-alternatives",{day:e,mealType:t})},async toggleSaveRecipe(e){if(e){this.savingRecipe=e.id||e.spoonacular_id;try{console.log("Toggling save status for recipe:",e);const{mealPlanningApi:a}=await Promise.resolve().then(t.bind(t,5090));let s;if(e.is_saved_by_user){if(!e.id)throw new Error("Cannot remove recipe: No recipe ID found");s=await a.removeRecipeFromMyCollection(e.id),e.is_saved_by_user=!1;const t=s.data?.message||"Recipe removed from your collection!";this.$toast?.success?.(t)||alert(t)}else{const t={title:e.title||e.name||"Untitled Recipe",summary:e.summary||"",cuisine:e.cuisine||"",meal_type:e.meal_type||"dinner",servings:e.servings||4,prep_time_minutes:e.prep_time||0,cook_time_minutes:e.cook_time||0,total_time_minutes:e.total_time||0,difficulty_level:e.difficulty_level||"medium",spoonacular_id:e.spoonacular_id||e.id,ingredients_data:e.ingredients||[],instructions:e.instructions||[],calories_per_serving:this.getNutritionValue(e,"calories"),protein_per_serving:this.getNutritionValue(e,"protein"),carbs_per_serving:this.getNutritionValue(e,"carbs"),fat_per_serving:this.getNutritionValue(e,"fat"),fiber_per_serving:0,dietary_tags:e.dietary_tags||[],allergens:e.allergens||[],image_url:e.image_url||e.image||"",source_url:e.source_url||"",source_type:"spoonacular"};s=await a.saveRecipeFromMealPlan(t),e.is_saved_by_user=!0;const i=s.data?.message||"Recipe saved to your collection!";this.$toast?.success?.(i)||alert(i)}}catch(a){console.error("Error toggling recipe save status:",a);let e="An error occurred";404===a.response?.status?e="Recipe not found. It may have been removed.":403===a.response?.status?e="You don't have permission to perform this action.":500===a.response?.status?e="Server error. Please try again later.":a.response?.data?.error?e=a.response.data.error:a.response?.data?.message?e=a.response.data.message:a.message&&(e=a.message),this.$toast?.error?.(e)||alert(`Error: ${e}`)}finally{this.savingRecipe=null}}else console.warn("No recipe provided to toggle")},viewRecipeDetails(e){e&&(this.selectedRecipe=e,this.showRecipeModal=!0)},async generateShoppingList(){try{this.shoppingListLoading=!0,this.shoppingListError=null,this.showShoppingListModal=!0;const e=await fetch(`/api/meal-planning/meal-plans/${this.mealPlan.id}/generate_shopping_list/`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.$store.state.auth.token}`},body:JSON.stringify({exclude_items:[],group_by_category:!0})});if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const a=await e.json();this.shoppingListData=a.shopping_list,this.shoppingListLoading=!1,this.$toast?.success?.("Shopping list generated successfully!")||console.log("Shopping list generated successfully!")}catch(e){console.error("Error generating shopping list:",e),this.shoppingListError=e.message||"Failed to generate shopping list",this.shoppingListLoading=!1,this.$toast?.error?.(`Error: ${this.shoppingListError}`)||alert(`Error generating shopping list: ${this.shoppingListError}`)}},analyzePlan(){this.$emit("analyze-plan",this.mealPlan)},deletePlan(){this.$emit("delete-plan",this.mealPlan)},closeRecipeModal(){this.showRecipeModal=!1,this.selectedRecipe=null},closeShoppingListModal(){this.showShoppingListModal=!1,this.shoppingListData=null,this.shoppingListError=null,this.shoppingListLoading=!1},async onRecipeSaved(e){console.log("Recipe saved from meal plan detail:",e),this.$toast?.success?.("Recipe saved to your collection!")||alert("Recipe saved to your collection!")},handleEscapeKey(e){"Escape"===e.key&&this.$emit("close")}}};const tn=(0,Z.A)(an,[["render",Ei],["__scopeId","data-v-64b89338"]]);var sn=tn;const ln={class:"modal-header"},nn={class:"header-content"},rn={class:"modal-body"},on={key:0,class:"loading-state"},cn={key:1,class:"error-state"},dn={key:2,class:"analysis-results"},pn={class:"overall-score-section"},un={class:"score-circle"},gn={viewBox:"0 0 100 100",class:"circular-progress"},mn={class:"score-content"},hn={class:"score-number"},vn={class:"score-description"},fn={class:"analysis-section"},yn={key:0,class:"adequacy-grid"},kn={class:"nutrient-header"},_n={class:"nutrient-name"},Ln={class:"nutrient-status"},bn={class:"nutrient-progress"},Cn={class:"progress-bar"},wn={class:"percentage"},Pn={key:0,class:"analysis-section"},Mn={class:"distribution-chart"},En={class:"distribution-bars"},An={class:"meal-bar"},In={class:"bar"},Dn={class:"percentage"},Sn={class:"meal-bar"},Rn={class:"bar"},Tn={class:"percentage"},Xn={class:"meal-bar"},xn={class:"bar"},Fn={class:"percentage"},$n={class:"distribution-rating"},Nn={key:1,class:"analysis-section"},Wn={class:"variety-metrics"},zn={class:"variety-item"},Qn={class:"variety-item"},Un={class:"variety-item"},jn={key:2,class:"analysis-section"},Gn={class:"highlights-list"},Vn={key:3,class:"analysis-section"},Bn={class:"recommendations-list"},On={key:4,class:"analysis-section"},Hn={class:"improvements-list"},Zn={class:"modal-footer"},qn=["disabled"];function Kn(e,a,t,l,n,r){return(0,s.uX)(),(0,s.CE)("div",{class:"modal-overlay",onClick:a[4]||(a[4]=a=>e.$emit("close"))},[(0,s.Lk)("div",{class:"modal-content analysis-modal",onClick:a[3]||(a[3]=(0,h.D$)(()=>{},["stop"]))},[(0,s.Lk)("div",ln,[(0,s.Lk)("div",nn,[a[5]||(a[5]=(0,s.Lk)("h2",null,[(0,s.Lk)("i",{class:"fas fa-chart-line"}),(0,s.eW)(" AI Nutritional Analysis ")],-1)),(0,s.Lk)("p",null,(0,i.v_)(r.formatPlanType(t.mealPlan.plan_type))+" Plan - "+(0,i.v_)(r.formatDateRange(t.mealPlan.start_date,t.mealPlan.end_date)),1)]),(0,s.Lk)("button",{onClick:a[0]||(a[0]=a=>e.$emit("close")),class:"close-btn"},a[6]||(a[6]=[(0,s.Lk)("i",{class:"fas fa-times"},null,-1)]))]),(0,s.Lk)("div",rn,[t.analysis.loading?((0,s.uX)(),(0,s.CE)("div",on,[a[7]||(a[7]=(0,s.Lk)("div",{class:"loading-spinner"},null,-1)),a[8]||(a[8]=(0,s.Lk)("h3",null,"AI is Analyzing Your Meal Plan",-1)),(0,s.Lk)("p",null,(0,i.v_)(t.analysis.message),1)])):t.analysis.error?((0,s.uX)(),(0,s.CE)("div",cn,[a[9]||(a[9]=(0,s.Lk)("i",{class:"fas fa-exclamation-triangle"},null,-1)),a[10]||(a[10]=(0,s.Lk)("h3",null,"Analysis Unavailable",-1)),(0,s.Lk)("p",null,(0,i.v_)(t.analysis.message),1)])):((0,s.uX)(),(0,s.CE)("div",dn,[(0,s.Lk)("div",pn,[(0,s.Lk)("div",un,[((0,s.uX)(),(0,s.CE)("svg",gn,[a[11]||(a[11]=(0,s.Lk)("circle",{cx:"50",cy:"50",r:"45",class:"circle-bg"},null,-1)),(0,s.Lk)("circle",{cx:"50",cy:"50",r:"45",class:"circle-progress",style:(0,i.Tr)(`stroke-dasharray: ${2.827*t.analysis.overall_score}, 282.7`)},null,4)])),(0,s.Lk)("div",mn,[(0,s.Lk)("span",hn,(0,i.v_)(t.analysis.overall_score||0),1),a[12]||(a[12]=(0,s.Lk)("span",{class:"score-label"},"Overall Score",-1))])]),(0,s.Lk)("div",vn,[a[13]||(a[13]=(0,s.Lk)("h3",null,"Nutritional Quality Assessment",-1)),(0,s.Lk)("p",null,(0,i.v_)(r.getScoreDescription(t.analysis.overall_score)),1)])]),(0,s.Lk)("div",fn,[a[14]||(a[14]=(0,s.Lk)("h3",null,[(0,s.Lk)("i",{class:"fas fa-balance-scale"}),(0,s.eW)(" Nutritional Adequacy ")],-1)),t.analysis.nutritional_adequacy?((0,s.uX)(),(0,s.CE)("div",yn,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.analysis.nutritional_adequacy,(e,a)=>((0,s.uX)(),(0,s.CE)("div",{key:a,class:(0,i.C4)(["nutrient-card",r.getAdequacyClass(e.status)])},[(0,s.Lk)("div",kn,[(0,s.Lk)("span",_n,(0,i.v_)(r.formatNutrientName(a)),1),(0,s.Lk)("span",Ln,(0,i.v_)(r.formatStatus(e.status)),1)]),(0,s.Lk)("div",bn,[(0,s.Lk)("div",Cn,[(0,s.Lk)("div",{class:"progress-fill",style:(0,i.Tr)(`width: ${Math.min(e.percentage_of_target||0,150)}%`)},null,4)]),(0,s.Lk)("span",wn,(0,i.v_)(e.percentage_of_target||0)+"% of target",1)])],2))),128))])):(0,s.Q3)("",!0)]),t.analysis.meal_distribution?((0,s.uX)(),(0,s.CE)("div",Pn,[a[19]||(a[19]=(0,s.Lk)("h3",null,[(0,s.Lk)("i",{class:"fas fa-clock"}),(0,s.eW)(" Meal Distribution ")],-1)),(0,s.Lk)("div",Mn,[(0,s.Lk)("div",En,[(0,s.Lk)("div",An,[a[15]||(a[15]=(0,s.Lk)("span",{class:"meal-label"},"Breakfast",-1)),(0,s.Lk)("div",In,[(0,s.Lk)("div",{class:"bar-fill breakfast",style:(0,i.Tr)(`width: ${t.analysis.meal_distribution.breakfast_percentage||0}%`)},null,4)]),(0,s.Lk)("span",Dn,(0,i.v_)(t.analysis.meal_distribution.breakfast_percentage||0)+"%",1)]),(0,s.Lk)("div",Sn,[a[16]||(a[16]=(0,s.Lk)("span",{class:"meal-label"},"Lunch",-1)),(0,s.Lk)("div",Rn,[(0,s.Lk)("div",{class:"bar-fill lunch",style:(0,i.Tr)(`width: ${t.analysis.meal_distribution.lunch_percentage||0}%`)},null,4)]),(0,s.Lk)("span",Tn,(0,i.v_)(t.analysis.meal_distribution.lunch_percentage||0)+"%",1)]),(0,s.Lk)("div",Xn,[a[17]||(a[17]=(0,s.Lk)("span",{class:"meal-label"},"Dinner",-1)),(0,s.Lk)("div",xn,[(0,s.Lk)("div",{class:"bar-fill dinner",style:(0,i.Tr)(`width: ${t.analysis.meal_distribution.dinner_percentage||0}%`)},null,4)]),(0,s.Lk)("span",Fn,(0,i.v_)(t.analysis.meal_distribution.dinner_percentage||0)+"%",1)])]),(0,s.Lk)("div",$n,[a[18]||(a[18]=(0,s.Lk)("span",{class:"rating-label"},"Balance Rating:",-1)),(0,s.Lk)("span",{class:(0,i.C4)(["rating-value",r.getRatingClass(t.analysis.meal_distribution.balance_rating)])},(0,i.v_)(r.formatRating(t.analysis.meal_distribution.balance_rating)),3)])])])):(0,s.Q3)("",!0),t.analysis.variety_analysis?((0,s.uX)(),(0,s.CE)("div",Nn,[a[23]||(a[23]=(0,s.Lk)("h3",null,[(0,s.Lk)("i",{class:"fas fa-seedling"}),(0,s.eW)(" Variety & Diversity ")],-1)),(0,s.Lk)("div",Wn,[(0,s.Lk)("div",zn,[a[20]||(a[20]=(0,s.Lk)("span",{class:"metric-label"},"Cuisine Diversity:",-1)),(0,s.Lk)("span",{class:(0,i.C4)(["metric-badge",r.getVarietyClass(t.analysis.variety_analysis.cuisine_diversity)])},(0,i.v_)(r.formatRating(t.analysis.variety_analysis.cuisine_diversity)),3)]),(0,s.Lk)("div",Qn,[a[21]||(a[21]=(0,s.Lk)("span",{class:"metric-label"},"Ingredient Variety:",-1)),(0,s.Lk)("span",{class:(0,i.C4)(["metric-badge",r.getVarietyClass(t.analysis.variety_analysis.ingredient_variety)])},(0,i.v_)(r.formatRating(t.analysis.variety_analysis.ingredient_variety)),3)]),(0,s.Lk)("div",Un,[a[22]||(a[22]=(0,s.Lk)("span",{class:"metric-label"},"Cooking Methods:",-1)),(0,s.Lk)("span",{class:(0,i.C4)(["metric-badge",r.getVarietyClass(t.analysis.variety_analysis.cooking_method_diversity)])},(0,i.v_)(r.formatRating(t.analysis.variety_analysis.cooking_method_diversity)),3)])])])):(0,s.Q3)("",!0),t.analysis.health_highlights&&t.analysis.health_highlights.length?((0,s.uX)(),(0,s.CE)("div",jn,[a[25]||(a[25]=(0,s.Lk)("h3",null,[(0,s.Lk)("i",{class:"fas fa-star"}),(0,s.eW)(" Health Highlights ")],-1)),(0,s.Lk)("div",Gn,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.analysis.health_highlights,(e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t,class:"highlight-item"},[a[24]||(a[24]=(0,s.Lk)("i",{class:"fas fa-check-circle"},null,-1)),(0,s.Lk)("span",null,(0,i.v_)(e),1)]))),128))])])):(0,s.Q3)("",!0),t.analysis.recommendations&&t.analysis.recommendations.length?((0,s.uX)(),(0,s.CE)("div",Vn,[a[27]||(a[27]=(0,s.Lk)("h3",null,[(0,s.Lk)("i",{class:"fas fa-lightbulb"}),(0,s.eW)(" AI Recommendations ")],-1)),(0,s.Lk)("div",Bn,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.analysis.recommendations,(e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t,class:"recommendation-item"},[a[26]||(a[26]=(0,s.Lk)("i",{class:"fas fa-arrow-right"},null,-1)),(0,s.Lk)("span",null,(0,i.v_)(e),1)]))),128))])])):(0,s.Q3)("",!0),t.analysis.areas_for_improvement&&t.analysis.areas_for_improvement.length?((0,s.uX)(),(0,s.CE)("div",On,[a[29]||(a[29]=(0,s.Lk)("h3",null,[(0,s.Lk)("i",{class:"fas fa-target"}),(0,s.eW)(" Areas for Improvement ")],-1)),(0,s.Lk)("div",Hn,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.analysis.areas_for_improvement,(e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t,class:"improvement-item"},[a[28]||(a[28]=(0,s.Lk)("i",{class:"fas fa-exclamation-circle"},null,-1)),(0,s.Lk)("span",null,(0,i.v_)(e),1)]))),128))])])):(0,s.Q3)("",!0)]))]),(0,s.Lk)("div",Zn,[(0,s.Lk)("button",{onClick:a[1]||(a[1]=a=>e.$emit("close")),class:"btn btn-secondary"},"Close Analysis"),(0,s.Lk)("button",{onClick:a[2]||(a[2]=(...e)=>r.downloadReport&&r.downloadReport(...e)),class:"btn btn-primary",disabled:t.analysis.loading||t.analysis.error},a[30]||(a[30]=[(0,s.Lk)("i",{class:"fas fa-download"},null,-1),(0,s.eW)(" Download Report ")]),8,qn)])])])}t(4603),t(7566),t(8721);var Jn={name:"NutritionalAnalysisModal",props:{analysis:{type:Object,required:!0},mealPlan:{type:Object,required:!0}},emits:["close"],methods:{formatPlanType(e){return e.charAt(0).toUpperCase()+e.slice(1)},formatDateRange(e,a){const t=new Date(e).toLocaleDateString(),s=new Date(a).toLocaleDateString();return e===a?t:`${t} - ${s}`},getScoreDescription(e){return e>=90?"Excellent nutritional balance! Your meal plan meets all dietary guidelines.":e>=80?"Very good nutritional quality with minor areas for optimization.":e>=70?"Good nutritional foundation with some room for improvement.":e>=60?"Adequate nutrition but several areas could be enhanced.":"Significant nutritional improvements recommended."},formatNutrientName(e){const a={calories:"Calories",protein:"Protein",carbs:"Carbohydrates",fat:"Fat",fiber:"Fiber",sodium:"Sodium"};return a[e]||e.charAt(0).toUpperCase()+e.slice(1)},formatStatus(e){const a={adequate:"Adequate",insufficient:"Low",excessive:"High",too_high:"Too High",too_low:"Too Low",within_range:"Good",balanced:"Balanced"};return a[e]||e.replace("_"," ").toUpperCase()},formatRating(e){return e?e.charAt(0).toUpperCase()+e.slice(1):"N/A"},getAdequacyClass(e){const a={adequate:"adequate",within_range:"adequate",balanced:"adequate",insufficient:"insufficient",too_low:"insufficient",excessive:"excessive",too_high:"excessive"};return a[e]||"neutral"},getRatingClass(e){const a={excellent:"excellent",very_good:"very-good",good:"good",fair:"fair",poor:"poor"};return a[e]||"neutral"},getVarietyClass(e){const a={excellent:"excellent",very_good:"very-good",good:"good",fair:"fair",poor:"poor"};return a[e]||"neutral"},downloadReport(){let e="AI Nutritional Analysis Report\n";e+="================================\n\n",e+=`Meal Plan: ${this.formatPlanType(this.mealPlan.plan_type)} Plan\n`,e+=`Date Range: ${this.formatDateRange(this.mealPlan.start_date,this.mealPlan.end_date)}\n`,e+=`Generated: ${(new Date).toLocaleDateString()}\n\n`,e+=`Overall Score: ${this.analysis.overall_score||"N/A"}/100\n\n`,this.analysis.health_highlights&&this.analysis.health_highlights.length&&(e+="Health Highlights:\n",this.analysis.health_highlights.forEach(a=>{e+=`â€¢ ${a}\n`}),e+="\n"),this.analysis.recommendations&&this.analysis.recommendations.length&&(e+="AI Recommendations:\n",this.analysis.recommendations.forEach(a=>{e+=`â€¢ ${a}\n`}),e+="\n"),this.analysis.areas_for_improvement&&this.analysis.areas_for_improvement.length&&(e+="Areas for Improvement:\n",this.analysis.areas_for_improvement.forEach(a=>{e+=`â€¢ ${a}\n`}));const a=new Blob([e],{type:"text/plain"}),t=window.URL.createObjectURL(a),s=document.createElement("a");s.href=t,s.download=`nutrition-analysis-${this.mealPlan.start_date}.txt`,document.body.appendChild(s),s.click(),document.body.removeChild(s),window.URL.revokeObjectURL(t)}}};const Yn=(0,Z.A)(Jn,[["render",Kn],["__scopeId","data-v-213abc86"]]);var er=Yn;const ar={class:"modal fade show",style:{display:"block"},tabindex:"-1",role:"dialog","aria-labelledby":"alternativesModalLabel","aria-modal":"true"},tr={class:"modal-dialog modal-xl",role:"document"},sr={class:"modal-content"},ir={class:"modal-header"},lr={class:"modal-title",id:"alternativesModalLabel"},nr={key:0,class:"text-muted"},rr={class:"modal-body"},or={class:"alternatives-options mb-4"},cr={class:"row"},dr={class:"col-md-6"},pr={class:"form-check form-switch"},ur={class:"col-md-6"},gr={class:"form-group"},mr={key:0,class:"text-center py-5"},hr={key:1,class:"alert alert-danger",role:"alert"},vr={key:2,class:"alternatives-grid"},fr={class:"alternatives-summary mb-3"},yr={class:"row"},kr={class:"col-md-8"},_r={class:"mb-1"},Lr={key:0,class:"badge bg-danger ms-2"},br={key:1,class:"badge bg-primary ms-1"},Cr={class:"row"},wr=["onClick"],Pr={class:"recipe-source-badge"},Mr={key:0,class:"badge bg-danger"},Er={key:1,class:"badge bg-primary"},Ar={class:"recipe-image-container"},Ir=["src","alt"],Dr={class:"card-body"},Sr={class:"card-title"},Rr={class:"recipe-info mb-2"},Tr={class:"text-muted d-flex justify-content-between"},Xr={key:0},xr={class:"card-text small"},Fr={key:0,class:"nutrition-preview"},$r={class:"nutrition-mini d-flex justify-content-between mt-1"},Nr={key:0},Wr={key:1},zr={key:2},Qr={key:3,class:"text-center py-5"},Ur={class:"text-muted"},jr={key:0},Gr={key:1},Vr={class:"modal-footer"},Br=["disabled"];function Or(e,a,t,l,n,r){return(0,s.uX)(),(0,s.CE)("div",ar,[(0,s.Lk)("div",tr,[(0,s.Lk)("div",sr,[(0,s.Lk)("div",ir,[(0,s.Lk)("h5",lr,[a[10]||(a[10]=(0,s.Lk)("i",{class:"fas fa-exchange-alt"},null,-1)),(0,s.eW)(" Recipe Alternatives for "+(0,i.v_)(r.formatMealType(t.mealType))+" ",1),t.day?((0,s.uX)(),(0,s.CE)("span",nr,"- "+(0,i.v_)(r.formatDate(t.day)),1)):(0,s.Q3)("",!0)]),(0,s.Lk)("button",{type:"button",class:"btn-close",onClick:a[0]||(a[0]=a=>e.$emit("close")),"aria-label":"Close"})]),(0,s.Lk)("div",rr,[(0,s.Lk)("div",or,[(0,s.Lk)("div",cr,[(0,s.Lk)("div",dr,[(0,s.Lk)("div",pr,[(0,s.bo)((0,s.Lk)("input",{class:"form-check-input",type:"checkbox",id:"includeUserRecipes","onUpdate:modelValue":a[1]||(a[1]=e=>n.includeUserRecipes=e),onChange:a[2]||(a[2]=(...e)=>r.loadAlternatives&&r.loadAlternatives(...e))},null,544),[[h.lH,n.includeUserRecipes]]),a[11]||(a[11]=(0,s.Lk)("label",{class:"form-check-label",for:"includeUserRecipes"},[(0,s.Lk)("i",{class:"fas fa-heart text-danger"}),(0,s.eW)(" Include My Saved Recipes ")],-1))])]),(0,s.Lk)("div",ur,[(0,s.Lk)("div",gr,[a[13]||(a[13]=(0,s.Lk)("label",{for:"alternativeCount",class:"form-label"},"Number of alternatives:",-1)),(0,s.bo)((0,s.Lk)("select",{class:"form-select form-select-sm",id:"alternativeCount","onUpdate:modelValue":a[3]||(a[3]=e=>n.alternativeCount=e),onChange:a[4]||(a[4]=(...e)=>r.loadAlternatives&&r.loadAlternatives(...e)),style:{width:"auto",display:"inline-block"}},a[12]||(a[12]=[(0,s.Lk)("option",{value:"3"},"3",-1),(0,s.Lk)("option",{value:"5"},"5",-1),(0,s.Lk)("option",{value:"8"},"8",-1),(0,s.Lk)("option",{value:"10"},"10",-1)]),544),[[h.u1,n.alternativeCount]])])])])]),n.loading?((0,s.uX)(),(0,s.CE)("div",mr,a[14]||(a[14]=[(0,s.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,s.Lk)("span",{class:"visually-hidden"},"Loading alternatives...")],-1),(0,s.Lk)("p",{class:"mt-3 text-muted"},"Finding the perfect alternatives for you...",-1)]))):n.error?((0,s.uX)(),(0,s.CE)("div",hr,[a[16]||(a[16]=(0,s.Lk)("i",{class:"fas fa-exclamation-triangle"},null,-1)),(0,s.eW)(" "+(0,i.v_)(n.error)+" ",1),(0,s.Lk)("button",{class:"btn btn-sm btn-outline-danger ms-2",onClick:a[5]||(a[5]=(...e)=>r.loadAlternatives&&r.loadAlternatives(...e))},a[15]||(a[15]=[(0,s.Lk)("i",{class:"fas fa-redo"},null,-1),(0,s.eW)(" Retry ")]))])):n.alternatives.length>0?((0,s.uX)(),(0,s.CE)("div",vr,[(0,s.Lk)("div",fr,[(0,s.Lk)("div",yr,[(0,s.Lk)("div",kr,[(0,s.Lk)("p",_r,[(0,s.Lk)("strong",null,(0,i.v_)(n.alternatives.length),1),a[19]||(a[19]=(0,s.eW)(" alternatives found ")),r.userRecipeCount>0?((0,s.uX)(),(0,s.CE)("span",Lr,[a[17]||(a[17]=(0,s.Lk)("i",{class:"fas fa-heart"},null,-1)),(0,s.eW)(" "+(0,i.v_)(r.userRecipeCount)+" from your recipes ",1)])):(0,s.Q3)("",!0),r.externalRecipeCount>0?((0,s.uX)(),(0,s.CE)("span",br,[a[18]||(a[18]=(0,s.Lk)("i",{class:"fas fa-globe"},null,-1)),(0,s.eW)(" "+(0,i.v_)(r.externalRecipeCount)+" suggestions ",1)])):(0,s.Q3)("",!0)])]),a[20]||(a[20]=(0,s.Lk)("div",{class:"col-md-4 text-end"},[(0,s.Lk)("small",{class:"text-muted"},[(0,s.Lk)("i",{class:"fas fa-info-circle"}),(0,s.eW)(" Click any recipe to replace your current meal ")])],-1))])]),(0,s.Lk)("div",Cr,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.alternatives,e=>((0,s.uX)(),(0,s.CE)("div",{key:e.id,class:"col-md-6 col-lg-4 mb-4"},[(0,s.Lk)("div",{class:(0,i.C4)(["recipe-alternative-card card h-100",{"user-recipe":e.is_user_recipe}]),onClick:a=>r.selectAlternative(e),style:{cursor:"pointer"}},[(0,s.Lk)("div",Pr,[e.is_user_recipe?((0,s.uX)(),(0,s.CE)("span",Mr,a[21]||(a[21]=[(0,s.Lk)("i",{class:"fas fa-heart"},null,-1),(0,s.eW)(" My Recipe ")]))):((0,s.uX)(),(0,s.CE)("span",Er,a[22]||(a[22]=[(0,s.Lk)("i",{class:"fas fa-globe"},null,-1),(0,s.eW)(" Suggestion ")])))]),(0,s.Lk)("div",Ar,[(0,s.Lk)("img",{src:e.image||"/api/placeholder/300/200",class:"card-img-top recipe-image",alt:e.title,onError:a[6]||(a[6]=(...e)=>r.handleImageError&&r.handleImageError(...e))},null,40,Ir),a[23]||(a[23]=(0,s.Lk)("div",{class:"recipe-overlay"},[(0,s.Lk)("button",{class:"btn btn-primary btn-sm"},[(0,s.Lk)("i",{class:"fas fa-exchange-alt"}),(0,s.eW)(" Use This Recipe ")])],-1))]),(0,s.Lk)("div",Dr,[(0,s.Lk)("h6",Sr,(0,i.v_)(e.title),1),(0,s.Lk)("div",Rr,[(0,s.Lk)("small",Tr,[(0,s.Lk)("span",null,[a[24]||(a[24]=(0,s.Lk)("i",{class:"fas fa-clock"},null,-1)),(0,s.eW)(" "+(0,i.v_)(e.readyInMinutes||30)+"min ",1)]),(0,s.Lk)("span",null,[a[25]||(a[25]=(0,s.Lk)("i",{class:"fas fa-users"},null,-1)),(0,s.eW)(" "+(0,i.v_)(e.servings||1),1)]),e.rating?((0,s.uX)(),(0,s.CE)("span",Xr,[a[26]||(a[26]=(0,s.Lk)("i",{class:"fas fa-star text-warning"},null,-1)),(0,s.eW)(" "+(0,i.v_)(e.rating.toFixed(1)),1)])):(0,s.Q3)("",!0)])]),(0,s.Lk)("p",xr,(0,i.v_)(r.truncateSummary(e.summary)),1),e.nutrition&&Object.keys(e.nutrition).length>0?((0,s.uX)(),(0,s.CE)("div",Fr,[a[27]||(a[27]=(0,s.Lk)("small",{class:"text-muted"},[(0,s.Lk)("i",{class:"fas fa-chart-bar"}),(0,s.eW)(" Nutrition per serving ")],-1)),(0,s.Lk)("div",$r,[e.nutrition.calories?((0,s.uX)(),(0,s.CE)("span",Nr,(0,i.v_)(Math.round(e.nutrition.calories))+"cal ",1)):(0,s.Q3)("",!0),e.nutrition.protein?((0,s.uX)(),(0,s.CE)("span",Wr,(0,i.v_)(Math.round(e.nutrition.protein))+"g protein ",1)):(0,s.Q3)("",!0),e.nutrition.carbs?((0,s.uX)(),(0,s.CE)("span",zr,(0,i.v_)(Math.round(e.nutrition.carbs))+"g carbs ",1)):(0,s.Q3)("",!0)])])):(0,s.Q3)("",!0)])],10,wr)]))),128))])])):((0,s.uX)(),(0,s.CE)("div",Qr,[a[29]||(a[29]=(0,s.Lk)("i",{class:"fas fa-search fa-3x text-muted mb-3"},null,-1)),a[30]||(a[30]=(0,s.Lk)("h5",{class:"text-muted"},"No alternatives found",-1)),(0,s.Lk)("p",Ur,[n.includeUserRecipes?((0,s.uX)(),(0,s.CE)("span",Gr," No matching recipes found for "+(0,i.v_)(r.formatMealType(t.mealType))+". ",1)):((0,s.uX)(),(0,s.CE)("span",jr,' Try enabling "Include My Saved Recipes" or save some recipes first. '))]),(0,s.Lk)("button",{class:"btn btn-outline-primary",onClick:a[7]||(a[7]=(...e)=>r.loadAlternatives&&r.loadAlternatives(...e))},a[28]||(a[28]=[(0,s.Lk)("i",{class:"fas fa-redo"},null,-1),(0,s.eW)(" Try Again ")]))]))]),(0,s.Lk)("div",Vr,[(0,s.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:a[8]||(a[8]=a=>e.$emit("close"))},a[31]||(a[31]=[(0,s.Lk)("i",{class:"fas fa-times"},null,-1),(0,s.eW)(" Cancel ")])),(0,s.Lk)("button",{type:"button",class:"btn btn-outline-primary",onClick:a[9]||(a[9]=(...e)=>r.loadAlternatives&&r.loadAlternatives(...e)),disabled:n.loading},a[32]||(a[32]=[(0,s.Lk)("i",{class:"fas fa-redo"},null,-1),(0,s.eW)(" Refresh Alternatives ")]),8,Br)])])])])}var Hr={name:"AlternativesModal",props:{planId:{type:[String,Number],required:!0},day:{type:String,required:!0},mealType:{type:String,required:!0}},emits:["close","alternative-selected"],data(){return{loading:!1,error:null,alternatives:[],includeUserRecipes:!0,alternativeCount:5,selectedRecipe:null}},computed:{userRecipeCount(){return this.alternatives.filter(e=>e.is_user_recipe).length},externalRecipeCount(){return this.alternatives.filter(e=>!e.is_user_recipe).length}},mounted(){this.loadAlternatives(),document.addEventListener("keydown",this.handleEscapeKey)},beforeUnmount(){document.removeEventListener("keydown",this.handleEscapeKey)},methods:{async loadAlternatives(){this.loading=!0,this.error=null;try{console.log("Loading alternatives:",{planId:this.planId,day:this.day,mealType:this.mealType,count:this.alternativeCount,includeUserRecipes:this.includeUserRecipes});const e=await Ta.mealPlanningApi.getMealAlternatives(this.planId,this.day,this.mealType,this.alternativeCount,this.includeUserRecipes);console.log("Alternatives response:",e.data),e.data&&e.data.alternatives?this.alternatives=e.data.alternatives:Array.isArray(e.data)?this.alternatives=e.data:this.alternatives=[],console.log(`Loaded ${this.alternatives.length} alternatives`)}catch(e){console.error("Error loading alternatives:",e),this.error=e.response?.data?.error||e.message||"Failed to load alternatives",this.alternatives=[]}finally{this.loading=!1}},async selectAlternative(e){try{console.log("Selecting alternative:",e),this.$emit("alternative-selected",{day:this.day,mealType:this.mealType,recipe:e}),this.$emit("close")}catch(a){console.error("Error selecting alternative:",a),this.error="Failed to select alternative recipe"}},handleEscapeKey(e){"Escape"===e.key&&this.$emit("close")},formatMealType(e){return e?e.charAt(0).toUpperCase()+e.slice(1).toLowerCase():""},formatDate(e){if(!e)return"";try{const a=new Date(e);return a.toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"})}catch(a){return e}},truncateSummary(e){if(!e)return"No description available.";const a=e.replace(/<[^>]*>/g,"");return a.length<=120?a:a.substring(0,120)+"..."},handleImageError(e){e.target.src="/api/placeholder/300/200"}}};const Zr=(0,Z.A)(Hr,[["render",Or],["__scopeId","data-v-7a0126ee"]]);var qr=Zr,Kr={name:"MealPlanManager",components:{MealPlanDetailModal:sn,NutritionalAnalysisModal:er,AlternativesModal:qr},props:{loading:{type:Boolean,default:!1},nutritionProfile:{type:Object,default:null}},emits:["meal-plan-generated"],data(){return{mealPlans:[],selectedPlan:null,selectedPlanForAnalysis:null,currentAnalysis:null,showAnalysisModal:!1,showAlternativesModal:!1,alternativesModalData:null,generating:!1,showAdvancedOptions:!1,generationStatus:null,generateForm:{plan_type:"daily",start_date:"",target_calories:null,cuisine_preferences:[],max_cook_time:null},availableCuisines:["Mediterranean","Asian","Italian","Mexican","American","Indian","Middle Eastern","French","Japanese","Thai"]}},computed:{today(){return(new Date).toISOString().split("T")[0]}},async mounted(){this.generateForm.start_date=this.today,await this.loadMealPlans()},methods:{async loadMealPlans(){try{0;const e=await Ta.mealPlanningApi.getMealPlans(),a=e?.data?.results||e?.data||[];0,this.mealPlans=a}catch(e){console.error("âŒ Failed to load meal plans:",e.message),console.error("Response:",e.response?.data),console.error("================================"),this.mealPlans=[],this.showError("Failed to load meal plans")}},getMealCount(e){if(!e?.meal_plan_data?.meals)return"N/A";if(void 0!==e._cachedMealCount)return e._cachedMealCount;let a=0;Object.values(e.meal_plan_data.meals).forEach(e=>{Array.isArray(e)&&(a+=e.length)});const t=a||"N/A";return e._cachedMealCount=t,t},async generateMealPlan(){this.generating=!0,this.showGenerationStatus();try{const e={...this.generateForm};e.target_calories||(this.nutritionProfile?.calorie_target?e.target_calories=this.nutritionProfile.calorie_target:delete e.target_calories),e.max_cook_time||delete e.max_cook_time,0===e.cuisine_preferences.length&&delete e.cuisine_preferences,this.updateGenerationStep("strategy",!0);const a=await Ta.mealPlanningApi.generateMealPlan(e);this.updateGenerationStep("recipes",!0),this.generationStatus.steps.forEach(e=>{e.completed=!0,e.active=!1}),this.generationStatus={type:"success",icon:"fas fa-check-circle",title:"Meal Plan Generated Successfully!",message:"Your personalized AI meal plan is ready to view."},this.mealPlans.unshift(a.data),this.showSuccess("AI meal plan generated successfully!"),this.$emit("meal-plan-generated",a.data),setTimeout(()=>{this.generationStatus=null,this.viewMealPlan(a.data)},2e3)}catch(e){console.error("Failed to generate meal plan:",e),this.generationStatus={type:"error",icon:"fas fa-exclamation-circle",title:"Generation Failed",message:"Failed to generate meal plan. Please try again."},this.showError("Failed to generate meal plan. Please try again."),setTimeout(()=>{this.generationStatus=null},3e3)}finally{this.generating=!1}},showGenerationStatus(){this.generationStatus={type:"generating",icon:"fas fa-brain",title:"AI is Creating Your Meal Plan",message:"Our AI is analyzing your profile and generating personalized meals...",steps:[{name:"Analyzing your health profile",completed:!1,active:!0},{name:"Creating meal strategy",completed:!1,active:!1},{name:"Generating meal structure",completed:!1,active:!1},{name:"Creating detailed recipes",completed:!1,active:!1},{name:"Optimizing nutrition balance",completed:!1,active:!1}]},setTimeout(()=>this.updateGenerationStep("strategy"),1e3),setTimeout(()=>this.updateGenerationStep("structure"),3e3),setTimeout(()=>this.updateGenerationStep("recipes"),5e3),setTimeout(()=>this.updateGenerationStep("optimization"),7e3)},updateGenerationStep(e,a=!1){if(!this.generationStatus||!this.generationStatus.steps)return;const t={profile:0,strategy:1,structure:2,recipes:3,optimization:4}[e];if(void 0!==t){for(let e=0;e<t;e++)this.generationStatus.steps[e].completed=!0,this.generationStatus.steps[e].active=!1;a?(this.generationStatus.steps[t].completed=!0,this.generationStatus.steps[t].active=!1):this.generationStatus.steps[t].active=!0}},async regeneratePlan(e){try{const a=confirm("Generate a new AI meal plan with the same settings? This will create a completely new plan.");if(!a)return;this.generating=!0,this.showGenerationStatus();const t={plan_type:e.plan_type,start_date:e.start_date},s=await Ta.mealPlanningApi.generateMealPlan(t);this.mealPlans.unshift(s.data),this.generationStatus={type:"success",icon:"fas fa-check-circle",title:"New Meal Plan Generated!",message:"Your fresh AI meal plan is ready."},this.showSuccess("New AI meal plan generated!"),this.$emit("meal-plan-generated",s.data),setTimeout(()=>{this.generationStatus=null},2e3)}catch(a){console.error("Failed to regenerate meal plan:",a),this.generationStatus={type:"error",icon:"fas fa-exclamation-circle",title:"Regeneration Failed",message:"Failed to regenerate meal plan."},this.showError("Failed to regenerate meal plan"),setTimeout(()=>{this.generationStatus=null},3e3)}finally{this.generating=!1}},async deleteMealPlan(e){try{const a=confirm(`Are you sure you want to delete this ${e.plan_type} meal plan? This action cannot be undone.`);if(!a)return;await Ta.mealPlanningApi.deleteMealPlan(e.id),this.mealPlans=this.mealPlans.filter(a=>a.id!==e.id),this.showSuccess("Meal plan deleted successfully"),this.selectedPlan&&this.selectedPlan.id===e.id&&(this.selectedPlan=null)}catch(a){console.error("Error deleting meal plan:",a),this.showError("Failed to delete meal plan")}},viewMealPlan(e){console.log("=== Meal Plan Details ==="),console.log("Plan ID:",e?.id),console.log("Plan Type:",e?.plan_type),console.log("Has meal_plan_data:",!!e?.meal_plan_data),console.log("Has meals:",!!e?.meal_plan_data?.meals),console.log("Meals structure:",e?.meal_plan_data?.meals),e?.meal_plan_data?.meals&&(console.log("Available meal dates:",Object.keys(e.meal_plan_data.meals)),console.log("Sample meal data for first date:",Object.values(e.meal_plan_data.meals)[0])),console.log("========================="),this.selectedPlan=e},async regenerateMeal(e,a){try{if(console.log("=== Regenerating Meal ==="),console.log("Plan ID:",e),console.log("Meal Data:",a),!a)throw console.error("regenerateMeal: mealData is null/undefined"),new Error("Meal data is required");const{day:t,mealType:s}=a;if(console.log("Day:",t),console.log("Meal Type:",s),!t||!s)throw console.error("regenerateMeal: day or mealType missing",{day:t,mealType:s}),new Error("Day and meal type are required");console.log("Making API call to regenerate meal...");const i=await Ta.mealPlanningApi.regenerateMeal(e,t,s);console.log("Regeneration successful, updating UI...");const l=this.mealPlans.findIndex(a=>a.id===e);-1!==l&&(this.mealPlans[l]=i.data,this.selectedPlan=i.data,console.log("Meal plan updated in list")),this.showSuccess(`${s} meal regenerated successfully!`),console.log("========================")}catch(t){console.error("=== Failed to regenerate meal ==="),console.error("Error message:",t.message),console.error("Error response:",t.response?.data),console.error("Full error:",t),console.error("================================"),this.showError(`Failed to regenerate meal: ${t.message}`)}},async getMealAlternatives(e,a){try{if(console.log("=== Opening Meal Alternatives Modal ==="),console.log("Plan ID:",e),console.log("Meal Data:",a),!a)return console.error("getMealAlternatives: mealData is null/undefined"),void this.showError("Meal data is required");const{day:t,mealType:s}=a;if(console.log("Day:",t),console.log("Meal Type:",s),!t||!s)return console.error("getMealAlternatives: day or mealType missing",{day:t,mealType:s}),void this.showError("Day and meal type are required");this.alternativesModalData={planId:e,day:t,mealType:s},this.showAlternativesModal=!0,console.log("Alternatives modal opened"),console.log("===============================")}catch(t){console.error("=== Failed to open alternatives modal ==="),console.error("Error message:",t.message),console.error("Full error:",t),console.error("====================================="),this.showError(`Failed to open alternatives: ${t.message}`)}},closeAlternativesModal(){this.showAlternativesModal=!1,this.alternativesModalData=null},async handleAlternativeSelected(e){try{console.log("=== Handling Alternative Selection ==="),console.log("Selection data:",e);const{day:a,mealType:t,recipe:s}=e,i=await Ta.mealPlanningApi.swapMeal(this.alternativesModalData.planId,a,t,s);if(console.log("Meal swapped successfully:",i.data),await this.loadMealPlans(),this.selectedPlan&&this.selectedPlan.id===this.alternativesModalData.planId){const e=this.mealPlans.find(e=>e.id===this.selectedPlan.id);e&&(this.selectedPlan=e)}this.showSuccess(`${t} meal replaced successfully with "${s.title}"!`),console.log("========================")}catch(a){console.error("=== Failed to swap meal ==="),console.error("Error message:",a.message),console.error("Error response:",a.response?.data),console.error("Full error:",a),console.error("================================"),this.showError(`Failed to replace meal: ${a.message}`)}},async analyzeMealPlan(e){try{this.selectedPlanForAnalysis=e,this.currentAnalysis={loading:!0,message:"AI is analyzing your meal plan nutrition..."},this.showAnalysisModal=!0;const a=await Ta.mealPlanningApi.analyzeMealPlan(e.id);this.currentAnalysis=a.data}catch(a){console.error("Failed to analyze meal plan:",a),this.currentAnalysis={error:!0,message:"Failed to analyze meal plan. Please try again."},this.showError("Failed to analyze meal plan")}},async analyzeMealPlanFromModal(e){this.selectedPlan=null,await this.analyzeMealPlan(e)},closeAnalysisModal(){this.showAnalysisModal=!1,this.currentAnalysis=null,this.selectedPlanForAnalysis=null},formatPlanType(e){return e&&"string"===typeof e?e.charAt(0).toUpperCase()+e.slice(1):"Unknown"},formatDateRange(e,a){if(!e||!a)return console.log("formatDateRange: Missing dates - start:",e,"end:",a),"Date unknown";try{const t=new Date(e),s=new Date(a);if(isNaN(t.getTime())||isNaN(s.getTime()))return console.log("formatDateRange: Invalid dates - start:",e,"end:",a),"Invalid date range";const i=t.toLocaleDateString(),l=s.toLocaleDateString();return e===a?i:`${i} - ${l}`}catch(t){return console.error("formatDateRange error:",t,"for dates:",e,a),"Date error"}},showSuccess(e){this.$toast?.success?.(e)||alert(e)},showError(e){this.$toast?.error?.(e)||alert(e)}}};const Jr=(0,Z.A)(Kr,[["render",Wt],["__scopeId","data-v-0338268e"]]);var Yr=Jr;const eo={class:"coming-soon-card"},ao={class:"card-content"},to={class:"icon-container"},so={class:"features-preview"},io={class:"progress-indicator"},lo={class:"progress-bar"},no={class:"progress-text"},ro={class:"cta-section"};function oo(e,a,t,l,n,r){return(0,s.uX)(),(0,s.CE)("div",eo,[(0,s.Lk)("div",ao,[(0,s.Lk)("div",to,[(0,s.Lk)("i",{class:(0,i.C4)(t.icon)},null,2)]),(0,s.Lk)("h2",null,(0,i.v_)(t.title),1),(0,s.Lk)("p",null,(0,i.v_)(t.description),1),(0,s.Lk)("div",so,[a[2]||(a[2]=(0,s.Lk)("h3",null,"Coming Features:",-1)),(0,s.Lk)("ul",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.features,e=>((0,s.uX)(),(0,s.CE)("li",{key:e},[a[1]||(a[1]=(0,s.Lk)("i",{class:"fas fa-check-circle"},null,-1)),(0,s.eW)(" "+(0,i.v_)(e),1)]))),128))])]),(0,s.Lk)("div",io,[(0,s.Lk)("div",lo,[(0,s.Lk)("div",{class:"progress-fill",style:(0,i.Tr)({width:t.progress+"%"})},null,4)]),(0,s.Lk)("span",no,(0,i.v_)(t.progress)+"% Complete",1)]),(0,s.Lk)("div",ro,[a[4]||(a[4]=(0,s.Lk)("p",{class:"cta-text"},"Want to be notified when this feature launches?",-1)),(0,s.Lk)("button",{class:"btn btn-primary",onClick:a[0]||(a[0]=(...e)=>r.subscribeToUpdates&&r.subscribeToUpdates(...e))},a[3]||(a[3]=[(0,s.Lk)("i",{class:"fas fa-bell"},null,-1),(0,s.eW)(" Notify Me ")]))])])])}var co={name:"ComingSoonCard",props:{title:{type:String,required:!0},description:{type:String,required:!0},icon:{type:String,default:"fas fa-rocket"},progress:{type:Number,default:75}},computed:{features(){const e={"Meal Plans":["AI-generated daily meal plans","Weekly meal planning","Personalized recipe suggestions","Automatic shopping lists","Nutritional balance optimization"],"Nutrition Analytics":["Daily nutrition tracking","Macro breakdown charts","Progress towards goals","Trend analysis","AI-powered insights"]};return e[this.title]||["Personalized recommendations","Smart AI integration","Beautiful visualizations","Easy-to-use interface"]}},methods:{subscribeToUpdates(){alert("Thanks for your interest! We'll notify you when this feature is ready.")}}};const po=(0,Z.A)(co,[["render",oo],["__scopeId","data-v-2b85b24d"]]);var uo=po,go={name:"MealPlanningDashboard",components:{RecipeBrowser:K,NutritionProfileSetup:$a,MealPlanManager:Yr,ComingSoonCard:uo,RecipeDetailModal:en},data(){return{activeTab:"recipes",tabs:[{id:"recipes",name:"My Recipes",icon:"fas fa-utensils"},{id:"profile",name:"Nutrition Profile",icon:"fas fa-user-cog"},{id:"meal-plans",name:"Meal Plans",icon:"fas fa-calendar-alt"},{id:"analytics",name:"Analytics",icon:"fas fa-chart-line"}],recipes:[],nutritionProfile:null,recipesLoading:!1,profileLoading:!1,mealPlansLoading:!1,showRecipeModal:!1,selectedRecipe:null}},computed:{currentUser(){return this.$store.getters["auth/currentUser"]}},async mounted(){this.currentUser?await this.loadInitialData():this.$router.push("/login")},methods:{async loadInitialData(){await Promise.all([this.loadRecipes(),this.loadNutritionProfile()])},async loadRecipes(){this.recipesLoading=!0;try{const e={_t:Date.now(),page_size:100};0;const a=await Ta.mealPlanningApi.getMyRecipes(e);a?.data?.results&&Array.isArray(a.data.results)?this.recipes=a.data.results:Array.isArray(a?.data)?this.recipes=a.data:(console.warn("âš ï¸ Unexpected API response structure:",a?.data),this.recipes=[])}catch(e){console.error("âŒ Failed to load my recipes:",e.message),this.recipes=[],this.$toast?.error?.("Failed to load your recipes")||alert("Failed to load your recipes")}finally{this.recipesLoading=!1}},async loadNutritionProfile(){this.profileLoading=!0;try{const e=await Ta.mealPlanningApi.getNutritionProfile();this.nutritionProfile=e.data}catch(e){console.error("Failed to load nutrition profile:",e),this.nutritionProfile={calorie_target:2e3,protein_target:100,carb_target:250,fat_target:67,dietary_preferences:[],allergies_intolerances:[],cuisine_preferences:[],disliked_ingredients:[],meals_per_day:3,timezone:"Europe/Tallinn"}}finally{this.profileLoading=!1}},onProfileUpdated(e){this.nutritionProfile={...e},"meal-plans"===this.activeTab&&this.$nextTick(()=>{this.$forceUpdate()})},selectRecipe(e){this.selectedRecipe=e,this.showRecipeModal=!0},closeRecipeModal(){this.showRecipeModal=!1,this.selectedRecipe=null},async onRecipeRemoved(e){console.log("Recipe removed event received:",e),this.recipes=this.recipes.filter(a=>a.id!==e.id),await this.loadRecipes()},async onRecipeSaved(e){console.log("Recipe saved event received:",e),await this.loadRecipes(),"recipes"===this.activeTab&&this.$nextTick(()=>{console.log("My recipes refreshed after saving new recipe")})},async onMealPlanGenerated(e){console.log("New meal plan generated:",e),this.$toast?.success?.("Meal plan generated successfully!")||alert("Meal plan generated successfully!")}}};const mo=(0,Z.A)(go,[["render",m],["__scopeId","data-v-23e34773"]]);var ho=mo},5090:function(e,a,t){t.d(a,{mealPlanningApi:function(){return c}});t(4114),t(8111),t(7588),t(1701);var s=t(4373),i=t(1233),l=t(5809);const n=({NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_API_URL||"https://wellness-app-tx2c.onrender.com/api").replace(/\/+$/,"").replace("/api","")+"/meal-planning/api",r=s.A.create({baseURL:n,timeout:1e4,headers:{"Content-Type":"application/json"}});function o(){if(l.A?.state?.auth?.user?.access)return l.A.state.auth.user.access;const e=i.A.getCurrentUser();return e?.access||null}r.interceptors.request.use(e=>{const a=o();return a&&(e.headers["Authorization"]="Bearer "+a),e},e=>(console.error("Meal Planning API request error:",e),Promise.reject(e))),r.interceptors.response.use(e=>e,async e=>{const a=e.config;if(401===e.response?.status&&!a._retry){a._retry=!0;try{const e=await i.A.refreshToken();if(e?.access)return a.headers["Authorization"]="Bearer "+e.access,l.A?.state?.auth?.status?.loggedIn&&await l.A.dispatch("auth/refreshToken",e.access),(0,s.A)(a)}catch(t){return i.A.logout(),l.A?.state?.auth?.status?.loggedIn&&l.A.commit("auth/logout"),setTimeout(()=>{window.location.href="/login"},100),Promise.reject(t)}}return e.response?console.error(`Meal Planning API Error: ${e.response.status} ${e.response.statusText}`,e.response.data):console.error("Meal Planning API Error:",e.message),Promise.reject(e)});const c={api:r,getRecipes(e={}){const a={};return e.page&&(a.page=e.page),e.page_size&&(a.page_size=e.page_size),e.search&&e.search.trim()&&(a.search=e.search.trim()),e.cuisine&&e.cuisine.trim()&&(a.cuisine=e.cuisine.trim()),e.meal_type&&e.meal_type.trim()&&(a.meal_type=e.meal_type.trim()),e.dietary_preferences&&e.dietary_preferences.trim()&&(a.dietary_preferences=e.dietary_preferences.trim()),e.max_calories&&e.max_calories.trim()&&(a.max_calories=parseInt(e.max_calories.trim())),r.get("/recipes/",{params:a})},getRecipe(e){return r.get(`/recipes/${e}/`)},searchRecipes(e){return r.post("/recipes/search/",e)},rateRecipe(e,a,t=""){return r.post(`/recipes/${e}/rate/`,{rating:a,review:t})},saveRecipeToMyCollection(e){return r.post(`/recipes/${e}/save_to_my_recipes/`)},saveRecipeFromMealPlan(e){return r.post("/recipes/save_from_meal_plan/",e)},removeRecipeFromMyCollection(e){return r.delete(`/recipes/${e}/`)},getMyRecipes(e={}){const a={...e,my_recipes:"true"};return a.page||(a.page=1),a.page_size||(a.page_size=100),a.search&&a.search.trim()&&(a.search=a.search.trim()),a.cuisine&&a.cuisine.trim()&&(a.cuisine=a.cuisine.trim()),a.meal_type&&a.meal_type.trim()&&(a.meal_type=a.meal_type.trim()),r.get("/recipes/",{params:a})},async generateRecipe(e){try{return await r.post("/recipes/generate/",e)}catch(a){if(404===a.response?.status)return console.warn("Recipe generation endpoint not implemented yet"),Promise.reject(new Error("Recipe generation feature coming soon"));throw a}},async getIngredientSubstitutions(e,a,t={}){try{return await r.post(`/recipes/${e}/substitute-ingredient/`,{ingredient_name:a,...t})}catch(s){if(404===s.response?.status)return console.warn("Ingredient substitution endpoint not implemented yet"),Promise.reject(new Error("Ingredient substitution feature coming soon"));throw s}},async scaleRecipe(e,a){try{return await r.post(`/recipes/${e}/scale/`,{servings:a})}catch(t){if(404===t.response?.status)return console.warn("Recipe scaling endpoint not implemented yet"),Promise.reject(new Error("Recipe scaling feature coming soon"));throw t}},getIngredients(e={}){return r.get("/ingredients/",{params:e})},getIngredient(e){return r.get(`/ingredients/${e}/`)},async getNutritionProfile(){try{return await r.get("/nutrition-profile/current/")}catch(e){if(404===e.response?.status)return{data:{calorie_target:2e3,protein_target:100,carb_target:250,fat_target:67,dietary_preferences:[],allergies_intolerances:[],cuisine_preferences:[]}};throw e}},async updateNutritionProfile(e){try{return await r.patch("/nutrition-profile/current/",e)}catch(a){if(405===a.response?.status)try{return await r.put("/nutrition-profile/current/",e)}catch(t){if(405===t.response?.status)return await r.post("/nutrition-profile/update_profile/",e);throw t}throw a}},calculateNutritionTargets(){return r.post("/nutrition-profile/calculate_targets/")},async generateNutritionProfile(e){try{return await r.post("/nutrition-profile/ai_generate/",e)}catch(a){throw console.error("Error generating AI nutrition profile:",a),a}},getMealPlans(e={}){const a={page:e.page||1,page_size:e.page_size||20,ordering:e.ordering||"-created_at"};return e.plan_type&&(a.plan_type=e.plan_type),void 0!==e.is_active&&(a.is_active=e.is_active),e.start_date&&(a.start_date=e.start_date),e.end_date&&(a.end_date=e.end_date),r.get("/meal-plans/",{params:a})},getMealPlan(e){return r.get(`/meal-plans/${e}/`)},generateMealPlan(e){return r.post("/meal-plans/generate/",e)},deleteMealPlan(e){return r.delete(`/meal-plans/${e}/`)},async regenerateMeal(e,a,t){try{return console.log("Regenerating meal:",{planId:e,day:a,mealType:t}),await r.post(`/meal-plans/${e}/regenerate_meal/`,{day:a,meal_type:t})}catch(s){if(404===s.response?.status)return console.warn("Meal regeneration endpoint not implemented yet"),Promise.reject(new Error("Meal regeneration feature coming soon"));throw s}},async getMealAlternatives(e,a,t,s=3,i=!0){try{return console.log("Getting meal alternatives:",{planId:e,day:a,mealType:t,count:s,includeUserRecipes:i}),await r.post(`/meal-plans/${e}/get_alternatives/`,{day:a,meal_type:t,count:s,include_user_recipes:i})}catch(l){if(404===l.response?.status)return console.warn("Meal alternatives endpoint not implemented yet"),{data:[]};throw l}},async swapMeal(e,a,t,s){try{return await r.post(`/meal-plans/${e}/swap_meal/`,{day:a,meal_type:t,new_recipe:s})}catch(i){if(404===i.response?.status)return console.warn("Meal swap endpoint not implemented yet"),Promise.reject(new Error("Meal swap feature coming soon"));throw i}},async analyzeMealPlan(e){try{return console.log("Analyzing meal plan:",e),await r.get(`/meal-plans/${e}/analyze/`)}catch(a){if(404===a.response?.status)return console.warn("Meal plan analysis endpoint not implemented yet"),{data:{overall_score:85,nutritional_adequacy:{calories:{status:"adequate",percentage_of_target:98},protein:{status:"adequate",percentage_of_target:105},carbs:{status:"adequate",percentage_of_target:92},fat:{status:"adequate",percentage_of_target:103}},meal_distribution:{breakfast_percentage:25,lunch_percentage:35,dinner_percentage:40,balance_rating:"excellent"},variety_analysis:{cuisine_diversity:"good",ingredient_variety:"excellent",cooking_method_diversity:"good"},recommendations:["Excellent meal plan with well-balanced nutrition","Great variety of cuisines and cooking methods","Protein distribution is optimal throughout the day"],health_highlights:["Well-balanced macronutrients","Good variety of nutrient-dense foods","Appropriate calorie distribution across meals"],areas_for_improvement:["Consider adding more omega-3 rich foods","Could include more antioxidant-rich vegetables"]}};throw a}},generateShoppingList(e,a={}){return r.post(`/meal-plans/${e}/generate_shopping_list/`,{exclude_items:a.exclude_ingredients||[],group_by_category:!1!==a.group_by_category,...a})},getNutritionLogs(e={}){return r.get("/nutrition-logs/",{params:e})},getNutritionLog(e){return r.get(`/nutrition-logs/${e}/`)},logNutrition(e){return r.post("/nutrition-logs/",e)},analyzeNutrition(e){return r.post("/nutrition-logs/analyze/",e)},getNutritionAnalytics(e={}){return r.get("/nutrition-logs/analytics/",{params:e})},getDashboardData(e={}){const a={days:e.days||7,...e};return r.get("/nutrition-logs/dashboard_data/",{params:a})},async getNutritionInsights(e={}){try{return await r.get("/ai-insights/",{params:e})}catch(a){if(404===a.response?.status)return console.warn("AI insights endpoint not implemented yet"),{data:[]};throw a}},async getMealRecommendations(e={}){try{return await r.get("/recommendations/",{params:e})}catch(a){if(404===a.response?.status)return console.warn("Meal recommendations endpoint not implemented yet"),{data:[]};throw a}},async calculateNutrition(e,a){try{return await r.post("/calculate-nutrition/",{ingredients:e,servings:a})}catch(t){if(404===t.response?.status)return console.warn("Nutrition calculation endpoint not implemented yet"),{data:{calories:400,protein:25,carbs:45,fat:15}};throw t}},async validateDietaryRestrictions(e,a,t){try{return await r.post("/validate-dietary/",{ingredients:e,dietary_preferences:a,allergies:t})}catch(s){if(404===s.response?.status)return console.warn("Dietary validation endpoint not implemented yet"),{data:{is_compliant:!0,violations:[],warnings:[]}};throw s}},async getDietaryPreferences(){try{return await r.get("/dietary-preferences/")}catch(e){if(404===e.response?.status)return{data:["vegetarian","vegan","pescatarian","keto","paleo","mediterranean","dash","low_carb","low_fat","high_protein","intermittent_fasting","whole30","raw_food","gluten_free","dairy_free","flexitarian"]};throw e}},async getAllergens(){try{return await r.get("/allergens/")}catch(e){if(404===e.response?.status)return{data:["nuts","peanuts","dairy","gluten","eggs","fish","shellfish","soy","sesame","sulfites","nightshades","histamine"]};throw e}},async getCuisines(){try{return await r.get("/cuisines/")}catch(e){if(404===e.response?.status)return{data:["italian","mexican","asian","indian","mediterranean","american","french","thai","japanese","chinese","greek","middle_eastern"]};throw e}},async connectSpoonacular(){try{return await r.post("/nutrition-profile/connect_spoonacular/")}catch(e){throw console.error("Failed to connect to Spoonacular:",e),e}},async getSpoonacularStatus(){try{return await r.get("/nutrition-profile/spoonacular_status/")}catch(e){throw console.error("Failed to get Spoonacular status:",e),e}},async getSpoonacularMealPlan(e=null){try{const a=e?{start_date:e}:{};return await r.get("/nutrition-profile/spoonacular_meal_plan/",{params:a})}catch(a){throw console.error("Failed to get Spoonacular meal plan:",a),a}},async addToSpoonacularMealPlan(e){try{return await r.post("/nutrition-profile/add_to_spoonacular_meal_plan/",e)}catch(a){throw console.error("Failed to add to Spoonacular meal plan:",a),a}},async getSpoonacularShoppingList(){try{return await r.get("/nutrition-profile/spoonacular_shopping_list/")}catch(e){throw console.error("Failed to get Spoonacular shopping list:",e),e}},async generateSpoonacularShoppingList(e,a){try{return await r.post("/nutrition-profile/generate_spoonacular_shopping_list/",{start_date:e,end_date:a})}catch(t){throw console.error("Failed to generate Spoonacular shopping list:",t),t}}}}}]);
//# sourceMappingURL=147.0dd0417d.js.map