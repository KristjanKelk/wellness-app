"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[824],{824:function(e,a,t){t.r(a),t.d(a,{default:function(){return zi}});var s=t(6768),l=t(4232);const n={class:"meal-planning-dashboard"},i={class:"dashboard-tabs"},r={class:"tabs-nav"},o=["onClick"],c={class:"tab-content"},d={key:0,class:"tab-panel"},u={key:1,class:"tab-panel"},p={key:2,class:"tab-panel"},m={key:3,class:"tab-panel"},g={key:4,class:"tab-panel"};function h(e,a,t,h,k,v){const f=(0,s.g2)("recipe-browser"),y=(0,s.g2)("nutrition-profile-setup"),L=(0,s.g2)("meal-plan-manager"),_=(0,s.g2)("spoonacular-integration"),b=(0,s.g2)("coming-soon-card"),C=(0,s.g2)("recipe-detail-modal");return(0,s.uX)(),(0,s.CE)("div",n,[a[0]||(a[0]=(0,s.Lk)("div",{class:"dashboard-header"},[(0,s.Lk)("h1",null,"Meal Planning Dashboard"),(0,s.Lk)("p",null,"AI-powered nutrition and meal planning")],-1)),(0,s.Lk)("div",i,[(0,s.Lk)("nav",r,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(k.tabs,e=>((0,s.uX)(),(0,s.CE)("button",{key:e.id,onClick:a=>k.activeTab=e.id,class:(0,l.C4)(["tab-button",{active:k.activeTab===e.id}])},[(0,s.Lk)("i",{class:(0,l.C4)(e.icon)},null,2),(0,s.eW)(" "+(0,l.v_)(e.name),1)],10,o))),128))]),(0,s.Lk)("div",c,["recipes"===k.activeTab?((0,s.uX)(),(0,s.CE)("div",d,[(0,s.bF)(f,{recipes:k.recipes,loading:k.recipesLoading,onRecipeSelected:v.selectRecipe,onRefreshRecipes:v.loadRecipes},null,8,["recipes","loading","onRecipeSelected","onRefreshRecipes"])])):(0,s.Q3)("",!0),"profile"===k.activeTab?((0,s.uX)(),(0,s.CE)("div",u,[(0,s.bF)(y,{profile:k.nutritionProfile,loading:k.profileLoading,onProfileUpdated:v.onProfileUpdated},null,8,["profile","loading","onProfileUpdated"])])):(0,s.Q3)("",!0),"meal-plans"===k.activeTab?((0,s.uX)(),(0,s.CE)("div",p,[(0,s.bF)(L,{loading:k.mealPlansLoading,"nutrition-profile":k.nutritionProfile,onMealPlanGenerated:v.onMealPlanGenerated},null,8,["loading","nutrition-profile","onMealPlanGenerated"])])):(0,s.Q3)("",!0),"spoonacular"===k.activeTab?((0,s.uX)(),(0,s.CE)("div",m,[(0,s.bF)(_)])):(0,s.Q3)("",!0),"analytics"===k.activeTab?((0,s.uX)(),(0,s.CE)("div",g,[(0,s.bF)(b,{title:"Nutrition Analytics",description:"Detailed nutrition analytics coming soon!",icon:"fas fa-chart-line"})])):(0,s.Q3)("",!0)])]),k.showRecipeModal?((0,s.uX)(),(0,s.Wv)(C,{key:0,recipe:k.selectedRecipe,onClose:v.closeRecipeModal},null,8,["recipe","onClose"])):(0,s.Q3)("",!0)])}t(4114);var k=t(5130);const v={class:"recipe-browser"},f={class:"search-section"},y={class:"search-header"},L=["disabled"],_={class:"search-bar"},b={class:"filters"},C=["value"],w={key:0,class:"loading-state"},P={key:1,class:"empty-state"},M={key:0},E={key:1},S={key:2,class:"recipe-grid"},I=["onClick"],D={class:"recipe-image"},A=["src","alt"],X={class:"recipe-badges"},T={class:"recipe-content"},F={class:"recipe-title"},x=["innerHTML"],R={class:"recipe-stats"},$={class:"stat"},W={class:"stat"},N={class:"stat"},z={class:"nutrition-preview"},Q={class:"macro"},U={class:"macro-value"},V={class:"macro"},G={class:"macro-value"},j={class:"macro"},q={class:"macro-value"};function O(e,a,t,n,i,r){return(0,s.uX)(),(0,s.CE)("div",v,[(0,s.Lk)("div",f,[(0,s.Lk)("div",y,[a[9]||(a[9]=(0,s.Lk)("h3",null,"Recipe Library",-1)),(0,s.Lk)("button",{onClick:a[0]||(a[0]=a=>e.$emit("refresh-recipes")),class:"refresh-btn",disabled:t.loading},[(0,s.Lk)("i",{class:(0,l.C4)(t.loading?"fas fa-spinner fa-spin":"fas fa-sync-alt")},null,2),a[8]||(a[8]=(0,s.eW)(" Refresh "))],8,L)]),(0,s.Lk)("div",_,[a[10]||(a[10]=(0,s.Lk)("i",{class:"fas fa-search search-icon"},null,-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>i.searchQuery=e),type:"text",placeholder:"Search recipes...",class:"search-input",onInput:a[2]||(a[2]=(...a)=>e.debouncedSearch&&e.debouncedSearch(...a))},null,544),[[k.Jo,i.searchQuery]])]),(0,s.Lk)("div",b,[(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":a[3]||(a[3]=e=>i.selectedCuisine=e),onChange:a[4]||(a[4]=(...e)=>r.applyFilters&&r.applyFilters(...e)),class:"filter-select"},[a[11]||(a[11]=(0,s.Lk)("option",{value:""},"All Cuisines",-1)),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.cuisines,e=>((0,s.uX)(),(0,s.CE)("option",{key:e,value:e},(0,l.v_)(r.formatCuisine(e)),9,C))),128))],544),[[k.u1,i.selectedCuisine]]),(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":a[5]||(a[5]=e=>i.selectedMealType=e),onChange:a[6]||(a[6]=(...e)=>r.applyFilters&&r.applyFilters(...e)),class:"filter-select"},a[12]||(a[12]=[(0,s.Fv)('<option value="" data-v-13af66fa>All Meal Types</option><option value="breakfast" data-v-13af66fa>Breakfast</option><option value="lunch" data-v-13af66fa>Lunch</option><option value="dinner" data-v-13af66fa>Dinner</option><option value="snack" data-v-13af66fa>Snack</option>',5)]),544),[[k.u1,i.selectedMealType]])])]),t.loading?((0,s.uX)(),(0,s.CE)("div",w,a[13]||(a[13]=[(0,s.Lk)("div",{class:"loading-spinner"},null,-1),(0,s.Lk)("p",null,"Loading delicious recipes...",-1)]))):0===i.filteredRecipes.length?((0,s.uX)(),(0,s.CE)("div",P,[a[15]||(a[15]=(0,s.Lk)("i",{class:"fas fa-utensils"},null,-1)),a[16]||(a[16]=(0,s.Lk)("h3",null,"No recipes found",-1)),0===t.recipes.length?((0,s.uX)(),(0,s.CE)("p",M,a[14]||(a[14]=[(0,s.eW)(" Generate your first meal plan to populate your recipe library with personalized recipes! "),(0,s.Lk)("br",null,null,-1),(0,s.Lk)("br",null,null,-1),(0,s.Lk)("strong",null,"ðŸ’¡ Tip:",-1),(0,s.eW)(' Go to the "Meal Plans" tab to create an AI-powered meal plan. ')]))):((0,s.uX)(),(0,s.CE)("p",E,"Try adjusting your search or filters"))])):((0,s.uX)(),(0,s.CE)("div",S,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.filteredRecipes,t=>((0,s.uX)(),(0,s.CE)("div",{key:t.id,class:"recipe-card",onClick:a=>e.$emit("recipe-selected",t)},[(0,s.Lk)("div",D,[(0,s.Lk)("img",{src:t.image_url||"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZjBmMGYwIi8+CiAgPHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIxOCIgZmlsbD0iIzk5OTk5OSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkZvb2QgUmVjaXBlPC90ZXh0Pgo8L3N2Zz4K",alt:t.title,onError:a[7]||(a[7]=(...e)=>r.handleImageError&&r.handleImageError(...e))},null,40,A),(0,s.Lk)("div",X,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.dietary_tags.slice(0,2),e=>((0,s.uX)(),(0,s.CE)("span",{key:e,class:"badge"},(0,l.v_)(r.formatTag(e)),1))),128))])]),(0,s.Lk)("div",T,[(0,s.Lk)("h3",F,(0,l.v_)(t.title),1),(0,s.Lk)("p",{class:"recipe-summary",innerHTML:r.truncateSummary(t.summary)},null,8,x),(0,s.Lk)("div",R,[(0,s.Lk)("div",$,[a[17]||(a[17]=(0,s.Lk)("i",{class:"fas fa-clock"},null,-1)),(0,s.Lk)("span",null,(0,l.v_)(t.total_time_minutes)+"min",1)]),(0,s.Lk)("div",W,[a[18]||(a[18]=(0,s.Lk)("i",{class:"fas fa-fire"},null,-1)),(0,s.Lk)("span",null,(0,l.v_)(Math.round(t.calories_per_serving))+" cal",1)]),(0,s.Lk)("div",N,[a[19]||(a[19]=(0,s.Lk)("i",{class:"fas fa-users"},null,-1)),(0,s.Lk)("span",null,(0,l.v_)(t.servings)+" servings",1)])]),(0,s.Lk)("div",z,[(0,s.Lk)("div",Q,[a[20]||(a[20]=(0,s.Lk)("span",{class:"macro-label"},"Protein",-1)),(0,s.Lk)("span",U,(0,l.v_)(Math.round(t.protein_per_serving))+"g",1)]),(0,s.Lk)("div",V,[a[21]||(a[21]=(0,s.Lk)("span",{class:"macro-label"},"Carbs",-1)),(0,s.Lk)("span",G,(0,l.v_)(Math.round(t.carbs_per_serving))+"g",1)]),(0,s.Lk)("div",j,[a[22]||(a[22]=(0,s.Lk)("span",{class:"macro-label"},"Fat",-1)),(0,s.Lk)("span",q,(0,l.v_)(Math.round(t.fat_per_serving))+"g",1)])])])],8,I))),128))]))])}t(8111),t(2489),t(1701),t(7642),t(8004),t(3853),t(5876),t(2475),t(5024),t(1698);function B(e,a){let t;return function(...s){const l=()=>{clearTimeout(t),e(...s)};clearTimeout(t),t=setTimeout(l,a)}}var Z={name:"RecipeBrowser",props:{recipes:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}},emits:["recipe-selected","refresh-recipes"],data(){return{searchQuery:"",selectedCuisine:"",selectedMealType:"",filteredRecipes:[]}},computed:{cuisines(){return[...new Set(this.recipes.map(e=>e.cuisine).filter(Boolean))]}},watch:{recipes:{immediate:!0,handler(){this.filteredRecipes=this.recipes}}},created(){this.debouncedSearch=B(this.applyFilters,300)},methods:{applyFilters(){let e=this.recipes;if(this.searchQuery){const a=this.searchQuery.toLowerCase();e=e.filter(e=>e.title.toLowerCase().includes(a)||e.summary.toLowerCase().includes(a))}this.selectedCuisine&&(e=e.filter(e=>e.cuisine===this.selectedCuisine)),this.selectedMealType&&(e=e.filter(e=>e.meal_type===this.selectedMealType)),this.filteredRecipes=e},formatCuisine(e){return e.charAt(0).toUpperCase()+e.slice(1)},formatTag(e){return e.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase())},truncateSummary(e){if(!e)return"";const a=e.replace(/<[^>]*>/g,"");return a.length>120?a.substring(0,120)+"...":a},handleImageError(e){e.target.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZjBmMGYwIi8+CiAgPHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIxOCIgZmlsbD0iIzk5OTk5OSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkZvb2QgUmVjaXBlPC90ZXh0Pgo8L3N2Zz4K"}}},H=t(1241);const K=(0,H.A)(Z,[["render",O],["__scopeId","data-v-13af66fa"]]);var J=K;const Y={class:"nutrition-profile-setup"},ee={class:"profile-card"},ae={key:0,class:"error-messages"},te={class:"error-card"},se={key:1,class:"loading-state"},le={class:"form-section"},ne={class:"targets-grid"},ie={class:"form-group"},re={class:"form-group"},oe={class:"form-group"},ce={class:"form-group"},de={class:"form-section"},ue={key:0,class:"conflict-warning"},pe={class:"preferences-grid"},me=["value","disabled"],ge={key:0,class:"disabled-reason"},he={class:"form-section"},ke={class:"preferences-grid"},ve=["value"],fe={class:"form-section"},ye={class:"preferences-grid"},Le=["value"],_e={class:"form-section"},be={class:"form-group"},Ce={key:0,class:"ingredient-tags"},we=["onClick"],Pe={class:"form-section"},Me={class:"meal-prefs-grid"},Ee={class:"form-group"},Se={class:"form-group"},Ie={class:"form-actions"},De=["disabled"],Ae={key:0},Xe={key:1};function Te(e,a,t,n,i,r){return(0,s.uX)(),(0,s.CE)("div",Y,[(0,s.Lk)("div",ee,[a[41]||(a[41]=(0,s.Lk)("div",{class:"card-header"},[(0,s.Lk)("h2",null,"Your Nutrition Profile"),(0,s.Lk)("p",null,"Set up your dietary preferences and nutrition goals")],-1)),i.validationErrors.length>0?((0,s.uX)(),(0,s.CE)("div",ae,[(0,s.Lk)("div",te,[a[14]||(a[14]=(0,s.Lk)("h4",null,"Please fix the following issues:",-1)),(0,s.Lk)("ul",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.validationErrors,e=>((0,s.uX)(),(0,s.CE)("li",{key:e},(0,l.v_)(e),1))),128))])])])):(0,s.Q3)("",!0),t.loading?((0,s.uX)(),(0,s.CE)("div",se,a[15]||(a[15]=[(0,s.Lk)("div",{class:"loading-spinner"},null,-1),(0,s.Lk)("p",null,"Loading your profile...",-1)]))):((0,s.uX)(),(0,s.CE)("form",{key:2,onSubmit:a[13]||(a[13]=(0,k.D$)((...e)=>r.saveProfile&&r.saveProfile(...e),["prevent"])),class:"profile-form"},[(0,s.Lk)("div",le,[a[21]||(a[21]=(0,s.Lk)("h3",null,"Daily Nutrition Targets",-1)),(0,s.Lk)("div",ne,[(0,s.Lk)("div",ie,[a[16]||(a[16]=(0,s.Lk)("label",{for:"calorie_target"},"Daily Calories",-1)),(0,s.bo)((0,s.Lk)("input",{id:"calorie_target","onUpdate:modelValue":a[0]||(a[0]=e=>i.formData.calorie_target=e),type:"number",min:"1000",max:"5000",class:"form-input",required:""},null,512),[[k.Jo,i.formData.calorie_target,void 0,{number:!0}]]),a[17]||(a[17]=(0,s.Lk)("span",{class:"form-help"},"Recommended: 1800-2500 kcal",-1))]),(0,s.Lk)("div",re,[a[18]||(a[18]=(0,s.Lk)("label",{for:"protein_target"},"Protein (g)",-1)),(0,s.bo)((0,s.Lk)("input",{id:"protein_target","onUpdate:modelValue":a[1]||(a[1]=e=>i.formData.protein_target=e),type:"number",min:"0",max:"500",class:"form-input",required:""},null,512),[[k.Jo,i.formData.protein_target,void 0,{number:!0}]])]),(0,s.Lk)("div",oe,[a[19]||(a[19]=(0,s.Lk)("label",{for:"carb_target"},"Carbs (g)",-1)),(0,s.bo)((0,s.Lk)("input",{id:"carb_target","onUpdate:modelValue":a[2]||(a[2]=e=>i.formData.carb_target=e),type:"number",min:"0",max:"1000",class:"form-input",required:""},null,512),[[k.Jo,i.formData.carb_target,void 0,{number:!0}]])]),(0,s.Lk)("div",ce,[a[20]||(a[20]=(0,s.Lk)("label",{for:"fat_target"},"Fat (g)",-1)),(0,s.bo)((0,s.Lk)("input",{id:"fat_target","onUpdate:modelValue":a[3]||(a[3]=e=>i.formData.fat_target=e),type:"number",min:"0",max:"300",class:"form-input",required:""},null,512),[[k.Jo,i.formData.fat_target,void 0,{number:!0}]])])])]),(0,s.Lk)("div",de,[a[25]||(a[25]=(0,s.Lk)("h3",null,"Dietary Preferences",-1)),i.dietaryConflicts.length>0?((0,s.uX)(),(0,s.CE)("div",ue,[a[22]||(a[22]=(0,s.Lk)("i",{class:"fas fa-exclamation-triangle"},null,-1)),a[23]||(a[23]=(0,s.Lk)("span",null,"Warning: Some selected preferences may conflict with each other",-1)),(0,s.Lk)("ul",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.dietaryConflicts,e=>((0,s.uX)(),(0,s.CE)("li",{key:e},(0,l.v_)(e),1))),128))])])):(0,s.Q3)("",!0),(0,s.Lk)("div",pe,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.availableDietaryPreferences,e=>((0,s.uX)(),(0,s.CE)("label",{key:e.value,class:(0,l.C4)(["checkbox-label",{disabled:r.isPreferenceDisabled(e.value)}])},[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":a[4]||(a[4]=e=>i.formData.dietary_preferences=e),type:"checkbox",value:e.value,disabled:r.isPreferenceDisabled(e.value),class:"checkbox-input",onChange:a[5]||(a[5]=(...e)=>r.checkDietaryConflicts&&r.checkDietaryConflicts(...e))},null,40,me),[[k.lH,i.formData.dietary_preferences]]),a[24]||(a[24]=(0,s.Lk)("span",{class:"checkbox-custom"},null,-1)),(0,s.eW)(" "+(0,l.v_)(e.label)+" ",1),r.isPreferenceDisabled(e.value)?((0,s.uX)(),(0,s.CE)("span",ge," (Conflicts with current selection) ")):(0,s.Q3)("",!0)],2))),128))])]),(0,s.Lk)("div",he,[a[27]||(a[27]=(0,s.Lk)("h3",null,"Allergies & Intolerances",-1)),(0,s.Lk)("div",ke,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.availableAllergies,e=>((0,s.uX)(),(0,s.CE)("label",{key:e.value,class:"checkbox-label"},[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":a[6]||(a[6]=e=>i.formData.allergies_intolerances=e),type:"checkbox",value:e.value,class:"checkbox-input"},null,8,ve),[[k.lH,i.formData.allergies_intolerances]]),a[26]||(a[26]=(0,s.Lk)("span",{class:"checkbox-custom"},null,-1)),(0,s.eW)(" "+(0,l.v_)(e.label),1)]))),128))])]),(0,s.Lk)("div",fe,[a[29]||(a[29]=(0,s.Lk)("h3",null,"Favorite Cuisines",-1)),(0,s.Lk)("div",ye,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.availableCuisines,e=>((0,s.uX)(),(0,s.CE)("label",{key:e.value,class:"checkbox-label"},[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":a[7]||(a[7]=e=>i.formData.cuisine_preferences=e),type:"checkbox",value:e.value,class:"checkbox-input"},null,8,Le),[[k.lH,i.formData.cuisine_preferences]]),a[28]||(a[28]=(0,s.Lk)("span",{class:"checkbox-custom"},null,-1)),(0,s.eW)(" "+(0,l.v_)(e.label),1)]))),128))])]),(0,s.Lk)("div",_e,[a[32]||(a[32]=(0,s.Lk)("h3",null,"Disliked Ingredients",-1)),(0,s.Lk)("div",be,[a[30]||(a[30]=(0,s.Lk)("label",{for:"disliked_ingredients"},"Ingredients you want to avoid",-1)),(0,s.bo)((0,s.Lk)("input",{id:"disliked_ingredients","onUpdate:modelValue":a[8]||(a[8]=e=>i.dislikedIngredientsInput=e),type:"text",class:"form-input",placeholder:"Enter ingredients separated by commas (e.g., mushrooms, tofu, cilantro)",onBlur:a[9]||(a[9]=(...e)=>r.updateDislikedIngredients&&r.updateDislikedIngredients(...e))},null,544),[[k.Jo,i.dislikedIngredientsInput]]),a[31]||(a[31]=(0,s.Lk)("span",{class:"form-help"},"Separate multiple ingredients with commas",-1)),i.formData.disliked_ingredients.length>0?((0,s.uX)(),(0,s.CE)("div",Ce,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.formData.disliked_ingredients,e=>((0,s.uX)(),(0,s.CE)("span",{key:e,class:"ingredient-tag"},[(0,s.eW)((0,l.v_)(e)+" ",1),(0,s.Lk)("button",{type:"button",onClick:a=>r.removeDislikedIngredient(e),class:"remove-tag"},"Ã—",8,we)]))),128))])):(0,s.Q3)("",!0)])]),(0,s.Lk)("div",Pe,[a[37]||(a[37]=(0,s.Lk)("h3",null,"Meal Preferences",-1)),(0,s.Lk)("div",Me,[(0,s.Lk)("div",Ee,[a[34]||(a[34]=(0,s.Lk)("label",{for:"meals_per_day"},"Meals per Day",-1)),(0,s.bo)((0,s.Lk)("select",{id:"meals_per_day","onUpdate:modelValue":a[10]||(a[10]=e=>i.formData.meals_per_day=e),class:"form-select"},a[33]||(a[33]=[(0,s.Fv)('<option value="2" data-v-300544f8>2 meals</option><option value="3" data-v-300544f8>3 meals</option><option value="4" data-v-300544f8>4 meals</option><option value="5" data-v-300544f8>5 meals</option><option value="6" data-v-300544f8>6 meals</option>',5)]),512),[[k.u1,i.formData.meals_per_day,void 0,{number:!0}]])]),(0,s.Lk)("div",Se,[a[36]||(a[36]=(0,s.Lk)("label",{for:"timezone"},"Timezone",-1)),(0,s.bo)((0,s.Lk)("select",{id:"timezone","onUpdate:modelValue":a[11]||(a[11]=e=>i.formData.timezone=e),class:"form-select"},a[35]||(a[35]=[(0,s.Fv)('<option value="UTC" data-v-300544f8>UTC</option><option value="Europe/London" data-v-300544f8>London</option><option value="Europe/Berlin" data-v-300544f8>Berlin</option><option value="Europe/Tallinn" data-v-300544f8>Tallinn (Estonia)</option><option value="America/New_York" data-v-300544f8>New York</option><option value="America/Los_Angeles" data-v-300544f8>Los Angeles</option><option value="Asia/Tokyo" data-v-300544f8>Tokyo</option>',7)]),512),[[k.u1,i.formData.timezone]])])])]),(0,s.Lk)("div",Ie,[(0,s.Lk)("button",{type:"submit",class:"btn btn-primary",disabled:i.saving||r.hasValidationErrors},[i.saving?((0,s.uX)(),(0,s.CE)("span",Ae,a[38]||(a[38]=[(0,s.Lk)("i",{class:"fas fa-spinner fa-spin"},null,-1),(0,s.eW)(" Saving... ")]))):((0,s.uX)(),(0,s.CE)("span",Xe,a[39]||(a[39]=[(0,s.Lk)("i",{class:"fas fa-save"},null,-1),(0,s.eW)(" Save Profile ")])))],8,De),(0,s.Lk)("button",{type:"button",onClick:a[12]||(a[12]=(...e)=>r.calculateTargets&&r.calculateTargets(...e)),class:"btn btn-secondary"},a[40]||(a[40]=[(0,s.Lk)("i",{class:"fas fa-calculator"},null,-1),(0,s.eW)(" Auto-Calculate Targets ")]))])],32))])])}t(116),t(3579),t(7588);var Fe=t(4373),xe=t(1233),Re=t(5809);const $e=({NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_API_URL||"https://wellness-app-tx2c.onrender.com/api").replace(/\/+$/,"").replace("/api","")+"/meal-planning/api",We=Fe.A.create({baseURL:$e,timeout:1e4,headers:{"Content-Type":"application/json"}});function Ne(){if(Re.A?.state?.auth?.user?.access)return Re.A.state.auth.user.access;const e=xe.A.getCurrentUser();return e?.access||null}We.interceptors.request.use(e=>{const a=Ne();return a&&(e.headers["Authorization"]="Bearer "+a),e},e=>(console.error("Meal Planning API request error:",e),Promise.reject(e))),We.interceptors.response.use(e=>e,async e=>{const a=e.config;if(401===e.response?.status&&!a._retry){a._retry=!0;try{const e=await xe.A.refreshToken();if(e?.access)return a.headers["Authorization"]="Bearer "+e.access,Re.A?.state?.auth?.status?.loggedIn&&await Re.A.dispatch("auth/refreshToken",e.access),(0,Fe.A)(a)}catch(t){return xe.A.logout(),Re.A?.state?.auth?.status?.loggedIn&&Re.A.commit("auth/logout"),setTimeout(()=>{window.location.href="/login"},100),Promise.reject(t)}}return e.response?console.error(`Meal Planning API Error: ${e.response.status} ${e.response.statusText}`,e.response.data):console.error("Meal Planning API Error:",e.message),Promise.reject(e)});const ze={api:We,getRecipes(e={}){const a={};return e.page&&(a.page=e.page),e.page_size&&(a.page_size=e.page_size),e.search&&e.search.trim()&&(a.search=e.search.trim()),e.cuisine&&e.cuisine.trim()&&(a.cuisine=e.cuisine.trim()),e.meal_type&&e.meal_type.trim()&&(a.meal_type=e.meal_type.trim()),e.dietary_preferences&&e.dietary_preferences.trim()&&(a.dietary_preferences=e.dietary_preferences.trim()),e.max_calories&&e.max_calories.trim()&&(a.max_calories=parseInt(e.max_calories.trim())),console.log("Making API request to /recipes/ with params:",a),We.get("/recipes/",{params:a})},getRecipe(e){return We.get(`/recipes/${e}/`)},searchRecipes(e){return We.post("/recipes/search/",e)},rateRecipe(e,a,t=""){return We.post(`/recipes/${e}/rate/`,{rating:a,review:t})},async generateRecipe(e){try{return await We.post("/recipes/generate/",e)}catch(a){if(404===a.response?.status)return console.warn("Recipe generation endpoint not implemented yet"),Promise.reject(new Error("Recipe generation feature coming soon"));throw a}},async getIngredientSubstitutions(e,a,t={}){try{return await We.post(`/recipes/${e}/substitute-ingredient/`,{ingredient_name:a,...t})}catch(s){if(404===s.response?.status)return console.warn("Ingredient substitution endpoint not implemented yet"),Promise.reject(new Error("Ingredient substitution feature coming soon"));throw s}},async scaleRecipe(e,a){try{return await We.post(`/recipes/${e}/scale/`,{servings:a})}catch(t){if(404===t.response?.status)return console.warn("Recipe scaling endpoint not implemented yet"),Promise.reject(new Error("Recipe scaling feature coming soon"));throw t}},getIngredients(e={}){return We.get("/ingredients/",{params:e})},getIngredient(e){return We.get(`/ingredients/${e}/`)},async getNutritionProfile(){try{return await We.get("/nutrition-profile/current/")}catch(e){if(404===e.response?.status)return{data:{calorie_target:2e3,protein_target:100,carb_target:250,fat_target:67,dietary_preferences:[],allergies_intolerances:[],cuisine_preferences:[]}};throw e}},async updateNutritionProfile(e){try{return await We.patch("/nutrition-profile/current/",e)}catch(a){if(405===a.response?.status)try{return await We.put("/nutrition-profile/current/",e)}catch(t){if(405===t.response?.status)return await We.post("/nutrition-profile/update_profile/",e);throw t}throw a}},calculateNutritionTargets(){return We.post("/nutrition-profile/calculate_targets/")},getMealPlans(e={}){const a={page:e.page||1,page_size:e.page_size||20,ordering:e.ordering||"-created_at"};return e.plan_type&&(a.plan_type=e.plan_type),void 0!==e.is_active&&(a.is_active=e.is_active),e.start_date&&(a.start_date=e.start_date),e.end_date&&(a.end_date=e.end_date),console.log("Fetching meal plans with params:",a),We.get("/meal-plans/",{params:a})},getMealPlan(e){return We.get(`/meal-plans/${e}/`)},generateMealPlan(e){return console.log("Generating meal plan with data:",e),We.post("/meal-plans/generate/",e)},async regenerateMeal(e,a,t){try{return console.log("Regenerating meal:",{planId:e,day:a,mealType:t}),await We.post(`/meal-plans/${e}/regenerate_meal/`,{day:a,meal_type:t})}catch(s){if(404===s.response?.status)return console.warn("Meal regeneration endpoint not implemented yet"),Promise.reject(new Error("Meal regeneration feature coming soon"));throw s}},async getMealAlternatives(e,a,t,s=3){try{return console.log("Getting meal alternatives:",{planId:e,day:a,mealType:t,count:s}),await We.post(`/meal-plans/${e}/get_alternatives/`,{day:a,meal_type:t,count:s})}catch(l){if(404===l.response?.status)return console.warn("Meal alternatives endpoint not implemented yet"),{data:[]};throw l}},async swapMeal(e,a,t,s){try{return await We.post(`/meal-plans/${e}/swap_meal/`,{day:a,meal_type:t,new_recipe:s})}catch(l){if(404===l.response?.status)return console.warn("Meal swap endpoint not implemented yet"),Promise.reject(new Error("Meal swap feature coming soon"));throw l}},async analyzeMealPlan(e){try{return console.log("Analyzing meal plan:",e),await We.get(`/meal-plans/${e}/analyze/`)}catch(a){if(404===a.response?.status)return console.warn("Meal plan analysis endpoint not implemented yet"),{data:{overall_score:85,nutritional_adequacy:{calories:{status:"adequate",percentage_of_target:98},protein:{status:"adequate",percentage_of_target:105},carbs:{status:"adequate",percentage_of_target:92},fat:{status:"adequate",percentage_of_target:103}},meal_distribution:{breakfast_percentage:25,lunch_percentage:35,dinner_percentage:40,balance_rating:"excellent"},variety_analysis:{cuisine_diversity:"good",ingredient_variety:"excellent",cooking_method_diversity:"good"},recommendations:["Excellent meal plan with well-balanced nutrition","Great variety of cuisines and cooking methods","Protein distribution is optimal throughout the day"],health_highlights:["Well-balanced macronutrients","Good variety of nutrient-dense foods","Appropriate calorie distribution across meals"],areas_for_improvement:["Consider adding more omega-3 rich foods","Could include more antioxidant-rich vegetables"]}};throw a}},deleteMealPlan(e){return We.delete(`/meal-plans/${e}/`)},generateShoppingList(e,a={}){return We.post(`/meal-plans/${e}/generate_shopping_list/`,{exclude_items:a.exclude_ingredients||[],group_by_category:!1!==a.group_by_category,...a})},getNutritionLogs(e={}){return We.get("/nutrition-logs/",{params:e})},getNutritionLog(e){return We.get(`/nutrition-logs/${e}/`)},logNutrition(e){return We.post("/nutrition-logs/",e)},analyzeNutrition(e){return We.post("/nutrition-logs/analyze/",e)},getNutritionAnalytics(e={}){return We.get("/nutrition-logs/analytics/",{params:e})},getDashboardData(e={}){const a={days:e.days||7,...e};return We.get("/nutrition-logs/dashboard_data/",{params:a})},async getNutritionInsights(e={}){try{return await We.get("/ai-insights/",{params:e})}catch(a){if(404===a.response?.status)return console.warn("AI insights endpoint not implemented yet"),{data:[]};throw a}},async getMealRecommendations(e={}){try{return await We.get("/recommendations/",{params:e})}catch(a){if(404===a.response?.status)return console.warn("Meal recommendations endpoint not implemented yet"),{data:[]};throw a}},async calculateNutrition(e,a){try{return await We.post("/calculate-nutrition/",{ingredients:e,servings:a})}catch(t){if(404===t.response?.status)return console.warn("Nutrition calculation endpoint not implemented yet"),{data:{calories:400,protein:25,carbs:45,fat:15}};throw t}},async validateDietaryRestrictions(e,a,t){try{return await We.post("/validate-dietary/",{ingredients:e,dietary_preferences:a,allergies:t})}catch(s){if(404===s.response?.status)return console.warn("Dietary validation endpoint not implemented yet"),{data:{is_compliant:!0,violations:[],warnings:[]}};throw s}},async getDietaryPreferences(){try{return await We.get("/dietary-preferences/")}catch(e){if(404===e.response?.status)return{data:["vegetarian","vegan","pescatarian","keto","paleo","mediterranean","dash","low_carb","low_fat","high_protein","intermittent_fasting","whole30","raw_food","gluten_free","dairy_free","flexitarian"]};throw e}},async getAllergens(){try{return await We.get("/allergens/")}catch(e){if(404===e.response?.status)return{data:["nuts","peanuts","dairy","gluten","eggs","fish","shellfish","soy","sesame","sulfites","nightshades","histamine"]};throw e}},async getCuisines(){try{return await We.get("/cuisines/")}catch(e){if(404===e.response?.status)return{data:["italian","mexican","asian","indian","mediterranean","american","french","thai","japanese","chinese","greek","middle_eastern"]};throw e}},async connectSpoonacular(){try{return await We.post("/nutrition-profile/connect_spoonacular/")}catch(e){throw console.error("Failed to connect to Spoonacular:",e),e}},async getSpoonacularStatus(){try{return await We.get("/nutrition-profile/spoonacular_status/")}catch(e){throw console.error("Failed to get Spoonacular status:",e),e}},async getSpoonacularMealPlan(e=null){try{const a=e?{start_date:e}:{};return await We.get("/nutrition-profile/spoonacular_meal_plan/",{params:a})}catch(a){throw console.error("Failed to get Spoonacular meal plan:",a),a}},async addToSpoonacularMealPlan(e){try{return await We.post("/nutrition-profile/add_to_spoonacular_meal_plan/",e)}catch(a){throw console.error("Failed to add to Spoonacular meal plan:",a),a}},async getSpoonacularShoppingList(){try{return await We.get("/nutrition-profile/spoonacular_shopping_list/")}catch(e){throw console.error("Failed to get Spoonacular shopping list:",e),e}},async generateSpoonacularShoppingList(e,a){try{return await We.post("/nutrition-profile/generate_spoonacular_shopping_list/",{start_date:e,end_date:a})}catch(t){throw console.error("Failed to generate Spoonacular shopping list:",t),t}}};var Qe={name:"NutritionProfileSetup",props:{profile:{type:Object,default:null},loading:{type:Boolean,default:!1}},emits:["profile-updated"],data(){return{saving:!1,validationErrors:[],dietaryConflicts:[],dislikedIngredientsInput:"",formData:{calorie_target:2e3,protein_target:100,carb_target:250,fat_target:67,dietary_preferences:[],allergies_intolerances:[],cuisine_preferences:[],disliked_ingredients:[],meals_per_day:3,timezone:"Europe/Tallinn"},availableDietaryPreferences:[{value:"vegetarian",label:"Vegetarian",conflicts:["paleo"]},{value:"vegan",label:"Vegan",conflicts:["paleo","pescatarian","keto"]},{value:"pescatarian",label:"Pescatarian",conflicts:["vegan","vegetarian","paleo"]},{value:"keto",label:"Ketogenic",conflicts:["vegan","high_carb","mediterranean"]},{value:"paleo",label:"Paleo",conflicts:["vegetarian","vegan","pescatarian","mediterranean"]},{value:"mediterranean",label:"Mediterranean",conflicts:["keto","paleo","low_carb"]},{value:"low_carb",label:"Low Carb",conflicts:["mediterranean","high_carb"]},{value:"high_carb",label:"High Carb",conflicts:["keto","low_carb"]},{value:"high_protein",label:"High Protein",conflicts:[]},{value:"gluten_free",label:"Gluten Free",conflicts:[]},{value:"dairy_free",label:"Dairy Free",conflicts:[]},{value:"low_sodium",label:"Low Sodium",conflicts:[]},{value:"diabetic",label:"Diabetic Friendly",conflicts:["high_carb"]},{value:"heart_healthy",label:"Heart Healthy",conflicts:[]},{value:"whole30",label:"Whole30",conflicts:["vegetarian","vegan"]}],availableAllergies:[{value:"nuts",label:"Tree Nuts"},{value:"peanuts",label:"Peanuts"},{value:"dairy",label:"Dairy/Lactose"},{value:"gluten",label:"Gluten"},{value:"eggs",label:"Eggs"},{value:"fish",label:"Fish"},{value:"shellfish",label:"Shellfish"},{value:"soy",label:"Soy"},{value:"sesame",label:"Sesame"},{value:"sulfites",label:"Sulfites"}],availableCuisines:[{value:"italian",label:"Italian"},{value:"mexican",label:"Mexican"},{value:"asian",label:"Asian"},{value:"indian",label:"Indian"},{value:"mediterranean",label:"Mediterranean"},{value:"american",label:"American"},{value:"french",label:"French"},{value:"thai",label:"Thai"},{value:"japanese",label:"Japanese"},{value:"chinese",label:"Chinese"},{value:"middle_eastern",label:"Middle Eastern"},{value:"korean",label:"Korean"},{value:"greek",label:"Greek"},{value:"spanish",label:"Spanish"}]}},computed:{hasValidationErrors(){return this.validationErrors.length>0||this.dietaryConflicts.length>0}},watch:{profile:{immediate:!0,handler(e){e&&(this.formData={...this.formData,...e},e.disliked_ingredients&&(this.dislikedIngredientsInput=e.disliked_ingredients.join(", ")),this.checkDietaryConflicts())}}},methods:{async saveProfile(){if(this.validateForm(),!this.hasValidationErrors){this.saving=!0;try{const e=await ze.updateNutritionProfile(this.formData);this.$emit("profile-updated",e.data),this.$toast?.success?.("Nutrition profile saved successfully!")||alert("Nutrition profile saved successfully!")}catch(e){console.error("Error saving profile:",e);const a=e.response?.data?.detail||e.response?.data?.message||e.message||"Failed to save nutrition profile";this.$toast?.error?.(a)||alert(a)}finally{this.saving=!1}}},validateForm(){this.validationErrors=[],(!this.formData.calorie_target||this.formData.calorie_target<1e3||this.formData.calorie_target>5e3)&&this.validationErrors.push("Daily calories must be between 1000 and 5000"),(!this.formData.protein_target||this.formData.protein_target<0||this.formData.protein_target>500)&&this.validationErrors.push("Protein target must be between 0 and 500g"),(!this.formData.carb_target||this.formData.carb_target<0||this.formData.carb_target>1e3)&&this.validationErrors.push("Carbohydrate target must be between 0 and 1000g"),(!this.formData.fat_target||this.formData.fat_target<0||this.formData.fat_target>300)&&this.validationErrors.push("Fat target must be between 0 and 300g");const e=4*this.formData.protein_target+4*this.formData.carb_target+9*this.formData.fat_target,a=Math.abs(e-this.formData.calorie_target);a>100&&this.validationErrors.push(`Macro calories (${Math.round(e)}) don't match calorie target (${this.formData.calorie_target}). Difference: ${Math.round(a)} calories`)},checkDietaryConflicts(){this.dietaryConflicts=[];const e=this.formData.dietary_preferences;for(let a=0;a<e.length;a++)for(let t=a+1;t<e.length;t++){const s=this.availableDietaryPreferences.find(t=>t.value===e[a]),l=this.availableDietaryPreferences.find(a=>a.value===e[t]);s?.conflicts?.includes(e[t])&&this.dietaryConflicts.push(`${s.label} conflicts with ${l.label}`)}},isPreferenceDisabled(e){const a=this.formData.dietary_preferences;if(a.includes(e))return!1;const t=this.availableDietaryPreferences.find(a=>a.value===e);return!!t?.conflicts&&a.some(e=>t.conflicts.includes(e))},updateDislikedIngredients(){this.dislikedIngredientsInput.trim()?this.formData.disliked_ingredients=this.dislikedIngredientsInput.split(",").map(e=>e.trim()).filter(e=>e.length>0):this.formData.disliked_ingredients=[]},removeDislikedIngredient(e){this.formData.disliked_ingredients=this.formData.disliked_ingredients.filter(a=>a!==e),this.dislikedIngredientsInput=this.formData.disliked_ingredients.join(", ")},calculateTargets(){const e=2e3,a=this.formData.dietary_preferences.includes("keto"),t=this.formData.dietary_preferences.includes("low_carb"),s=this.formData.dietary_preferences.includes("high_protein");let l,n,i;a?(l=.25,n=.05,i=.7):t?(l=.3,n=.2,i=.5):s?(l=.35,n=.35,i=.3):(l=.25,n=.45,i=.3),this.formData.calorie_target=e,this.formData.protein_target=Math.round(e*l/4),this.formData.carb_target=Math.round(e*n/4),this.formData.fat_target=Math.round(e*i/9),this.validateForm()}}};const Ue=(0,H.A)(Qe,[["render",Te],["__scopeId","data-v-300544f8"]]);var Ve=Ue;const Ge={class:"meal-plan-manager"},je={class:"status-content"},qe={class:"status-text"},Oe={key:0,class:"generation-steps"},Be={class:"generate-section"},Ze={class:"form-row"},He={class:"form-group"},Ke={class:"form-group"},Je=["min"],Ye={class:"form-group"},ea={key:0,class:"advanced-options"},aa={class:"form-row"},ta={class:"form-group"},sa={class:"checkbox-group"},la=["value"],na={class:"form-group"},ia={class:"form-actions"},ra=["disabled"],oa={key:0,class:"fas fa-brain"},ca={key:1,class:"fas fa-spinner fa-spin"},da={class:"existing-plans-section"},ua={key:0,class:"loading-state"},pa={key:1,class:"empty-state"},ma={key:2,class:"meal-plans-grid"},ga=["onClick"],ha={style:{background:"#f0f0f0",padding:"8px","margin-bottom":"10px","font-size":"12px","border-radius":"4px"}},ka={class:"plan-header"},va={class:"plan-date"},fa={class:"ai-badge"},ya={class:"plan-stats"},La={class:"stat"},_a={class:"stat-value"},ba={class:"stat"},Ca={class:"stat-value"},wa={class:"stat"},Pa={class:"stat-value"},Ma={key:0,class:"plan-nutrition"},Ea={class:"nutrition-grid"},Sa={class:"nutrition-item"},Ia={class:"nutrition-value"},Da={class:"nutrition-item"},Aa={class:"nutrition-value"},Xa={class:"nutrition-item"},Ta={class:"nutrition-value"},Fa={key:1,class:"quality-scores"},xa={class:"score-item"},Ra={class:"score-bar"},$a={class:"score-value"},Wa={class:"score-item"},Na={class:"score-bar"},za={class:"score-value"},Qa={class:"plan-actions"},Ua=["onClick"],Va=["onClick"],Ga=["onClick"];function ja(e,a,t,n,i,r){const o=(0,s.g2)("meal-plan-detail-modal"),c=(0,s.g2)("nutritional-analysis-modal");return(0,s.uX)(),(0,s.CE)("div",Ge,[i.generationStatus?((0,s.uX)(),(0,s.CE)("div",{key:0,class:(0,l.C4)(["generation-status",i.generationStatus.type])},[(0,s.Lk)("div",je,[(0,s.Lk)("i",{class:(0,l.C4)(i.generationStatus.icon)},null,2),(0,s.Lk)("div",qe,[(0,s.Lk)("h4",null,(0,l.v_)(i.generationStatus.title),1),(0,s.Lk)("p",null,(0,l.v_)(i.generationStatus.message),1),i.generationStatus.steps?((0,s.uX)(),(0,s.CE)("div",Oe,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.generationStatus.steps,(e,a)=>((0,s.uX)(),(0,s.CE)("div",{key:a,class:(0,l.C4)(["step",{completed:e.completed,active:e.active}])},[(0,s.Lk)("i",{class:(0,l.C4)(e.completed?"fas fa-check":e.active?"fas fa-spinner fa-spin":"fas fa-clock")},null,2),(0,s.Lk)("span",null,(0,l.v_)(e.name),1)],2))),128))])):(0,s.Q3)("",!0)])])],2)):(0,s.Q3)("",!0),(0,s.Lk)("div",Be,[a[18]||(a[18]=(0,s.Lk)("div",{class:"section-header"},[(0,s.Lk)("h2",null,"AI-Powered Meal Planning"),(0,s.Lk)("p",null,"Let our advanced AI create a personalized meal plan based on your health profile, dietary preferences, and nutrition goals")],-1)),(0,s.Lk)("form",{onSubmit:a[6]||(a[6]=(0,k.D$)((...e)=>r.generateMealPlan&&r.generateMealPlan(...e),["prevent"])),class:"generate-form"},[(0,s.Lk)("div",Ze,[(0,s.Lk)("div",He,[a[11]||(a[11]=(0,s.Lk)("label",{for:"plan_type"},"Plan Type",-1)),(0,s.bo)((0,s.Lk)("select",{id:"plan_type","onUpdate:modelValue":a[0]||(a[0]=e=>i.generateForm.plan_type=e),class:"form-select"},a[10]||(a[10]=[(0,s.Lk)("option",{value:"daily"},"Daily Plan (1 day)",-1),(0,s.Lk)("option",{value:"weekly"},"Weekly Plan (7 days)",-1)]),512),[[k.u1,i.generateForm.plan_type]])]),(0,s.Lk)("div",Ke,[a[12]||(a[12]=(0,s.Lk)("label",{for:"start_date"},"Start Date",-1)),(0,s.bo)((0,s.Lk)("input",{id:"start_date","onUpdate:modelValue":a[1]||(a[1]=e=>i.generateForm.start_date=e),type:"date",class:"form-input",min:r.today},null,8,Je),[[k.Jo,i.generateForm.start_date]])]),(0,s.Lk)("div",Ye,[a[13]||(a[13]=(0,s.Lk)("label",{for:"target_calories"},"Target Calories (optional)",-1)),(0,s.bo)((0,s.Lk)("input",{id:"target_calories","onUpdate:modelValue":a[2]||(a[2]=e=>i.generateForm.target_calories=e),type:"number",min:"1000",max:"5000",placeholder:"Uses your health profile default",class:"form-input"},null,512),[[k.Jo,i.generateForm.target_calories,void 0,{number:!0}]]),a[14]||(a[14]=(0,s.Lk)("small",{class:"form-hint"},"Leave empty to use your calculated target from health profile",-1))])]),i.showAdvancedOptions?((0,s.uX)(),(0,s.CE)("div",ea,[a[17]||(a[17]=(0,s.Lk)("h4",null,"Advanced Options",-1)),(0,s.Lk)("div",aa,[(0,s.Lk)("div",ta,[a[15]||(a[15]=(0,s.Lk)("label",null,"Preferred Cuisines (override profile)",-1)),(0,s.Lk)("div",sa,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.availableCuisines,e=>((0,s.uX)(),(0,s.CE)("label",{key:e,class:"checkbox-label"},[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",value:e,"onUpdate:modelValue":a[3]||(a[3]=e=>i.generateForm.cuisine_preferences=e)},null,8,la),[[k.lH,i.generateForm.cuisine_preferences]]),(0,s.Lk)("span",null,(0,l.v_)(e),1)]))),128))])]),(0,s.Lk)("div",na,[a[16]||(a[16]=(0,s.Lk)("label",{for:"max_cook_time"},"Max Cooking Time (minutes)",-1)),(0,s.bo)((0,s.Lk)("input",{id:"max_cook_time","onUpdate:modelValue":a[4]||(a[4]=e=>i.generateForm.max_cook_time=e),type:"number",min:"10",max:"120",placeholder:"No limit",class:"form-input"},null,512),[[k.Jo,i.generateForm.max_cook_time,void 0,{number:!0}]])])])])):(0,s.Q3)("",!0),(0,s.Lk)("div",ia,[(0,s.Lk)("button",{type:"button",onClick:a[5]||(a[5]=e=>i.showAdvancedOptions=!i.showAdvancedOptions),class:"btn btn-outline"},[(0,s.Lk)("i",{class:(0,l.C4)(i.showAdvancedOptions?"fas fa-chevron-up":"fas fa-chevron-down")},null,2),(0,s.eW)(" "+(0,l.v_)(i.showAdvancedOptions?"Hide":"Show")+" Advanced Options ",1)]),(0,s.Lk)("button",{type:"submit",class:"btn btn-primary generate-btn",disabled:i.generating},[i.generating?((0,s.uX)(),(0,s.CE)("i",ca)):((0,s.uX)(),(0,s.CE)("i",oa)),(0,s.eW)(" "+(0,l.v_)(i.generating?"AI is Creating Your Plan...":"Generate AI Meal Plan"),1)],8,ra)])],32)]),(0,s.Lk)("div",da,[a[41]||(a[41]=(0,s.Lk)("div",{class:"section-header"},[(0,s.Lk)("h2",null,"Your AI-Generated Meal Plans"),(0,s.Lk)("p",null,"Previously generated personalized meal plans")],-1)),t.loading?((0,s.uX)(),(0,s.CE)("div",ua,a[19]||(a[19]=[(0,s.Lk)("div",{class:"loading-spinner"},null,-1),(0,s.Lk)("p",null,"Loading your meal plans...",-1)]))):0===i.mealPlans.length?((0,s.uX)(),(0,s.CE)("div",pa,a[20]||(a[20]=[(0,s.Lk)("i",{class:"fas fa-brain"},null,-1),(0,s.Lk)("h3",null,"No AI meal plans yet",-1),(0,s.Lk)("p",null,"Generate your first AI-powered, personalized meal plan above!",-1)]))):((0,s.uX)(),(0,s.CE)("div",ma,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.mealPlans,e=>((0,s.uX)(),(0,s.CE)("div",{key:e.id,class:"meal-plan-card",onClick:a=>r.viewMealPlan(e)},[(0,s.Lk)("div",ha,[a[21]||(a[21]=(0,s.Lk)("strong",null,"Debug Info:",-1)),a[22]||(a[22]=(0,s.Lk)("br",null,null,-1)),(0,s.eW)(" Plan ID: "+(0,l.v_)(e.id),1),a[23]||(a[23]=(0,s.Lk)("br",null,null,-1)),(0,s.eW)(" Plan Type: "+(0,l.v_)(e.plan_type),1),a[24]||(a[24]=(0,s.Lk)("br",null,null,-1)),(0,s.eW)(" Has meal_plan_data: "+(0,l.v_)(!!e.meal_plan_data),1),a[25]||(a[25]=(0,s.Lk)("br",null,null,-1)),(0,s.eW)(" Has meals: "+(0,l.v_)(!!e.meal_plan_data?.meals),1),a[26]||(a[26]=(0,s.Lk)("br",null,null,-1)),(0,s.eW)(" Meals keys: "+(0,l.v_)(e.meal_plan_data?.meals?Object.keys(e.meal_plan_data.meals):"none"),1),a[27]||(a[27]=(0,s.Lk)("br",null,null,-1)),(0,s.eW)(" Total structure: "+(0,l.v_)(JSON.stringify(e).substring(0,100))+"... ",1)]),(0,s.Lk)("div",ka,[(0,s.Lk)("h3",null,(0,l.v_)(e?r.formatPlanType(e.plan_type):"Loading...")+" Plan",1),(0,s.Lk)("span",va,(0,l.v_)(e?r.formatDateRange(e.start_date,e.end_date):"Date unknown"),1),(0,s.Lk)("div",fa,[a[28]||(a[28]=(0,s.Lk)("i",{class:"fas fa-brain"},null,-1)),(0,s.Lk)("span",null,"AI v"+(0,l.v_)(e.generation_version||"1.0"),1)])]),(0,s.Lk)("div",ya,[(0,s.Lk)("div",La,[(0,s.Lk)("span",_a,(0,l.v_)(e?.avg_daily_calories?Math.round(e.avg_daily_calories):"N/A"),1),a[29]||(a[29]=(0,s.Lk)("span",{class:"stat-label"},"Avg Calories",-1))]),(0,s.Lk)("div",ba,[(0,s.Lk)("span",Ca,(0,l.v_)(r.getMealCount(e)),1),a[30]||(a[30]=(0,s.Lk)("span",{class:"stat-label"},"Meals",-1))]),(0,s.Lk)("div",wa,[(0,s.Lk)("span",Pa,(0,l.v_)(e.nutritional_balance_score?.toFixed(1)||"N/A"),1),a[31]||(a[31]=(0,s.Lk)("span",{class:"stat-label"},"Balance Score",-1))])]),e.daily_averages?((0,s.uX)(),(0,s.CE)("div",Ma,[a[35]||(a[35]=(0,s.Lk)("h4",null,"Daily Nutrition Averages",-1)),(0,s.Lk)("div",Ea,[(0,s.Lk)("div",Sa,[a[32]||(a[32]=(0,s.Lk)("span",{class:"nutrition-label"},"Protein:",-1)),(0,s.Lk)("span",Ia,(0,l.v_)(Math.round(e.daily_averages.protein||0))+"g",1)]),(0,s.Lk)("div",Da,[a[33]||(a[33]=(0,s.Lk)("span",{class:"nutrition-label"},"Carbs:",-1)),(0,s.Lk)("span",Aa,(0,l.v_)(Math.round(e.daily_averages.carbs||0))+"g",1)]),(0,s.Lk)("div",Xa,[a[34]||(a[34]=(0,s.Lk)("span",{class:"nutrition-label"},"Fat:",-1)),(0,s.Lk)("span",Ta,(0,l.v_)(Math.round(e.daily_averages.fat||0))+"g",1)])])])):(0,s.Q3)("",!0),e.variety_score||e.preference_match_score?((0,s.uX)(),(0,s.CE)("div",Fa,[(0,s.Lk)("div",xa,[a[36]||(a[36]=(0,s.Lk)("span",{class:"score-label"},"Variety:",-1)),(0,s.Lk)("div",Ra,[(0,s.Lk)("div",{class:"score-fill",style:(0,l.Tr)({width:10*e.variety_score+"%"})},null,4)]),(0,s.Lk)("span",$a,(0,l.v_)(e.variety_score?.toFixed(1)||"N/A"),1)]),(0,s.Lk)("div",Wa,[a[37]||(a[37]=(0,s.Lk)("span",{class:"score-label"},"Preference:",-1)),(0,s.Lk)("div",Na,[(0,s.Lk)("div",{class:"score-fill",style:(0,l.Tr)({width:10*e.preference_match_score+"%"})},null,4)]),(0,s.Lk)("span",za,(0,l.v_)(e.preference_match_score?.toFixed(1)||"N/A"),1)])])):(0,s.Q3)("",!0),(0,s.Lk)("div",Qa,[(0,s.Lk)("button",{onClick:(0,k.D$)(a=>r.viewMealPlan(e),["stop"]),class:"btn btn-outline"},a[38]||(a[38]=[(0,s.Lk)("i",{class:"fas fa-eye"},null,-1),(0,s.eW)(" View Details ")]),8,Ua),(0,s.Lk)("button",{onClick:(0,k.D$)(a=>r.analyzeMealPlan(e),["stop"]),class:"btn btn-info"},a[39]||(a[39]=[(0,s.Lk)("i",{class:"fas fa-chart-line"},null,-1),(0,s.eW)(" AI Analysis ")]),8,Va),(0,s.Lk)("button",{onClick:(0,k.D$)(a=>r.regeneratePlan(e),["stop"]),class:"btn btn-secondary"},a[40]||(a[40]=[(0,s.Lk)("i",{class:"fas fa-redo"},null,-1),(0,s.eW)(" Regenerate ")]),8,Ga)])],8,ga))),128))]))]),i.selectedPlan?((0,s.uX)(),(0,s.Wv)(o,{key:1,"meal-plan":i.selectedPlan,onClose:a[7]||(a[7]=e=>i.selectedPlan=null),onRegenerateMeal:a[8]||(a[8]=e=>r.regenerateMeal(i.selectedPlan.id,e)),onGetAlternatives:a[9]||(a[9]=e=>r.getMealAlternatives(i.selectedPlan.id,e)),onAnalyzePlan:r.analyzeMealPlanFromModal},null,8,["meal-plan","onAnalyzePlan"])):(0,s.Q3)("",!0),i.showAnalysisModal&&i.currentAnalysis?((0,s.uX)(),(0,s.Wv)(c,{key:2,analysis:i.currentAnalysis,"meal-plan":i.selectedPlanForAnalysis,onClose:r.closeAnalysisModal},null,8,["analysis","meal-plan","onClose"])):(0,s.Q3)("",!0)])}const qa={class:"modal-header"},Oa={class:"ai-generation-info"},Ba={class:"ai-badge"},Za={class:"model-badge"},Ha={class:"modal-body"},Ka={class:"plan-overview"},Ja={class:"overview-stats"},Ya={class:"stat-item"},et={class:"stat-value"},at={class:"stat-item"},tt={class:"stat-value"},st={class:"stat-item"},lt={class:"stat-value"},nt={class:"stat-item"},it={class:"stat-value"},rt={key:0,class:"stat-item"},ot={class:"stat-value"},ct={key:1,class:"stat-item"},dt={class:"stat-value"},ut={key:0,class:"nutrition-overview"},pt={class:"nutrition-grid"},mt={class:"nutrition-item"},gt={class:"nutrition-value"},ht={class:"nutrition-item"},kt={class:"nutrition-value"},vt={class:"nutrition-item"},ft={class:"nutrition-value"},yt={class:"nutrition-item"},Lt={class:"nutrition-value"},_t={key:1,class:"quality-scores"},bt={class:"scores-grid"},Ct={key:0,class:"score-item"},wt={class:"score-bar"},Pt={class:"score-value"},Mt={key:1,class:"score-item"},Et={class:"score-bar"},St={class:"score-value"},It={key:2,class:"score-item"},Dt={class:"score-bar"},At={class:"score-value"},Xt={key:0,class:"meals-section"},Tt={style:{background:"#fff3cd",padding:"8px","margin-bottom":"10px","font-size":"12px","border-radius":"4px"}},Ft={class:"meals-grid"},xt={class:"day-header"},Rt={class:"meals-list"},$t={class:"meal-header"},Wt={class:"meal-title-section"},Nt={class:"meal-title"},zt={class:"meal-meta"},Qt={class:"meal-time"},Ut={key:0,class:"meal-cuisine"},Vt={key:0,class:"recipe-details"},Gt={key:0,class:"cooking-info"},jt={class:"time-info"},qt={key:0,class:"time-item"},Ot={key:1,class:"time-item"},Bt={key:2,class:"time-item"},Zt={key:3,class:"time-item"},Ht={class:"meal-nutrition"},Kt={class:"nutrition-details"},Jt={class:"nutrition-item"},Yt={class:"nutrition-value"},es={class:"nutrition-item"},as={class:"nutrition-value"},ts={class:"nutrition-item"},ss={class:"nutrition-value"},ls={class:"nutrition-item"},ns={class:"nutrition-value"},is={key:1,class:"ingredients-section"},rs={class:"ingredients-list"},os={class:"ingredient-quantity"},cs={class:"ingredient-unit"},ds={class:"ingredient-name"},us={key:2,class:"instructions-section"},ps={class:"instructions-list"},ms={class:"instruction-number"},gs={class:"instruction-text"},hs={key:3,class:"target-info"},ks={class:"targets-grid"},vs={key:0,class:"target-item"},fs={class:"target-value"},ys={key:1,class:"target-item"},Ls={class:"target-value"},_s={key:2,class:"target-item"},bs={class:"target-value"},Cs={key:3,class:"target-item"},ws={class:"target-value"},Ps={class:"meal-actions"},Ms=["onClick"],Es=["onClick"],Ss=["onClick"],Is={key:1,class:"no-meals"},Ds={style:{background:"#f8d7da",padding:"8px","margin-top":"10px","font-size":"12px","border-radius":"4px"}},As={class:"modal-footer"};function Xs(e,a,t,n,i,r){return(0,s.uX)(),(0,s.CE)("div",{class:"modal-overlay",onClick:a[5]||(a[5]=a=>e.$emit("close"))},[(0,s.Lk)("div",{class:"modal-content",onClick:a[4]||(a[4]=(0,k.D$)(()=>{},["stop"]))},[(0,s.Lk)("div",qa,[(0,s.Lk)("h2",null,(0,l.v_)(r.formatPlanType(t.mealPlan.plan_type))+" Meal Plan",1),(0,s.Lk)("div",Oa,[(0,s.Lk)("span",Ba,[a[6]||(a[6]=(0,s.Lk)("i",{class:"fas fa-brain"},null,-1)),(0,s.eW)(" AI v"+(0,l.v_)(t.mealPlan.generation_version||"1.0"),1)]),(0,s.Lk)("span",Za,(0,l.v_)(t.mealPlan.ai_model_used||"AI Model"),1)]),(0,s.Lk)("button",{onClick:a[0]||(a[0]=a=>e.$emit("close")),class:"close-btn"},a[7]||(a[7]=[(0,s.Lk)("i",{class:"fas fa-times"},null,-1)]))]),(0,s.Lk)("div",Ha,[(0,s.Lk)("div",Ka,[(0,s.Lk)("div",Ja,[(0,s.Lk)("div",Ya,[a[8]||(a[8]=(0,s.Lk)("span",{class:"stat-label"},"Date Range:",-1)),(0,s.Lk)("span",et,(0,l.v_)(r.formatDateRange(t.mealPlan.start_date,t.mealPlan.end_date)),1)]),(0,s.Lk)("div",at,[a[9]||(a[9]=(0,s.Lk)("span",{class:"stat-label"},"Total Calories:",-1)),(0,s.Lk)("span",tt,(0,l.v_)(Math.round(t.mealPlan.total_calories||0)),1)]),(0,s.Lk)("div",st,[a[10]||(a[10]=(0,s.Lk)("span",{class:"stat-label"},"Avg Daily Calories:",-1)),(0,s.Lk)("span",lt,(0,l.v_)(Math.round(t.mealPlan.avg_daily_calories||0)),1)]),(0,s.Lk)("div",nt,[a[11]||(a[11]=(0,s.Lk)("span",{class:"stat-label"},"Total Meals:",-1)),(0,s.Lk)("span",it,(0,l.v_)(r.getTotalMeals()),1)]),t.mealPlan.nutritional_balance_score?((0,s.uX)(),(0,s.CE)("div",rt,[a[12]||(a[12]=(0,s.Lk)("span",{class:"stat-label"},"Balance Score:",-1)),(0,s.Lk)("span",ot,(0,l.v_)(t.mealPlan.nutritional_balance_score.toFixed(1))+"/10",1)])):(0,s.Q3)("",!0),t.mealPlan.days_count?((0,s.uX)(),(0,s.CE)("div",ct,[a[13]||(a[13]=(0,s.Lk)("span",{class:"stat-label"},"Days:",-1)),(0,s.Lk)("span",dt,(0,l.v_)(t.mealPlan.days_count),1)])):(0,s.Q3)("",!0)]),t.mealPlan.daily_averages?((0,s.uX)(),(0,s.CE)("div",ut,[a[18]||(a[18]=(0,s.Lk)("h4",null,"Daily Nutritional Averages",-1)),(0,s.Lk)("div",pt,[(0,s.Lk)("div",mt,[a[14]||(a[14]=(0,s.Lk)("span",{class:"nutrition-label"},"Protein:",-1)),(0,s.Lk)("span",gt,(0,l.v_)(Math.round(t.mealPlan.daily_averages.protein||0))+"g",1)]),(0,s.Lk)("div",ht,[a[15]||(a[15]=(0,s.Lk)("span",{class:"nutrition-label"},"Carbohydrates:",-1)),(0,s.Lk)("span",kt,(0,l.v_)(Math.round(t.mealPlan.daily_averages.carbs||0))+"g",1)]),(0,s.Lk)("div",vt,[a[16]||(a[16]=(0,s.Lk)("span",{class:"nutrition-label"},"Fat:",-1)),(0,s.Lk)("span",ft,(0,l.v_)(Math.round(t.mealPlan.daily_averages.fat||0))+"g",1)]),(0,s.Lk)("div",yt,[a[17]||(a[17]=(0,s.Lk)("span",{class:"nutrition-label"},"Calories:",-1)),(0,s.Lk)("span",Lt,(0,l.v_)(Math.round(t.mealPlan.daily_averages.calories||0)),1)])])])):(0,s.Q3)("",!0),t.mealPlan.variety_score||t.mealPlan.preference_match_score?((0,s.uX)(),(0,s.CE)("div",_t,[a[22]||(a[22]=(0,s.Lk)("h4",null,"Plan Quality Metrics",-1)),(0,s.Lk)("div",bt,[t.mealPlan.nutritional_balance_score?((0,s.uX)(),(0,s.CE)("div",Ct,[a[19]||(a[19]=(0,s.Lk)("span",{class:"score-label"},"Nutritional Balance:",-1)),(0,s.Lk)("div",wt,[(0,s.Lk)("div",{class:"score-fill",style:(0,l.Tr)({width:10*t.mealPlan.nutritional_balance_score+"%"})},null,4)]),(0,s.Lk)("span",Pt,(0,l.v_)(t.mealPlan.nutritional_balance_score.toFixed(1))+"/10",1)])):(0,s.Q3)("",!0),t.mealPlan.variety_score?((0,s.uX)(),(0,s.CE)("div",Mt,[a[20]||(a[20]=(0,s.Lk)("span",{class:"score-label"},"Variety Score:",-1)),(0,s.Lk)("div",Et,[(0,s.Lk)("div",{class:"score-fill",style:(0,l.Tr)({width:10*t.mealPlan.variety_score+"%"})},null,4)]),(0,s.Lk)("span",St,(0,l.v_)(t.mealPlan.variety_score.toFixed(1))+"/10",1)])):(0,s.Q3)("",!0),t.mealPlan.preference_match_score?((0,s.uX)(),(0,s.CE)("div",It,[a[21]||(a[21]=(0,s.Lk)("span",{class:"score-label"},"Preference Match:",-1)),(0,s.Lk)("div",Dt,[(0,s.Lk)("div",{class:"score-fill",style:(0,l.Tr)({width:10*t.mealPlan.preference_match_score+"%"})},null,4)]),(0,s.Lk)("span",At,(0,l.v_)(t.mealPlan.preference_match_score.toFixed(1))+"/10",1)])):(0,s.Q3)("",!0)])])):(0,s.Q3)("",!0)]),t.mealPlan.meal_plan_data&&t.mealPlan.meal_plan_data.meals?((0,s.uX)(),(0,s.CE)("div",Xt,[a[48]||(a[48]=(0,s.Lk)("h3",null,"Detailed Meal Plan",-1)),(0,s.Lk)("div",Tt,[a[23]||(a[23]=(0,s.Lk)("strong",null,"Meals Debug:",-1)),a[24]||(a[24]=(0,s.Lk)("br",null,null,-1)),(0,s.eW)(" meals object: "+(0,l.v_)(Object.keys(t.mealPlan.meal_plan_data.meals)),1),a[25]||(a[25]=(0,s.Lk)("br",null,null,-1)),(0,s.eW)(" meals count: "+(0,l.v_)(Object.keys(t.mealPlan.meal_plan_data.meals).length),1),a[26]||(a[26]=(0,s.Lk)("br",null,null,-1)),(0,s.eW)(" sample meal data: "+(0,l.v_)(JSON.stringify(Object.values(t.mealPlan.meal_plan_data.meals)[0]).substring(0,200))+"... ",1)]),(0,s.Lk)("div",Ft,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.mealPlan.meal_plan_data.meals,(e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t,class:"day-meals"},[(0,s.Lk)("h4",xt,(0,l.v_)(r.formatDate(t)),1),(0,s.Lk)("div",Rt,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e,(e,n)=>((0,s.uX)(),(0,s.CE)("div",{key:n,class:"meal-card"},[(0,s.Lk)("div",$t,[(0,s.Lk)("div",Wt,[(0,s.Lk)("h5",Nt,(0,l.v_)(e.recipe?.title||`${r.formatMealType(e.meal_type)}`),1),(0,s.Lk)("span",{class:(0,l.C4)(["meal-type-badge",e.meal_type])},(0,l.v_)(r.formatMealType(e.meal_type||"meal")),3)]),(0,s.Lk)("div",zt,[(0,s.Lk)("span",Qt,[a[27]||(a[27]=(0,s.Lk)("i",{class:"fas fa-clock"},null,-1)),(0,s.eW)(" "+(0,l.v_)(e.time||"12:00"),1)]),e.recipe?.cuisine?((0,s.uX)(),(0,s.CE)("span",Ut,[a[28]||(a[28]=(0,s.Lk)("i",{class:"fas fa-globe"},null,-1)),(0,s.eW)(" "+(0,l.v_)(e.recipe.cuisine),1)])):(0,s.Q3)("",!0)])]),e.recipe?((0,s.uX)(),(0,s.CE)("div",Vt,[e.recipe.prep_time||e.recipe.cook_time||e.recipe.total_time?((0,s.uX)(),(0,s.CE)("div",Gt,[(0,s.Lk)("div",jt,[e.recipe.prep_time?((0,s.uX)(),(0,s.CE)("span",qt,[a[29]||(a[29]=(0,s.Lk)("i",{class:"fas fa-cut"},null,-1)),(0,s.eW)(" Prep: "+(0,l.v_)(e.recipe.prep_time)+"min ",1)])):(0,s.Q3)("",!0),e.recipe.cook_time?((0,s.uX)(),(0,s.CE)("span",Ot,[a[30]||(a[30]=(0,s.Lk)("i",{class:"fas fa-fire"},null,-1)),(0,s.eW)(" Cook: "+(0,l.v_)(e.recipe.cook_time)+"min ",1)])):(0,s.Q3)("",!0),e.recipe.total_time?((0,s.uX)(),(0,s.CE)("span",Bt,[a[31]||(a[31]=(0,s.Lk)("i",{class:"fas fa-hourglass-half"},null,-1)),(0,s.eW)(" Total: "+(0,l.v_)(e.recipe.total_time)+"min ",1)])):(0,s.Q3)("",!0),e.recipe.servings?((0,s.uX)(),(0,s.CE)("span",Zt,[a[32]||(a[32]=(0,s.Lk)("i",{class:"fas fa-users"},null,-1)),(0,s.eW)(" Serves: "+(0,l.v_)(e.recipe.servings),1)])):(0,s.Q3)("",!0)])])):(0,s.Q3)("",!0),(0,s.Lk)("div",Ht,[a[37]||(a[37]=(0,s.Lk)("h6",null,"Nutritional Information",-1)),(0,s.Lk)("div",Kt,[(0,s.Lk)("div",Jt,[a[33]||(a[33]=(0,s.Lk)("span",{class:"nutrition-label"},"Calories:",-1)),(0,s.Lk)("span",Yt,(0,l.v_)(r.getNutritionValue(e.recipe,"calories")),1)]),(0,s.Lk)("div",es,[a[34]||(a[34]=(0,s.Lk)("span",{class:"nutrition-label"},"Protein:",-1)),(0,s.Lk)("span",as,(0,l.v_)(r.getNutritionValue(e.recipe,"protein"))+"g",1)]),(0,s.Lk)("div",ts,[a[35]||(a[35]=(0,s.Lk)("span",{class:"nutrition-label"},"Carbs:",-1)),(0,s.Lk)("span",ss,(0,l.v_)(r.getNutritionValue(e.recipe,"carbs"))+"g",1)]),(0,s.Lk)("div",ls,[a[36]||(a[36]=(0,s.Lk)("span",{class:"nutrition-label"},"Fat:",-1)),(0,s.Lk)("span",ns,(0,l.v_)(r.getNutritionValue(e.recipe,"fat"))+"g",1)])])]),e.recipe.ingredients&&e.recipe.ingredients.length?((0,s.uX)(),(0,s.CE)("div",is,[a[38]||(a[38]=(0,s.Lk)("h6",null,"Ingredients",-1)),(0,s.Lk)("div",rs,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.recipe.ingredients,(e,a)=>((0,s.uX)(),(0,s.CE)("div",{key:a,class:"ingredient-item"},[(0,s.Lk)("span",os,(0,l.v_)(e.quantity),1),(0,s.Lk)("span",cs,(0,l.v_)(e.unit),1),(0,s.Lk)("span",ds,(0,l.v_)(e.name),1)]))),128))])])):(0,s.Q3)("",!0),e.recipe.instructions&&e.recipe.instructions.length?((0,s.uX)(),(0,s.CE)("div",us,[a[39]||(a[39]=(0,s.Lk)("h6",null,"Instructions",-1)),(0,s.Lk)("div",ps,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.recipe.instructions,(e,a)=>((0,s.uX)(),(0,s.CE)("div",{key:a,class:"instruction-item"},[(0,s.Lk)("span",ms,(0,l.v_)(a+1),1),(0,s.Lk)("span",gs,(0,l.v_)(e),1)]))),128))])])):(0,s.Q3)("",!0),e.target_calories||e.target_protein||e.target_carbs||e.target_fat?((0,s.uX)(),(0,s.CE)("div",hs,[a[44]||(a[44]=(0,s.Lk)("h6",null,"Meal Targets",-1)),(0,s.Lk)("div",ks,[e.target_calories?((0,s.uX)(),(0,s.CE)("div",vs,[a[40]||(a[40]=(0,s.Lk)("span",{class:"target-label"},"Target Calories:",-1)),(0,s.Lk)("span",fs,(0,l.v_)(Math.round(e.target_calories)),1)])):(0,s.Q3)("",!0),e.target_protein?((0,s.uX)(),(0,s.CE)("div",ys,[a[41]||(a[41]=(0,s.Lk)("span",{class:"target-label"},"Target Protein:",-1)),(0,s.Lk)("span",Ls,(0,l.v_)(Math.round(e.target_protein))+"g",1)])):(0,s.Q3)("",!0),e.target_carbs?((0,s.uX)(),(0,s.CE)("div",_s,[a[42]||(a[42]=(0,s.Lk)("span",{class:"target-label"},"Target Carbs:",-1)),(0,s.Lk)("span",bs,(0,l.v_)(Math.round(e.target_carbs))+"g",1)])):(0,s.Q3)("",!0),e.target_fat?((0,s.uX)(),(0,s.CE)("div",Cs,[a[43]||(a[43]=(0,s.Lk)("span",{class:"target-label"},"Target Fat:",-1)),(0,s.Lk)("span",ws,(0,l.v_)(Math.round(e.target_fat))+"g",1)])):(0,s.Q3)("",!0)])])):(0,s.Q3)("",!0)])):(0,s.Q3)("",!0),(0,s.Lk)("div",Ps,[(0,s.Lk)("button",{onClick:a=>r.regenerateMeal(t,e.meal_type),class:"btn btn-sm btn-outline"},a[45]||(a[45]=[(0,s.Lk)("i",{class:"fas fa-redo"},null,-1),(0,s.eW)(" Regenerate ")]),8,Ms),(0,s.Lk)("button",{onClick:a=>r.getAlternatives(t,e.meal_type),class:"btn btn-sm btn-secondary"},a[46]||(a[46]=[(0,s.Lk)("i",{class:"fas fa-exchange-alt"},null,-1),(0,s.eW)(" Alternatives ")]),8,Es),(0,s.Lk)("button",{onClick:a=>r.viewRecipeDetails(e.recipe),class:"btn btn-sm btn-info"},a[47]||(a[47]=[(0,s.Lk)("i",{class:"fas fa-info-circle"},null,-1),(0,s.eW)(" Recipe Details ")]),8,Ss)])]))),128))])]))),128))])])):((0,s.uX)(),(0,s.CE)("div",Is,[a[55]||(a[55]=(0,s.Lk)("i",{class:"fas fa-utensils"},null,-1)),a[56]||(a[56]=(0,s.Lk)("p",null,"No meal details available",-1)),(0,s.Lk)("div",Ds,[a[49]||(a[49]=(0,s.Lk)("strong",null,"No Meals Debug:",-1)),a[50]||(a[50]=(0,s.Lk)("br",null,null,-1)),(0,s.eW)(" mealPlan exists: "+(0,l.v_)(!!t.mealPlan),1),a[51]||(a[51]=(0,s.Lk)("br",null,null,-1)),(0,s.eW)(" mealPlan.meal_plan_data exists: "+(0,l.v_)(!!t.mealPlan?.meal_plan_data),1),a[52]||(a[52]=(0,s.Lk)("br",null,null,-1)),(0,s.eW)(" mealPlan.meal_plan_data.meals exists: "+(0,l.v_)(!!t.mealPlan?.meal_plan_data?.meals),1),a[53]||(a[53]=(0,s.Lk)("br",null,null,-1)),(0,s.eW)(" mealPlan structure: "+(0,l.v_)(JSON.stringify(Object.keys(t.mealPlan||{}))),1),a[54]||(a[54]=(0,s.Lk)("br",null,null,-1)),(0,s.eW)(" meal_plan_data structure: "+(0,l.v_)(JSON.stringify(Object.keys(t.mealPlan?.meal_plan_data||{}))),1)])]))]),(0,s.Lk)("div",As,[(0,s.Lk)("button",{onClick:a[1]||(a[1]=a=>e.$emit("close")),class:"btn btn-secondary"},"Close"),(0,s.Lk)("button",{onClick:a[2]||(a[2]=(...e)=>r.generateShoppingList&&r.generateShoppingList(...e)),class:"btn btn-success"},a[57]||(a[57]=[(0,s.Lk)("i",{class:"fas fa-shopping-cart"},null,-1),(0,s.eW)(" Generate Shopping List ")])),(0,s.Lk)("button",{onClick:a[3]||(a[3]=(...e)=>r.analyzePlan&&r.analyzePlan(...e)),class:"btn btn-info"},a[58]||(a[58]=[(0,s.Lk)("i",{class:"fas fa-chart-line"},null,-1),(0,s.eW)(" AI Analysis ")]))])])])}var Ts={name:"MealPlanDetailModal",props:{mealPlan:{type:Object,required:!0}},emits:["close","regenerate-meal","get-alternatives","analyze-plan"],mounted(){console.log("MealPlanDetailModal mounted with mealPlan:",this.mealPlan),console.log("mealPlan.meal_plan_data:",this.mealPlan?.meal_plan_data),console.log("mealPlan.meal_plan_data.meals:",this.mealPlan?.meal_plan_data?.meals),this.mealPlan?.meal_plan_data?.meals&&console.log("Available meal dates:",Object.keys(this.mealPlan.meal_plan_data.meals))},methods:{formatPlanType(e){return e?e.charAt(0).toUpperCase()+e.slice(1):"Unknown"},formatDateRange(e,a){if(!e||!a)return"Date unknown";const t=new Date(e).toLocaleDateString(),s=new Date(a).toLocaleDateString();return e===a?t:`${t} - ${s}`},formatDate(e){try{return new Date(e).toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"})}catch(a){return e}},formatMealType(e){return e?e.charAt(0).toUpperCase()+e.slice(1):"Meal"},getTotalMeals(){if(!this.mealPlan.meal_plan_data?.meals)return 0;let e=0;return Object.values(this.mealPlan.meal_plan_data.meals).forEach(a=>{Array.isArray(a)&&(e+=a.length)}),e},getNutritionValue(e,a){if(!e)return 0;if(e.estimated_nutrition&&void 0!==e.estimated_nutrition[a])return Math.round(e.estimated_nutrition[a]);if(e.nutrition&&void 0!==e.nutrition[a])return Math.round(e.nutrition[a]);const t={calories:["calories_per_serving","kcal"],protein:["protein_per_serving"],carbs:["carbs_per_serving","carbohydrates"],fat:["fat_per_serving","fats"]};if(t[a])for(const s of t[a])if(void 0!==e[s])return Math.round(e[s]);return 0},regenerateMeal(e,a){this.$emit("regenerate-meal",{day:e,mealType:a})},getAlternatives(e,a){this.$emit("get-alternatives",{day:e,mealType:a})},viewRecipeDetails(e){e&&alert(`Recipe: ${e.title}\n\nThis feature will show full recipe details in a future update.`)},generateShoppingList(){alert("Shopping list generation coming soon!")},analyzePlan(){this.$emit("analyze-plan",this.mealPlan)}}};const Fs=(0,H.A)(Ts,[["render",Xs],["__scopeId","data-v-ea7e5b66"]]);var xs=Fs;const Rs={class:"modal-header"},$s={class:"header-content"},Ws={class:"modal-body"},Ns={key:0,class:"loading-state"},zs={key:1,class:"error-state"},Qs={key:2,class:"analysis-results"},Us={class:"overall-score-section"},Vs={class:"score-circle"},Gs={viewBox:"0 0 100 100",class:"circular-progress"},js={class:"score-content"},qs={class:"score-number"},Os={class:"score-description"},Bs={class:"analysis-section"},Zs={key:0,class:"adequacy-grid"},Hs={class:"nutrient-header"},Ks={class:"nutrient-name"},Js={class:"nutrient-status"},Ys={class:"nutrient-progress"},el={class:"progress-bar"},al={class:"percentage"},tl={key:0,class:"analysis-section"},sl={class:"distribution-chart"},ll={class:"distribution-bars"},nl={class:"meal-bar"},il={class:"bar"},rl={class:"percentage"},ol={class:"meal-bar"},cl={class:"bar"},dl={class:"percentage"},ul={class:"meal-bar"},pl={class:"bar"},ml={class:"percentage"},gl={class:"distribution-rating"},hl={key:1,class:"analysis-section"},kl={class:"variety-metrics"},vl={class:"variety-item"},fl={class:"variety-item"},yl={class:"variety-item"},Ll={key:2,class:"analysis-section"},_l={class:"highlights-list"},bl={key:3,class:"analysis-section"},Cl={class:"recommendations-list"},wl={key:4,class:"analysis-section"},Pl={class:"improvements-list"},Ml={class:"modal-footer"},El=["disabled"];function Sl(e,a,t,n,i,r){return(0,s.uX)(),(0,s.CE)("div",{class:"modal-overlay",onClick:a[4]||(a[4]=a=>e.$emit("close"))},[(0,s.Lk)("div",{class:"modal-content analysis-modal",onClick:a[3]||(a[3]=(0,k.D$)(()=>{},["stop"]))},[(0,s.Lk)("div",Rs,[(0,s.Lk)("div",$s,[a[5]||(a[5]=(0,s.Lk)("h2",null,[(0,s.Lk)("i",{class:"fas fa-chart-line"}),(0,s.eW)(" AI Nutritional Analysis ")],-1)),(0,s.Lk)("p",null,(0,l.v_)(r.formatPlanType(t.mealPlan.plan_type))+" Plan - "+(0,l.v_)(r.formatDateRange(t.mealPlan.start_date,t.mealPlan.end_date)),1)]),(0,s.Lk)("button",{onClick:a[0]||(a[0]=a=>e.$emit("close")),class:"close-btn"},a[6]||(a[6]=[(0,s.Lk)("i",{class:"fas fa-times"},null,-1)]))]),(0,s.Lk)("div",Ws,[t.analysis.loading?((0,s.uX)(),(0,s.CE)("div",Ns,[a[7]||(a[7]=(0,s.Lk)("div",{class:"loading-spinner"},null,-1)),a[8]||(a[8]=(0,s.Lk)("h3",null,"AI is Analyzing Your Meal Plan",-1)),(0,s.Lk)("p",null,(0,l.v_)(t.analysis.message),1)])):t.analysis.error?((0,s.uX)(),(0,s.CE)("div",zs,[a[9]||(a[9]=(0,s.Lk)("i",{class:"fas fa-exclamation-triangle"},null,-1)),a[10]||(a[10]=(0,s.Lk)("h3",null,"Analysis Unavailable",-1)),(0,s.Lk)("p",null,(0,l.v_)(t.analysis.message),1)])):((0,s.uX)(),(0,s.CE)("div",Qs,[(0,s.Lk)("div",Us,[(0,s.Lk)("div",Vs,[((0,s.uX)(),(0,s.CE)("svg",Gs,[a[11]||(a[11]=(0,s.Lk)("circle",{cx:"50",cy:"50",r:"45",class:"circle-bg"},null,-1)),(0,s.Lk)("circle",{cx:"50",cy:"50",r:"45",class:"circle-progress",style:(0,l.Tr)(`stroke-dasharray: ${2.827*t.analysis.overall_score}, 282.7`)},null,4)])),(0,s.Lk)("div",js,[(0,s.Lk)("span",qs,(0,l.v_)(t.analysis.overall_score||0),1),a[12]||(a[12]=(0,s.Lk)("span",{class:"score-label"},"Overall Score",-1))])]),(0,s.Lk)("div",Os,[a[13]||(a[13]=(0,s.Lk)("h3",null,"Nutritional Quality Assessment",-1)),(0,s.Lk)("p",null,(0,l.v_)(r.getScoreDescription(t.analysis.overall_score)),1)])]),(0,s.Lk)("div",Bs,[a[14]||(a[14]=(0,s.Lk)("h3",null,[(0,s.Lk)("i",{class:"fas fa-balance-scale"}),(0,s.eW)(" Nutritional Adequacy ")],-1)),t.analysis.nutritional_adequacy?((0,s.uX)(),(0,s.CE)("div",Zs,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.analysis.nutritional_adequacy,(e,a)=>((0,s.uX)(),(0,s.CE)("div",{key:a,class:(0,l.C4)(["nutrient-card",r.getAdequacyClass(e.status)])},[(0,s.Lk)("div",Hs,[(0,s.Lk)("span",Ks,(0,l.v_)(r.formatNutrientName(a)),1),(0,s.Lk)("span",Js,(0,l.v_)(r.formatStatus(e.status)),1)]),(0,s.Lk)("div",Ys,[(0,s.Lk)("div",el,[(0,s.Lk)("div",{class:"progress-fill",style:(0,l.Tr)(`width: ${Math.min(e.percentage_of_target||0,150)}%`)},null,4)]),(0,s.Lk)("span",al,(0,l.v_)(e.percentage_of_target||0)+"% of target",1)])],2))),128))])):(0,s.Q3)("",!0)]),t.analysis.meal_distribution?((0,s.uX)(),(0,s.CE)("div",tl,[a[19]||(a[19]=(0,s.Lk)("h3",null,[(0,s.Lk)("i",{class:"fas fa-clock"}),(0,s.eW)(" Meal Distribution ")],-1)),(0,s.Lk)("div",sl,[(0,s.Lk)("div",ll,[(0,s.Lk)("div",nl,[a[15]||(a[15]=(0,s.Lk)("span",{class:"meal-label"},"Breakfast",-1)),(0,s.Lk)("div",il,[(0,s.Lk)("div",{class:"bar-fill breakfast",style:(0,l.Tr)(`width: ${t.analysis.meal_distribution.breakfast_percentage||0}%`)},null,4)]),(0,s.Lk)("span",rl,(0,l.v_)(t.analysis.meal_distribution.breakfast_percentage||0)+"%",1)]),(0,s.Lk)("div",ol,[a[16]||(a[16]=(0,s.Lk)("span",{class:"meal-label"},"Lunch",-1)),(0,s.Lk)("div",cl,[(0,s.Lk)("div",{class:"bar-fill lunch",style:(0,l.Tr)(`width: ${t.analysis.meal_distribution.lunch_percentage||0}%`)},null,4)]),(0,s.Lk)("span",dl,(0,l.v_)(t.analysis.meal_distribution.lunch_percentage||0)+"%",1)]),(0,s.Lk)("div",ul,[a[17]||(a[17]=(0,s.Lk)("span",{class:"meal-label"},"Dinner",-1)),(0,s.Lk)("div",pl,[(0,s.Lk)("div",{class:"bar-fill dinner",style:(0,l.Tr)(`width: ${t.analysis.meal_distribution.dinner_percentage||0}%`)},null,4)]),(0,s.Lk)("span",ml,(0,l.v_)(t.analysis.meal_distribution.dinner_percentage||0)+"%",1)])]),(0,s.Lk)("div",gl,[a[18]||(a[18]=(0,s.Lk)("span",{class:"rating-label"},"Balance Rating:",-1)),(0,s.Lk)("span",{class:(0,l.C4)(["rating-value",r.getRatingClass(t.analysis.meal_distribution.balance_rating)])},(0,l.v_)(r.formatRating(t.analysis.meal_distribution.balance_rating)),3)])])])):(0,s.Q3)("",!0),t.analysis.variety_analysis?((0,s.uX)(),(0,s.CE)("div",hl,[a[23]||(a[23]=(0,s.Lk)("h3",null,[(0,s.Lk)("i",{class:"fas fa-seedling"}),(0,s.eW)(" Variety & Diversity ")],-1)),(0,s.Lk)("div",kl,[(0,s.Lk)("div",vl,[a[20]||(a[20]=(0,s.Lk)("span",{class:"metric-label"},"Cuisine Diversity:",-1)),(0,s.Lk)("span",{class:(0,l.C4)(["metric-badge",r.getVarietyClass(t.analysis.variety_analysis.cuisine_diversity)])},(0,l.v_)(r.formatRating(t.analysis.variety_analysis.cuisine_diversity)),3)]),(0,s.Lk)("div",fl,[a[21]||(a[21]=(0,s.Lk)("span",{class:"metric-label"},"Ingredient Variety:",-1)),(0,s.Lk)("span",{class:(0,l.C4)(["metric-badge",r.getVarietyClass(t.analysis.variety_analysis.ingredient_variety)])},(0,l.v_)(r.formatRating(t.analysis.variety_analysis.ingredient_variety)),3)]),(0,s.Lk)("div",yl,[a[22]||(a[22]=(0,s.Lk)("span",{class:"metric-label"},"Cooking Methods:",-1)),(0,s.Lk)("span",{class:(0,l.C4)(["metric-badge",r.getVarietyClass(t.analysis.variety_analysis.cooking_method_diversity)])},(0,l.v_)(r.formatRating(t.analysis.variety_analysis.cooking_method_diversity)),3)])])])):(0,s.Q3)("",!0),t.analysis.health_highlights&&t.analysis.health_highlights.length?((0,s.uX)(),(0,s.CE)("div",Ll,[a[25]||(a[25]=(0,s.Lk)("h3",null,[(0,s.Lk)("i",{class:"fas fa-star"}),(0,s.eW)(" Health Highlights ")],-1)),(0,s.Lk)("div",_l,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.analysis.health_highlights,(e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t,class:"highlight-item"},[a[24]||(a[24]=(0,s.Lk)("i",{class:"fas fa-check-circle"},null,-1)),(0,s.Lk)("span",null,(0,l.v_)(e),1)]))),128))])])):(0,s.Q3)("",!0),t.analysis.recommendations&&t.analysis.recommendations.length?((0,s.uX)(),(0,s.CE)("div",bl,[a[27]||(a[27]=(0,s.Lk)("h3",null,[(0,s.Lk)("i",{class:"fas fa-lightbulb"}),(0,s.eW)(" AI Recommendations ")],-1)),(0,s.Lk)("div",Cl,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.analysis.recommendations,(e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t,class:"recommendation-item"},[a[26]||(a[26]=(0,s.Lk)("i",{class:"fas fa-arrow-right"},null,-1)),(0,s.Lk)("span",null,(0,l.v_)(e),1)]))),128))])])):(0,s.Q3)("",!0),t.analysis.areas_for_improvement&&t.analysis.areas_for_improvement.length?((0,s.uX)(),(0,s.CE)("div",wl,[a[29]||(a[29]=(0,s.Lk)("h3",null,[(0,s.Lk)("i",{class:"fas fa-target"}),(0,s.eW)(" Areas for Improvement ")],-1)),(0,s.Lk)("div",Pl,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.analysis.areas_for_improvement,(e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t,class:"improvement-item"},[a[28]||(a[28]=(0,s.Lk)("i",{class:"fas fa-exclamation-circle"},null,-1)),(0,s.Lk)("span",null,(0,l.v_)(e),1)]))),128))])])):(0,s.Q3)("",!0)]))]),(0,s.Lk)("div",Ml,[(0,s.Lk)("button",{onClick:a[1]||(a[1]=a=>e.$emit("close")),class:"btn btn-secondary"},"Close Analysis"),(0,s.Lk)("button",{onClick:a[2]||(a[2]=(...e)=>r.downloadReport&&r.downloadReport(...e)),class:"btn btn-primary",disabled:t.analysis.loading||t.analysis.error},a[30]||(a[30]=[(0,s.Lk)("i",{class:"fas fa-download"},null,-1),(0,s.eW)(" Download Report ")]),8,El)])])])}t(4603),t(7566),t(8721);var Il={name:"NutritionalAnalysisModal",props:{analysis:{type:Object,required:!0},mealPlan:{type:Object,required:!0}},emits:["close"],methods:{formatPlanType(e){return e.charAt(0).toUpperCase()+e.slice(1)},formatDateRange(e,a){const t=new Date(e).toLocaleDateString(),s=new Date(a).toLocaleDateString();return e===a?t:`${t} - ${s}`},getScoreDescription(e){return e>=90?"Excellent nutritional balance! Your meal plan meets all dietary guidelines.":e>=80?"Very good nutritional quality with minor areas for optimization.":e>=70?"Good nutritional foundation with some room for improvement.":e>=60?"Adequate nutrition but several areas could be enhanced.":"Significant nutritional improvements recommended."},formatNutrientName(e){const a={calories:"Calories",protein:"Protein",carbs:"Carbohydrates",fat:"Fat",fiber:"Fiber",sodium:"Sodium"};return a[e]||e.charAt(0).toUpperCase()+e.slice(1)},formatStatus(e){const a={adequate:"Adequate",insufficient:"Low",excessive:"High",too_high:"Too High",too_low:"Too Low",within_range:"Good",balanced:"Balanced"};return a[e]||e.replace("_"," ").toUpperCase()},formatRating(e){return e?e.charAt(0).toUpperCase()+e.slice(1):"N/A"},getAdequacyClass(e){const a={adequate:"adequate",within_range:"adequate",balanced:"adequate",insufficient:"insufficient",too_low:"insufficient",excessive:"excessive",too_high:"excessive"};return a[e]||"neutral"},getRatingClass(e){const a={excellent:"excellent",very_good:"very-good",good:"good",fair:"fair",poor:"poor"};return a[e]||"neutral"},getVarietyClass(e){const a={excellent:"excellent",very_good:"very-good",good:"good",fair:"fair",poor:"poor"};return a[e]||"neutral"},downloadReport(){let e="AI Nutritional Analysis Report\n";e+="================================\n\n",e+=`Meal Plan: ${this.formatPlanType(this.mealPlan.plan_type)} Plan\n`,e+=`Date Range: ${this.formatDateRange(this.mealPlan.start_date,this.mealPlan.end_date)}\n`,e+=`Generated: ${(new Date).toLocaleDateString()}\n\n`,e+=`Overall Score: ${this.analysis.overall_score||"N/A"}/100\n\n`,this.analysis.health_highlights&&this.analysis.health_highlights.length&&(e+="Health Highlights:\n",this.analysis.health_highlights.forEach(a=>{e+=`â€¢ ${a}\n`}),e+="\n"),this.analysis.recommendations&&this.analysis.recommendations.length&&(e+="AI Recommendations:\n",this.analysis.recommendations.forEach(a=>{e+=`â€¢ ${a}\n`}),e+="\n"),this.analysis.areas_for_improvement&&this.analysis.areas_for_improvement.length&&(e+="Areas for Improvement:\n",this.analysis.areas_for_improvement.forEach(a=>{e+=`â€¢ ${a}\n`}));const a=new Blob([e],{type:"text/plain"}),t=window.URL.createObjectURL(a),s=document.createElement("a");s.href=t,s.download=`nutrition-analysis-${this.mealPlan.start_date}.txt`,document.body.appendChild(s),s.click(),document.body.removeChild(s),window.URL.revokeObjectURL(t)}}};const Dl=(0,H.A)(Il,[["render",Sl],["__scopeId","data-v-213abc86"]]);var Al=Dl,Xl={name:"MealPlanManager",components:{MealPlanDetailModal:xs,NutritionalAnalysisModal:Al},props:{loading:{type:Boolean,default:!1}},emits:["meal-plan-generated"],data(){return{mealPlans:[],selectedPlan:null,selectedPlanForAnalysis:null,currentAnalysis:null,showAnalysisModal:!1,generating:!1,showAdvancedOptions:!1,generationStatus:null,generateForm:{plan_type:"daily",start_date:"",target_calories:null,cuisine_preferences:[],max_cook_time:null},availableCuisines:["Mediterranean","Asian","Italian","Mexican","American","Indian","Middle Eastern","French","Japanese","Thai"]}},computed:{today(){return(new Date).toISOString().split("T")[0]}},async mounted(){this.generateForm.start_date=this.today,await this.loadMealPlans()},methods:{async loadMealPlans(){try{console.log("Loading meal plans...");const e=await ze.getMealPlans();console.log("Raw API response:",e);const a=e?.data?.results||e?.data||[];console.log("Processed meal plans data:",a),this.mealPlans=a,console.log("this.mealPlans set to:",this.mealPlans)}catch(e){console.error("Failed to load meal plans:",e),this.mealPlans=[],this.showError("Failed to load meal plans")}},getMealCount(e){if(console.log("getMealCount called with plan:",e),!e?.meal_plan_data?.meals)return console.log("No meal_plan_data.meals found in plan"),"N/A";console.log("meal_plan_data.meals:",e.meal_plan_data.meals);let a=0;return Object.values(e.meal_plan_data.meals).forEach(e=>{console.log("Processing dayMeals:",e),Array.isArray(e)&&(a+=e.length)}),console.log("Total meals calculated:",a),a||"N/A"},async generateMealPlan(){this.generating=!0,this.showGenerationStatus();try{const e={...this.generateForm};e.target_calories||delete e.target_calories,e.max_cook_time||delete e.max_cook_time,0===e.cuisine_preferences.length&&delete e.cuisine_preferences,this.updateGenerationStep("strategy",!0);const a=await ze.generateMealPlan(e);this.updateGenerationStep("recipes",!0),this.generationStatus.steps.forEach(e=>{e.completed=!0,e.active=!1}),this.generationStatus={type:"success",icon:"fas fa-check-circle",title:"Meal Plan Generated Successfully!",message:"Your personalized AI meal plan is ready to view. All recipes have been saved to your recipe library."},this.mealPlans.unshift(a.data),this.showSuccess("AI meal plan generated successfully!"),this.$emit("meal-plan-generated",a.data),setTimeout(()=>{this.generationStatus=null,this.viewMealPlan(a.data)},2e3)}catch(e){console.error("Failed to generate meal plan:",e),this.generationStatus={type:"error",icon:"fas fa-exclamation-circle",title:"Generation Failed",message:"Failed to generate meal plan. Please try again."},this.showError("Failed to generate meal plan. Please try again."),setTimeout(()=>{this.generationStatus=null},3e3)}finally{this.generating=!1}},showGenerationStatus(){this.generationStatus={type:"generating",icon:"fas fa-brain",title:"AI is Creating Your Meal Plan",message:"Our AI is analyzing your profile and generating personalized meals...",steps:[{name:"Analyzing your health profile",completed:!1,active:!0},{name:"Creating meal strategy",completed:!1,active:!1},{name:"Generating meal structure",completed:!1,active:!1},{name:"Creating detailed recipes",completed:!1,active:!1},{name:"Optimizing nutrition balance",completed:!1,active:!1}]},setTimeout(()=>this.updateGenerationStep("strategy"),1e3),setTimeout(()=>this.updateGenerationStep("structure"),3e3),setTimeout(()=>this.updateGenerationStep("recipes"),5e3),setTimeout(()=>this.updateGenerationStep("optimization"),7e3)},updateGenerationStep(e,a=!1){if(!this.generationStatus||!this.generationStatus.steps)return;const t={profile:0,strategy:1,structure:2,recipes:3,optimization:4}[e];if(void 0!==t){for(let e=0;e<t;e++)this.generationStatus.steps[e].completed=!0,this.generationStatus.steps[e].active=!1;a?(this.generationStatus.steps[t].completed=!0,this.generationStatus.steps[t].active=!1):this.generationStatus.steps[t].active=!0}},async regeneratePlan(e){try{const a=confirm("Generate a new AI meal plan with the same settings? This will create a completely new plan.");if(!a)return;this.generating=!0,this.showGenerationStatus();const t={plan_type:e.plan_type,start_date:e.start_date},s=await ze.generateMealPlan(t);this.mealPlans.unshift(s.data),this.generationStatus={type:"success",icon:"fas fa-check-circle",title:"New Meal Plan Generated!",message:"Your fresh AI meal plan is ready. New recipes have been added to your library."},this.showSuccess("New AI meal plan generated!"),this.$emit("meal-plan-generated",s.data),setTimeout(()=>{this.generationStatus=null},2e3)}catch(a){console.error("Failed to regenerate meal plan:",a),this.generationStatus={type:"error",icon:"fas fa-exclamation-circle",title:"Regeneration Failed",message:"Failed to regenerate meal plan."},this.showError("Failed to regenerate meal plan"),setTimeout(()=>{this.generationStatus=null},3e3)}finally{this.generating=!1}},viewMealPlan(e){console.log("viewMealPlan called with plan:",e),console.log("Plan meal_plan_data:",e?.meal_plan_data),console.log("Plan meals structure:",e?.meal_plan_data?.meals),this.selectedPlan=e},async regenerateMeal(e,a){try{if(console.log("regenerateMeal called with:",{planId:e,mealData:a}),!a)throw console.error("regenerateMeal: mealData is null/undefined"),new Error("Meal data is required");const{day:t,mealType:s}=a;if(console.log("Extracted from mealData:",{day:t,mealType:s}),!t||!s)throw console.error("regenerateMeal: day or mealType missing",{day:t,mealType:s}),new Error("Day and meal type are required");console.log("Calling API with:",{planId:e,day:t,mealType:s});const l=await ze.regenerateMeal(e,t,s),n=this.mealPlans.findIndex(a=>a.id===e);-1!==n&&(this.mealPlans[n]=l.data,this.selectedPlan=l.data),this.showSuccess(`${s} meal regenerated successfully!`)}catch(t){console.error("Failed to regenerate meal:",t),console.error("Error details:",{message:t.message,response:t.response?.data,stack:t.stack}),this.showError(`Failed to regenerate meal: ${t.message}`)}},async getMealAlternatives(e,a){try{if(console.log("getMealAlternatives called with:",{planId:e,mealData:a}),!a)throw console.error("getMealAlternatives: mealData is null/undefined"),new Error("Meal data is required");const{day:t,mealType:s}=a;if(console.log("Extracted from mealData:",{day:t,mealType:s}),!t||!s)throw console.error("getMealAlternatives: day or mealType missing",{day:t,mealType:s}),new Error("Day and meal type are required");console.log("Calling API with:",{planId:e,day:t,mealType:s});const l=await ze.getMealAlternatives(e,t,s);return l.data||[]}catch(t){return console.error("Failed to get meal alternatives:",t),console.error("Error details:",{message:t.message,response:t.response?.data,stack:t.stack}),this.showError(`Failed to get meal alternatives: ${t.message}`),[]}},async analyzeMealPlan(e){try{this.selectedPlanForAnalysis=e,this.currentAnalysis={loading:!0,message:"AI is analyzing your meal plan nutrition..."},this.showAnalysisModal=!0;const a=await ze.analyzeMealPlan(e.id);this.currentAnalysis=a.data}catch(a){console.error("Failed to analyze meal plan:",a),this.currentAnalysis={error:!0,message:"Failed to analyze meal plan. Please try again."},this.showError("Failed to analyze meal plan")}},async analyzeMealPlanFromModal(e){this.selectedPlan=null,await this.analyzeMealPlan(e)},closeAnalysisModal(){this.showAnalysisModal=!1,this.currentAnalysis=null,this.selectedPlanForAnalysis=null},formatPlanType(e){return e&&"string"===typeof e?e.charAt(0).toUpperCase()+e.slice(1):"Unknown"},formatDateRange(e,a){if(!e||!a)return"Date unknown";const t=new Date(e).toLocaleDateString(),s=new Date(a).toLocaleDateString();return e===a?t:`${t} - ${s}`},showSuccess(e){this.$toast?.success?.(e)||alert(e)},showError(e){this.$toast?.error?.(e)||alert(e)}}};const Tl=(0,H.A)(Xl,[["render",ja],["__scopeId","data-v-441363bc"]]);var Fl=Tl;const xl={class:"spoonacular-integration"},Rl={class:"connection-section"},$l={key:0,class:"connection-prompt"},Wl={class:"connection-card"},Nl=["disabled"],zl={key:1,class:"connecting-status"},Ql={key:2,class:"connected-status"},Ul={class:"status-card success"},Vl={class:"status-info"},Gl={key:0,class:"spoonacular-features"},jl={class:"feature-section"},ql={class:"section-header"},Ol={class:"date-selector"},Bl={key:0,class:"loading-state"},Zl={key:1,class:"meal-plan-grid"},Hl={class:"day-header"},Kl={class:"day-nutrition"},Jl={class:"calories"},Yl={class:"day-meals"},en={key:0,class:"meals-list"},an={class:"meal-slot"},tn={class:"meal-content"},sn={key:0},ln=["src","alt"],nn={key:1,class:"no-meals"},rn=["onClick"],on={class:"feature-section"},cn={class:"section-header"},dn={key:0,class:"loading-state"},un={key:1,class:"shopping-list"},pn={key:0,class:"shopping-aisles"},mn={class:"items-list"},gn=["id","onUpdate:modelValue","onChange"],hn=["for"],kn={key:0,class:"item-amount"},vn={key:1,class:"empty-shopping-list"},fn={class:"modal-header"},yn={class:"modal-body"},Ln={class:"form-group"},_n={class:"form-group"},bn={class:"form-group"},Cn={class:"form-actions"},wn=["disabled"],Pn={key:2,class:"error-message"},Mn={class:"alert alert-error"},En={key:3,class:"success-message"},Sn={class:"alert alert-success"};function In(e,a,t,n,i,r){return(0,s.uX)(),(0,s.CE)("div",xl,[a[45]||(a[45]=(0,s.Lk)("div",{class:"integration-header"},[(0,s.Lk)("h2",null,"Spoonacular Meal Planner"),(0,s.Lk)("p",null,"Connect to Spoonacular for personalized meal planning and shopping lists")],-1)),(0,s.Lk)("div",Rl,[i.isConnected||i.connecting?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",$l,[(0,s.Lk)("div",Wl,[a[17]||(a[17]=(0,s.Lk)("i",{class:"fas fa-link connection-icon"},null,-1)),a[18]||(a[18]=(0,s.Lk)("h3",null,"Connect to Spoonacular",-1)),a[19]||(a[19]=(0,s.Lk)("p",null,"Link your account to access personalized meal plans, shopping lists, and recipe recommendations.",-1)),(0,s.Lk)("button",{onClick:a[0]||(a[0]=(...e)=>r.connectToSpoonacular&&r.connectToSpoonacular(...e)),class:"btn btn-primary connect-btn",disabled:i.connecting},a[16]||(a[16]=[(0,s.Lk)("i",{class:"fas fa-plug"},null,-1),(0,s.eW)(" Connect Account ")]),8,Nl)])])),i.connecting?((0,s.uX)(),(0,s.CE)("div",zl,a[20]||(a[20]=[(0,s.Lk)("div",{class:"spinner"},null,-1),(0,s.Lk)("p",null,"Connecting to Spoonacular...",-1)]))):(0,s.Q3)("",!0),i.isConnected?((0,s.uX)(),(0,s.CE)("div",Ql,[(0,s.Lk)("div",Ul,[a[22]||(a[22]=(0,s.Lk)("i",{class:"fas fa-check-circle"},null,-1)),(0,s.Lk)("div",Vl,[a[21]||(a[21]=(0,s.Lk)("h4",null,"Connected to Spoonacular",-1)),(0,s.Lk)("p",null,"Username: "+(0,l.v_)(i.spoonacularUsername),1)])])])):(0,s.Q3)("",!0)]),i.isConnected?((0,s.uX)(),(0,s.CE)("div",Gl,[(0,s.Lk)("div",jl,[(0,s.Lk)("div",ql,[a[25]||(a[25]=(0,s.Lk)("h3",null,[(0,s.Lk)("i",{class:"fas fa-calendar-alt"}),(0,s.eW)(" Weekly Meal Plan")],-1)),(0,s.Lk)("div",Ol,[a[24]||(a[24]=(0,s.Lk)("label",{for:"week-select"},"Week starting:",-1)),(0,s.bo)((0,s.Lk)("input",{id:"week-select",type:"date","onUpdate:modelValue":a[1]||(a[1]=e=>i.selectedWeekStart=e),onChange:a[2]||(a[2]=(...e)=>r.loadMealPlan&&r.loadMealPlan(...e)),class:"date-input"},null,544),[[k.Jo,i.selectedWeekStart]]),(0,s.Lk)("button",{onClick:a[3]||(a[3]=(...e)=>r.refreshMealPlan&&r.refreshMealPlan(...e)),class:"btn btn-secondary btn-sm"},a[23]||(a[23]=[(0,s.Lk)("i",{class:"fas fa-refresh"},null,-1)]))])]),i.mealPlanLoading?((0,s.uX)(),(0,s.CE)("div",Bl,a[26]||(a[26]=[(0,s.Lk)("div",{class:"spinner"},null,-1),(0,s.Lk)("p",null,"Loading meal plan...",-1)]))):i.mealPlan?((0,s.uX)(),(0,s.CE)("div",Zl,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.mealPlan.days,(e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t,class:"day-card"},[(0,s.Lk)("div",Hl,[(0,s.Lk)("h4",null,(0,l.v_)(e.day),1),(0,s.Lk)("div",Kl,[(0,s.Lk)("span",Jl,(0,l.v_)(r.getDayCalories(e))+" cal",1)])]),(0,s.Lk)("div",Yl,[e.items&&e.items.length>0?((0,s.uX)(),(0,s.CE)("div",en,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.items,e=>((0,s.uX)(),(0,s.CE)("div",{key:e.id,class:(0,l.C4)(["meal-item",r.getMealSlotClass(e.slot)])},[(0,s.Lk)("div",an,(0,l.v_)(r.getMealSlotName(e.slot)),1),(0,s.Lk)("div",tn,[(0,s.Lk)("h5",null,(0,l.v_)(e.value.title),1),e.value.servings?((0,s.uX)(),(0,s.CE)("p",sn,"Servings: "+(0,l.v_)(e.value.servings),1)):(0,s.Q3)("",!0),e.value.image||e.value.imageType?((0,s.uX)(),(0,s.CE)("img",{key:1,src:r.getMealImage(e.value),alt:e.value.title,class:"meal-image"},null,8,ln)):(0,s.Q3)("",!0)])],2))),128))])):((0,s.uX)(),(0,s.CE)("div",nn,[a[28]||(a[28]=(0,s.Lk)("p",null,"No meals planned",-1)),(0,s.Lk)("button",{onClick:a=>r.openAddMealModal(e),class:"btn btn-outline btn-sm"},a[27]||(a[27]=[(0,s.Lk)("i",{class:"fas fa-plus"},null,-1),(0,s.eW)(" Add Meal ")]),8,rn)]))])]))),128))])):(0,s.Q3)("",!0)]),(0,s.Lk)("div",on,[(0,s.Lk)("div",cn,[a[30]||(a[30]=(0,s.Lk)("h3",null,[(0,s.Lk)("i",{class:"fas fa-shopping-cart"}),(0,s.eW)(" Shopping List")],-1)),(0,s.Lk)("button",{onClick:a[4]||(a[4]=(...e)=>r.refreshShoppingList&&r.refreshShoppingList(...e)),class:"btn btn-secondary"},a[29]||(a[29]=[(0,s.Lk)("i",{class:"fas fa-refresh"},null,-1),(0,s.eW)(" Refresh ")]))]),i.shoppingListLoading?((0,s.uX)(),(0,s.CE)("div",dn,a[31]||(a[31]=[(0,s.Lk)("div",{class:"spinner"},null,-1),(0,s.Lk)("p",null,"Loading shopping list...",-1)]))):i.shoppingList?((0,s.uX)(),(0,s.CE)("div",un,[i.shoppingList.aisles&&i.shoppingList.aisles.length>0?((0,s.uX)(),(0,s.CE)("div",pn,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.shoppingList.aisles,e=>((0,s.uX)(),(0,s.CE)("div",{key:e.aisle,class:"aisle-section"},[(0,s.Lk)("h4",null,(0,l.v_)(e.aisle),1),(0,s.Lk)("ul",mn,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.items,e=>((0,s.uX)(),(0,s.CE)("li",{key:e.id,class:"shopping-item"},[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",id:`item-${e.id}`,"onUpdate:modelValue":a=>e.checked=a,onChange:a=>r.toggleShoppingItem(e)},null,40,gn),[[k.lH,e.checked]]),(0,s.Lk)("label",{for:`item-${e.id}`,class:(0,l.C4)({checked:e.checked})},[(0,s.eW)((0,l.v_)(e.name)+" ",1),e.measures?((0,s.uX)(),(0,s.CE)("span",kn," ("+(0,l.v_)(r.formatItemAmount(e.measures))+") ",1)):(0,s.Q3)("",!0)],10,hn)]))),128))])]))),128))])):((0,s.uX)(),(0,s.CE)("div",vn,[a[33]||(a[33]=(0,s.Lk)("p",null,"Your shopping list is empty",-1)),(0,s.Lk)("button",{onClick:a[5]||(a[5]=(...e)=>r.generateShoppingList&&r.generateShoppingList(...e)),class:"btn btn-primary"},a[32]||(a[32]=[(0,s.Lk)("i",{class:"fas fa-list"},null,-1),(0,s.eW)(" Generate Shopping List ")]))]))])):(0,s.Q3)("",!0)])])):(0,s.Q3)("",!0),i.showAddMealModal?((0,s.uX)(),(0,s.CE)("div",{key:1,class:"modal-overlay",onClick:a[13]||(a[13]=(...e)=>r.closeAddMealModal&&r.closeAddMealModal(...e))},[(0,s.Lk)("div",{class:"modal-content",onClick:a[12]||(a[12]=(0,k.D$)(()=>{},["stop"]))},[(0,s.Lk)("div",fn,[a[35]||(a[35]=(0,s.Lk)("h3",null,"Add Meal",-1)),(0,s.Lk)("button",{onClick:a[6]||(a[6]=(...e)=>r.closeAddMealModal&&r.closeAddMealModal(...e)),class:"close-btn"},a[34]||(a[34]=[(0,s.Lk)("i",{class:"fas fa-times"},null,-1)]))]),(0,s.Lk)("div",yn,[(0,s.Lk)("form",{onSubmit:a[11]||(a[11]=(0,k.D$)((...e)=>r.addMealToSpoonacular&&r.addMealToSpoonacular(...e),["prevent"]))},[(0,s.Lk)("div",Ln,[a[37]||(a[37]=(0,s.Lk)("label",null,"Meal Type:",-1)),(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":a[7]||(a[7]=e=>i.newMeal.slot=e),required:""},a[36]||(a[36]=[(0,s.Lk)("option",{value:"1"},"Breakfast",-1),(0,s.Lk)("option",{value:"2"},"Lunch",-1),(0,s.Lk)("option",{value:"3"},"Dinner",-1)]),512),[[k.u1,i.newMeal.slot]])]),(0,s.Lk)("div",_n,[a[38]||(a[38]=(0,s.Lk)("label",null,"Recipe ID:",-1)),(0,s.bo)((0,s.Lk)("input",{type:"number","onUpdate:modelValue":a[8]||(a[8]=e=>i.newMeal.recipeId=e),placeholder:"Enter Spoonacular recipe ID",required:""},null,512),[[k.Jo,i.newMeal.recipeId]])]),(0,s.Lk)("div",bn,[a[39]||(a[39]=(0,s.Lk)("label",null,"Servings:",-1)),(0,s.bo)((0,s.Lk)("input",{type:"number","onUpdate:modelValue":a[9]||(a[9]=e=>i.newMeal.servings=e),min:"1",max:"10",required:""},null,512),[[k.Jo,i.newMeal.servings]])]),(0,s.Lk)("div",Cn,[(0,s.Lk)("button",{type:"button",onClick:a[10]||(a[10]=(...e)=>r.closeAddMealModal&&r.closeAddMealModal(...e)),class:"btn btn-secondary"}," Cancel "),(0,s.Lk)("button",{type:"submit",class:"btn btn-primary",disabled:i.addingMeal},[a[40]||(a[40]=(0,s.Lk)("i",{class:"fas fa-plus"},null,-1)),(0,s.eW)(" "+(0,l.v_)(i.addingMeal?"Adding...":"Add Meal"),1)],8,wn)])],32)])])])):(0,s.Q3)("",!0),i.error?((0,s.uX)(),(0,s.CE)("div",Pn,[(0,s.Lk)("div",Mn,[a[42]||(a[42]=(0,s.Lk)("i",{class:"fas fa-exclamation-triangle"},null,-1)),(0,s.eW)(" "+(0,l.v_)(i.error)+" ",1),(0,s.Lk)("button",{onClick:a[14]||(a[14]=e=>i.error=null),class:"close-alert"},a[41]||(a[41]=[(0,s.Lk)("i",{class:"fas fa-times"},null,-1)]))])])):(0,s.Q3)("",!0),i.successMessage?((0,s.uX)(),(0,s.CE)("div",En,[(0,s.Lk)("div",Sn,[a[44]||(a[44]=(0,s.Lk)("i",{class:"fas fa-check-circle"},null,-1)),(0,s.eW)(" "+(0,l.v_)(i.successMessage)+" ",1),(0,s.Lk)("button",{onClick:a[15]||(a[15]=e=>i.successMessage=null),class:"close-alert"},a[43]||(a[43]=[(0,s.Lk)("i",{class:"fas fa-times"},null,-1)]))])])):(0,s.Q3)("",!0)])}var Dn={name:"SpoonacularIntegration",data(){return{isConnected:!1,connecting:!1,spoonacularUsername:null,mealPlan:null,mealPlanLoading:!1,shoppingList:null,shoppingListLoading:!1,selectedWeekStart:this.getCurrentWeekStart(),showAddMealModal:!1,selectedDay:null,newMeal:{slot:1,recipeId:null,servings:2},addingMeal:!1,error:null,successMessage:null}},async mounted(){await this.checkSpoonacularStatus(),this.isConnected&&await Promise.all([this.loadMealPlan(),this.loadShoppingList()])},methods:{async checkSpoonacularStatus(){try{const e=await ze.getSpoonacularStatus();this.isConnected=e.data.connected,this.spoonacularUsername=e.data.spoonacular_username}catch(e){console.error("Failed to check Spoonacular status:",e),this.error="Failed to check connection status"}},async connectToSpoonacular(){this.connecting=!0,this.error=null;try{const e=await ze.connectSpoonacular();this.isConnected=!0,this.spoonacularUsername=e.data.spoonacular_username,this.successMessage="Successfully connected to Spoonacular!",e.data.spoonacular_password&&alert(`Your Spoonacular password is: ${e.data.spoonacular_password}\nPlease save this for logging into spoonacular.com`),await Promise.all([this.loadMealPlan(),this.loadShoppingList()])}catch(e){console.error("Failed to connect to Spoonacular:",e),this.error=e.response?.data?.details||"Failed to connect to Spoonacular"}finally{this.connecting=!1}},async loadMealPlan(){if(this.isConnected){this.mealPlanLoading=!0,this.error=null;try{const e=await ze.getSpoonacularMealPlan(this.selectedWeekStart);this.mealPlan=e.data}catch(e){console.error("Failed to load meal plan:",e),this.error="Failed to load meal plan from Spoonacular"}finally{this.mealPlanLoading=!1}}},async refreshMealPlan(){await this.loadMealPlan()},async loadShoppingList(){if(this.isConnected){this.shoppingListLoading=!0,this.error=null;try{const e=await ze.getSpoonacularShoppingList();this.shoppingList=e.data}catch(e){console.error("Failed to load shopping list:",e),this.error="Failed to load shopping list from Spoonacular"}finally{this.shoppingListLoading=!1}}},async refreshShoppingList(){await this.loadShoppingList()},async generateShoppingList(){if(this.isConnected){this.shoppingListLoading=!0,this.error=null;try{const e=new Date(this.selectedWeekStart);e.setDate(e.getDate()+6),await ze.generateSpoonacularShoppingList(this.selectedWeekStart,e.toISOString().split("T")[0]),await this.loadShoppingList(),this.successMessage="Shopping list generated successfully!"}catch(e){console.error("Failed to generate shopping list:",e),this.error="Failed to generate shopping list"}finally{this.shoppingListLoading=!1}}},openAddMealModal(e){this.selectedDay=e,this.showAddMealModal=!0,this.newMeal={slot:1,recipeId:null,servings:2}},closeAddMealModal(){this.showAddMealModal=!1,this.selectedDay=null},async addMealToSpoonacular(){if(this.selectedDay&&this.newMeal.recipeId){this.addingMeal=!0,this.error=null;try{const e={date:this.formatDateForAPI(this.selectedDay.date),slot:parseInt(this.newMeal.slot),position:1,type:"RECIPE",value:{id:parseInt(this.newMeal.recipeId),servings:parseInt(this.newMeal.servings)}};await ze.addToSpoonacularMealPlan(e),this.successMessage="Meal added successfully!",this.closeAddMealModal(),await this.loadMealPlan()}catch(e){console.error("Failed to add meal:",e),this.error="Failed to add meal to plan"}finally{this.addingMeal=!1}}},toggleShoppingItem(e){console.log(`Item ${e.name} ${e.checked?"checked":"unchecked"}`)},getCurrentWeekStart(){const e=new Date,a=new Date(e.setDate(e.getDate()-e.getDay()));return a.toISOString().split("T")[0]},getDayCalories(e){if(!e.nutritionSummary?.nutrients)return 0;const a=e.nutritionSummary.nutrients.find(e=>"Calories"===e.name);return a?Math.round(a.amount):0},getMealSlotName(e){const a={1:"Breakfast",2:"Lunch",3:"Dinner"};return a[e]||"Meal"},getMealSlotClass(e){return`slot-${e}`},getMealImage(e){return e.image?e.image:e.imageType?`https://img.spoonacular.com/recipes/${e.id}-312x231.${e.imageType}`:null},formatItemAmount(e){return e&&e.us?`${e.us.amount} ${e.us.unitShort}`:""},formatDateForAPI(e){const a=new Date(1e3*e);return a.toISOString().split("T")[0]}}};const An=(0,H.A)(Dn,[["render",In],["__scopeId","data-v-699b3714"]]);var Xn=An;const Tn={class:"coming-soon-card"},Fn={class:"card-content"},xn={class:"icon-container"},Rn={class:"features-preview"},$n={class:"progress-indicator"},Wn={class:"progress-bar"},Nn={class:"progress-text"},zn={class:"cta-section"};function Qn(e,a,t,n,i,r){return(0,s.uX)(),(0,s.CE)("div",Tn,[(0,s.Lk)("div",Fn,[(0,s.Lk)("div",xn,[(0,s.Lk)("i",{class:(0,l.C4)(t.icon)},null,2)]),(0,s.Lk)("h2",null,(0,l.v_)(t.title),1),(0,s.Lk)("p",null,(0,l.v_)(t.description),1),(0,s.Lk)("div",Rn,[a[2]||(a[2]=(0,s.Lk)("h3",null,"Coming Features:",-1)),(0,s.Lk)("ul",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.features,e=>((0,s.uX)(),(0,s.CE)("li",{key:e},[a[1]||(a[1]=(0,s.Lk)("i",{class:"fas fa-check-circle"},null,-1)),(0,s.eW)(" "+(0,l.v_)(e),1)]))),128))])]),(0,s.Lk)("div",$n,[(0,s.Lk)("div",Wn,[(0,s.Lk)("div",{class:"progress-fill",style:(0,l.Tr)({width:t.progress+"%"})},null,4)]),(0,s.Lk)("span",Nn,(0,l.v_)(t.progress)+"% Complete",1)]),(0,s.Lk)("div",zn,[a[4]||(a[4]=(0,s.Lk)("p",{class:"cta-text"},"Want to be notified when this feature launches?",-1)),(0,s.Lk)("button",{class:"btn btn-primary",onClick:a[0]||(a[0]=(...e)=>r.subscribeToUpdates&&r.subscribeToUpdates(...e))},a[3]||(a[3]=[(0,s.Lk)("i",{class:"fas fa-bell"},null,-1),(0,s.eW)(" Notify Me ")]))])])])}var Un={name:"ComingSoonCard",props:{title:{type:String,required:!0},description:{type:String,required:!0},icon:{type:String,default:"fas fa-rocket"},progress:{type:Number,default:75}},computed:{features(){const e={"Meal Plans":["AI-generated daily meal plans","Weekly meal planning","Personalized recipe suggestions","Automatic shopping lists","Nutritional balance optimization"],"Nutrition Analytics":["Daily nutrition tracking","Macro breakdown charts","Progress towards goals","Trend analysis","AI-powered insights"]};return e[this.title]||["Personalized recommendations","Smart AI integration","Beautiful visualizations","Easy-to-use interface"]}},methods:{subscribeToUpdates(){alert("Thanks for your interest! We'll notify you when this feature is ready.")}}};const Vn=(0,H.A)(Un,[["render",Qn],["__scopeId","data-v-2b85b24d"]]);var Gn=Vn;const jn={class:"modal-header"},qn={class:"header-content"},On={class:"recipe-meta"},Bn={class:"badge cuisine"},Zn={class:"badge meal-type"},Hn={class:"modal-body"},Kn={class:"recipe-hero"},Jn={key:0,class:"image-wrapper"},Yn=["src","alt"],ei={class:"image-overlay"},ai={class:"recipe-stats"},ti={class:"stat"},si={class:"stat"},li={class:"stat"},ni={class:"nutrition-panel"},ii={class:"nutrition-grid"},ri={class:"nutrition-item calories"},oi={class:"nutrition-value"},ci={class:"nutrition-item protein"},di={class:"nutrition-value"},ui={class:"nutrition-item carbs"},pi={class:"nutrition-value"},mi={class:"nutrition-item fat"},gi={class:"nutrition-value"},hi={key:0,class:"dietary-tags"},ki={key:0,class:"summary-section"},vi=["innerHTML"],fi={key:1,class:"ingredients-section"},yi={class:"ingredients-grid"},Li={class:"ingredient-text"},_i={key:2,class:"instructions-section"},bi={class:"instructions-list"},Ci={class:"step-number"},wi={class:"step-content"},Pi={key:3,class:"source-section"},Mi={class:"source-info"},Ei=["href"],Si={key:1,class:"source-text"},Ii={class:"modal-footer"},Di={class:"footer-actions"},Ai=["disabled"],Xi={key:0,class:"fas fa-spinner fa-spin"},Ti={key:1,class:"fas fa-heart"};function Fi(e,a,t,n,i,r){return(0,s.uX)(),(0,s.CE)("div",{class:"recipe-modal-overlay",onClick:a[6]||(a[6]=(0,k.D$)(a=>e.$emit("close"),["self"]))},[(0,s.Lk)("div",{class:"recipe-modal",onClick:a[5]||(a[5]=(0,k.D$)(()=>{},["stop"]))},[(0,s.Lk)("div",jn,[(0,s.Lk)("div",qn,[(0,s.Lk)("h2",null,(0,l.v_)(t.recipe.title),1),(0,s.Lk)("div",On,[(0,s.Lk)("span",Bn,(0,l.v_)(r.formatCuisine(t.recipe.cuisine)),1),(0,s.Lk)("span",Zn,(0,l.v_)(r.formatMealType(t.recipe.meal_type)),1),(0,s.Lk)("span",{class:(0,l.C4)(["badge difficulty",r.getDifficultyClass(t.recipe.difficulty_level)])},(0,l.v_)(r.formatDifficulty(t.recipe.difficulty_level)),3)])]),(0,s.Lk)("button",{class:"close-btn",onClick:a[0]||(a[0]=a=>e.$emit("close"))},a[7]||(a[7]=[(0,s.Lk)("i",{class:"fas fa-times"},null,-1)]))]),(0,s.Lk)("div",Hn,[(0,s.Lk)("div",Kn,[t.recipe.image_url?((0,s.uX)(),(0,s.CE)("div",Jn,[(0,s.Lk)("img",{src:t.recipe.image_url,alt:t.recipe.title,onError:a[1]||(a[1]=(...e)=>r.imageError&&r.imageError(...e))},null,40,Yn),(0,s.Lk)("div",ei,[(0,s.Lk)("div",ai,[(0,s.Lk)("div",ti,[a[8]||(a[8]=(0,s.Lk)("i",{class:"fas fa-clock"},null,-1)),(0,s.Lk)("span",null,(0,l.v_)(r.formatTime(t.recipe.total_time_minutes)),1)]),(0,s.Lk)("div",si,[a[9]||(a[9]=(0,s.Lk)("i",{class:"fas fa-users"},null,-1)),(0,s.Lk)("span",null,(0,l.v_)(t.recipe.servings)+" "+(0,l.v_)(1===t.recipe.servings?"serving":"servings"),1)]),(0,s.Lk)("div",li,[a[10]||(a[10]=(0,s.Lk)("i",{class:"fas fa-fire"},null,-1)),(0,s.Lk)("span",null,(0,l.v_)(Math.round(t.recipe.calories_per_serving)||"N/A")+" cal",1)])])])])):(0,s.Q3)("",!0),(0,s.Lk)("div",ni,[a[15]||(a[15]=(0,s.Lk)("h3",null,"Nutrition per Serving",-1)),(0,s.Lk)("div",ii,[(0,s.Lk)("div",ri,[(0,s.Lk)("div",oi,(0,l.v_)(Math.round(t.recipe.calories_per_serving)||"N/A"),1),a[11]||(a[11]=(0,s.Lk)("div",{class:"nutrition-label"},"Calories",-1))]),(0,s.Lk)("div",ci,[(0,s.Lk)("div",di,(0,l.v_)(Math.round(t.recipe.protein_per_serving)||0)+"g",1),a[12]||(a[12]=(0,s.Lk)("div",{class:"nutrition-label"},"Protein",-1))]),(0,s.Lk)("div",ui,[(0,s.Lk)("div",pi,(0,l.v_)(Math.round(t.recipe.carbs_per_serving)||0)+"g",1),a[13]||(a[13]=(0,s.Lk)("div",{class:"nutrition-label"},"Carbs",-1))]),(0,s.Lk)("div",mi,[(0,s.Lk)("div",gi,(0,l.v_)(Math.round(t.recipe.fat_per_serving)||0)+"g",1),a[14]||(a[14]=(0,s.Lk)("div",{class:"nutrition-label"},"Fat",-1))])]),t.recipe.dietary_tags&&t.recipe.dietary_tags.length?((0,s.uX)(),(0,s.CE)("div",hi,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.recipe.dietary_tags,e=>((0,s.uX)(),(0,s.CE)("span",{key:e,class:"dietary-tag"},(0,l.v_)(r.formatTag(e)),1))),128))])):(0,s.Q3)("",!0)])]),t.recipe.summary?((0,s.uX)(),(0,s.CE)("div",ki,[a[16]||(a[16]=(0,s.Lk)("h3",null,"About This Recipe",-1)),(0,s.Lk)("p",{class:"summary",innerHTML:r.cleanSummary(t.recipe.summary)},null,8,vi)])):(0,s.Q3)("",!0),t.recipe.ingredients_data&&t.recipe.ingredients_data.length?((0,s.uX)(),(0,s.CE)("div",fi,[a[17]||(a[17]=(0,s.Lk)("h3",null,[(0,s.Lk)("i",{class:"fas fa-list-ul"}),(0,s.eW)(" Ingredients ")],-1)),(0,s.Lk)("div",yi,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.recipe.ingredients_data,(e,a)=>((0,s.uX)(),(0,s.CE)("div",{key:a,class:"ingredient-item"},[(0,s.Lk)("span",Li,(0,l.v_)(r.formatIngredient(e)),1)]))),128))])])):(0,s.Q3)("",!0),r.normalizedInstructions.length?((0,s.uX)(),(0,s.CE)("div",_i,[a[18]||(a[18]=(0,s.Lk)("h3",null,[(0,s.Lk)("i",{class:"fas fa-clipboard-list"}),(0,s.eW)(" Instructions ")],-1)),(0,s.Lk)("div",bi,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.normalizedInstructions,(e,a)=>((0,s.uX)(),(0,s.CE)("div",{key:a,class:"instruction-step"},[(0,s.Lk)("div",Ci,(0,l.v_)(a+1),1),(0,s.Lk)("div",wi,(0,l.v_)(e.step||e.description||e),1)]))),128))])])):(0,s.Q3)("",!0),t.recipe.source_url||t.recipe.source?((0,s.uX)(),(0,s.CE)("div",Pi,[(0,s.Lk)("div",Mi,[a[20]||(a[20]=(0,s.Lk)("span",{class:"source-label"},"Source:",-1)),t.recipe.source_url?((0,s.uX)(),(0,s.CE)("a",{key:0,href:t.recipe.source_url,target:"_blank",class:"source-link"},a[19]||(a[19]=[(0,s.eW)(" View Original Recipe "),(0,s.Lk)("i",{class:"fas fa-external-link-alt"},null,-1)]),8,Ei)):((0,s.uX)(),(0,s.CE)("span",Si,(0,l.v_)(t.recipe.source||"Recipe Database"),1))])])):(0,s.Q3)("",!0)]),(0,s.Lk)("div",Ii,[(0,s.Lk)("div",Di,[(0,s.Lk)("button",{class:"btn btn-outline",onClick:a[2]||(a[2]=a=>e.$emit("close"))},a[21]||(a[21]=[(0,s.Lk)("i",{class:"fas fa-times"},null,-1),(0,s.eW)(" Close ")])),(0,s.Lk)("button",{class:"btn btn-primary",onClick:a[3]||(a[3]=(...e)=>r.saveRecipe&&r.saveRecipe(...e)),disabled:i.saving},[i.saving?((0,s.uX)(),(0,s.CE)("i",Xi)):((0,s.uX)(),(0,s.CE)("i",Ti)),(0,s.eW)(" "+(0,l.v_)(i.saving?"Saving...":"Save Recipe"),1)],8,Ai),(0,s.Lk)("button",{class:"btn btn-success",onClick:a[4]||(a[4]=(...e)=>r.addToMealPlan&&r.addToMealPlan(...e))},a[22]||(a[22]=[(0,s.Lk)("i",{class:"fas fa-plus"},null,-1),(0,s.eW)(" Add to Meal Plan ")]))])])])])}var xi={name:"RecipeDetailModal",props:{recipe:{type:Object,required:!0}},data(){return{saving:!1}},computed:{normalizedInstructions(){const e=this.recipe.instructions||[];return e.length&&"object"===typeof e[0]?e:e.map((e,a)=>({description:e,step:`Step ${a+1}`}))}},methods:{formatIngredient(e){if("string"===typeof e)return e;if(e.original)return e.original;const a=e.amount||e.quantity||"",t=e.unit||"",s=e.name||e.ingredient||"";return a&&t?`${a} ${t} ${s}`.trim():a?`${a} ${s}`.trim():s||"Ingredient"},formatTime(e){if(!e)return"N/A";if(e<60)return`${e}min`;const a=Math.floor(e/60),t=e%60;return t>0?`${a}h ${t}min`:`${a}h`},formatCuisine(e){return e?e.charAt(0).toUpperCase()+e.slice(1):""},formatMealType(e){const a={breakfast:"Breakfast",lunch:"Lunch",dinner:"Dinner",snack:"Snack",dessert:"Dessert"};return a[e]||e},formatDifficulty(e){const a={easy:"Easy",medium:"Medium",hard:"Hard"};return a[e]||"Medium"},getDifficultyClass(e){return`difficulty-${e||"medium"}`},formatTag(e){return e.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase())},cleanSummary(e){return e?e.replace(/<[^>]*>/g,"").replace(/\n/g,"<br>"):""},imageError(e){e.target.style.display="none"},async saveRecipe(){this.saving=!0;try{console.log("Saving recipe:",this.recipe),await new Promise(e=>setTimeout(e,1e3)),this.$toast?.success?.("Recipe saved to your collection!")||alert("Recipe saved to your collection!")}catch(e){console.error("Error saving recipe:",e),this.$toast?.error?.("Failed to save recipe")||alert("Failed to save recipe")}finally{this.saving=!1}},addToMealPlan(){console.log("Adding recipe to meal plan:",this.recipe),this.$toast?.success?.("Recipe added to meal plan!")||alert("Recipe added to meal plan!"),this.$emit("add-to-meal-plan",this.recipe)}}};const Ri=(0,H.A)(xi,[["render",Fi],["__scopeId","data-v-d6429fd6"]]);var $i=Ri,Wi={name:"MealPlanningDashboard",components:{RecipeBrowser:J,NutritionProfileSetup:Ve,MealPlanManager:Fl,SpoonacularIntegration:Xn,ComingSoonCard:Gn,RecipeDetailModal:$i},data(){return{activeTab:"recipes",tabs:[{id:"recipes",name:"Recipes",icon:"fas fa-utensils"},{id:"profile",name:"Nutrition Profile",icon:"fas fa-user-cog"},{id:"meal-plans",name:"Meal Plans",icon:"fas fa-calendar-alt"},{id:"spoonacular",name:"Spoonacular",icon:"fas fa-link"},{id:"analytics",name:"Analytics",icon:"fas fa-chart-line"}],recipes:[],nutritionProfile:null,recipesLoading:!1,profileLoading:!1,mealPlansLoading:!1,showRecipeModal:!1,selectedRecipe:null}},computed:{currentUser(){return this.$store.getters["auth/currentUser"]}},async mounted(){this.currentUser?await this.loadInitialData():this.$router.push("/login")},methods:{async loadInitialData(){await Promise.all([this.loadRecipes(),this.loadNutritionProfile()])},async loadRecipes(){this.recipesLoading=!0;try{const e={_t:Date.now(),page_size:50},a=await ze.getRecipes(e);this.recipes=a.data.results||a.data||[],console.log(`Loaded ${this.recipes.length} recipes`)}catch(e){console.error("Failed to load recipes:",e),this.$toast?.error?.("Failed to load recipes")||alert("Failed to load recipes")}finally{this.recipesLoading=!1}},async loadNutritionProfile(){this.profileLoading=!0;try{const e=await ze.getNutritionProfile();this.nutritionProfile=e.data}catch(e){console.error("Failed to load nutrition profile:",e),this.nutritionProfile={calorie_target:2e3,protein_target:100,carb_target:250,fat_target:67,dietary_preferences:[],allergies_intolerances:[],cuisine_preferences:[],disliked_ingredients:[],meals_per_day:3,timezone:"Europe/Tallinn"}}finally{this.profileLoading=!1}},onProfileUpdated(e){this.nutritionProfile={...e},"meal-plans"===this.activeTab&&this.$nextTick(()=>{this.$forceUpdate()})},selectRecipe(e){this.selectedRecipe=e,this.showRecipeModal=!0},closeRecipeModal(){this.showRecipeModal=!1,this.selectedRecipe=null},async onMealPlanGenerated(e){console.log("New meal plan generated:",e),this.$toast?.success?.("Meal plan generated successfully! New recipes have been added to your library.")||alert("Meal plan generated successfully! New recipes have been added to your library."),await this.loadRecipes(),"recipes"===this.activeTab&&this.$nextTick(()=>{console.log("Recipes refreshed after meal plan generation")})}}};const Ni=(0,H.A)(Wi,[["render",h],["__scopeId","data-v-441df92a"]]);var zi=Ni}}]);
//# sourceMappingURL=824.f171488d.js.map